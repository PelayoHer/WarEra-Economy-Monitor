import{a as xs,b as Cs,c as oa,e as An,g as aa,h as Ud,j as la}from"./chunk-MADCQ5KZ.js";import{$ as Ed,$a as qe,A as pd,Aa as Ce,B as mn,Ba as $,C as _c,Ca as ue,D as Y,Da as g,E as ta,Ea as Td,F as dd,Fa as Ad,G as xc,Ga as Wn,H as hd,Ha as Ge,I as na,Ia as kc,J as Cc,Ja as z,K as Sc,Ka as v,L as gs,La as te,M as vs,Ma as K,N as md,Na as Tn,O as fd,Oa as Dd,P as gd,Pa as Rt,Q as vd,Qa as xt,R as _d,Ra as it,S as xd,Sa as Tc,T as Cd,Ta as fn,U as Pi,Ua as Ac,V as Ve,Va as Id,W as kn,Wa as Pd,X as ri,Xa as ve,Y as h,Ya as Ne,Z as Tr,Za as Ot,_ as Sd,_a as Nd,a as k,aa as Ar,ab as ia,b as De,ba as bd,bb as sa,ca as wd,d as td,da as Ec,db as Ld,ea as Fe,eb as Md,f as ea,fa as yd,fb as Dr,ga as kd,gb as Bd,h as nd,hb as Fd,ia as bc,j as vc,ja as wc,k as id,ka as yc,kb as ra,l as sd,lb as _s,ma as P,mb as He,n as rd,na as N,nb as Rd,o as od,oa as Ni,ob as Od,p as ad,pa as Ke,pb as $d,q as ld,qa as me,r as zn,ra as fe,rb as Vd,s as $e,sa as ee,sb as Hd,t as kr,ta as C,tb as Tt,u as ye,ua as S,v as X,va as M,w as cd,wa as w,wb as qd,x as R,xa as y,y as O,ya as ae,yb as Re,z as ud,za as ce,zb as oi}from"./chunk-PEQEZPS6.js";var jd=new RegExp(`(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=(["']?)([^\\]"']*)\\5)?\\])|(\\))|(\\s*,\\s*)`,"g"),$s=class n{element=null;classNames=[];attrs=[];notSelectors=[];static parse(e){let t=[],i=(l,c)=>{c.notSelectors.length>0&&!c.element&&c.classNames.length==0&&c.attrs.length==0&&(c.element="*"),l.push(c)},s=new n,r,o=s,a=!1;for(jd.lastIndex=0;r=jd.exec(e);){if(r[1]){if(a)throw new Error("Nesting :not in a selector is not allowed");a=!0,o=new n,s.notSelectors.push(o)}let l=r[2];if(l){let p=r[3];p==="#"?o.addAttribute("id",l.slice(1)):p==="."?o.addClassName(l.slice(1)):o.setElement(l)}let c=r[4];if(c&&o.addAttribute(o.unescapeAttribute(c),r[6]),r[7]&&(a=!1,o=s),r[8]){if(a)throw new Error("Multiple selectors in :not are not supported");i(t,s),s=o=new n}}return i(t,s),t}unescapeAttribute(e){let t="",i=!1;for(let s=0;s<e.length;s++){let r=e.charAt(s);if(r==="\\"){i=!0;continue}if(r==="$"&&!i)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);i=!1,t+=r}return t}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&this.classNames.length==0&&this.attrs.length==0&&this.notSelectors.length===0}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){let e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,t=""){this.attrs.push(e,t&&t.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(t=>e+=`.${t}`),this.attrs)for(let t=0;t<this.attrs.length;t+=2){let i=this.escapeAttribute(this.attrs[t]),s=this.attrs[t+1];e+=`[${i}${s?"="+s:""}]`}return this.notSelectors.forEach(t=>e+=`:not(${t})`),e}},Ia=class n{static createNotMatcher(e){let t=new n;return t.addSelectables(e,null),t}_elementMap=new Map;_elementPartialMap=new Map;_classMap=new Map;_classPartialMap=new Map;_attrValueMap=new Map;_attrValuePartialMap=new Map;_listContexts=[];addSelectables(e,t){let i=null;e.length>1&&(i=new Qc(e),this._listContexts.push(i));for(let s=0;s<e.length;s++)this._addSelectable(e[s],t,i)}_addSelectable(e,t,i){let s=this,r=e.element,o=e.classNames,a=e.attrs,l=new Zc(e,t,i);if(r&&(a.length===0&&o.length===0?this._addTerminal(s._elementMap,r,l):s=this._addPartial(s._elementPartialMap,r)),o)for(let c=0;c<o.length;c++){let p=a.length===0&&c===o.length-1,d=o[c];p?this._addTerminal(s._classMap,d,l):s=this._addPartial(s._classPartialMap,d)}if(a)for(let c=0;c<a.length;c+=2){let p=c===a.length-2,d=a[c],m=a[c+1];if(p){let _=s._attrValueMap,b=_.get(d);b||(b=new Map,_.set(d,b)),this._addTerminal(b,m,l)}else{let _=s._attrValuePartialMap,b=_.get(d);b||(b=new Map,_.set(d,b)),s=this._addPartial(b,m)}}}_addTerminal(e,t,i){let s=e.get(t);s||(s=[],e.set(t,s)),s.push(i)}_addPartial(e,t){let i=e.get(t);return i||(i=new n,e.set(t,i)),i}match(e,t){let i=!1,s=e.element,r=e.classNames,o=e.attrs;for(let a=0;a<this._listContexts.length;a++)this._listContexts[a].alreadyMatched=!1;if(i=this._matchTerminal(this._elementMap,s,e,t)||i,i=this._matchPartial(this._elementPartialMap,s,e,t)||i,r)for(let a=0;a<r.length;a++){let l=r[a];i=this._matchTerminal(this._classMap,l,e,t)||i,i=this._matchPartial(this._classPartialMap,l,e,t)||i}if(o)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1],p=this._attrValueMap.get(l);c&&(i=this._matchTerminal(p,"",e,t)||i),i=this._matchTerminal(p,c,e,t)||i;let d=this._attrValuePartialMap.get(l);c&&(i=this._matchPartial(d,"",e,t)||i),i=this._matchPartial(d,c,e,t)||i}return i}_matchTerminal(e,t,i,s){if(!e||typeof t!="string")return!1;let r=e.get(t)||[],o=e.get("*");if(o&&(r=r.concat(o)),r.length===0)return!1;let a,l=!1;for(let c=0;c<r.length;c++)a=r[c],l=a.finalize(i,s)||l;return l}_matchPartial(e,t,i,s){if(!e||typeof t!="string")return!1;let r=e.get(t);return r?r.match(i,s):!1}},Qc=class{selectors;alreadyMatched=!1;constructor(e){this.selectors=e}},Zc=class{selector;cbContext;listContext;notSelectors;constructor(e,t,i){this.selector=e,this.cbContext=t,this.listContext=i,this.notSelectors=e.notSelectors}finalize(e,t){let i=!0;return this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)&&(i=!Ia.createNotMatcher(this.notSelectors).match(e,null)),i&&t&&(!this.listContext||!this.listContext.alreadyMatched)&&(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),i}},Pa=class{registry;constructor(e){this.registry=e}match(e){return this.registry.has(e)?this.registry.get(e):[]}};var Mi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Mi||{}),xp=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(xp||{}),Fr=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Fr||{}),zd={name:"custom-elements"},Wd={name:"no-errors-schema"};var ke=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(ke||{});function j0(n){let e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return[n.element&&n.element!=="*"?n.element:"",...n.attrs,...e]}function z0(n){let e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return n.element?[5,n.element,...n.attrs,...e]:n.attrs.length?[3,...n.attrs,...e]:n.classNames&&n.classNames.length?[9,...n.classNames]:[]}function W0(n){let e=j0(n),t=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(i=>z0(i)):[];return e.concat(...t)}function Cp(n){return n?$s.parse(n).map(W0):[]}var Gn=(function(n){return n[n.Directive=0]="Directive",n[n.Component=1]="Component",n[n.Injectable=2]="Injectable",n[n.Pipe=3]="Pipe",n[n.NgModule=4]="NgModule",n})(Gn||{});var Na;function G0(n){return Z0(Q0(n.nodes).join("")+`[${n.meaning}]`)}function X0(n){return n.id||Bm(n)}function Bm(n){let e=new Jc,t=n.nodes.map(i=>i.visit(e,null));return Fm(t.join(""),n.meaning)}var La=class{visitText(e,t){return e.value}visitContainer(e,t){return`[${e.children.map(i=>i.visit(this)).join(", ")}]`}visitIcu(e,t){let i=Object.keys(e.cases).map(s=>`${s} {${e.cases[s].visit(this)}}`);return`{${e.expression}, ${e.type}, ${i.join(", ")}}`}visitTagPlaceholder(e,t){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(i=>i.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,t){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,t){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}visitBlockPlaceholder(e,t){return`<ph block name="${e.startName}">${e.children.map(i=>i.visit(this)).join(", ")}</ph name="${e.closeName}">`}},Y0=new La;function Q0(n){return n.map(e=>e.visit(Y0,null))}var Jc=class extends La{visitIcu(e){let t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.type}, ${t.join(", ")}}`}};function Z0(n){Na??=new TextEncoder;let e=[...Na.encode(n)],t=eg(e,Sp.Big),i=e.length*8,s=new Uint32Array(80),r=1732584193,o=4023233417,a=2562383102,l=271733878,c=3285377520;t[i>>5]|=128<<24-i%32,t[(i+64>>9<<4)+15]=i;for(let p=0;p<t.length;p+=16){let d=r,m=o,_=a,b=l,A=c;for(let L=0;L<80;L++){L<16?s[L]=t[p+L]:s[L]=Dc(s[L-3]^s[L-8]^s[L-14]^s[L-16],1);let D=J0(L,o,a,l),F=D[0],W=D[1],q=[Dc(r,5),F,c,W,s[L]].reduce(Ss);c=l,l=a,a=Dc(o,30),o=r,r=q}r=Ss(r,d),o=Ss(o,m),a=Ss(a,_),l=Ss(l,b),c=Ss(c,A)}return Ir(r)+Ir(o)+Ir(a)+Ir(l)+Ir(c)}function Ir(n){return(n>>>0).toString(16).padStart(8,"0")}function J0(n,e,t,i){return n<20?[e&t|~e&i,1518500249]:n<40?[e^t^i,1859775393]:n<60?[e&t|e&i|t&i,2400959708]:[e^t^i,3395469782]}function Gd(n){Na??=new TextEncoder;let e=Na.encode(n),t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=Xd(t,e.length,0),s=Xd(t,e.length,102072);return i==0&&(s==0||s==1)&&(i=i^319790063,s=s^-1801410264),BigInt.asUintN(32,BigInt(i))<<BigInt(32)|BigInt.asUintN(32,BigInt(s))}function Fm(n,e=""){let t=Gd(n);return e&&(t=BigInt.asUintN(64,t<<BigInt(1))|t>>BigInt(63)&BigInt(1),t+=Gd(e)),BigInt.asUintN(63,t).toString()}function Xd(n,e,t){let i=2654435769,s=2654435769,r=0,o=e-12;for(;r<=o;r+=12){i+=n.getUint32(r,!0),s+=n.getUint32(r+4,!0),t+=n.getUint32(r+8,!0);let l=Yd(i,s,t);i=l[0],s=l[1],t=l[2]}let a=e-r;return t+=e,a>=4?(i+=n.getUint32(r,!0),r+=4,a>=8?(s+=n.getUint32(r,!0),r+=4,a>=9&&(t+=n.getUint8(r++)<<8),a>=10&&(t+=n.getUint8(r++)<<16),a===11&&(t+=n.getUint8(r++)<<24)):(a>=5&&(s+=n.getUint8(r++)),a>=6&&(s+=n.getUint8(r++)<<8),a===7&&(s+=n.getUint8(r++)<<16))):(a>=1&&(i+=n.getUint8(r++)),a>=2&&(i+=n.getUint8(r++)<<8),a===3&&(i+=n.getUint8(r++)<<16)),Yd(i,s,t)[2]}function Yd(n,e,t){return n-=e,n-=t,n^=t>>>13,e-=t,e-=n,e^=n<<8,t-=n,t-=e,t^=e>>>13,n-=e,n-=t,n^=t>>>12,e-=t,e-=n,e^=n<<16,t-=n,t-=e,t^=e>>>5,n-=e,n-=t,n^=t>>>3,e-=t,e-=n,e^=n<<10,t-=n,t-=e,t^=e>>>15,[n,e,t]}var Sp=(function(n){return n[n.Little=0]="Little",n[n.Big=1]="Big",n})(Sp||{});function Ss(n,e){return K0(n,e)[1]}function K0(n,e){let t=(n&65535)+(e&65535),i=(n>>>16)+(e>>>16)+(t>>>16);return[i>>>16,i<<16|t&65535]}function Dc(n,e){return n<<e|n>>>32-e}function eg(n,e){let t=n.length+3>>>2,i=[];for(let s=0;s<t;s++)i[s]=tg(n,s*4,e);return i}function Qd(n,e){return e>=n.length?0:n[e]}function tg(n,e,t){let i=0;if(t===Sp.Big)for(let s=0;s<4;s++)i+=Qd(n,e+s)<<24-8*s;else for(let s=0;s<4;s++)i+=Qd(n,e+s)<<8*s;return i}var Rm=(function(n){return n[n.None=0]="None",n[n.Const=1]="Const",n})(Rm||{}),Ma=class{modifiers;constructor(e=Rm.None){this.modifiers=e}hasModifier(e){return(this.modifiers&e)!==0}},si=(function(n){return n[n.Dynamic=0]="Dynamic",n[n.Bool=1]="Bool",n[n.String=2]="String",n[n.Int=3]="Int",n[n.Number=4]="Number",n[n.Function=5]="Function",n[n.Inferred=6]="Inferred",n[n.None=7]="None",n})(si||{}),Mn=class extends Ma{name;constructor(e,t){super(t),this.name=e}visitType(e,t){return e.visitBuiltinType(this,t)}},an=class extends Ma{value;typeParams;constructor(e,t,i=null){super(t),this.value=e,this.typeParams=i}visitType(e,t){return e.visitExpressionType(this,t)}};var Uo=new Mn(si.Dynamic),jt=new Mn(si.Inferred),ng=new Mn(si.Bool),uA=new Mn(si.Int),Ep=new Mn(si.Number),bp=new Mn(si.String),pA=new Mn(si.Function),Bn=new Mn(si.None),Xr=(function(n){return n[n.Minus=0]="Minus",n[n.Plus=1]="Plus",n})(Xr||{}),I=(function(n){return n[n.Equals=0]="Equals",n[n.NotEquals=1]="NotEquals",n[n.Assign=2]="Assign",n[n.Identical=3]="Identical",n[n.NotIdentical=4]="NotIdentical",n[n.Minus=5]="Minus",n[n.Plus=6]="Plus",n[n.Divide=7]="Divide",n[n.Multiply=8]="Multiply",n[n.Modulo=9]="Modulo",n[n.And=10]="And",n[n.Or=11]="Or",n[n.BitwiseOr=12]="BitwiseOr",n[n.BitwiseAnd=13]="BitwiseAnd",n[n.Lower=14]="Lower",n[n.LowerEquals=15]="LowerEquals",n[n.Bigger=16]="Bigger",n[n.BiggerEquals=17]="BiggerEquals",n[n.NullishCoalesce=18]="NullishCoalesce",n[n.Exponentiation=19]="Exponentiation",n[n.In=20]="In",n[n.AdditionAssignment=21]="AdditionAssignment",n[n.SubtractionAssignment=22]="SubtractionAssignment",n[n.MultiplicationAssignment=23]="MultiplicationAssignment",n[n.DivisionAssignment=24]="DivisionAssignment",n[n.RemainderAssignment=25]="RemainderAssignment",n[n.ExponentiationAssignment=26]="ExponentiationAssignment",n[n.AndAssignment=27]="AndAssignment",n[n.OrAssignment=28]="OrAssignment",n[n.NullishCoalesceAssignment=29]="NullishCoalesceAssignment",n})(I||{});function ig(n,e){return n==null||e==null?n==e:n.isEquivalent(e)}function Om(n,e,t){let i=n.length;if(i!==e.length)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function Gt(n,e){return Om(n,e,(t,i)=>t.isEquivalent(i))}var xe=class{type;sourceSpan;constructor(e,t){this.type=e||null,this.sourceSpan=t||null}prop(e,t){return new Xt(this,e,null,t)}key(e,t,i){return new ei(this,e,t,i)}callFn(e,t,i){return new Lt(this,e,null,t,i)}instantiate(e,t,i){return new Qr(this,e,t,i)}conditional(e,t=null,i){return new Fn(this,e,t,null,i)}equals(e,t){return new pe(I.Equals,this,e,null,t)}notEquals(e,t){return new pe(I.NotEquals,this,e,null,t)}identical(e,t){return new pe(I.Identical,this,e,null,t)}notIdentical(e,t){return new pe(I.NotIdentical,this,e,null,t)}minus(e,t){return new pe(I.Minus,this,e,null,t)}plus(e,t){return new pe(I.Plus,this,e,null,t)}divide(e,t){return new pe(I.Divide,this,e,null,t)}multiply(e,t){return new pe(I.Multiply,this,e,null,t)}modulo(e,t){return new pe(I.Modulo,this,e,null,t)}power(e,t){return new pe(I.Exponentiation,this,e,null,t)}and(e,t){return new pe(I.And,this,e,null,t)}bitwiseOr(e,t){return new pe(I.BitwiseOr,this,e,null,t)}bitwiseAnd(e,t){return new pe(I.BitwiseAnd,this,e,null,t)}or(e,t){return new pe(I.Or,this,e,null,t)}lower(e,t){return new pe(I.Lower,this,e,null,t)}lowerEquals(e,t){return new pe(I.LowerEquals,this,e,null,t)}bigger(e,t){return new pe(I.Bigger,this,e,null,t)}biggerEquals(e,t){return new pe(I.BiggerEquals,this,e,null,t)}isBlank(e){return this.equals(lg,e)}nullishCoalesce(e,t){return new pe(I.NullishCoalesce,this,e,null,t)}toStmt(){return new cn(this,null)}},ln=class n extends xe{name;constructor(e,t,i){super(t,i),this.name=e}isEquivalent(e){return e instanceof n&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadVarExpr(this,t)}clone(){return new n(this.name,this.type,this.sourceSpan)}set(e){return new pe(I.Assign,this,e,null,this.sourceSpan)}},Vs=class n extends xe{expr;constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitTypeofExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},Ba=class n extends xe{expr;constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitVoidExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},le=class n extends xe{node;constructor(e,t,i){super(t,i),this.node=e}isEquivalent(e){return e instanceof n&&this.node===e.node}isConstant(){return!1}visitExpression(e,t){return e.visitWrappedNodeExpr(this,t)}clone(){return new n(this.node,this.type,this.sourceSpan)}},Lt=class n extends xe{fn;args;pure;constructor(e,t,i,s,r=!1){super(i,s),this.fn=e,this.args=t,this.pure=r}get receiver(){return this.fn}isEquivalent(e){return e instanceof n&&this.fn.isEquivalent(e.fn)&&Gt(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeFunctionExpr(this,t)}clone(){return new n(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}},Yr=class n extends xe{tag;template;constructor(e,t,i,s){super(i,s),this.tag=e,this.template=t}isEquivalent(e){return e instanceof n&&this.tag.isEquivalent(e.tag)&&this.template.isEquivalent(e.template)}isConstant(){return!1}visitExpression(e,t){return e.visitTaggedTemplateLiteralExpr(this,t)}clone(){return new n(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}},Qr=class n extends xe{classExpr;args;constructor(e,t,i,s){super(i,s),this.classExpr=e,this.args=t}isEquivalent(e){return e instanceof n&&this.classExpr.isEquivalent(e.classExpr)&&Gt(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInstantiateExpr(this,t)}clone(){return new n(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}},ct=class n extends xe{value;constructor(e,t,i){super(t,i),this.value=e}isEquivalent(e){return e instanceof n&&this.value===e.value}isConstant(){return!0}visitExpression(e,t){return e.visitLiteralExpr(this,t)}clone(){return new n(this.value,this.type,this.sourceSpan)}},Zr=class n extends xe{elements;expressions;constructor(e,t,i){super(null,i),this.elements=e,this.expressions=t}isEquivalent(e){return e instanceof n&&Om(this.elements,e.elements,(t,i)=>t.text===i.text)&&Gt(this.expressions,e.expressions)}isConstant(){return!1}visitExpression(e,t){return e.visitTemplateLiteralExpr(this,t)}clone(){return new n(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}},Fa=class n extends xe{text;rawText;constructor(e,t,i){super(bp,t),this.text=e,this.rawText=i??Kc(wa(e))}visitExpression(e,t){return e.visitTemplateLiteralElementExpr(this,t)}isEquivalent(e){return e instanceof n&&e.text===this.text&&e.rawText===this.rawText}isConstant(){return!0}clone(){return new n(this.text,this.sourceSpan,this.rawText)}},Ui=class{text;sourceSpan;constructor(e,t){this.text=e,this.sourceSpan=t}},Ms=class{text;sourceSpan;associatedMessage;constructor(e,t,i){this.text=e,this.sourceSpan=t,this.associatedMessage=i}},sg="|",Zd="@@",rg="\u241F",Ra=class n extends xe{metaBlock;messageParts;placeHolderNames;expressions;constructor(e,t,i,s,r){super(bp,r),this.metaBlock=e,this.messageParts=t,this.placeHolderNames=i,this.expressions=s}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,t){return e.visitLocalizedString(this,t)}clone(){return new n(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}${sg}${e}`),this.metaBlock.customId&&(e=`${e}${Zd}${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(t=>{e=`${e}${rg}${t}`}),Jd(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){let t=this.placeHolderNames[e-1],i=this.messageParts[e],s=t.text;return t.associatedMessage?.legacyIds.length===0&&(s+=`${Zd}${Fm(t.associatedMessage.messageString,t.associatedMessage.meaning)}`),Jd(s,i.text,this.getMessagePartSourceSpan(e))}},wa=n=>n.replace(/\\/g,"\\\\"),og=n=>n.replace(/^:/,"\\:"),ag=n=>n.replace(/:/g,"\\:"),Kc=n=>n.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function Jd(n,e,t){return n===""?{cooked:e,raw:Kc(og(wa(e))),range:t}:{cooked:`:${n}:${e}`,raw:Kc(`:${ag(wa(n))}:${wa(e)}`),range:t}}var Qi=class n extends xe{value;typeParams;constructor(e,t,i=null,s){super(t,s),this.value=e,this.typeParams=i}isEquivalent(e){return e instanceof n&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName}isConstant(){return!1}visitExpression(e,t){return e.visitExternalExpr(this,t)}clone(){return new n(this.value,this.type,this.typeParams,this.sourceSpan)}};var Fn=class n extends xe{condition;falseCase;trueCase;constructor(e,t,i=null,s,r){super(s||t.type,r),this.condition=e,this.falseCase=i,this.trueCase=t}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&ig(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,t){return e.visitConditionalExpr(this,t)}clone(){return new n(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}};var Jr=class n extends xe{condition;constructor(e,t){super(ng,t),this.condition=e}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitNotExpr(this,t)}clone(){return new n(this.condition.clone(),this.sourceSpan)}},tt=class n{name;type;constructor(e,t=null){this.name=e,this.type=t}isEquivalent(e){return this.name===e.name}clone(){return new n(this.name,this.type)}},fi=class n extends xe{params;statements;name;constructor(e,t,i,s,r){super(i,s),this.params=e,this.statements=t,this.name=r}isEquivalent(e){return(e instanceof n||e instanceof Kr)&&Gt(this.params,e.params)&&Gt(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,t){return e.visitFunctionExpr(this,t)}toDeclStmt(e,t){return new Kr(e,this.params,this.statements,this.type,t,this.sourceSpan)}clone(){return new n(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}},Zi=class n extends xe{params;body;constructor(e,t,i,s){super(i,s),this.params=e,this.body=t}isEquivalent(e){return!(e instanceof n)||!Gt(this.params,e.params)?!1:this.body instanceof xe&&e.body instanceof xe?this.body.isEquivalent(e.body):Array.isArray(this.body)&&Array.isArray(e.body)?Gt(this.body,e.body):!1}isConstant(){return!1}visitExpression(e,t){return e.visitArrowFunctionExpr(this,t)}clone(){return new n(this.params.map(e=>e.clone()),Array.isArray(this.body)?this.body:this.body.clone(),this.type,this.sourceSpan)}toDeclStmt(e,t){return new Ze(e,this,jt,t,this.sourceSpan)}},Ji=class n extends xe{operator;expr;parens;constructor(e,t,i,s,r=!0){super(i||Ep,s),this.operator=e,this.expr=t,this.parens=r}isEquivalent(e){return e instanceof n&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,t){return e.visitUnaryOperatorExpr(this,t)}clone(){return new n(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}},Cn=class n extends xe{expr;constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitParenthesizedExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},pe=class n extends xe{operator;rhs;lhs;constructor(e,t,i,s,r){super(s||t.type,r),this.operator=e,this.rhs=i,this.lhs=t}isEquivalent(e){return e instanceof n&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,t){return e.visitBinaryOperatorExpr(this,t)}clone(){return new n(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan)}isAssignment(){let e=this.operator;return e===I.Assign||e===I.AdditionAssignment||e===I.SubtractionAssignment||e===I.MultiplicationAssignment||e===I.DivisionAssignment||e===I.RemainderAssignment||e===I.ExponentiationAssignment||e===I.AndAssignment||e===I.OrAssignment||e===I.NullishCoalesceAssignment}},Xt=class n extends xe{receiver;name;constructor(e,t,i,s){super(i,s),this.receiver=e,this.name=t}get index(){return this.name}isEquivalent(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadPropExpr(this,t)}set(e){return new pe(I.Assign,this.receiver.prop(this.name),e,null,this.sourceSpan)}clone(){return new n(this.receiver.clone(),this.name,this.type,this.sourceSpan)}},ei=class n extends xe{receiver;index;constructor(e,t,i,s){super(i,s),this.receiver=e,this.index=t}isEquivalent(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,t){return e.visitReadKeyExpr(this,t)}set(e){return new pe(I.Assign,this.receiver.key(this.index),e,null,this.sourceSpan)}clone(){return new n(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}},Sn=class n extends xe{entries;constructor(e,t,i){super(t,i),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof n&&Gt(this.entries,e.entries)}visitExpression(e,t){return e.visitLiteralArrayExpr(this,t)}clone(){return new n(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}},Hs=class n{key;value;quoted;constructor(e,t,i){this.key=e,this.value=t,this.quoted=i}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new n(this.key,this.value.clone(),this.quoted)}},Rn=class n extends xe{entries;valueType=null;constructor(e,t,i){super(t,i),this.entries=e,t&&(this.valueType=t.valueType)}isEquivalent(e){return e instanceof n&&Gt(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.value.isConstant())}visitExpression(e,t){return e.visitLiteralMapExpr(this,t)}clone(){let e=this.entries.map(t=>t.clone());return new n(e,this.type,this.sourceSpan)}};var qs=new ct(null,null,null),lg=new ct(null,jt,null),ot=(function(n){return n[n.None=0]="None",n[n.Final=1]="Final",n[n.Private=2]="Private",n[n.Exported=4]="Exported",n[n.Static=8]="Static",n})(ot||{}),eu=class{text;multiline;trailingNewline;constructor(e,t,i){this.text=e,this.multiline=t,this.trailingNewline=i}toString(){return this.multiline?` ${this.text} `:this.text}},Oa=class extends eu{tags;constructor(e){super("",!0,!0),this.tags=e}toString(){return hg(this.tags)}},Ki=class{modifiers;sourceSpan;leadingComments;constructor(e=ot.None,t=null,i){this.modifiers=e,this.sourceSpan=t,this.leadingComments=i}hasModifier(e){return(this.modifiers&e)!==0}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}},Ze=class n extends Ki{name;value;type;constructor(e,t,i,s,r,o){super(s,r,o),this.name=e,this.value=t,this.type=i||t&&t.type||null}isEquivalent(e){return e instanceof n&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,t){return e.visitDeclareVarStmt(this,t)}},Kr=class n extends Ki{name;params;statements;type;constructor(e,t,i,s,r,o,a){super(r,o,a),this.name=e,this.params=t,this.statements=i,this.type=s||null}isEquivalent(e){return e instanceof n&&Gt(this.params,e.params)&&Gt(this.statements,e.statements)}visitStatement(e,t){return e.visitDeclareFunctionStmt(this,t)}},cn=class n extends Ki{expr;constructor(e,t,i){super(ot.None,t,i),this.expr=e}isEquivalent(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}visitStatement(e,t){return e.visitExpressionStmt(this,t)}},at=class n extends Ki{value;constructor(e,t=null,i){super(ot.None,t,i),this.value=e}isEquivalent(e){return e instanceof n&&this.value.isEquivalent(e.value)}visitStatement(e,t){return e.visitReturnStmt(this,t)}},$a=class n extends Ki{condition;trueCase;falseCase;constructor(e,t,i=[],s,r){super(ot.None,s,r),this.condition=e,this.trueCase=t,this.falseCase=i}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&Gt(this.trueCase,e.trueCase)&&Gt(this.falseCase,e.falseCase)}visitStatement(e,t){return e.visitIfStmt(this,t)}};function cg(n=[]){return new Oa(n)}function oe(n,e,t){return new ln(n,e,t)}function U(n,e=null,t){return new Qi(n,null,e,t)}function lt(n,e,t){return new an(n,e,t)}function jo(n){return new Vs(n)}function _e(n,e,t){return new Sn(n,e,t)}function yt(n,e=null){return new Rn(n.map(t=>new Hs(t.key,t.value,t.quoted)),e,null)}function ug(n,e){return new Jr(n,e)}function vi(n,e,t,i,s){return new fi(n,e,t,i,s)}function En(n,e,t,i){return new Zi(n,e,t,i)}function ql(n,e,t,i,s){return new $a(n,e,t,i,s)}function pg(n,e,t,i){return new Yr(n,e,t,i)}function E(n,e,t){return new ct(n,e,t)}function dg(n,e,t,i,s){return new Ra(n,e,t,i,s)}function Kd(n){let e="";if(n.tagName&&(e+=` @${n.tagName}`),n.text){if(n.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+n.text.replace(/@/g,"\\@")}return e}function hg(n){if(n.length===0)return"";if(n.length===1&&n[0].tagName&&!n[0].text)return`*${Kd(n[0])} `;let e=`*
`;for(let t of n)e+=" *",e+=Kd(t).replace(/\n/g,`
 * `),e+=`
`;return e+=" ",e}var mg="_c",eh=oe("<unknown>"),fg={},gg=50,Va=class n extends xe{resolved;original;shared=!1;constructor(e){super(e.type),this.resolved=e,this.original=e}visitExpression(e,t){return t===fg?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}},Ha=class{isClosureCompilerEnabled;statements=[];literals=new Map;literalFactories=new Map;sharedConstants=new Map;_claimedNames=new Map;nextNameIndex=0;constructor(e=!1){this.isClosureCompilerEnabled=e}getConstLiteral(e,t){if(e instanceof ct&&!th(e)||e instanceof Va)return e;let i=Bs.INSTANCE.keyOf(e),s=this.literals.get(i),r=!1;if(s||(s=new Va(e),this.literals.set(i,s),r=!0),!r&&!s.shared||r&&t){let o=this.freshName(),a,l;this.isClosureCompilerEnabled&&th(e)?(a=new fi([],[new at(e)]),l=oe(o).callFn([])):(a=e,l=oe(o)),this.statements.push(new Ze(o,a,jt,ot.Final)),s.fixup(l)}return s}getSharedConstant(e,t){let i=e.keyOf(t);if(!this.sharedConstants.has(i)){let s=this.freshName();this.sharedConstants.set(i,oe(s)),this.statements.push(e.toSharedConstantDeclaration(s,t))}return this.sharedConstants.get(i)}getLiteralFactory(e){if(e instanceof Sn){let t=e.entries.map(s=>s.isConstant()?s:eh),i=Bs.INSTANCE.keyOf(_e(t));return this._getLiteralFactory(i,e.entries,s=>_e(s))}else{let t=yt(e.entries.map(s=>({key:s.key,value:s.value.isConstant()?s.value:eh,quoted:s.quoted}))),i=Bs.INSTANCE.keyOf(t);return this._getLiteralFactory(i,e.entries.map(s=>s.value),s=>yt(s.map((r,o)=>({key:e.entries[o].key,value:r,quoted:e.entries[o].quoted}))))}}getSharedFunctionReference(e,t,i=!0){let s=e instanceof Zi;for(let o of this.statements)if(s&&o instanceof Ze&&o.value?.isEquivalent(e)||!s&&o instanceof Kr&&e instanceof fi&&e.isEquivalent(o))return oe(o.name);let r=i?this.uniqueName(t):t;return this.statements.push(e instanceof fi?e.toDeclStmt(r,ot.Final):new Ze(r,e,jt,ot.Final,e.sourceSpan)),oe(r)}_getLiteralFactory(e,t,i){let s=this.literalFactories.get(e),r=t.filter(o=>!o.isConstant());if(!s){let o=t.map((p,d)=>p.isConstant()?this.getConstLiteral(p,!0):oe(`a${d}`)),a=o.filter(vg).map(p=>new tt(p.name,Uo)),l=En(a,i(o),jt),c=this.freshName();this.statements.push(new Ze(c,l,jt,ot.Final)),s=oe(c),this.literalFactories.set(e,s)}return{literalFactory:s,literalFactoryArguments:r}}uniqueName(e,t=!0){let i=this._claimedNames.get(e)??0,s=i===0&&!t?`${e}`:`${e}${i}`;return this._claimedNames.set(e,i+1),s}freshName(){return this.uniqueName(mg)}},Bs=class n{static INSTANCE=new n;keyOf(e){if(e instanceof ct&&typeof e.value=="string")return`"${e.value}"`;if(e instanceof ct)return String(e.value);if(e instanceof Sn){let t=[];for(let i of e.entries)t.push(this.keyOf(i));return`[${t.join(",")}]`}else if(e instanceof Rn){let t=[];for(let i of e.entries){let s=i.key;i.quoted&&(s=`"${s}"`),t.push(s+":"+this.keyOf(i.value))}return`{${t.join(",")}}`}else{if(e instanceof Qi)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof ln)return`read(${e.name})`;if(e instanceof Vs)return`typeof(${this.keyOf(e.expr)})`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}};function vg(n){return n instanceof ln}function th(n){return n instanceof ct&&typeof n.value=="string"&&n.value.length>=gg}var x="@angular/core",f=(()=>{class n{static NEW_METHOD="factory";static TRANSFORM_METHOD="transform";static PATCH_DEPS="patchedDeps";static core={name:null,moduleName:x};static namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:x};static namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:x};static namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:x};static element={name:"\u0275\u0275element",moduleName:x};static elementStart={name:"\u0275\u0275elementStart",moduleName:x};static elementEnd={name:"\u0275\u0275elementEnd",moduleName:x};static domElement={name:"\u0275\u0275domElement",moduleName:x};static domElementStart={name:"\u0275\u0275domElementStart",moduleName:x};static domElementEnd={name:"\u0275\u0275domElementEnd",moduleName:x};static domElementContainer={name:"\u0275\u0275domElementContainer",moduleName:x};static domElementContainerStart={name:"\u0275\u0275domElementContainerStart",moduleName:x};static domElementContainerEnd={name:"\u0275\u0275domElementContainerEnd",moduleName:x};static domTemplate={name:"\u0275\u0275domTemplate",moduleName:x};static domListener={name:"\u0275\u0275domListener",moduleName:x};static advance={name:"\u0275\u0275advance",moduleName:x};static syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:x};static syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:x};static attribute={name:"\u0275\u0275attribute",moduleName:x};static classProp={name:"\u0275\u0275classProp",moduleName:x};static elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:x};static elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:x};static elementContainer={name:"\u0275\u0275elementContainer",moduleName:x};static styleMap={name:"\u0275\u0275styleMap",moduleName:x};static classMap={name:"\u0275\u0275classMap",moduleName:x};static styleProp={name:"\u0275\u0275styleProp",moduleName:x};static interpolate={name:"\u0275\u0275interpolate",moduleName:x};static interpolate1={name:"\u0275\u0275interpolate1",moduleName:x};static interpolate2={name:"\u0275\u0275interpolate2",moduleName:x};static interpolate3={name:"\u0275\u0275interpolate3",moduleName:x};static interpolate4={name:"\u0275\u0275interpolate4",moduleName:x};static interpolate5={name:"\u0275\u0275interpolate5",moduleName:x};static interpolate6={name:"\u0275\u0275interpolate6",moduleName:x};static interpolate7={name:"\u0275\u0275interpolate7",moduleName:x};static interpolate8={name:"\u0275\u0275interpolate8",moduleName:x};static interpolateV={name:"\u0275\u0275interpolateV",moduleName:x};static nextContext={name:"\u0275\u0275nextContext",moduleName:x};static resetView={name:"\u0275\u0275resetView",moduleName:x};static templateCreate={name:"\u0275\u0275template",moduleName:x};static defer={name:"\u0275\u0275defer",moduleName:x};static deferWhen={name:"\u0275\u0275deferWhen",moduleName:x};static deferOnIdle={name:"\u0275\u0275deferOnIdle",moduleName:x};static deferOnImmediate={name:"\u0275\u0275deferOnImmediate",moduleName:x};static deferOnTimer={name:"\u0275\u0275deferOnTimer",moduleName:x};static deferOnHover={name:"\u0275\u0275deferOnHover",moduleName:x};static deferOnInteraction={name:"\u0275\u0275deferOnInteraction",moduleName:x};static deferOnViewport={name:"\u0275\u0275deferOnViewport",moduleName:x};static deferPrefetchWhen={name:"\u0275\u0275deferPrefetchWhen",moduleName:x};static deferPrefetchOnIdle={name:"\u0275\u0275deferPrefetchOnIdle",moduleName:x};static deferPrefetchOnImmediate={name:"\u0275\u0275deferPrefetchOnImmediate",moduleName:x};static deferPrefetchOnTimer={name:"\u0275\u0275deferPrefetchOnTimer",moduleName:x};static deferPrefetchOnHover={name:"\u0275\u0275deferPrefetchOnHover",moduleName:x};static deferPrefetchOnInteraction={name:"\u0275\u0275deferPrefetchOnInteraction",moduleName:x};static deferPrefetchOnViewport={name:"\u0275\u0275deferPrefetchOnViewport",moduleName:x};static deferHydrateWhen={name:"\u0275\u0275deferHydrateWhen",moduleName:x};static deferHydrateNever={name:"\u0275\u0275deferHydrateNever",moduleName:x};static deferHydrateOnIdle={name:"\u0275\u0275deferHydrateOnIdle",moduleName:x};static deferHydrateOnImmediate={name:"\u0275\u0275deferHydrateOnImmediate",moduleName:x};static deferHydrateOnTimer={name:"\u0275\u0275deferHydrateOnTimer",moduleName:x};static deferHydrateOnHover={name:"\u0275\u0275deferHydrateOnHover",moduleName:x};static deferHydrateOnInteraction={name:"\u0275\u0275deferHydrateOnInteraction",moduleName:x};static deferHydrateOnViewport={name:"\u0275\u0275deferHydrateOnViewport",moduleName:x};static deferEnableTimerScheduling={name:"\u0275\u0275deferEnableTimerScheduling",moduleName:x};static conditionalCreate={name:"\u0275\u0275conditionalCreate",moduleName:x};static conditionalBranchCreate={name:"\u0275\u0275conditionalBranchCreate",moduleName:x};static conditional={name:"\u0275\u0275conditional",moduleName:x};static repeater={name:"\u0275\u0275repeater",moduleName:x};static repeaterCreate={name:"\u0275\u0275repeaterCreate",moduleName:x};static repeaterTrackByIndex={name:"\u0275\u0275repeaterTrackByIndex",moduleName:x};static repeaterTrackByIdentity={name:"\u0275\u0275repeaterTrackByIdentity",moduleName:x};static componentInstance={name:"\u0275\u0275componentInstance",moduleName:x};static text={name:"\u0275\u0275text",moduleName:x};static enableBindings={name:"\u0275\u0275enableBindings",moduleName:x};static disableBindings={name:"\u0275\u0275disableBindings",moduleName:x};static getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:x};static textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:x};static textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:x};static textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:x};static textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:x};static textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:x};static textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:x};static textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:x};static textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:x};static textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:x};static textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:x};static restoreView={name:"\u0275\u0275restoreView",moduleName:x};static pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:x};static pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:x};static pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:x};static pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:x};static pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:x};static pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:x};static pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:x};static pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:x};static pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:x};static pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:x};static pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:x};static pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:x};static pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:x};static pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:x};static pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:x};static domProperty={name:"\u0275\u0275domProperty",moduleName:x};static ariaProperty={name:"\u0275\u0275ariaProperty",moduleName:x};static property={name:"\u0275\u0275property",moduleName:x};static animationEnterListener={name:"\u0275\u0275animateEnterListener",moduleName:x};static animationLeaveListener={name:"\u0275\u0275animateLeaveListener",moduleName:x};static animationEnter={name:"\u0275\u0275animateEnter",moduleName:x};static animationLeave={name:"\u0275\u0275animateLeave",moduleName:x};static i18n={name:"\u0275\u0275i18n",moduleName:x};static i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:x};static i18nExp={name:"\u0275\u0275i18nExp",moduleName:x};static i18nStart={name:"\u0275\u0275i18nStart",moduleName:x};static i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:x};static i18nApply={name:"\u0275\u0275i18nApply",moduleName:x};static i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:x};static pipe={name:"\u0275\u0275pipe",moduleName:x};static projection={name:"\u0275\u0275projection",moduleName:x};static projectionDef={name:"\u0275\u0275projectionDef",moduleName:x};static reference={name:"\u0275\u0275reference",moduleName:x};static inject={name:"\u0275\u0275inject",moduleName:x};static injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:x};static directiveInject={name:"\u0275\u0275directiveInject",moduleName:x};static invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:x};static invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:x};static templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:x};static forwardRef={name:"forwardRef",moduleName:x};static resolveForwardRef={name:"resolveForwardRef",moduleName:x};static replaceMetadata={name:"\u0275\u0275replaceMetadata",moduleName:x};static getReplaceMetadataURL={name:"\u0275\u0275getReplaceMetadataURL",moduleName:x};static \u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:x};static declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:x};static InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:x};static resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:x};static resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:x};static resolveBody={name:"\u0275\u0275resolveBody",moduleName:x};static getComponentDepsFactory={name:"\u0275\u0275getComponentDepsFactory",moduleName:x};static defineComponent={name:"\u0275\u0275defineComponent",moduleName:x};static declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:x};static setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:x};static ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:x};static ViewEncapsulation={name:"ViewEncapsulation",moduleName:x};static ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:x};static FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:x};static declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:x};static FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:x};static defineDirective={name:"\u0275\u0275defineDirective",moduleName:x};static declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:x};static DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:x};static InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:x};static InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:x};static defineInjector={name:"\u0275\u0275defineInjector",moduleName:x};static declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:x};static NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:x};static ModuleWithProviders={name:"ModuleWithProviders",moduleName:x};static defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:x};static declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:x};static setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:x};static registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:x};static PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:x};static definePipe={name:"\u0275\u0275definePipe",moduleName:x};static declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:x};static declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:x};static declareClassMetadataAsync={name:"\u0275\u0275ngDeclareClassMetadataAsync",moduleName:x};static setClassMetadata={name:"\u0275setClassMetadata",moduleName:x};static setClassMetadataAsync={name:"\u0275setClassMetadataAsync",moduleName:x};static setClassDebugInfo={name:"\u0275setClassDebugInfo",moduleName:x};static queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:x};static viewQuery={name:"\u0275\u0275viewQuery",moduleName:x};static loadQuery={name:"\u0275\u0275loadQuery",moduleName:x};static contentQuery={name:"\u0275\u0275contentQuery",moduleName:x};static viewQuerySignal={name:"\u0275\u0275viewQuerySignal",moduleName:x};static contentQuerySignal={name:"\u0275\u0275contentQuerySignal",moduleName:x};static queryAdvance={name:"\u0275\u0275queryAdvance",moduleName:x};static twoWayProperty={name:"\u0275\u0275twoWayProperty",moduleName:x};static twoWayBindingSet={name:"\u0275\u0275twoWayBindingSet",moduleName:x};static twoWayListener={name:"\u0275\u0275twoWayListener",moduleName:x};static declareLet={name:"\u0275\u0275declareLet",moduleName:x};static storeLet={name:"\u0275\u0275storeLet",moduleName:x};static readContextLet={name:"\u0275\u0275readContextLet",moduleName:x};static attachSourceLocations={name:"\u0275\u0275attachSourceLocations",moduleName:x};static NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:x};static InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:x};static CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:x};static ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:x};static HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:x};static ExternalStylesFeature={name:"\u0275\u0275ExternalStylesFeature",moduleName:x};static listener={name:"\u0275\u0275listener",moduleName:x};static getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:x};static sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:x};static sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:x};static sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:x};static sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:x};static sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:x};static sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:x};static trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:x};static trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:x};static validateIframeAttribute={name:"\u0275\u0275validateIframeAttribute",moduleName:x};static inputDecorator={name:"Input",moduleName:x};static outputDecorator={name:"Output",moduleName:x};static viewChildDecorator={name:"ViewChild",moduleName:x};static viewChildrenDecorator={name:"ViewChildren",moduleName:x};static contentChildDecorator={name:"ContentChild",moduleName:x};static contentChildrenDecorator={name:"ContentChildren",moduleName:x};static InputSignalBrandWriteType={name:"\u0275INPUT_SIGNAL_BRAND_WRITE_TYPE",moduleName:x};static UnwrapDirectiveSignalInputs={name:"\u0275UnwrapDirectiveSignalInputs",moduleName:x};static unwrapWritableSignal={name:"\u0275unwrapWritableSignal",moduleName:x};static assertType={name:"\u0275assertType",moduleName:x}}return n})(),_g=/-+([a-z0-9])/g;function xg(n){return n.replace(_g,(...e)=>e[1].toUpperCase())}function Cg(n,e){return $m(n,":",e)}function Sg(n,e){return $m(n,".",e)}function $m(n,e,t){let i=n.indexOf(e);return i==-1?t:[n.slice(0,i).trim(),n.slice(i+1).trim()]}function Eg(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i>=55296&&i<=56319&&n.length>t+1){let s=n.charCodeAt(t+1);s>=56320&&s<=57343&&(t++,i=(i-55296<<10)+s-56320+65536)}i<=127?e.push(i):i<=2047?e.push(i>>6&31|192,i&63|128):i<=65535?e.push(i>>12|224,i>>6&63|128,i&63|128):i<=2097151&&e.push(i>>18&7|240,i>>12&63|128,i>>6&63|128,i&63|128)}return e}function Vm(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Vm).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;if(!n.toString)return"object";let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}var tu=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},qr=globalThis,bg=/^([1-9]|1[0-8])\./;function Hm(n){return n.startsWith("0.")?!0:!bg.test(n)}var wg=3,yg="# sourceMappingURL=data:application/json;base64,",nu=class{file;sourcesContent=new Map;lines=[];lastCol0=0;hasMappings=!1;constructor(e=null){this.file=e}addSource(e,t=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,t,i,s){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(t!=null&&!this.sourcesContent.has(t))throw new Error(`Unknown source file "${t}"`);if(e==null)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(i==null||s==null))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:i,sourceCol0:s}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;let e=new Map,t=[],i=[];Array.from(this.sourcesContent.keys()).forEach((c,p)=>{e.set(c,p),t.push(c),i.push(this.sourcesContent.get(c)||null)});let s="",r=0,o=0,a=0,l=0;return this.lines.forEach(c=>{r=0,s+=c.map(p=>{let d=ca(p.col0-r);return r=p.col0,p.sourceUrl!=null&&(d+=ca(e.get(p.sourceUrl)-o),o=e.get(p.sourceUrl),d+=ca(p.sourceLine0-a),a=p.sourceLine0,d+=ca(p.sourceCol0-l),l=p.sourceCol0),d}).join(","),s+=";"}),s=s.slice(0,-1),{file:this.file||"",version:wg,sourceRoot:"",sources:t,sourcesContent:i,mappings:s}}toJsComment(){return this.hasMappings?"//"+yg+kg(JSON.stringify(this,null,0)):""}};function kg(n){let e="",t=Eg(n);for(let i=0;i<t.length;){let s=t[i++],r=i<t.length?t[i++]:null,o=i<t.length?t[i++]:null;e+=Rr(s>>2),e+=Rr((s&3)<<4|(r===null?0:r>>4)),e+=r===null?"=":Rr((r&15)<<2|(o===null?0:o>>6)),e+=r===null||o===null?"=":Rr(o&63)}return e}function ca(n){n=n<0?(-n<<1)+1:n<<1;let e="";do{let t=n&31;n=n>>5,n>0&&(t=t|32),e+=Rr(t)}while(n>0);return e}var Tg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Rr(n){if(n<0||n>=64)throw new Error("Can only encode value in the range [0, 63]");return Tg[n]}var Ag=/'|\\|\n|\r|\$/g,Dg=/^[$A-Z_][0-9A-Z_$]*$/i,iu="  ",qa=class{indent;partsLength=0;parts=[];srcSpans=[];constructor(e){this.indent=e}},Ig=new Map([[I.And,"&&"],[I.Bigger,">"],[I.BiggerEquals,">="],[I.BitwiseOr,"|"],[I.BitwiseAnd,"&"],[I.Divide,"/"],[I.Assign,"="],[I.Equals,"=="],[I.Identical,"==="],[I.Lower,"<"],[I.LowerEquals,"<="],[I.Minus,"-"],[I.Modulo,"%"],[I.Exponentiation,"**"],[I.Multiply,"*"],[I.NotEquals,"!="],[I.NotIdentical,"!=="],[I.NullishCoalesce,"??"],[I.Or,"||"],[I.Plus,"+"],[I.In,"in"],[I.AdditionAssignment,"+="],[I.SubtractionAssignment,"-="],[I.MultiplicationAssignment,"*="],[I.DivisionAssignment,"/="],[I.RemainderAssignment,"%="],[I.ExponentiationAssignment,"**="],[I.AndAssignment,"&&="],[I.OrAssignment,"||="],[I.NullishCoalesceAssignment,"??="]]),su=class n{_indent;static createRoot(){return new n(0)}_lines;constructor(e){this._indent=e,this._lines=[new qa(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,t=""){this.print(e||null,t,!0)}lineIsEmpty(){return this._currentLine.parts.length===0}lineLength(){return this._currentLine.indent*iu.length+this._currentLine.partsLength}print(e,t,i=!1){t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),i&&this._lines.push(new qa(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?nh(e.indent)+e.parts.join(""):"").join(`
`)}toSourceMapGenerator(e,t=0){let i=new nu(e),s=!1,r=()=>{s||(i.addSource(e," ").addMapping(0,e,0,0),s=!0)};for(let o=0;o<t;o++)i.addLine(),r();return this.sourceLines.forEach((o,a)=>{i.addLine();let l=o.srcSpans,c=o.parts,p=o.indent*iu.length,d=0;for(;d<l.length&&!l[d];)p+=c[d].length,d++;for(d<l.length&&a===0&&p===0?s=!0:r();d<l.length;){let m=l[d],_=m.start.file,b=m.start.line,A=m.start.col;for(i.addSource(_.url,_.content).addMapping(p,_.url,b,A),p+=c[d].length,d++;d<l.length&&(m===l[d]||!l[d]);)p+=c[d].length,d++}}),i}spanOf(e,t){let i=this._lines[e];if(i){let s=t-nh(i.indent).length;for(let r=0;r<i.parts.length;r++){let o=i.parts[r];if(o.length>s)return i.srcSpans[r];s-=o.length}}return null}get sourceLines(){return this._lines.length&&this._lines[this._lines.length-1].parts.length===0?this._lines.slice(0,-1):this._lines}},ru=class{_escapeDollarInStrings;lastIfCondition=null;constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,t){if(e.leadingComments!==void 0)for(let i of e.leadingComments)i instanceof Oa?t.print(e,`/*${i.toString()}*/`,i.trailingNewline):i.multiline?t.print(e,`/* ${i.text} */`,i.trailingNewline):i.text.split(`
`).forEach(s=>{t.println(e,`// ${s}`)})}visitExpressionStmt(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}visitReturnStmt(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}visitIfStmt(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),this.lastIfCondition=e.condition,e.condition.visitExpression(this,t),this.lastIfCondition=null,t.print(e,") {");let i=e.falseCase!=null&&e.falseCase.length>0;return e.trueCase.length<=1&&!i?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),i&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}visitInvokeFunctionExpr(e,t){let i=e.fn instanceof Zi;return i&&t.print(e.fn,"("),e.fn.visitExpression(this,t),i&&t.print(e.fn,")"),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitTaggedTemplateLiteralExpr(e,t){return e.tag.visitExpression(this,t),e.template.visitExpression(this,t),null}visitTemplateLiteralExpr(e,t){t.print(e,"`");for(let i=0;i<e.elements.length;i++){e.elements[i].visitExpression(this,t);let s=i<e.expressions.length?e.expressions[i]:null;s!==null&&(t.print(s,"${"),s.visitExpression(this,t),t.print(s,"}"))}t.print(e,"`")}visitTemplateLiteralElementExpr(e,t){t.print(e,e.rawText)}visitWrappedNodeExpr(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}visitVoidExpr(e,t){t.print(e,"void "),e.expr.visitExpression(this,t)}visitReadVarExpr(e,t){return t.print(e,e.name),null}visitInstantiateExpr(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitLiteralExpr(e,t){let i=e.value;return typeof i=="string"?t.print(e,Oi(i,this._escapeDollarInStrings)):t.print(e,`${i}`),null}visitLocalizedString(e,t){let i=e.serializeI18nHead();t.print(e,"$localize `"+i.raw);for(let s=1;s<e.messageParts.length;s++)t.print(e,"${"),e.expressions[s-1].visitExpression(this,t),t.print(e,`}${e.serializeI18nTemplatePart(s).raw}`);return t.print(e,"`"),null}visitConditionalExpr(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}visitDynamicImportExpr(e,t){t.print(e,`import(${e.url})`)}visitNotExpr(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}visitUnaryOperatorExpr(e,t){let i;switch(e.operator){case Xr.Plus:i="+";break;case Xr.Minus:i="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}let s=e!==this.lastIfCondition;return s&&t.print(e,"("),t.print(e,i),e.expr.visitExpression(this,t),s&&t.print(e,")"),null}visitBinaryOperatorExpr(e,t){let i=Ig.get(e.operator);if(!i)throw new Error(`Unknown operator ${e.operator}`);let s=e!==this.lastIfCondition;return s&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e,` ${i} `),e.rhs.visitExpression(this,t),s&&t.print(e,")"),null}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}visitLiteralArrayExpr(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}visitLiteralMapExpr(e,t){return t.print(e,"{"),this.visitAllObjects(i=>{t.print(e,`${Oi(i.key,this._escapeDollarInStrings,i.quoted)}:`),i.value.visitExpression(this,t)},e.entries,t,","),t.print(e,"}"),null}visitCommaExpr(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}visitParenthesizedExpr(e,t){e.expr.visitExpression(this,t)}visitAllExpressions(e,t,i){this.visitAllObjects(s=>s.visitExpression(this,t),e,t,i)}visitAllObjects(e,t,i,s){let r=!1;for(let o=0;o<t.length;o++)o>0&&(i.lineLength()>80?(i.print(null,s,!0),r||(i.incIndent(),i.incIndent(),r=!0)):i.print(null,s,!1)),e(t[o]);r&&(i.decIndent(),i.decIndent())}visitAllStatements(e,t){e.forEach(i=>i.visitStatement(this,t))}};function Oi(n,e,t=!0){if(n==null)return null;let i=n.replace(Ag,(...r)=>r[0]=="$"?e?"\\$":"$":r[0]==`
`?"\\n":r[0]=="\r"?"\\r":`\\${r[0]}`);return t||!Dg.test(i)?`'${i}'`:i}function nh(n){let e="";for(let t=0;t<n;t++)e+=iu;return e}function Ul(n,e){if(e===0)return lt(n);let t=[];for(let i=0;i<e;i++)t.push(Uo);return lt(n,void 0,t)}function Pg(n,e){let t=Oi(e,!1,!1);return t!==e?`${n}[${t}]`:`${n}.${e}`}function Ng(n){return Lg("ngJitMode",n)}function Lg(n,e){let t=new Qi({name:n,moduleName:null}),i=new pe(I.Identical,new Vs(t),E("undefined")),s=new pe(I.Or,i,t,void 0,void 0);return new pe(I.And,s,e)}function Ye(n){let e=new le(n);return{value:e,type:e}}function $i(n,e){let t=_e(n.map(i=>i.value));return e?En([],t):t}function wp(n,e){return{expression:n,forwardRef:e}}function Mg({expression:n,forwardRef:e}){switch(e){case 0:case 1:return n;case 2:return Bg(n)}}function Bg(n){return U(f.forwardRef).callFn([En([],n)])}var Ua=(function(n){return n[n.Class=0]="Class",n[n.Function=1]="Function",n})(Ua||{});function Bi(n){let e=oe("__ngFactoryType__"),t=null,i=sh(n)?e:new pe(I.Or,e,n.type.value),s=null;n.deps!==null?n.deps!=="invalid"&&(s=new Qr(i,ih(n.deps,n.target))):(t=oe(`\u0275${n.name}_BaseFactory`),s=t.callFn([i]));let r=[],o=null;function a(c){let p=oe("__ngConditionalFactory__");r.push(new Ze(p.name,qs,jt));let d=s!==null?p.set(s).toStmt():U(f.invalidFactory).callFn([]).toStmt();return r.push(ql(e,[d],[p.set(c).toStmt()])),p}if(sh(n)){let c=ih(n.delegateDeps,n.target),p=new(n.delegateType===Ua.Class?Qr:Lt)(n.delegate,c);o=a(p)}else Vg(n)?o=a(n.expression):o=s;if(o===null)r.push(U(f.invalidFactory).callFn([]).toStmt());else if(t!==null){let c=U(f.getInheritedFactory).callFn([n.type.value]),p=new pe(I.Or,t,t.set(c));r.push(new at(p.callFn([i])))}else r.push(new at(o));let l=vi([new tt(e.name,Uo)],r,jt,void 0,`${n.name}_Factory`);return t!==null&&(l=En([],[new Ze(t.name),new at(l)]).callFn([],void 0,!0)),{expression:l,statements:[],type:Fg(n)}}function Fg(n){let e=n.deps!==null&&n.deps!=="invalid"?Og(n.deps):Bn;return lt(U(f.FactoryDeclaration,[Ul(n.type.type,n.typeArgumentCount),e]))}function ih(n,e){return n.map((t,i)=>Rg(t,e,i))}function Rg(n,e,t){if(n.token===null)return U(f.invalidFactoryDep).callFn([E(t)]);if(n.attributeNameType===null){let i=0|(n.self?2:0)|(n.skipSelf?4:0)|(n.host?1:0)|(n.optional?8:0)|(e===Gn.Pipe?16:0),s=i!==0||n.optional?E(i):null,r=[n.token];s&&r.push(s);let o=Hg(e);return U(o).callFn(r)}else return U(f.injectAttribute).callFn([n.token])}function Og(n){let e=!1,t=n.map(i=>{let s=$g(i);return s!==null?(e=!0,s):E(null)});return e?lt(_e(t)):Bn}function $g(n){let e=[];return n.attributeNameType!==null&&e.push({key:"attribute",value:n.attributeNameType,quoted:!1}),n.optional&&e.push({key:"optional",value:E(!0),quoted:!1}),n.host&&e.push({key:"host",value:E(!0),quoted:!1}),n.self&&e.push({key:"self",value:E(!0),quoted:!1}),n.skipSelf&&e.push({key:"skipSelf",value:E(!0),quoted:!1}),e.length>0?yt(e):null}function sh(n){return n.delegateType!==void 0}function Vg(n){return n.expression!==void 0}function Hg(n){switch(n){case Gn.Component:case Gn.Directive:case Gn.Pipe:return f.directiveInject;case Gn.NgModule:case Gn.Injectable:default:return f.inject}}var es=class{start;end;constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new zt(e+this.start,e+this.end)}},Ie=class{span;sourceSpan;constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}},eo=class extends Ie{nameSpan;constructor(e,t,i){super(e,t),this.nameSpan=i}},At=class extends Ie{visit(e,t=null){}},On=class extends Ie{visit(e,t=null){return e.visitImplicitReceiver(this,t)}},ts=class extends On{visit(e,t=null){return e.visitThisReceiver?.(this,t)}},Us=class extends Ie{expressions;constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitChain(this,t)}},ja=class extends Ie{condition;trueExp;falseExp;constructor(e,t,i,s,r){super(e,t),this.condition=i,this.trueExp=s,this.falseExp=r}visit(e,t=null){return e.visitConditional(this,t)}},Zn=class extends eo{receiver;name;constructor(e,t,i,s,r){super(e,t,i),this.receiver=s,this.name=r}visit(e,t=null){return e.visitPropertyRead(this,t)}},to=class extends eo{receiver;name;constructor(e,t,i,s,r){super(e,t,i),this.receiver=s,this.name=r}visit(e,t=null){return e.visitSafePropertyRead(this,t)}},ns=class extends Ie{receiver;key;constructor(e,t,i,s){super(e,t),this.receiver=i,this.key=s}visit(e,t=null){return e.visitKeyedRead(this,t)}},no=class extends Ie{receiver;key;constructor(e,t,i,s){super(e,t),this.receiver=i,this.key=s}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}},ya=(function(n){return n[n.ReferencedByName=0]="ReferencedByName",n[n.ReferencedDirectly=1]="ReferencedDirectly",n})(ya||{}),za=class extends eo{exp;name;args;type;constructor(e,t,i,s,r,o,a){super(e,t,a),this.exp=i,this.name=s,this.args=r,this.type=o}visit(e,t=null){return e.visitPipe(this,t)}},Vt=class extends Ie{value;constructor(e,t,i){super(e,t),this.value=i}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}},Wa=class extends Ie{expressions;constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitLiteralArray(this,t)}},Ga=class extends Ie{keys;values;constructor(e,t,i,s){super(e,t),this.keys=i,this.values=s}visit(e,t=null){return e.visitLiteralMap(this,t)}},zo=class extends Ie{strings;expressions;constructor(e,t,i,s){super(e,t),this.strings=i,this.expressions=s}visit(e,t=null){return e.visitInterpolation(this,t)}},Ct=class extends Ie{operation;left;right;constructor(e,t,i,s,r){super(e,t),this.operation=i,this.left=s,this.right=r}visit(e,t=null){return e.visitBinary(this,t)}static isAssignmentOperation(e){return e==="="||e==="+="||e==="-="||e==="*="||e==="/="||e==="%="||e==="**="||e==="&&="||e==="||="||e==="??="}},Fs=class n extends Ct{operator;expr;left=null;right=null;operation=null;static createMinus(e,t,i){return new n(e,t,"-",i,"-",new Vt(e,t,0),i)}static createPlus(e,t,i){return new n(e,t,"+",i,"-",i,new Vt(e,t,0))}constructor(e,t,i,s,r,o,a){super(e,t,r,o,a),this.operator=i,this.expr=s}visit(e,t=null){return e.visitUnary!==void 0?e.visitUnary(this,t):e.visitBinary(this,t)}},io=class extends Ie{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitPrefixNot(this,t)}},so=class extends Ie{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitTypeofExpression(this,t)}},ro=class extends Ie{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitVoidExpression(this,t)}},oo=class extends Ie{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitNonNullAssert(this,t)}},js=class extends Ie{receiver;args;argumentSpan;constructor(e,t,i,s,r){super(e,t),this.receiver=i,this.args=s,this.argumentSpan=r}visit(e,t=null){return e.visitCall(this,t)}},Xa=class extends Ie{receiver;args;argumentSpan;constructor(e,t,i,s,r){super(e,t),this.receiver=i,this.args=s,this.argumentSpan=r}visit(e,t=null){return e.visitSafeCall(this,t)}},ao=class extends Ie{tag;template;constructor(e,t,i,s){super(e,t),this.tag=i,this.template=s}visit(e,t){return e.visitTaggedTemplateLiteral(this,t)}},lo=class extends Ie{elements;expressions;constructor(e,t,i,s){super(e,t),this.elements=i,this.expressions=s}visit(e,t){return e.visitTemplateLiteral(this,t)}},Ya=class extends Ie{text;constructor(e,t,i){super(e,t),this.text=i}visit(e,t){return e.visitTemplateLiteralElement(this,t)}},co=class extends Ie{expression;constructor(e,t,i){super(e,t),this.expression=i}visit(e,t){return e.visitParenthesizedExpression(this,t)}},zt=class{start;end;constructor(e,t){this.start=e,this.end=t}},Ht=class extends Ie{ast;source;location;errors;constructor(e,t,i,s,r){super(new es(0,t===null?0:t.length),new zt(s,t===null?s:s+t.length)),this.ast=e,this.source=t,this.location=i,this.errors=r}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}},uo=class{sourceSpan;key;value;constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}},ou=class{sourceSpan;key;value;constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}},po=class{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitTypeofExpression(e,t){this.visit(e.expression,t)}visitVoidExpression(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitTemplateLiteral(e,t){for(let i=0;i<e.elements.length;i++){this.visit(e.elements[i],t);let s=i<e.expressions.length?e.expressions[i]:null;s!==null&&this.visit(s,t)}}visitTemplateLiteralElement(e,t){}visitTaggedTemplateLiteral(e,t){this.visit(e.tag,t),this.visit(e.template,t)}visitParenthesizedExpression(e,t){this.visit(e.expression,t)}visitAll(e,t){for(let i of e)this.visit(i,t)}},Ds=class{name;expression;type;sourceSpan;keySpan;valueSpan;isLiteral;isLegacyAnimation;isAnimation;constructor(e,t,i,s,r,o){this.name=e,this.expression=t,this.type=i,this.sourceSpan=s,this.keySpan=r,this.valueSpan=o,this.isLiteral=this.type===Pn.LITERAL_ATTR,this.isLegacyAnimation=this.type===Pn.LEGACY_ANIMATION,this.isAnimation=this.type===Pn.ANIMATION}},Pn=(function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.LITERAL_ATTR=1]="LITERAL_ATTR",n[n.LEGACY_ANIMATION=2]="LEGACY_ANIMATION",n[n.TWO_WAY=3]="TWO_WAY",n[n.ANIMATION=4]="ANIMATION",n})(Pn||{}),bt=(function(n){return n[n.Regular=0]="Regular",n[n.LegacyAnimation=1]="LegacyAnimation",n[n.TwoWay=2]="TwoWay",n[n.Animation=3]="Animation",n})(bt||{}),Qa=class{name;targetOrPhase;type;handler;sourceSpan;handlerSpan;keySpan;constructor(e,t,i,s,r,o,a){this.name=e,this.targetOrPhase=t,this.type=i,this.handler=s,this.sourceSpan=r,this.handlerSpan=o,this.keySpan=a}},au=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r}},he=(function(n){return n[n.Property=0]="Property",n[n.Attribute=1]="Attribute",n[n.Class=2]="Class",n[n.Style=3]="Style",n[n.LegacyAnimation=4]="LegacyAnimation",n[n.TwoWay=5]="TwoWay",n[n.Animation=6]="Animation",n})(he||{}),Za=class{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;constructor(e,t,i,s,r,o,a,l){this.name=e,this.type=t,this.securityContext=i,this.value=s,this.unit=r,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l}},Nn=(function(n){return n[n.RAW_TEXT=0]="RAW_TEXT",n[n.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",n[n.PARSABLE_DATA=2]="PARSABLE_DATA",n})(Nn||{});function bn(n,e=!0){if(n[0]!=":")return[null,n];let t=n.indexOf(":",1);if(t===-1){if(e)throw new Error(`Unsupported format "${n}" expecting ":namespace:name"`);return[null,n]}return[n.slice(1,t),n.slice(t+1)]}function rh(n){return bn(n)[1]==="ng-container"}function lu(n){return bn(n)[1]==="ng-content"}function qg(n){return bn(n)[1]==="ng-template"}function cu(n){return n===null?null:bn(n)[0]}function ka(n,e){return n?`:${n}:${e}`:e}var jl=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){throw new Error("visit() not implemented for Comment")}},Vi=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){return e.visitText(this)}},zs=class{value;sourceSpan;i18n;constructor(e,t,i){this.value=e,this.sourceSpan=t,this.i18n=i}visit(e){return e.visitBoundText(this)}},Ws=class{name;value;sourceSpan;keySpan;valueSpan;i18n;constructor(e,t,i,s,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r,this.i18n=o}visit(e){return e.visitTextAttribute(this)}},uu=class n{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;i18n;constructor(e,t,i,s,r,o,a,l,c){this.name=e,this.type=t,this.securityContext=i,this.value=s,this.unit=r,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l,this.i18n=c}static fromBoundElementProperty(e,t){if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new n(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,t)}visit(e){return e.visitBoundAttribute(this)}},pu=class n{name;type;handler;target;phase;sourceSpan;handlerSpan;keySpan;constructor(e,t,i,s,r,o,a,l){this.name=e,this.type=t,this.handler=i,this.target=s,this.phase=r,this.sourceSpan=o,this.handlerSpan=a,this.keySpan=l}static fromParsedEvent(e){let t=e.type===bt.Regular?e.targetOrPhase:null,i=e.type===bt.LegacyAnimation?e.targetOrPhase:null;if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new n(e.name,e.type,e.handler,t,i,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}},$n=class{name;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;isVoid;i18n;constructor(e,t,i,s,r,o,a,l,c,p,d,m,_){this.name=e,this.attributes=t,this.inputs=i,this.outputs=s,this.directives=r,this.children=o,this.references=a,this.isSelfClosing=l,this.sourceSpan=c,this.startSourceSpan=p,this.endSourceSpan=d,this.isVoid=m,this.i18n=_}visit(e){return e.visitElement(this)}},Vn=class{nameSpan;sourceSpan;prefetchSpan;whenOrOnSourceSpan;hydrateSpan;constructor(e,t,i,s,r){this.nameSpan=e,this.sourceSpan=t,this.prefetchSpan=i,this.whenOrOnSourceSpan=s,this.hydrateSpan=r}visit(e){return e.visitDeferredTrigger(this)}},Ja=class extends Vn{value;constructor(e,t,i,s,r){super(null,t,i,s,r),this.value=e}},du=class extends Vn{},hu=class extends Vn{},mu=class extends Vn{},Ka=class extends Vn{reference;constructor(e,t,i,s,r,o){super(t,i,s,r,o),this.reference=e}},fu=class extends Vn{delay;constructor(e,t,i,s,r,o){super(t,i,s,r,o),this.delay=e}},el=class extends Vn{reference;constructor(e,t,i,s,r,o){super(t,i,s,r,o),this.reference=e}},tl=class extends Vn{reference;constructor(e,t,i,s,r,o){super(t,i,s,r,o),this.reference=e}},un=class{nameSpan;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,s){this.nameSpan=e,this.sourceSpan=t,this.startSourceSpan=i,this.endSourceSpan=s}},ho=class extends un{children;minimumTime;i18n;constructor(e,t,i,s,r,o,a){super(i,s,r,o),this.children=e,this.minimumTime=t,this.i18n=a}visit(e){return e.visitDeferredBlockPlaceholder(this)}},mo=class extends un{children;afterTime;minimumTime;i18n;constructor(e,t,i,s,r,o,a,l){super(s,r,o,a),this.children=e,this.afterTime=t,this.minimumTime=i,this.i18n=l}visit(e){return e.visitDeferredBlockLoading(this)}},fo=class extends un{children;i18n;constructor(e,t,i,s,r,o){super(t,i,s,r),this.children=e,this.i18n=o}visit(e){return e.visitDeferredBlockError(this)}},is=class extends un{children;placeholder;loading;error;mainBlockSpan;i18n;triggers;prefetchTriggers;hydrateTriggers;definedTriggers;definedPrefetchTriggers;definedHydrateTriggers;constructor(e,t,i,s,r,o,a,l,c,p,d,m,_){super(l,c,d,m),this.children=e,this.placeholder=r,this.loading=o,this.error=a,this.mainBlockSpan=p,this.i18n=_,this.triggers=t,this.prefetchTriggers=i,this.hydrateTriggers=s,this.definedTriggers=Object.keys(t),this.definedPrefetchTriggers=Object.keys(i),this.definedHydrateTriggers=Object.keys(s)}visit(e){return e.visitDeferredBlock(this)}visitAll(e){this.visitTriggers(this.definedHydrateTriggers,this.hydrateTriggers,e),this.visitTriggers(this.definedTriggers,this.triggers,e),this.visitTriggers(this.definedPrefetchTriggers,this.prefetchTriggers,e),Ic(e,this.children);let t=[this.placeholder,this.loading,this.error].filter(i=>i!==null);Ic(e,t)}visitTriggers(e,t,i){Ic(i,e.map(s=>t[s]))}},nl=class extends un{expression;cases;unknownBlocks;constructor(e,t,i,s,r,o,a){super(a,s,r,o),this.expression=e,this.cases=t,this.unknownBlocks=i}visit(e){return e.visitSwitchBlock(this)}},go=class extends un{expression;children;i18n;constructor(e,t,i,s,r,o,a){super(o,i,s,r),this.expression=e,this.children=t,this.i18n=a}visit(e){return e.visitSwitchBlockCase(this)}},Gs=class extends un{item;expression;trackBy;trackKeywordSpan;contextVariables;children;empty;mainBlockSpan;i18n;constructor(e,t,i,s,r,o,a,l,c,p,d,m,_){super(m,l,p,d),this.item=e,this.expression=t,this.trackBy=i,this.trackKeywordSpan=s,this.contextVariables=r,this.children=o,this.empty=a,this.mainBlockSpan=c,this.i18n=_}visit(e){return e.visitForLoopBlock(this)}},vo=class extends un{children;i18n;constructor(e,t,i,s,r,o){super(r,t,i,s),this.children=e,this.i18n=o}visit(e){return e.visitForLoopBlockEmpty(this)}},il=class extends un{branches;constructor(e,t,i,s,r){super(r,t,i,s),this.branches=e}visit(e){return e.visitIfBlock(this)}},ji=class extends un{expression;children;expressionAlias;i18n;constructor(e,t,i,s,r,o,a,l){super(a,s,r,o),this.expression=e,this.children=t,this.expressionAlias=i,this.i18n=l}visit(e){return e.visitIfBlockBranch(this)}},sl=class{name;sourceSpan;nameSpan;constructor(e,t,i){this.name=e,this.sourceSpan=t,this.nameSpan=i}visit(e){return e.visitUnknownBlock(this)}},yp=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.nameSpan=s,this.valueSpan=r}visit(e){return e.visitLetDeclaration(this)}},Ur=class{componentName;tagName;fullName;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,i,s,r,o,a,l,c,p,d,m,_,b){this.componentName=e,this.tagName=t,this.fullName=i,this.attributes=s,this.inputs=r,this.outputs=o,this.directives=a,this.children=l,this.references=c,this.isSelfClosing=p,this.sourceSpan=d,this.startSourceSpan=m,this.endSourceSpan=_,this.i18n=b}visit(e){return e.visitComponent(this)}},qm=class{name;attributes;inputs;outputs;references;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,i,s,r,o,a,l,c){this.name=e,this.attributes=t,this.inputs=i,this.outputs=s,this.references=r,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=l,this.i18n=c}visit(e){return e.visitDirective(this)}},Wt=class{tagName;attributes;inputs;outputs;directives;templateAttrs;children;references;variables;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,i,s,r,o,a,l,c,p,d,m,_,b){this.tagName=e,this.attributes=t,this.inputs=i,this.outputs=s,this.directives=r,this.templateAttrs=o,this.children=a,this.references=l,this.variables=c,this.isSelfClosing=p,this.sourceSpan=d,this.startSourceSpan=m,this.endSourceSpan=_,this.i18n=b}visit(e){return e.visitTemplate(this)}},Xs=class{selector;attributes;children;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;name="ng-content";constructor(e,t,i,s,r,o,a,l){this.selector=e,this.attributes=t,this.children=i,this.isSelfClosing=s,this.sourceSpan=r,this.startSourceSpan=o,this.endSourceSpan=a,this.i18n=l}visit(e){return e.visitContent(this)}},_i=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r}visit(e){return e.visitVariable(this)}},_o=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r}visit(e){return e.visitReference(this)}},Um=class{vars;placeholders;sourceSpan;i18n;constructor(e,t,i,s){this.vars=e,this.placeholders=t,this.sourceSpan=i,this.i18n=s}visit(e){return e.visitIcu(this)}},xo=class{tagNames;bindings;listeners;sourceSpan;constructor(e,t,i,s){if(this.tagNames=e,this.bindings=t,this.listeners=i,this.sourceSpan=s,e.length===0)throw new Error("HostElement must have at least one tag name.")}visit(){throw new Error("HostElement cannot be visited")}};function Ic(n,e){let t=[];if(n.visit)for(let i of e)n.visit(i);else for(let i of e){let s=i.visit(n);s&&t.push(s)}return t}var wt=class{nodes;placeholders;placeholderToMessage;meaning;description;customId;sources;id;legacyIds=[];messageString;constructor(e,t,i,s,r,o){this.nodes=e,this.placeholders=t,this.placeholderToMessage=i,this.meaning=s,this.description=r,this.customId=o,this.id=this.customId,this.messageString=Ug(this.nodes),e.length?this.sources=[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:this.sources=[]}},Pr=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitText(this,t)}},Jn=class{children;sourceSpan;constructor(e,t){this.children=e,this.sourceSpan=t}visit(e,t){return e.visitContainer(this,t)}},rl=class{expression;type;cases;sourceSpan;expressionPlaceholder;constructor(e,t,i,s,r){this.expression=e,this.type=t,this.cases=i,this.sourceSpan=s,this.expressionPlaceholder=r}visit(e,t){return e.visitIcu(this,t)}},xi=class{tag;attrs;startName;closeName;children;isVoid;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,s,r,o,a,l,c){this.tag=e,this.attrs=t,this.startName=i,this.closeName=s,this.children=r,this.isVoid=o,this.sourceSpan=a,this.startSourceSpan=l,this.endSourceSpan=c}visit(e,t){return e.visitTagPlaceholder(this,t)}},Co=class{value;name;sourceSpan;constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitPlaceholder(this,t)}},Ys=class{value;name;sourceSpan;previousMessage;constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitIcuPlaceholder(this,t)}},Ci=class{name;parameters;startName;closeName;children;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,s,r,o,a,l){this.name=e,this.parameters=t,this.startName=i,this.closeName=s,this.children=r,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=l}visit(e,t){return e.visitBlockPlaceholder(this,t)}};function Ug(n){let e=new gu;return n.map(i=>i.visit(e)).join("")}var gu=class{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){let t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){let t=e.children.map(i=>i.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}visitBlockPlaceholder(e){let t=e.children.map(i=>i.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}};var jg=class{visitTag(e){let t=this._serializeAttributes(e.attrs);if(e.children.length==0)return`<${e.name}${t}/>`;let i=e.children.map(s=>s.visit(this));return`<${e.name}${t}>${i.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){let t=Object.keys(e).map(i=>`${i}="${e[i]}"`).join(" ");return t.length>0?" "+t:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [
${e.dtd}
]>`}},bA=new jg;function zg(n){return n.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var jm="i18n",vu="i18n-",Wg="VAR_";function zm(n){return n===jm||n.startsWith(vu)}function Gg(n){return n.attrs.some(e=>zm(e.name))}function Wm(n){return n.nodes[0]}function kp(n={},e){let t={};return n&&Object.keys(n).length&&Object.keys(n).forEach(i=>t[Wo(i,e)]=n[i]),t}function Wo(n,e=!0){let t=zg(n);if(!e)return t;let i=t.split("_");if(i.length===1)return n.toLowerCase();let s;/^\d+$/.test(i[i.length-1])&&(s=i.pop());let r=i.shift().toLowerCase();return i.length&&(r+=i.map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("")),s?`${r}_${s}`:r}var Xg=/[-.]/,Tp="_t",So="ctx",Ap="rf";function Gm(n,e){let t=null;return()=>(t||(n(new Ze(Tp,void 0,Uo)),t=oe(e)),t)}function Is(n){return Array.isArray(n)?_e(n.map(Is)):E(n,jt)}function oh(n,e){let t=Object.getOwnPropertyNames(n);return t.length===0?null:yt(t.map(i=>{let s=n[i],r,o,a,l;if(typeof s=="string")r=i,a=i,o=s,l=Is(o);else{a=i,r=s.classPropertyName,o=s.bindingPropertyName;let c=o!==r,p=s.transformFunction!==null,d=Fr.None;if(s.isSignal&&(d|=Fr.SignalBased),p&&(d|=Fr.HasDecoratorInputTransform),e&&(c||p||d!==Fr.None)){let m=[E(d),Is(o)];(c||p)&&(m.push(Is(r)),p&&m.push(s.transformFunction)),l=_e(m)}else l=Is(o)}return{key:a,quoted:Xg.test(a),value:l}}))}var Si=class{values=[];set(e,t){if(t){let i=this.values.find(s=>s.key===e);i?i.value=t:this.values.push({key:e,value:t,quoted:!1})}}toLiteralMap(){return yt(this.values)}};function Yg(n){let e=n instanceof $n?n.name:"ng-template",t=Qg(n),i=new $s,s=bn(e)[1];return i.setElement(s),Object.getOwnPropertyNames(t).forEach(r=>{let o=bn(r)[1],a=t[r];i.addAttribute(o,a),r.toLowerCase()==="class"&&a.trim().split(/\s+/).forEach(c=>i.addClassName(c))}),i}function Qg(n){let e={};return n instanceof Wt&&n.tagName!=="ng-template"?n.templateAttrs.forEach(t=>e[t.name]=""):(n.attributes.forEach(t=>{zm(t.name)||(e[t.name]=t.value)}),n.inputs.forEach(t=>{(t.type===he.Property||t.type===he.TwoWay)&&(e[t.name]="")}),n.outputs.forEach(t=>{e[t.name]=""})),e}function ah(n,e){let t=null,i={name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:[],target:Gn.Injectable};if(n.useClass!==void 0){let a=n.useClass.expression.isEquivalent(n.type.value),l;n.deps!==void 0&&(l=n.deps),l!==void 0?t=Bi(De(k({},i),{delegate:n.useClass.expression,delegateDeps:l,delegateType:Ua.Class})):a?t=Bi(i):t={statements:[],expression:lh(n.type.value,n.useClass.expression,e)}}else n.useFactory!==void 0?n.deps!==void 0?t=Bi(De(k({},i),{delegate:n.useFactory,delegateDeps:n.deps||[],delegateType:Ua.Function})):t={statements:[],expression:En([],n.useFactory.callFn([]))}:n.useValue!==void 0?t=Bi(De(k({},i),{expression:n.useValue.expression})):n.useExisting!==void 0?t=Bi(De(k({},i),{expression:U(f.inject).callFn([n.useExisting.expression])})):t={statements:[],expression:lh(n.type.value,n.type.value,e)};let s=n.type.value,r=new Si;return r.set("token",s),r.set("factory",t.expression),n.providedIn.expression.value!==null&&r.set("providedIn",Mg(n.providedIn)),{expression:U(f.\u0275\u0275defineInjectable).callFn([r.toLiteralMap()],void 0,!0),type:Zg(n),statements:t.statements}}function Zg(n){return new an(U(f.InjectableDeclaration,[Ul(n.type.type,n.typeArgumentCount)]))}function lh(n,e,t){if(n.node===e.node)return e.prop("\u0275fac");if(!t)return ch(e);let i=U(f.resolveForwardRef).callFn([e]);return ch(i)}function ch(n){let e=new tt("__ngFactoryType__",Uo);return En([e],n.prop("\u0275fac").callFn([oe(e.name)]))}var Jg=[/@/,/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function Kg(n,e){if(e!=null&&!(Array.isArray(e)&&e.length==2))throw new Error(`Expected '${n}' to be an array, [start, end].`);if(e!=null){let t=e[0],i=e[1];Jg.forEach(s=>{if(s.test(t)||s.test(i))throw new Error(`['${t}', '${i}'] contains unusable interpolation symbol.`)})}}var ol=class n{start;end;static fromArray(e){return e?(Kg("interpolation",e),new n(e[0],e[1])):Ln}constructor(e,t){this.start=e,this.end=t}},Ln=new ol("{{","}}"),ev=new Set(["switch"]),rt=0,tv=8,Dp=9,zi=10,Xm=11,Ym=12,Ip=13,Qm=32,_u=33,Eo=34,Zm=35,zl=36,nv=37,al=38,bo=39,xn=40,St=41,uh=42,Jm=43,on=44,ll=45,Or=46,gn=47,Xn=58,qt=59,Rs=60,ht=61,Kt=62,ph=63,Pp=48,iv=55,Km=57,wi=65,sv=69,rv=70,ov=88,rr=90,gi=91,Os=92,Hi=93,av=94,yi=95,ss=97,lv=98,cv=101,Np=102,ef=110,tf=114,nf=116,sf=117,rf=118,of=120,Go=122,_n=123,dh=124,Et=125,af=160,Es=64,xu=96;function wo(n){return n>=Dp&&n<=Qm||n==af}function vn(n){return Pp<=n&&n<=Km}function Qs(n){return n>=ss&&n<=Go||n>=wi&&n<=rr}function uv(n){return n>=ss&&n<=Np||n>=wi&&n<=rv||vn(n)}function cl(n){return n===zi||n===Ip}function hh(n){return Pp<=n&&n<=iv}function jr(n){return n===bo||n===Eo||n===xu}var yo=class n{file;offset;line;col;constructor(e,t,i,s){this.file=e,this.offset=t,this.line=i,this.col=s}toString(){return this.offset!=null?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){let t=this.file.content,i=t.length,s=this.offset,r=this.line,o=this.col;for(;s>0&&e<0;)if(s--,e++,t.charCodeAt(s)==zi){r--;let l=t.substring(0,s-1).lastIndexOf(String.fromCharCode(zi));o=l>0?s-l:s}else o--;for(;s<i&&e>0;){let a=t.charCodeAt(s);s++,e--,a==zi?(r++,o=0):o++}return new n(this.file,s,r,o)}getContext(e,t){let i=this.file.content,s=this.offset;if(s!=null){s>i.length-1&&(s=i.length-1);let r=s,o=0,a=0;for(;o<e&&s>0&&(s--,o++,!(i[s]==`
`&&++a==t)););for(o=0,a=0;o<e&&r<i.length-1&&(r++,o++,!(i[r]==`
`&&++a==t)););return{before:i.substring(s,this.offset),after:i.substring(this.offset,r+1)}}return null}},ul=class{content;url;constructor(e,t){this.content=e,this.url=t}},Q=class{start;end;fullStart;details;constructor(e,t,i=e,s=null){this.start=e,this.end=t,this.fullStart=i,this.details=s}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}},hi=(function(n){return n[n.WARNING=0]="WARNING",n[n.ERROR=1]="ERROR",n})(hi||{}),G=class extends Error{span;msg;level;relatedError;constructor(e,t,i=hi.ERROR,s){super(t),this.span=e,this.msg=t,this.level=i,this.relatedError=s,Object.setPrototypeOf(this,new.target.prototype)}contextualMessage(){let e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${hi[this.level]} ->]${e.after}")`:this.msg}toString(){let e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}};function pv(n,e,t){let i=`in ${n} ${e} in ${t}`,s=new ul("",i);return new Q(new yo(s,-1,-1,-1),new yo(s,-1,-1,-1))}var dv=0;function hv(n){if(!n||!n.reference)return null;let e=n.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let t=Vm(e);return t.indexOf("(")>=0?(t=`anonymous_${dv++}`,e.__anonymousType=t):t=Fi(t),t}function Fi(n){return n.replace(/\W/g,"_")}var mh='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})',Cu=class extends ru{constructor(){super(!1)}visitWrappedNodeExpr(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,t){return t.print(e,`var ${e.name}`),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitTaggedTemplateLiteralExpr(e,t){let i=e.template.elements;return e.tag.visitExpression(this,t),t.print(e,`(${mh}(`),t.print(e,`[${i.map(s=>Oi(s.text,!1)).join(", ")}], `),t.print(e,`[${i.map(s=>Oi(s.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(s=>{t.print(e,", "),s.visitExpression(this,t)}),t.print(e,")"),null}visitTemplateLiteralExpr(e,t){t.print(e,"`");for(let i=0;i<e.elements.length;i++){e.elements[i].visitExpression(this,t);let s=i<e.expressions.length?e.expressions[i]:null;s!==null&&(t.print(s,"${"),s.visitExpression(this,t),t.print(s,"}"))}t.print(e,"`")}visitTemplateLiteralElementExpr(e,t){return t.print(e,e.rawText),null}visitFunctionExpr(e,t){return t.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitArrowFunctionExpr(e,t){if(t.print(e,"("),this._visitParams(e.params,t),t.print(e,") =>"),Array.isArray(e.body))t.println(e,"{"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.print(e,"}");else{let i=e.body instanceof Rn;i&&t.print(e,"("),e.body.visitExpression(this,t),i&&t.print(e,")")}return null}visitDeclareFunctionStmt(e,t){return t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitLocalizedString(e,t){t.print(e,`$localize(${mh}(`);let i=[e.serializeI18nHead()];for(let s=1;s<e.messageParts.length;s++)i.push(e.serializeI18nTemplatePart(s));return t.print(e,`[${i.map(s=>Oi(s.cooked,!1)).join(", ")}], `),t.print(e,`[${i.map(s=>Oi(s.raw,!1)).join(", ")}])`),e.expressions.forEach(s=>{t.print(e,", "),s.visitExpression(this,t)}),t.print(e,")"),null}_visitParams(e,t){this.visitAllObjects(i=>t.print(null,i.name),e,t,",")}},ua;function mv(){if(ua===void 0){let n=qr.trustedTypes;if(ua=null,n)try{ua=n.createPolicy("angular#unsafe-jit",{createScript:e=>e})}catch{}}return ua}function fv(n){return mv()?.createScript(n)||n}function fh(...n){if(!qr.trustedTypes)return new Function(...n);let e=n.slice(0,-1).join(","),t=n[n.length-1],i=`(function anonymous(${e}
) { ${t}
})`,s=qr.eval(fv(i));return s.bind===void 0?new Function(...n):(s.toString=()=>i,s.bind(qr))}var Su=class{evaluateStatements(e,t,i,s){let r=new Eu(i),o=su.createRoot();return t.length>0&&!gv(t[0])&&(t=[E("use strict").toStmt(),...t]),r.visitAllStatements(t,o),r.createReturnStmt(o),this.evaluateCode(e,o,r.getArgs(),s)}evaluateCode(e,t,i,s){let r=`"use strict";${t.toSource()}
//# sourceURL=${e}`,o=[],a=[];for(let c in i)a.push(i[c]),o.push(c);if(s){let c=fh(...o.concat("return null;")).toString(),p=c.slice(0,c.indexOf("return null;")).split(`
`).length-1;r+=`
${t.toSourceMapGenerator(e,p).toJsComment()}`}let l=fh(...o.concat(r));return this.executeFunction(l,a)}executeFunction(e,t){return e(...t)}},Eu=class extends Cu{refResolver;_evalArgNames=[];_evalArgValues=[];_evalExportedVars=[];constructor(e){super(),this.refResolver=e}createReturnStmt(e){new at(new Rn(this._evalExportedVars.map(i=>new Hs(i,oe(i),!1)))).visitStatement(this,e)}getArgs(){let e={};for(let t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}visitExternalExpr(e,t){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),t),null}visitWrappedNodeExpr(e,t){return this._emitReferenceToExternal(e,e.node,t),null}visitDeclareVarStmt(e,t){return e.hasModifier(ot.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,t)}visitDeclareFunctionStmt(e,t){return e.hasModifier(ot.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,t)}_emitReferenceToExternal(e,t,i){let s=this._evalArgValues.indexOf(t);if(s===-1){s=this._evalArgValues.length,this._evalArgValues.push(t);let r=hv({reference:t})||"val";this._evalArgNames.push(`jit_${r}_${s}`)}i.print(e,this._evalArgNames[s])}};function gv(n){return n.isEquivalent(E("use strict").toStmt())}function gh(n){let e=new Si;n.providers!==null&&e.set("providers",n.providers),n.imports.length>0&&e.set("imports",_e(n.imports));let t=U(f.defineInjector).callFn([e.toLiteralMap()],void 0,!0),i=vv(n);return{expression:t,type:i,statements:[]}}function vv(n){return new an(U(f.InjectorDeclaration,[new an(n.type.type)]))}var bu=class{context;constructor(e){this.context=e}resolveExternalReference(e){if(e.moduleName!=="@angular/core")throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}},pl=(function(n){return n[n.Inline=0]="Inline",n[n.SideEffect=1]="SideEffect",n[n.Omit=2]="Omit",n})(pl||{}),mi=(function(n){return n[n.Global=0]="Global",n[n.Local=1]="Local",n})(mi||{});function _v(n){let e=[],t=new Si;if(t.set("type",n.type.value),n.kind===mi.Global&&n.bootstrap.length>0&&t.set("bootstrap",$i(n.bootstrap,n.containsForwardDecls)),n.selectorScopeMode===pl.Inline)n.declarations.length>0&&t.set("declarations",$i(n.declarations,n.containsForwardDecls)),n.imports.length>0&&t.set("imports",$i(n.imports,n.containsForwardDecls)),n.exports.length>0&&t.set("exports",$i(n.exports,n.containsForwardDecls));else if(n.selectorScopeMode===pl.SideEffect){let r=Sv(n);r!==null&&e.push(r)}n.schemas!==null&&n.schemas.length>0&&t.set("schemas",_e(n.schemas.map(r=>r.value))),n.id!==null&&(t.set("id",n.id),e.push(U(f.registerNgModuleType).callFn([n.type.value,n.id]).toStmt()));let i=U(f.defineNgModule).callFn([t.toLiteralMap()],void 0,!0),s=Cv(n);return{expression:i,type:s,statements:e}}function xv(n){let e=new Si;return e.set("type",new le(n.type)),n.bootstrap!==void 0&&e.set("bootstrap",new le(n.bootstrap)),n.declarations!==void 0&&e.set("declarations",new le(n.declarations)),n.imports!==void 0&&e.set("imports",new le(n.imports)),n.exports!==void 0&&e.set("exports",new le(n.exports)),n.schemas!==void 0&&e.set("schemas",new le(n.schemas)),n.id!==void 0&&e.set("id",new le(n.id)),U(f.defineNgModule).callFn([e.toLiteralMap()])}function Cv(n){if(n.kind===mi.Local)return new an(n.type.value);let{type:e,declarations:t,exports:i,imports:s,includeImportTypes:r,publicDeclarationTypes:o}=n;return new an(U(f.NgModuleDeclaration,[new an(e.type),o===null?Pc(t):Ev(o),r?Pc(s):Bn,Pc(i)]))}function Sv(n){let e=new Si;if(n.kind===mi.Global?n.declarations.length>0&&e.set("declarations",$i(n.declarations,n.containsForwardDecls)):n.declarationsExpression&&e.set("declarations",n.declarationsExpression),n.kind===mi.Global?n.imports.length>0&&e.set("imports",$i(n.imports,n.containsForwardDecls)):n.importsExpression&&e.set("imports",n.importsExpression),n.kind===mi.Global?n.exports.length>0&&e.set("exports",$i(n.exports,n.containsForwardDecls)):n.exportsExpression&&e.set("exports",n.exportsExpression),n.kind===mi.Local&&n.bootstrapExpression&&e.set("bootstrap",n.bootstrapExpression),Object.keys(e.values).length===0)return null;let t=new Lt(U(f.setNgModuleScope),[n.type.value,e.toLiteralMap()]),i=Ng(t),s=new fi([],[i.toStmt()]);return new Lt(s,[]).toStmt()}function Pc(n){let e=n.map(t=>jo(t.type));return n.length>0?lt(_e(e)):Bn}function Ev(n){let e=n.map(t=>jo(t));return n.length>0?lt(_e(e)):Bn}function vh(n){let e=[];e.push({key:"name",value:E(n.pipeName??n.name),quoted:!1}),e.push({key:"type",value:n.type.value,quoted:!1}),e.push({key:"pure",value:E(n.pure),quoted:!1}),n.isStandalone===!1&&e.push({key:"standalone",value:E(!1),quoted:!1});let t=U(f.definePipe).callFn([yt(e)],void 0,!0),i=bv(n);return{expression:t,type:i,statements:[]}}function bv(n){return new an(U(f.PipeDeclaration,[Ul(n.type.type,n.typeArgumentCount),new an(new ct(n.pipeName)),new an(new ct(n.isStandalone))]))}var Zs=(function(n){return n[n.Directive=0]="Directive",n[n.Pipe=1]="Pipe",n[n.NgModule=2]="NgModule",n})(Zs||{}),wv=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]),yv=["@media","@supports","@document","@layer","@container","@scope","@starting-style"],wu=class{shimCssText(e,t,i=""){let s=[];e=e.replace(Ov,a=>{if(a.match($v))s.push(a);else{let l=a.match(Rv);s.push((l?.join("")??"")+`
`)}return Lp}),e=this._insertDirectives(e);let r=this._scopeCssText(e,t,i),o=0;return r.replace(Vv,()=>s[o++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,t){let i=new Set,s=pa(e,r=>this._scopeLocalKeyframeDeclarations(r,t,i));return pa(s,r=>this._scopeAnimationRule(r,t,i))}_scopeLocalKeyframeDeclarations(e,t,i){return De(k({},e),{selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(s,r,o,a,l)=>(i.add(Ch(a,o)),`${r}${o}${t}_${a}${o}${l}`))})}_scopeAnimationKeyframe(e,t,i){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(s,r,o,a,l)=>(a=`${i.has(Ch(a,o))?t+"_":""}${a}`,`${r}${o}${a}${o}${l}`))}_animationDeclarationKeyframesRe=/(^|\s+|,)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g;_scopeAnimationRule(e,t,i){let s=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation\s*:\s*),*([^;]+)/g,(r,o,a)=>o+a.replace(this._animationDeclarationKeyframesRe,(l,c,p="",d,m)=>d?`${c}${this._scopeAnimationKeyframe(`${p}${d}${p}`,t,i)}`:wv.has(m)?l:`${c}${this._scopeAnimationKeyframe(m,t,i)}`));return s=s.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(r,o,a)=>`${o}${a.split(",").map(l=>this._scopeAnimationKeyframe(l,t,i)).join(",")}`),De(k({},e),{content:s})}_insertPolyfillDirectivesInCssText(e){return e.replace(Tv,function(...t){return t[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(Av,(...t)=>{let i=t[0].replace(t[1],"").replace(t[2],"");return t[4]+i})}_scopeCssText(e,t,i){let s=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeKeyframesRelatedCss(e,t),e=this._scopeSelectors(e,t,i)),e=e+`
`+s,e.trim()}_extractUnscopedRulesFromCssText(e){let t="",i;for(_h.lastIndex=0;(i=_h.exec(e))!==null;){let s=i[0].replace(i[2],"").replace(i[1],i[4]);t+=s+`

`}return t}_convertColonHost(e){return e.replace(Dv,(t,i,s)=>{if(i){let r=[],o=i.split(",").map(a=>a.trim());for(let a of o){if(!a)break;let l=ui+a.replace(dl,"")+s;r.push(l)}return r.join(",")}else return ui+s})}_convertColonHostContext(e){let t=e.length,i=0,s=0,r="";for(let o=0;o<t;o++){let a=e[o];if(a===","&&i===0){r+=this._convertColonHostContextInSelectorPart(e.slice(s,o))+",",s=o+1;continue}if(o===t-1){r+=this._convertColonHostContextInSelectorPart(e.slice(s));break}a==="("?i++:a===")"&&i--}return r}_convertColonHostContextInSelectorPart(e){return e.replace(Iv,(t,i)=>{let s=[[]],r;for(;r=Pv.exec(t);){let o=(r[1]??"").trim().split(",").map(l=>l.trim()).filter(l=>l!==""),a=s.length;Zv(s,o.length);for(let l=0;l<o.length;l++)for(let c=0;c<a;c++)s[c+l*a].push(o[l]);t=r[2]}return s.map(o=>Qv(o,t,i)).join(", ")})}_convertShadowDOMSelectors(e){return Lv.reduce((t,i)=>t.replace(i," "),e)}_scopeSelectors(e,t,i){return pa(e,s=>{let r=s.selector,o=s.content;return s.selector[0]!=="@"?r=this._scopeSelector({selector:r,scopeSelector:t,hostSelector:i,isParentSelector:!0}):yv.some(a=>s.selector.startsWith(a))?o=this._scopeSelectors(s.content,t,i):(s.selector.startsWith("@font-face")||s.selector.startsWith("@page"))&&(o=this._stripScopingSelectors(s.content)),new ko(r,o)})}_stripScopingSelectors(e){return pa(e,t=>{let i=t.selector.replace(xh," ").replace(Nc," ");return new ko(i,t.content)})}_safeSelector;_shouldScopeIndicator;_scopeSelector({selector:e,scopeSelector:t,hostSelector:i,isParentSelector:s=!1}){let r=/ ?,(?!(?:[^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\))) ?/;return e.split(r).map(o=>o.split(xh)).map(o=>{let[a,...l]=o;return[(p=>this._selectorNeedsScoping(p,t)?this._applySelectorScope({selector:p,scopeSelector:t,hostSelector:i,isParentSelector:s}):p)(a),...l].join(" ")}).join(", ")}_selectorNeedsScoping(e,t){return!this._makeScopeMatcher(t).test(e)}_makeScopeMatcher(e){let t=/\[/g,i=/\]/g;return e=e.replace(t,"\\[").replace(i,"\\]"),new RegExp("^("+e+")"+Mv,"m")}_applySimpleSelectorScope(e,t,i){if(Ps.lastIndex=0,Ps.test(e)){let s=`[${i}]`,r=e;for(;r.match(Nc);)r=r.replace(Nc,(o,a)=>a.replace(/([^:\)]*)(:*)(.*)/,(l,c,p,d)=>c+s+p+d));return r.replace(Ps,s)}return t+" "+e}_applySelectorScope({selector:e,scopeSelector:t,hostSelector:i,isParentSelector:s}){let r=/\[is=([^\]]*)\]/g;t=t.replace(r,(A,...L)=>L[0]);let o=`[${t}]`,a=A=>{let L=A.trim();if(!L)return A;if(A.includes(ui)){if(L=this._applySimpleSelectorScope(A,t,i),!A.match(Nv)){let[D,F,W,q]=L.match(/([^:]*)(:*)([\s\S]*)/);L=F+o+W+q}}else{let D=A.replace(Ps,"");if(D.length>0){let F=D.match(/([^:]*)(:*)([\s\S]*)/);F&&(L=F[1]+o+F[2]+F[3])}}return L},l=A=>{let L="",D=[],F;for(;(F=Nr.exec(A))!==null;){let W=1,q=Nr.lastIndex;for(;q<A.length;){let ie=A[q];if(q++,ie==="("){W++;continue}if(ie===")"){if(W--,W===0)break;continue}}D.push(`${F[0]}${A.slice(Nr.lastIndex,q)}`),Nr.lastIndex=q}return D.join("")===A?L=D.map(W=>{let[q]=W.match(Nr)??[],ie=W.slice(q?.length,-1);ie.includes(ui)&&(this._shouldScopeIndicator=!0);let de=this._scopeSelector({selector:ie,scopeSelector:t,hostSelector:i});return`${q}${de})`}).join(""):(this._shouldScopeIndicator=this._shouldScopeIndicator||A.includes(ui),L=this._shouldScopeIndicator?a(A):A),L};s&&(this._safeSelector=new yu(e),e=this._safeSelector.content());let c="",p=0,d,m=/( |>|\+|~(?!=))(?!([^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\)))\s*/g,_=e.includes(ui);for((s||this._shouldScopeIndicator)&&(this._shouldScopeIndicator=!_);(d=m.exec(e))!==null;){let A=d[1],L=e.slice(p,d.index);if(L.match(/__esc-ph-(\d+)__/)&&e[d.index+1]?.match(/[a-fA-F\d]/))continue;let D=l(L);c+=`${D} ${A} `,p=m.lastIndex}let b=e.substring(p);return c+=l(b),this._safeSelector.restore(c)}_insertPolyfillHostInCssText(e){return e.replace(Fv,lf).replace(Bv,dl)}},yu=class{placeholders=[];index=0;_content;constructor(e){e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g),e=e.replace(/(\\.)/g,(t,i)=>{let s=`__esc-ph-${this.index}__`;return this.placeholders.push(i),this.index++,s}),this._content=e.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(t,i,s)=>{let r=`__ph-${this.index}__`;return this.placeholders.push(s),this.index++,i+r})}restore(e){return e.replace(/__(?:ph|esc-ph)-(\d+)__/g,(t,i)=>this.placeholders[+i])}content(){return this._content}_escapeRegexMatches(e,t){return e.replace(t,(i,s)=>{let r=`__ph-${this.index}__`;return this.placeholders.push(s),this.index++,r})}},kv="(:(where|is)\\()?",Nr=/:(where|is)\(/gi,Tv=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,Av=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,_h=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,dl="-shadowcsshost",lf="-shadowcsscontext",cf="(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))",Dv=new RegExp(dl+cf+"?([^,{]*)","gim"),uf=lf+cf+"?([^{]*)",Iv=new RegExp(`${kv}(${uf})`,"gim"),Pv=new RegExp(uf,"im"),ui=dl+"-no-combinator",Nv=new RegExp(`${ui}(?![^(]*\\))`,"g"),Nc=/-shadowcsshost-no-combinator([^\s,]*)/,Lv=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],xh=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,Mv="([>\\s~+[.,{:][\\s\\S]*)?$",Ps=/-shadowcsshost/gim,Bv=/:host/gim,Fv=/:host-context/gim,Rv=/\r?\n/g,Ov=/\/\*[\s\S]*?\*\//g,$v=/\/\*\s*#\s*source(Mapping)?URL=/g,Lp="%COMMENT%",Vv=new RegExp(Lp,"g"),Lc="%BLOCK%",Hv=new RegExp(`(\\s*(?:${Lp}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),qv=new Map([["{","}"]]),pf="%COMMA_IN_PLACEHOLDER%",df="%SEMI_IN_PLACEHOLDER%",hf="%COLON_IN_PLACEHOLDER%",Uv=new RegExp(pf,"g"),jv=new RegExp(df,"g"),zv=new RegExp(hf,"g"),ko=class{selector;content;constructor(e,t){this.selector=e,this.content=t}};function pa(n,e){let t=Xv(n),i=Wv(t,qv,Lc),s=0,r=i.escapedString.replace(Hv,(...o)=>{let a=o[2],l="",c=o[4],p="";c&&c.startsWith("{"+Lc)&&(l=i.blocks[s++],c=c.substring(Lc.length+1),p="{");let d=e(new ko(a,l));return`${o[1]}${d.selector}${o[3]}${p}${d.content}${c}`});return Yv(r)}var ku=class{escapedString;blocks;constructor(e,t){this.escapedString=e,this.blocks=t}};function Wv(n,e,t){let i=[],s=[],r=0,o=0,a=-1,l,c;for(let p=0;p<n.length;p++){let d=n[p];d==="\\"?p++:d===c?(r--,r===0&&(s.push(n.substring(a,p)),i.push(t),o=p,a=-1,l=c=void 0)):d===l?r++:r===0&&e.has(d)&&(l=d,c=e.get(d),r=1,a=p+1,i.push(n.substring(o,a)))}return a!==-1?(s.push(n.substring(a)),i.push(t)):i.push(n.substring(o)),new ku(i.join(""),s)}var Gv={";":df,",":pf,":":hf};function Xv(n){let e=n,t=null;for(let i=0;i<e.length;i++){let s=e[i];if(s==="\\")i++;else if(t!==null)if(s===t)t=null;else{let r=Gv[s];r&&(e=`${e.substr(0,i)}${r}${e.substr(i+1)}`,i+=r.length-1)}else(s==="'"||s==='"')&&(t=s)}return e}function Yv(n){let e=n.replace(Uv,",");return e=e.replace(jv,";"),e=e.replace(zv,":"),e}function Ch(n,e){return e?n.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):n}function Qv(n,e,t=""){let i=ui;Ps.lastIndex=0;let s=Ps.test(e);if(n.length===0)return i+e;let r=[n.pop()||""];for(;n.length>0;){let o=r.length,a=n.pop();for(let l=0;l<o;l++){let c=r[l];r[o*2+l]=c+" "+a,r[o+l]=a+" "+c,r[l]=a+c}}return r.map(o=>s?`${t}${o}${e}`:`${t}${o}${i}${e}, ${t}${o} ${i}${e}`).join(",")}function Zv(n,e){let t=n.length;for(let i=1;i<e;i++)for(let s=0;s<t;s++)n[s+i*t]=n[s].slice(0)}var u=(function(n){return n[n.ListEnd=0]="ListEnd",n[n.Statement=1]="Statement",n[n.Variable=2]="Variable",n[n.ElementStart=3]="ElementStart",n[n.Element=4]="Element",n[n.Template=5]="Template",n[n.ElementEnd=6]="ElementEnd",n[n.ContainerStart=7]="ContainerStart",n[n.Container=8]="Container",n[n.ContainerEnd=9]="ContainerEnd",n[n.DisableBindings=10]="DisableBindings",n[n.ConditionalCreate=11]="ConditionalCreate",n[n.ConditionalBranchCreate=12]="ConditionalBranchCreate",n[n.Conditional=13]="Conditional",n[n.EnableBindings=14]="EnableBindings",n[n.Text=15]="Text",n[n.Listener=16]="Listener",n[n.InterpolateText=17]="InterpolateText",n[n.Binding=18]="Binding",n[n.Property=19]="Property",n[n.StyleProp=20]="StyleProp",n[n.ClassProp=21]="ClassProp",n[n.StyleMap=22]="StyleMap",n[n.ClassMap=23]="ClassMap",n[n.Advance=24]="Advance",n[n.Pipe=25]="Pipe",n[n.Attribute=26]="Attribute",n[n.ExtractedAttribute=27]="ExtractedAttribute",n[n.Defer=28]="Defer",n[n.DeferOn=29]="DeferOn",n[n.DeferWhen=30]="DeferWhen",n[n.I18nMessage=31]="I18nMessage",n[n.DomProperty=32]="DomProperty",n[n.Namespace=33]="Namespace",n[n.ProjectionDef=34]="ProjectionDef",n[n.Projection=35]="Projection",n[n.RepeaterCreate=36]="RepeaterCreate",n[n.Repeater=37]="Repeater",n[n.TwoWayProperty=38]="TwoWayProperty",n[n.TwoWayListener=39]="TwoWayListener",n[n.DeclareLet=40]="DeclareLet",n[n.StoreLet=41]="StoreLet",n[n.I18nStart=42]="I18nStart",n[n.I18n=43]="I18n",n[n.I18nEnd=44]="I18nEnd",n[n.I18nExpression=45]="I18nExpression",n[n.I18nApply=46]="I18nApply",n[n.IcuStart=47]="IcuStart",n[n.IcuEnd=48]="IcuEnd",n[n.IcuPlaceholder=49]="IcuPlaceholder",n[n.I18nContext=50]="I18nContext",n[n.I18nAttributes=51]="I18nAttributes",n[n.SourceLocation=52]="SourceLocation",n[n.Animation=53]="Animation",n[n.AnimationString=54]="AnimationString",n[n.AnimationBinding=55]="AnimationBinding",n[n.AnimationListener=56]="AnimationListener",n})(u||{}),j=(function(n){return n[n.LexicalRead=0]="LexicalRead",n[n.Context=1]="Context",n[n.TrackContext=2]="TrackContext",n[n.ReadVariable=3]="ReadVariable",n[n.NextContext=4]="NextContext",n[n.Reference=5]="Reference",n[n.StoreLet=6]="StoreLet",n[n.ContextLetReference=7]="ContextLetReference",n[n.GetCurrentView=8]="GetCurrentView",n[n.RestoreView=9]="RestoreView",n[n.ResetView=10]="ResetView",n[n.PureFunctionExpr=11]="PureFunctionExpr",n[n.PureFunctionParameterExpr=12]="PureFunctionParameterExpr",n[n.PipeBinding=13]="PipeBinding",n[n.PipeBindingVariadic=14]="PipeBindingVariadic",n[n.SafePropertyRead=15]="SafePropertyRead",n[n.SafeKeyedRead=16]="SafeKeyedRead",n[n.SafeInvokeFunction=17]="SafeInvokeFunction",n[n.SafeTernaryExpr=18]="SafeTernaryExpr",n[n.EmptyExpr=19]="EmptyExpr",n[n.AssignTemporaryExpr=20]="AssignTemporaryExpr",n[n.ReadTemporaryExpr=21]="ReadTemporaryExpr",n[n.SlotLiteralExpr=22]="SlotLiteralExpr",n[n.ConditionalCase=23]="ConditionalCase",n[n.ConstCollected=24]="ConstCollected",n[n.TwoWayBindingSet=25]="TwoWayBindingSet",n})(j||{}),nn=(function(n){return n[n.None=0]="None",n[n.AlwaysInline=1]="AlwaysInline",n})(nn||{}),et=(function(n){return n[n.Context=0]="Context",n[n.Identifier=1]="Identifier",n[n.SavedView=2]="SavedView",n[n.Alias=3]="Alias",n})(et||{}),Yt=(function(n){return n[n.Normal=0]="Normal",n[n.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",n})(Yt||{}),H=(function(n){return n[n.Attribute=0]="Attribute",n[n.ClassName=1]="ClassName",n[n.StyleProperty=2]="StyleProperty",n[n.Property=3]="Property",n[n.Template=4]="Template",n[n.I18n=5]="I18n",n[n.LegacyAnimation=6]="LegacyAnimation",n[n.TwoWayProperty=7]="TwoWayProperty",n[n.Animation=8]="Animation",n})(H||{}),To=(function(n){return n[n.Creation=0]="Creation",n[n.Postproccessing=1]="Postproccessing",n})(To||{}),or=(function(n){return n[n.I18nText=0]="I18nText",n[n.I18nAttribute=1]="I18nAttribute",n})(or||{}),be=(function(n){return n[n.None=0]="None",n[n.ElementTag=1]="ElementTag",n[n.TemplateTag=2]="TemplateTag",n[n.OpenTag=4]="OpenTag",n[n.CloseTag=8]="CloseTag",n[n.ExpressionIndex=16]="ExpressionIndex",n})(be||{}),mt=(function(n){return n[n.HTML=0]="HTML",n[n.SVG=1]="SVG",n[n.Math=2]="Math",n})(mt||{}),Se=(function(n){return n[n.Idle=0]="Idle",n[n.Immediate=1]="Immediate",n[n.Timer=2]="Timer",n[n.Hover=3]="Hover",n[n.Interaction=4]="Interaction",n[n.Viewport=5]="Viewport",n[n.Never=6]="Never",n})(Se||{}),qi=(function(n){return n[n.RootI18n=0]="RootI18n",n[n.Icu=1]="Icu",n[n.Attr=2]="Attr",n})(qi||{}),Nt=(function(n){return n[n.NgTemplate=0]="NgTemplate",n[n.Structural=1]="Structural",n[n.Block=2]="Block",n})(Nt||{}),mf=Symbol("ConsumesSlot"),Mp=Symbol("DependsOnSlotContext"),ar=Symbol("ConsumesVars"),Wl=Symbol("UsesVarOffset"),dn={[mf]:!0,numSlotsUsed:1},Qt={[Mp]:!0},Mt={[ar]:!0};function lr(n){return n[mf]===!0}function Ao(n){return n[Mp]===!0}function Mc(n){return n[ar]===!0}function Sh(n){return n[Wl]===!0}function pn(n){return k({kind:u.Statement,statement:n},Z)}function di(n,e,t,i){return k({kind:u.Variable,xref:n,variable:e,initializer:t,flags:i},Z)}var Z={debugListId:null,prev:null,next:null};function Jv(n,e,t){return k(k(k({kind:u.InterpolateText,target:n,interpolation:e,sourceSpan:t},Qt),Mt),Z)}var Le=class{strings;expressions;i18nPlaceholders;constructor(e,t,i){if(this.strings=e,this.expressions=t,this.i18nPlaceholders=i,i.length!==0&&i.length!==t.length)throw new Error(`Expected ${t.length} placeholders to match interpolation expression count, but got ${i.length}`)}};function rs(n,e,t,i,s,r,o,a,l,c,p){return k({kind:u.Binding,bindingKind:e,target:n,name:t,expression:i,unit:s,securityContext:r,isTextAttribute:o,isStructuralTemplateAttribute:a,templateKind:l,i18nContext:null,i18nMessage:c,sourceSpan:p},Z)}function Kv(n,e,t,i,s,r,o,a,l,c){return k(k(k({kind:u.Property,target:n,name:e,expression:t,bindingKind:i,securityContext:s,sanitizer:null,isStructuralTemplateAttribute:r,templateKind:o,i18nContext:a,i18nMessage:l,sourceSpan:c},Qt),Mt),Z)}function e_(n,e,t,i,s,r,o,a,l){return k(k(k({kind:u.TwoWayProperty,target:n,name:e,expression:t,securityContext:i,sanitizer:null,isStructuralTemplateAttribute:s,templateKind:r,i18nContext:o,i18nMessage:a,sourceSpan:l},Qt),Mt),Z)}function t_(n,e,t,i,s){return k(k(k({kind:u.StyleProp,target:n,name:e,expression:t,unit:i,sourceSpan:s},Qt),Mt),Z)}function n_(n,e,t,i){return k(k(k({kind:u.ClassProp,target:n,name:e,expression:t,sourceSpan:i},Qt),Mt),Z)}function i_(n,e,t){return k(k(k({kind:u.StyleMap,target:n,expression:e,sourceSpan:t},Qt),Mt),Z)}function s_(n,e,t){return k(k(k({kind:u.ClassMap,target:n,expression:e,sourceSpan:t},Qt),Mt),Z)}function Eh(n,e,t,i,s,r,o,a,l,c){return k(k(k({kind:u.Attribute,target:n,namespace:e,name:t,expression:i,securityContext:s,sanitizer:null,isTextAttribute:r,isStructuralTemplateAttribute:o,templateKind:a,i18nContext:null,i18nMessage:l,sourceSpan:c},Qt),Mt),Z)}function r_(n,e){return k({kind:u.Advance,delta:n,sourceSpan:e},Z)}function ff(n,e,t,i){return k(k(k({kind:u.Conditional,target:n,test:e,conditions:t,processed:null,sourceSpan:i,contextValue:null},Z),Qt),Mt)}function o_(n,e,t,i){return k(k({kind:u.Repeater,target:n,targetSlot:e,collection:t,sourceSpan:i},Z),Qt)}function bh(n,e,t,i,s,r,o){return k({kind:u.AnimationBinding,name:n,target:e,animationKind:t,expression:i,i18nMessage:null,securityContext:s,sanitizer:null,sourceSpan:r,animationBindingKind:o},Z)}function a_(n,e,t,i){return k(k(k({kind:u.DeferWhen,target:n,expr:e,modifier:t,sourceSpan:i},Z),Qt),Mt)}function gf(n,e,t,i,s,r,o,a,l,c,p){return k(k(k({kind:u.I18nExpression,context:n,target:e,i18nOwner:t,handle:i,expression:s,icuPlaceholder:r,i18nPlaceholder:o,resolutionTime:a,usage:l,name:c,sourceSpan:p},Z),Mt),Qt)}function l_(n,e,t){return k({kind:u.I18nApply,owner:n,handle:e,sourceSpan:t},Z)}function c_(n,e,t,i){return k(k(k({kind:u.StoreLet,target:n,declaredName:e,value:t,sourceSpan:i},Qt),Mt),Z)}function Hn(n){return n instanceof Ee}var Ee=class extends xe{constructor(e=null){super(null,e)}},st=class n extends Ee{name;kind=j.LexicalRead;constructor(e){super(),this.name=e}visitExpression(e,t){}isEquivalent(e){return this.name===e.name}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.name)}},hl=class n extends Ee{target;targetSlot;offset;kind=j.Reference;constructor(e,t,i){super(),this.target=e,this.targetSlot=t,this.offset=i}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.target,this.targetSlot,this.offset)}},Do=class n extends Ee{target;value;sourceSpan;kind=j.StoreLet;[ar]=!0;[Mp]=!0;constructor(e,t,i){super(),this.target=e,this.value=t,this.sourceSpan=i}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target&&e.value.isEquivalent(this.value)}isConstant(){return!1}transformInternalExpressions(e,t){this.value=V(this.value,e,t)}clone(){return new n(this.target,this.value,this.sourceSpan)}},Io=class n extends Ee{target;targetSlot;kind=j.ContextLetReference;constructor(e,t){super(),this.target=e,this.targetSlot=t}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.target,this.targetSlot)}},Ei=class n extends Ee{view;kind=j.Context;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.view)}},Tu=class n extends Ee{view;kind=j.TrackContext;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.view)}},ml=class n extends Ee{kind=j.NextContext;steps=1;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof n&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new n;return e.steps=this.steps,e}},Au=class n extends Ee{kind=j.GetCurrentView;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof n}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n}},fl=class n extends Ee{view;kind=j.RestoreView;constructor(e){super(),this.view=e}visitExpression(e,t){typeof this.view!="number"&&this.view.visitExpression(e,t)}isEquivalent(e){return!(e instanceof n)||typeof e.view!=typeof this.view?!1:typeof this.view=="number"?this.view===e.view:this.view.isEquivalent(e.view)}isConstant(){return!1}transformInternalExpressions(e,t){typeof this.view!="number"&&(this.view=V(this.view,e,t))}clone(){return new n(this.view instanceof xe?this.view.clone():this.view)}},Du=class n extends Ee{expr;kind=j.ResetView;constructor(e){super(),this.expr=e}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=V(this.expr,e,t)}clone(){return new n(this.expr.clone())}},gl=class n extends Ee{target;value;kind=j.TwoWayBindingSet;constructor(e,t){super(),this.target=e,this.value=t}visitExpression(e,t){this.target.visitExpression(e,t),this.value.visitExpression(e,t)}isEquivalent(e){return this.target.isEquivalent(e.target)&&this.value.isEquivalent(e.value)}isConstant(){return!1}transformInternalExpressions(e,t){this.target=V(this.target,e,t),this.value=V(this.value,e,t)}clone(){return new n(this.target,this.value)}},Kn=class n extends Ee{xref;kind=j.ReadVariable;name=null;constructor(e){super(),this.xref=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new n(this.xref);return e.name=this.name,e}},os=class n extends Ee{kind=j.PureFunctionExpr;[ar]=!0;[Wl]=!0;varOffset=null;body;args;fn=null;constructor(e,t){super(),this.body=e,this.args=t}visitExpression(e,t){this.body?.visitExpression(e,t);for(let i of this.args)i.visitExpression(e,t)}isEquivalent(e){return!(e instanceof n)||e.args.length!==this.args.length?!1:e.body!==null&&this.body!==null&&e.body.isEquivalent(this.body)&&e.args.every((t,i)=>t.isEquivalent(this.args[i]))}isConstant(){return!1}transformInternalExpressions(e,t){this.body!==null?this.body=V(this.body,e,t|ge.InChildOperation):this.fn!==null&&(this.fn=V(this.fn,e,t));for(let i=0;i<this.args.length;i++)this.args[i]=V(this.args[i],e,t)}clone(){let e=new n(this.body?.clone()??null,this.args.map(t=>t.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}},Js=class n extends Ee{index;kind=j.PureFunctionParameterExpr;constructor(e){super(),this.index=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new n(this.index)}},as=class n extends Ee{target;targetSlot;name;args;kind=j.PipeBinding;[ar]=!0;[Wl]=!0;varOffset=null;constructor(e,t,i,s){super(),this.target=e,this.targetSlot=t,this.name=i,this.args=s}visitExpression(e,t){for(let i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){for(let i=0;i<this.args.length;i++)this.args[i]=V(this.args[i],e,t)}clone(){let e=new n(this.target,this.targetSlot,this.name,this.args.map(t=>t.clone()));return e.varOffset=this.varOffset,e}},Po=class n extends Ee{target;targetSlot;name;args;numArgs;kind=j.PipeBindingVariadic;[ar]=!0;[Wl]=!0;varOffset=null;constructor(e,t,i,s,r){super(),this.target=e,this.targetSlot=t,this.name=i,this.args=s,this.numArgs=r}visitExpression(e,t){this.args.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.args=V(this.args,e,t)}clone(){let e=new n(this.target,this.targetSlot,this.name,this.args.clone(),this.numArgs);return e.varOffset=this.varOffset,e}},Ks=class n extends Ee{receiver;name;kind=j.SafePropertyRead;constructor(e,t){super(),this.receiver=e,this.name=t}get index(){return this.name}visitExpression(e,t){this.receiver.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=V(this.receiver,e,t)}clone(){return new n(this.receiver.clone(),this.name)}},er=class n extends Ee{receiver;index;kind=j.SafeKeyedRead;constructor(e,t,i){super(i),this.receiver=e,this.index=t}visitExpression(e,t){this.receiver.visitExpression(e,t),this.index.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=V(this.receiver,e,t),this.index=V(this.index,e,t)}clone(){return new n(this.receiver.clone(),this.index.clone(),this.sourceSpan)}},ls=class n extends Ee{receiver;args;kind=j.SafeInvokeFunction;constructor(e,t){super(),this.receiver=e,this.args=t}visitExpression(e,t){this.receiver.visitExpression(e,t);for(let i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=V(this.receiver,e,t);for(let i=0;i<this.args.length;i++)this.args[i]=V(this.args[i],e,t)}clone(){return new n(this.receiver.clone(),this.args.map(e=>e.clone()))}},tr=class n extends Ee{guard;expr;kind=j.SafeTernaryExpr;constructor(e,t){super(),this.guard=e,this.expr=t}visitExpression(e,t){this.guard.visitExpression(e,t),this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.guard=V(this.guard,e,t),this.expr=V(this.expr,e,t)}clone(){return new n(this.guard.clone(),this.expr.clone())}},No=class n extends Ee{kind=j.EmptyExpr;visitExpression(e,t){}isEquivalent(e){return e instanceof n}isConstant(){return!0}clone(){return new n}transformInternalExpressions(){}},qn=class n extends Ee{expr;xref;kind=j.AssignTemporaryExpr;name=null;constructor(e,t){super(),this.expr=e,this.xref=t}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=V(this.expr,e,t)}clone(){let e=new n(this.expr.clone(),this.xref);return e.name=this.name,e}},bi=class n extends Ee{xref;kind=j.ReadTemporaryExpr;name=null;constructor(e){super(),this.xref=e}visitExpression(e,t){}isEquivalent(){return this.xref===this.xref}isConstant(){return!1}transformInternalExpressions(e,t){}clone(){let e=new n(this.xref);return e.name=this.name,e}},vl=class n extends Ee{slot;kind=j.SlotLiteralExpr;constructor(e){super(),this.slot=e}visitExpression(e,t){}isEquivalent(e){return e instanceof n&&e.slot===this.slot}isConstant(){return!0}clone(){return new n(this.slot)}transformInternalExpressions(){}},_l=class n extends Ee{expr;target;targetSlot;alias;kind=j.ConditionalCase;constructor(e,t,i,s=null){super(),this.expr=e,this.target=t,this.targetSlot=i,this.alias=s}visitExpression(e,t){this.expr!==null&&this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&e.expr===this.expr}isConstant(){return!0}clone(){return new n(this.expr,this.target,this.targetSlot)}transformInternalExpressions(e,t){this.expr!==null&&(this.expr=V(this.expr,e,t))}},Lo=class n extends Ee{expr;kind=j.ConstCollected;constructor(e){super(),this.expr=e}transformInternalExpressions(e,t){this.expr=e(this.expr,t)}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n?this.expr.isEquivalent(e.expr):!1}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr)}};function nt(n,e){je(n,(t,i)=>(e(t,i),t),ge.None)}var ge=(function(n){return n[n.None=0]="None",n[n.InChildOperation=1]="InChildOperation",n})(ge||{});function Bc(n,e,t){for(let i=0;i<n.expressions.length;i++)n.expressions[i]=V(n.expressions[i],e,t)}function je(n,e,t){switch(n.kind){case u.StyleProp:case u.StyleMap:case u.ClassProp:case u.ClassMap:case u.AnimationString:case u.AnimationBinding:case u.Binding:n.expression instanceof Le?Bc(n.expression,e,t):n.expression=V(n.expression,e,t);break;case u.Property:case u.DomProperty:case u.Attribute:n.expression instanceof Le?Bc(n.expression,e,t):n.expression=V(n.expression,e,t),n.sanitizer=n.sanitizer&&V(n.sanitizer,e,t);break;case u.TwoWayProperty:n.expression=V(n.expression,e,t),n.sanitizer=n.sanitizer&&V(n.sanitizer,e,t);break;case u.I18nExpression:n.expression=V(n.expression,e,t);break;case u.InterpolateText:Bc(n.interpolation,e,t);break;case u.Statement:xl(n.statement,e,t);break;case u.Variable:n.initializer=V(n.initializer,e,t);break;case u.Conditional:for(let i of n.conditions)i.expr!==null&&(i.expr=V(i.expr,e,t));n.processed!==null&&(n.processed=V(n.processed,e,t)),n.contextValue!==null&&(n.contextValue=V(n.contextValue,e,t));break;case u.Animation:case u.AnimationListener:case u.Listener:case u.TwoWayListener:for(let i of n.handlerOps)je(i,e,t|ge.InChildOperation);break;case u.ExtractedAttribute:n.expression=n.expression&&V(n.expression,e,t),n.trustedValueFn=n.trustedValueFn&&V(n.trustedValueFn,e,t);break;case u.RepeaterCreate:if(n.trackByOps===null)n.track=V(n.track,e,t);else for(let i of n.trackByOps)je(i,e,t|ge.InChildOperation);n.trackByFn!==null&&(n.trackByFn=V(n.trackByFn,e,t));break;case u.Repeater:n.collection=V(n.collection,e,t);break;case u.Defer:n.loadingConfig!==null&&(n.loadingConfig=V(n.loadingConfig,e,t)),n.placeholderConfig!==null&&(n.placeholderConfig=V(n.placeholderConfig,e,t)),n.resolverFn!==null&&(n.resolverFn=V(n.resolverFn,e,t));break;case u.I18nMessage:for(let[i,s]of n.params)n.params.set(i,V(s,e,t));for(let[i,s]of n.postprocessingParams)n.postprocessingParams.set(i,V(s,e,t));break;case u.DeferWhen:n.expr=V(n.expr,e,t);break;case u.StoreLet:n.value=V(n.value,e,t);break;case u.Advance:case u.Container:case u.ContainerEnd:case u.ContainerStart:case u.DeferOn:case u.DisableBindings:case u.Element:case u.ElementEnd:case u.ElementStart:case u.EnableBindings:case u.I18n:case u.I18nApply:case u.I18nContext:case u.I18nEnd:case u.I18nStart:case u.IcuEnd:case u.IcuStart:case u.Namespace:case u.Pipe:case u.Projection:case u.ProjectionDef:case u.Template:case u.Text:case u.I18nAttributes:case u.IcuPlaceholder:case u.DeclareLet:case u.SourceLocation:case u.ConditionalCreate:case u.ConditionalBranchCreate:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${u[n.kind]}`)}}function V(n,e,t){if(n instanceof Ee)n.transformInternalExpressions(e,t);else if(n instanceof pe)n.lhs=V(n.lhs,e,t),n.rhs=V(n.rhs,e,t);else if(n instanceof Ji)n.expr=V(n.expr,e,t);else if(n instanceof Xt)n.receiver=V(n.receiver,e,t);else if(n instanceof ei)n.receiver=V(n.receiver,e,t),n.index=V(n.index,e,t);else if(n instanceof Lt){n.fn=V(n.fn,e,t);for(let i=0;i<n.args.length;i++)n.args[i]=V(n.args[i],e,t)}else if(n instanceof Sn)for(let i=0;i<n.entries.length;i++)n.entries[i]=V(n.entries[i],e,t);else if(n instanceof Rn)for(let i=0;i<n.entries.length;i++)n.entries[i].value=V(n.entries[i].value,e,t);else if(n instanceof Fn)n.condition=V(n.condition,e,t),n.trueCase=V(n.trueCase,e,t),n.falseCase!==null&&(n.falseCase=V(n.falseCase,e,t));else if(n instanceof Vs)n.expr=V(n.expr,e,t);else if(n instanceof Ba)n.expr=V(n.expr,e,t);else if(n instanceof Ra)for(let i=0;i<n.expressions.length;i++)n.expressions[i]=V(n.expressions[i],e,t);else if(n instanceof Jr)n.condition=V(n.condition,e,t);else if(n instanceof Yr)n.tag=V(n.tag,e,t),n.template.expressions=n.template.expressions.map(i=>V(i,e,t));else if(n instanceof Zi)if(Array.isArray(n.body))for(let i=0;i<n.body.length;i++)xl(n.body[i],e,t);else n.body=V(n.body,e,t);else if(!(n instanceof le)){if(n instanceof Zr)for(let i=0;i<n.expressions.length;i++)n.expressions[i]=V(n.expressions[i],e,t);else if(n instanceof Cn)n.expr=V(n.expr,e,t);else if(!(n instanceof ln||n instanceof Qi||n instanceof ct))throw new Error(`Unhandled expression kind: ${n.constructor.name}`)}return e(n,t)}function xl(n,e,t){if(n instanceof cn)n.expr=V(n.expr,e,t);else if(n instanceof at)n.value=V(n.value,e,t);else if(n instanceof Ze)n.value!==void 0&&(n.value=V(n.value,e,t));else if(n instanceof $a){n.condition=V(n.condition,e,t);for(let i of n.trueCase)xl(i,e,t);for(let i of n.falseCase)xl(i,e,t)}else throw new Error(`Unhandled statement kind: ${n.constructor.name}`)}function vf(n){return n instanceof ct&&typeof n.value=="string"}var T=(()=>{class n{static nextListId=0;debugListId=n.nextListId++;head={kind:u.ListEnd,next:null,prev:null,debugListId:this.debugListId};tail={kind:u.ListEnd,next:null,prev:null,debugListId:this.debugListId};constructor(){this.head.next=this.tail,this.tail.prev=this.head}push(t){if(Array.isArray(t)){for(let s of t)this.push(s);return}n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=this.debugListId;let i=this.tail.prev;t.prev=i,i.next=t,t.next=this.tail,this.tail.prev=t}prepend(t){if(t.length===0)return;for(let r of t)n.assertIsNotEnd(r),n.assertIsUnowned(r),r.debugListId=this.debugListId;let i=this.head.next,s=this.head;for(let r of t)s.next=r,r.prev=s,s=r;s.next=i,i.prev=s}*[Symbol.iterator](){let t=this.head.next;for(;t!==this.tail;){n.assertIsOwned(t,this.debugListId);let i=t.next;yield t,t=i}}*reversed(){let t=this.tail.prev;for(;t!==this.head;){n.assertIsOwned(t,this.debugListId);let i=t.prev;yield t,t=i}}static replace(t,i){n.assertIsNotEnd(t),n.assertIsNotEnd(i),n.assertIsOwned(t),n.assertIsUnowned(i),i.debugListId=t.debugListId,t.prev!==null&&(t.prev.next=i,i.prev=t.prev),t.next!==null&&(t.next.prev=i,i.next=t.next),t.debugListId=null,t.prev=null,t.next=null}static replaceWithMany(t,i){if(i.length===0){n.remove(t);return}n.assertIsNotEnd(t),n.assertIsOwned(t);let s=t.debugListId;t.debugListId=null;for(let p of i)n.assertIsNotEnd(p),n.assertIsUnowned(p);let{prev:r,next:o}=t;t.prev=null,t.next=null;let a=r;for(let p of i)n.assertIsUnowned(p),p.debugListId=s,a.next=p,p.prev=a,p.next=null,a=p;let l=i[0],c=a;r!==null&&(r.next=l,l.prev=r),o!==null&&(o.prev=c,c.next=o)}static remove(t){n.assertIsNotEnd(t),n.assertIsOwned(t),t.prev.next=t.next,t.next.prev=t.prev,t.debugListId=null,t.prev=null,t.next=null}static insertBefore(t,i){if(Array.isArray(t)){for(let s of t)n.insertBefore(s,i);return}if(n.assertIsOwned(i),i.prev===null)throw new Error("AssertionError: illegal operation on list start");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,t.prev=null,i.prev.next=t,t.prev=i.prev,t.next=i,i.prev=t}static insertAfter(t,i){if(n.assertIsOwned(i),i.next===null)throw new Error("AssertionError: illegal operation on list end");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,i.next.prev=t,t.next=i.next,t.prev=i,i.next=t}static assertIsUnowned(t){if(t.debugListId!==null)throw new Error(`AssertionError: illegal operation on owned node: ${u[t.kind]}`)}static assertIsOwned(t,i){if(t.debugListId===null)throw new Error(`AssertionError: illegal operation on unowned node: ${u[t.kind]}`);if(i!==void 0&&t.debugListId!==i)throw new Error(`AssertionError: node belongs to the wrong list (expected ${i}, actual ${t.debugListId})`)}static assertIsNotEnd(t){if(t.kind===u.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return n})(),ut=class{slot=null},u_=new Set([u.Element,u.ElementStart,u.Container,u.ContainerStart,u.Template,u.RepeaterCreate,u.ConditionalCreate,u.ConditionalBranchCreate]);function ti(n){return u_.has(n.kind)}function p_(n,e,t,i,s,r){return k(k({kind:u.ElementStart,xref:e,tag:n,handle:new ut,attributes:null,localRefs:[],nonBindable:!1,namespace:t,i18nPlaceholder:i,startSourceSpan:s,wholeSourceSpan:r},dn),Z)}function _f(n,e,t,i,s,r,o,a){return k(k({kind:u.Template,xref:n,templateKind:e,attributes:null,tag:t,handle:new ut,functionNameSuffix:i,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:s,i18nPlaceholder:r,startSourceSpan:o,wholeSourceSpan:a},dn),Z)}function xf(n,e,t,i,s,r,o,a){return k(k({kind:u.ConditionalCreate,xref:n,templateKind:e,attributes:null,tag:t,handle:new ut,functionNameSuffix:i,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:s,i18nPlaceholder:r,startSourceSpan:o,wholeSourceSpan:a},dn),Z)}function Cf(n,e,t,i,s,r,o,a){return k(k({kind:u.ConditionalBranchCreate,xref:n,templateKind:e,attributes:null,tag:t,handle:new ut,functionNameSuffix:i,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:s,i18nPlaceholder:r,startSourceSpan:o,wholeSourceSpan:a},dn),Z)}function d_(n,e,t,i,s,r,o,a,l,c){return De(k(k(k({kind:u.RepeaterCreate,attributes:null,xref:n,handle:new ut,emptyView:e,track:i,trackByFn:null,trackByOps:null,tag:t,emptyTag:r,emptyAttributes:null,functionNameSuffix:"For",namespace:mt.HTML,nonBindable:!1,localRefs:[],decls:null,vars:null,varNames:s,usesComponentInstance:!1,i18nPlaceholder:o,emptyI18nPlaceholder:a,startSourceSpan:l,wholeSourceSpan:c},dn),Z),Mt),{numSlotsUsed:e===null?2:3})}function h_(n,e){return k({kind:u.ElementEnd,xref:n,sourceSpan:e},Z)}function m_(n){return k({kind:u.DisableBindings,xref:n},Z)}function f_(n){return k({kind:u.EnableBindings,xref:n},Z)}function Sf(n,e,t,i){return k(k({kind:u.Text,xref:n,handle:new ut,initialValue:e,icuPlaceholder:t,sourceSpan:i},dn),Z)}function g_(n,e,t,i,s,r){return k({kind:u.AnimationString,name:n,target:e,animationKind:t,expression:i,i18nMessage:null,securityContext:s,sanitizer:null,sourceSpan:r},Z)}function v_(n,e,t,i,s,r){let o=new T;return o.push(i),k({kind:u.Animation,name:n,target:e,animationKind:t,handlerOps:o,handlerFnName:null,i18nMessage:null,securityContext:s,sanitizer:null,sourceSpan:r},Z)}function Bp(n,e,t,i,s,r,o,a,l){let c=new T;return c.push(s),k({kind:u.Listener,target:n,targetSlot:e,tag:i,hostListener:a,name:t,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,isLegacyAnimationListener:r!==null,legacyAnimationPhase:r,eventTarget:o,sourceSpan:l},Z)}function Ef(n,e,t,i,s,r,o,a,l){let c=new T;return c.push(s),k({kind:u.AnimationListener,target:n,targetSlot:e,tag:i,hostListener:a,name:t,animationKind:r,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,eventTarget:o,sourceSpan:l},Z)}function bf(n,e,t,i,s,r){let o=new T;return o.push(s),k({kind:u.TwoWayListener,target:n,targetSlot:e,tag:i,name:t,handlerOps:o,handlerFnName:null,sourceSpan:r},Z)}function wf(n,e,t){return k(k({kind:u.Pipe,xref:n,handle:e,name:t},Z),dn)}function __(n){return k({kind:u.Namespace,active:n},Z)}function x_(n){return k({kind:u.ProjectionDef,def:n},Z)}function C_(n,e,t,i,s){return De(k(k({kind:u.Projection,xref:n,handle:new ut,selector:e,i18nPlaceholder:t,fallbackView:i,projectionSlotIndex:0,attributes:null,localRefs:[],sourceSpan:s},Z),dn),{numSlotsUsed:i===null?1:2})}function sn(n,e,t,i,s,r,o,a){return k({kind:u.ExtractedAttribute,target:n,bindingKind:e,namespace:t,name:i,expression:s,i18nContext:r,i18nMessage:o,securityContext:a,trustedValueFn:null},Z)}function S_(n,e,t,i,s,r){return De(k(k({kind:u.Defer,xref:n,handle:new ut,mainView:e,mainSlot:t,loadingView:null,loadingSlot:null,loadingConfig:null,loadingMinimumTime:null,loadingAfterTime:null,placeholderView:null,placeholderSlot:null,placeholderConfig:null,placeholderMinimumTime:null,errorView:null,errorSlot:null,ownResolverFn:i,resolverFn:s,flags:null,sourceSpan:r},Z),dn),{numSlotsUsed:2})}function ci(n,e,t,i){return k({kind:u.DeferOn,defer:n,trigger:e,modifier:t,sourceSpan:i},Z)}function E_(n,e,t){return k(k({kind:u.DeclareLet,xref:n,declaredName:e,sourceSpan:t,handle:new ut},dn),Z)}function b_(n,e,t,i,s,r,o,a){return k({kind:u.I18nMessage,xref:n,i18nContext:e,i18nBlock:t,message:i,messagePlaceholder:s,params:r,postprocessingParams:o,needsPostprocessing:a,subMessages:[]},Z)}function Gl(n,e,t,i){return k(k({kind:u.I18nStart,xref:n,handle:new ut,root:t??n,message:e,messageIndex:null,subTemplateIndex:null,context:null,sourceSpan:i},Z),dn)}function Xl(n,e){return k({kind:u.I18nEnd,xref:n,sourceSpan:e},Z)}function w_(n,e,t,i){return k({kind:u.IcuStart,xref:n,message:e,messagePlaceholder:t,context:null,sourceSpan:i},Z)}function y_(n){return k({kind:u.IcuEnd,xref:n},Z)}function k_(n,e,t){return k({kind:u.IcuPlaceholder,xref:n,name:e,strings:t,expressionPlaceholders:[]},Z)}function Fc(n,e,t,i,s){if(t===null&&n!==qi.Attr)throw new Error("AssertionError: i18nBlock must be provided for non-attribute contexts.");return k({kind:u.I18nContext,contextKind:n,xref:e,i18nBlock:t,message:i,sourceSpan:s,params:new Map,postprocessingParams:new Map},Z)}function yf(n,e,t){return k(k({kind:u.I18nAttributes,xref:n,handle:e,target:t,i18nAttributesConfig:null},Z),dn)}function T_(n,e){return k({kind:u.SourceLocation,templatePath:n,locations:e},Z)}function A_(n,e,t,i,s,r){return k(k({kind:u.DomProperty,name:n,expression:e,bindingKind:t,i18nContext:i,securityContext:s,sanitizer:null,sourceSpan:r},Mt),Z)}var kf="CTX_REF_MARKER",B=(function(n){return n[n.Tmpl=0]="Tmpl",n[n.Host=1]="Host",n[n.Both=2]="Both",n})(B||{}),Dt=(function(n){return n[n.Full=0]="Full",n[n.DomOnly=1]="DomOnly",n})(Dt||{}),Cl=class{componentName;pool;compatibility;mode;constructor(e,t,i,s){this.componentName=e,this.pool=t,this.compatibility=i,this.mode=s}kind=B.Both;allocateXrefId(){return this.nextXrefId++}nextXrefId=0},Mo=class extends Cl{relativeContextFilePath;i18nUseExternalIds;deferMeta;allDeferrableDepsFn;relativeTemplatePath;enableDebugLocations;constructor(e,t,i,s,r,o,a,l,c,p){super(e,t,i,s),this.relativeContextFilePath=r,this.i18nUseExternalIds=o,this.deferMeta=a,this.allDeferrableDepsFn=l,this.relativeTemplatePath=c,this.enableDebugLocations=p,this.root=new rn(this,this.allocateXrefId(),null),this.views.set(this.root.xref,this.root)}kind=B.Tmpl;fnSuffix="Template";root;views=new Map;contentSelectors=null;allocateView(e){let t=new rn(this,this.allocateXrefId(),e);return this.views.set(t.xref,t),t}get units(){return this.views.values()}addConst(e,t){for(let s=0;s<this.consts.length;s++)if(this.consts[s].isEquivalent(e))return s;let i=this.consts.length;return this.consts.push(e),t&&this.constsInitializers.push(...t),i}consts=[];constsInitializers=[]},Sl=class{xref;constructor(e){this.xref=e}create=new T;update=new T;fnName=null;vars=null;*ops(){for(let e of this.create)if(yield e,e.kind===u.Listener||e.kind===u.Animation||e.kind===u.AnimationListener||e.kind===u.TwoWayListener)for(let t of e.handlerOps)yield t;else if(e.kind===u.RepeaterCreate&&e.trackByOps!==null)for(let t of e.trackByOps)yield t;for(let e of this.update)yield e}},rn=class extends Sl{job;parent;constructor(e,t,i){super(t),this.job=e,this.parent=i}contextVariables=new Map;aliases=new Set;decls=null},El=class extends Cl{constructor(e,t,i,s){super(e,t,i,s),this.root=new Iu(this)}kind=B.Host;fnSuffix="HostBindings";root;get units(){return[this.root]}},Iu=class extends Sl{job;constructor(e){super(0),this.job=e}attributes=null};function D_(n){for(let e of n.units)for(let t of e.ops())je(t,I_,ge.None)}function I_(n){if(n instanceof Lt&&n.fn instanceof st&&n.fn.name==="$any"){if(n.args.length!==1)throw new Error("The $any builtin function expects exactly one argument.");return n.args[0]}return n}function P_(n){let e=new Map;for(let t of n.units)for(let i of t.create)i.kind===u.I18nContext&&e.set(i.xref,i);for(let t of n.units)for(let i of t.update)i.kind===u.I18nExpression&&N_(e,i)&&T.insertAfter(l_(i.i18nOwner,i.handle,null),i)}function N_(n,e){if(e.next?.kind!==u.I18nExpression)return!0;let t=n.get(e.context),i=n.get(e.next.context);if(t===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the I18nExpressionOp's context");if(i===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the next I18nExpressionOp's context");return t.i18nBlock!==null?t.i18nBlock!==i.i18nBlock:e.i18nOwner!==e.next.i18nOwner}function L_(n){for(let e of n.units){let t=e.update.head,i=[],s=null;for(let r of e.create){if(r.kind===u.I18nStart)s={blockXref:r.xref,lastSlotConsumer:r.xref};else if(r.kind===u.I18nEnd){for(let o of i)o.target=s.lastSlotConsumer,T.insertBefore(o,t);i.length=0,s=null}if(lr(r))for(s!==null&&(s.lastSlotConsumer=r.xref);t.next!==null;){if(s!==null&&t.kind===u.I18nExpression&&t.usage===or.I18nText&&t.i18nOwner===s.blockXref){let a=t;t=t.next,T.remove(a),i.push(a);continue}let o=!1;if(Ao(t)&&t.target!==r.xref?o=!0:(t.kind===u.Statement||t.kind===u.Variable)&&nt(t,a=>{!o&&Ao(a)&&a.target!==r.xref&&(o=!0)}),o)break;t=t.next}}}}function M_(n){if(!(!n.enableDebugLocations||n.relativeTemplatePath===null))for(let e of n.units){let t=[];for(let i of e.create)if(i.kind===u.ElementStart||i.kind===u.Element){let s=i.startSourceSpan.start;t.push({targetSlot:i.handle,offset:s.offset,line:s.line,column:s.col})}t.length>0&&e.create.push(T_(n.relativeTemplatePath,t))}}function Fp(n){let e=new Map;for(let t of n.create)lr(t)&&(e.set(t.xref,t),t.kind===u.RepeaterCreate&&t.emptyView!==null&&e.set(t.emptyView,t));return e}function B_(n){for(let e of n.units){let t=Fp(e);for(let i of e.ops())switch(i.kind){case u.Attribute:F_(e,i,t);break;case u.Property:if(i.bindingKind!==H.LegacyAnimation&&i.bindingKind!==H.Animation){let s;i.i18nMessage!==null&&i.templateKind===null?s=H.I18n:i.isStructuralTemplateAttribute?s=H.Template:s=H.Property,T.insertBefore(sn(i.target,s,null,i.name,null,null,null,i.securityContext),As(t,i.target))}break;case u.TwoWayProperty:T.insertBefore(sn(i.target,H.TwoWayProperty,null,i.name,null,null,null,i.securityContext),As(t,i.target));break;case u.StyleProp:case u.ClassProp:e.job.compatibility===Yt.TemplateDefinitionBuilder&&i.expression instanceof No&&T.insertBefore(sn(i.target,H.Property,null,i.name,null,null,null,ke.STYLE),As(t,i.target));break;case u.Listener:if(!i.isLegacyAnimationListener){let s=sn(i.target,H.Property,null,i.name,null,null,null,ke.NONE);if(n.kind===B.Host){if(n.compatibility)break;e.create.push(s)}else T.insertBefore(s,As(t,i.target))}break;case u.TwoWayListener:if(n.kind!==B.Host){let s=sn(i.target,H.Property,null,i.name,null,null,null,ke.NONE);T.insertBefore(s,As(t,i.target))}break}}}function As(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function F_(n,e,t){if(e.expression instanceof Le)return;let i=e.isTextAttribute||e.expression.isConstant();if(n.job.compatibility===Yt.TemplateDefinitionBuilder&&(i&&=e.isTextAttribute),i){let s=sn(e.target,e.isStructuralTemplateAttribute?H.Template:H.Attribute,e.namespace,e.name,e.expression,e.i18nContext,e.i18nMessage,e.securityContext);if(n.job.kind===B.Host)n.create.push(s);else{let r=As(t,e.target);T.insertBefore(s,r)}T.remove(e)}}var wh="aria-";function Tf(n){return n.startsWith(wh)&&n.length>wh.length}function R_(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function O_(n){let e=new Map;for(let t of n.units)for(let i of t.create)ti(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.ops())if(i.kind===u.Binding)switch(i.bindingKind){case H.Attribute:if(i.name==="ngNonBindable"){T.remove(i);let s=R_(e,i.target);s.nonBindable=!0}else if(i.name.startsWith("animate."))T.replace(i,bh(i.name,i.target,i.name==="animate.enter"?"enter":"leave",i.expression,i.securityContext,i.sourceSpan,0));else{let[s,r]=bn(i.name);T.replace(i,Eh(i.target,s,r,i.expression,i.securityContext,i.isTextAttribute,i.isStructuralTemplateAttribute,i.templateKind,i.i18nMessage,i.sourceSpan))}break;case H.Animation:T.replace(i,bh(i.name,i.target,i.name==="animate.enter"?"enter":"leave",i.expression,i.securityContext,i.sourceSpan,1));break;case H.Property:case H.LegacyAnimation:n.mode===Dt.DomOnly&&Tf(i.name)?T.replace(i,Eh(i.target,null,i.name,i.expression,i.securityContext,!1,i.isStructuralTemplateAttribute,i.templateKind,i.i18nMessage,i.sourceSpan)):n.kind===B.Host?T.replace(i,A_(i.name,i.expression,i.bindingKind,i.i18nContext,i.securityContext,i.sourceSpan)):T.replace(i,Kv(i.target,i.name,i.expression,i.bindingKind,i.securityContext,i.isStructuralTemplateAttribute,i.templateKind,i.i18nContext,i.i18nMessage,i.sourceSpan));break;case H.TwoWayProperty:if(!(i.expression instanceof xe))throw new Error(`Expected value of two-way property binding "${i.name}" to be an expression`);T.replace(i,e_(i.target,i.name,i.expression,i.securityContext,i.isStructuralTemplateAttribute,i.templateKind,i.i18nContext,i.i18nMessage,i.sourceSpan));break;case H.I18n:case H.ClassName:case H.StyleProperty:throw new Error(`Unhandled binding of kind ${H[i.bindingKind]}`)}}var yh=new Map([[f.ariaProperty,f.ariaProperty],[f.attribute,f.attribute],[f.classProp,f.classProp],[f.element,f.element],[f.elementContainer,f.elementContainer],[f.elementContainerEnd,f.elementContainerEnd],[f.elementContainerStart,f.elementContainerStart],[f.elementEnd,f.elementEnd],[f.elementStart,f.elementStart],[f.domProperty,f.domProperty],[f.i18nExp,f.i18nExp],[f.listener,f.listener],[f.listener,f.listener],[f.property,f.property],[f.styleProp,f.styleProp],[f.syntheticHostListener,f.syntheticHostListener],[f.syntheticHostProperty,f.syntheticHostProperty],[f.templateCreate,f.templateCreate],[f.twoWayProperty,f.twoWayProperty],[f.twoWayListener,f.twoWayListener],[f.declareLet,f.declareLet],[f.conditionalCreate,f.conditionalBranchCreate],[f.conditionalBranchCreate,f.conditionalBranchCreate],[f.domElement,f.domElement],[f.domElementStart,f.domElementStart],[f.domElementEnd,f.domElementEnd],[f.domElementContainer,f.domElementContainer],[f.domElementContainerStart,f.domElementContainerStart],[f.domElementContainerEnd,f.domElementContainerEnd],[f.domListener,f.domListener],[f.domTemplate,f.domTemplate],[f.animationEnter,f.animationEnter],[f.animationLeave,f.animationLeave],[f.animationEnterListener,f.animationEnterListener],[f.animationLeaveListener,f.animationLeaveListener]]),$_=256;function V_(n){for(let e of n.units)kh(e.create),kh(e.update)}function kh(n){let e=null;for(let t of n){if(t.kind!==u.Statement||!(t.statement instanceof cn)){e=null;continue}if(!(t.statement.expr instanceof Lt)||!(t.statement.expr.fn instanceof Qi)){e=null;continue}let i=t.statement.expr.fn.value;if(!yh.has(i)){e=null;continue}if(e!==null&&yh.get(e.instruction)===i&&e.length<$_){let s=e.expression.callFn(t.statement.expr.args,t.statement.expr.sourceSpan,t.statement.expr.pure);e.expression=s,e.op.statement=s.toStmt(),e.length++,T.remove(t)}else e={op:t,instruction:i,expression:t.statement.expr,length:1}}}function H_(n){for(let e of n.units)for(let t of e.update)(t.kind===u.Attribute||t.kind===u.StyleProp||t.kind==u.StyleMap||t.kind===u.ClassMap)&&t.expression instanceof Le&&t.expression.strings.length===2&&t.expression.strings.every(s=>s==="")&&(t.expression=t.expression.expressions[0])}function q_(n){for(let e of n.units)for(let t of e.ops()){if(t.kind!==u.Conditional)continue;let i,s=t.conditions.findIndex(a=>a.expr===null);if(s>=0){let a=t.conditions.splice(s,1)[0].targetSlot;i=new vl(a)}else i=E(-1);let r=t.test==null?null:new qn(t.test,n.allocateXrefId()),o=null;for(let a=t.conditions.length-1;a>=0;a--){let l=t.conditions[a];if(l.expr!==null){if(r!==null){let c=a===0?r:new bi(r.xref);l.expr=new pe(I.Identical,c,l.expr)}else l.alias!==null&&(o??=n.allocateXrefId(),l.expr=new qn(l.expr,o),t.contextValue=new bi(o));i=new Fn(l.expr,new vl(l.targetSlot),i)}}t.processed=i,t.conditions=[]}}var U_=new Map([["&&",I.And],[">",I.Bigger],[">=",I.BiggerEquals],["|",I.BitwiseOr],["&",I.BitwiseAnd],["/",I.Divide],["=",I.Assign],["==",I.Equals],["===",I.Identical],["<",I.Lower],["<=",I.LowerEquals],["-",I.Minus],["%",I.Modulo],["**",I.Exponentiation],["*",I.Multiply],["!=",I.NotEquals],["!==",I.NotIdentical],["??",I.NullishCoalesce],["||",I.Or],["+",I.Plus],["in",I.In],["+=",I.AdditionAssignment],["-=",I.SubtractionAssignment],["*=",I.MultiplicationAssignment],["/=",I.DivisionAssignment],["%=",I.RemainderAssignment],["**=",I.ExponentiationAssignment],["&&=",I.AndAssignment],["||=",I.OrAssignment],["??=",I.NullishCoalesceAssignment]]);function Af(n){let e=new Map([["svg",mt.SVG],["math",mt.Math]]);return n===null?mt.HTML:e.get(n)??mt.HTML}function j_(n){let e=new Map([["svg",mt.SVG],["math",mt.Math]]);for(let[t,i]of e.entries())if(i===n)return t;return null}function z_(n,e){return e===mt.HTML?n:`:${j_(e)}:${n}`}function nr(n){return Array.isArray(n)?_e(n.map(nr)):E(n)}function W_(n){let e=new Map;for(let t of n.units)for(let i of t.create)if(i.kind===u.ExtractedAttribute){let s=e.get(i.target)||new Pu(n.compatibility);e.set(i.target,s),s.add(i.bindingKind,i.name,i.expression,i.namespace,i.trustedValueFn),T.remove(i)}if(n instanceof Mo)for(let t of n.units)for(let i of t.create)if(i.kind==u.Projection){let s=e.get(i.xref);if(s!==void 0){let r=Nu(s);r.entries.length>0&&(i.attributes=r)}}else ti(i)&&(i.attributes=Th(n,e,i.xref),i.kind===u.RepeaterCreate&&i.emptyView!==null&&(i.emptyAttributes=Th(n,e,i.emptyView)));else if(n instanceof El)for(let[t,i]of e.entries()){if(t!==n.root.xref)throw new Error("An attribute would be const collected into the host binding's template function, but is not associated with the root xref.");let s=Nu(i);s.entries.length>0&&(n.root.attributes=s)}}function Th(n,e,t){let i=e.get(t);if(i!==void 0){let s=Nu(i);if(s.entries.length>0)return n.addConst(s)}return null}var bs=Object.freeze([]),Pu=class{compatibility;known=new Map;byKind=new Map;propertyBindings=null;projectAs=null;get attributes(){return this.byKind.get(H.Attribute)??bs}get classes(){return this.byKind.get(H.ClassName)??bs}get styles(){return this.byKind.get(H.StyleProperty)??bs}get bindings(){return this.propertyBindings??bs}get template(){return this.byKind.get(H.Template)??bs}get i18n(){return this.byKind.get(H.I18n)??bs}constructor(e){this.compatibility=e}isKnown(e,t){let i=this.known.get(e)??new Set;return this.known.set(e,i),i.has(t)?!0:(i.add(t),!1)}add(e,t,i,s,r){if(!(this.compatibility===Yt.TemplateDefinitionBuilder&&(e===H.Attribute||e===H.ClassName||e===H.StyleProperty))&&this.isKnown(e,t))return;if(t==="ngProjectAs"){if(i===null||!(i instanceof ct)||i.value==null||typeof i.value?.toString()!="string")throw Error("ngProjectAs must have a string literal value");this.projectAs=i.value.toString()}let a=this.arrayFor(e);if(a.push(...G_(s,t)),e===H.Attribute||e===H.StyleProperty){if(i===null)throw Error("Attribute, i18n attribute, & style element attributes must have a value");if(r!==null){if(!vf(i))throw Error("AssertionError: extracted attribute value should be string literal");a.push(pg(r,new Zr([new Fa(i.value)],[]),void 0,i.sourceSpan))}else a.push(i)}}arrayFor(e){return e===H.Property||e===H.TwoWayProperty?(this.propertyBindings??=[],this.propertyBindings):(this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e))}};function G_(n,e){let t=E(e);return n?[E(0),E(n),t]:[t]}function Nu({attributes:n,bindings:e,classes:t,i18n:i,projectAs:s,styles:r,template:o}){let a=[...n];if(s!==null){let l=Cp(s)[0];a.push(E(5),nr(l))}return t.length>0&&a.push(E(1),...t),r.length>0&&a.push(E(2),...r),e.length>0&&a.push(E(3),...e),o.length>0&&a.push(E(4),...o),i.length>0&&a.push(E(6),...i),_e(a)}function X_(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function Y_(n){let e=new Map;for(let t of n.units)for(let i of t.create)ti(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.ops())if(i.kind===u.AnimationBinding){let s=Q_(i);n.kind===B.Host?t.create.push(s):T.insertAfter(s,X_(e,i.target)),T.remove(i)}}function Q_(n){if(n.animationBindingKind===0)return g_(n.name,n.target,n.name==="animate.enter"?"enter":"leave",n.expression,n.securityContext,n.sourceSpan);{let e=n.expression;return v_(n.name,n.target,n.name==="animate.enter"?"enter":"leave",[pn(new at(e,e.sourceSpan))],n.securityContext,n.sourceSpan)}}function Z_(n){let e=new Map;for(let t of n.units){for(let i of t.create)i.kind===u.I18nAttributes&&e.set(i.target,i);for(let i of t.update)switch(i.kind){case u.Property:case u.Attribute:if(i.i18nContext===null||!(i.expression instanceof Le))continue;let s=e.get(i.target);if(s===void 0)throw new Error("AssertionError: An i18n attribute binding instruction requires the owning element to have an I18nAttributes create instruction");if(s.target!==i.target)throw new Error("AssertionError: Expected i18nAttributes target element to match binding target element");let r=[];for(let o=0;o<i.expression.expressions.length;o++){let a=i.expression.expressions[o];if(i.expression.i18nPlaceholders.length!==i.expression.expressions.length)throw new Error(`AssertionError: An i18n attribute binding instruction requires the same number of expressions and placeholders, but found ${i.expression.i18nPlaceholders.length} placeholders and ${i.expression.expressions.length} expressions`);r.push(gf(i.i18nContext,s.target,s.xref,s.handle,a,null,i.expression.i18nPlaceholders[o],To.Creation,or.I18nAttribute,i.name,i.sourceSpan))}T.replaceWithMany(i,r);break}}}function J_(n){let e=new Map;for(let s of n.units)for(let r of s.ops())switch(r.kind){case u.Binding:case u.Property:case u.Attribute:case u.ExtractedAttribute:if(r.i18nMessage===null)continue;if(!e.has(r.i18nMessage)){let o=Fc(qi.Attr,n.allocateXrefId(),null,r.i18nMessage,null);s.create.push(o),e.set(r.i18nMessage,o.xref)}r.i18nContext=e.get(r.i18nMessage);break}let t=new Map;for(let s of n.units)for(let r of s.create)switch(r.kind){case u.I18nStart:if(r.xref===r.root){let o=Fc(qi.RootI18n,n.allocateXrefId(),r.xref,r.message,null);s.create.push(o),r.context=o.xref,t.set(r.xref,o)}break}for(let s of n.units)for(let r of s.create)if(r.kind===u.I18nStart&&r.xref!==r.root){let o=t.get(r.root);if(o===void 0)throw Error("AssertionError: Root i18n block i18n context should have been created.");r.context=o.xref,t.set(r.xref,o)}let i=null;for(let s of n.units)for(let r of s.create)switch(r.kind){case u.I18nStart:i=r;break;case u.I18nEnd:i=null;break;case u.IcuStart:if(i===null)throw Error("AssertionError: Unexpected ICU outside of an i18n block.");if(r.message.id!==i.message.id){let o=Fc(qi.Icu,n.allocateXrefId(),i.root,r.message,null);s.create.push(o),r.context=o.xref}else r.context=i.context,t.get(i.xref).contextKind=qi.Icu;break}}function K_(n){let e=new Map;for(let t of n.units)for(let i of t.update.reversed())if(i.kind===u.Binding&&i.isTextAttribute){let s=e.get(i.target)||new Set;s.has(i.name)&&n.compatibility===Yt.TemplateDefinitionBuilder&&(i.name==="style"||i.name==="class")&&T.remove(i),s.add(i.name),e.set(i.target,s)}}function e1(n){for(let e of n.units)for(let t of e.create)t.kind===u.Defer&&(t.placeholderMinimumTime!==null&&(t.placeholderConfig=new Lo(nr([t.placeholderMinimumTime]))),(t.loadingMinimumTime!==null||t.loadingAfterTime!==null)&&(t.loadingConfig=new Lo(nr([t.loadingMinimumTime,t.loadingAfterTime]))))}function t1(n){let e=new Map;function t(s){if(e.has(s.xref))return e.get(s.xref);let r=new n1;for(let o of s.create)if(!(!ti(o)||o.localRefs===null)){if(!Array.isArray(o.localRefs))throw new Error("LocalRefs were already processed, but were needed to resolve defer targets.");for(let a of o.localRefs)a.target===""&&r.targets.set(a.name,{xref:o.xref,slot:o.handle})}return e.set(s.xref,r),r}function i(s,r,o){switch(r.trigger.kind){case Se.Idle:case Se.Never:case Se.Immediate:case Se.Timer:return;case Se.Hover:case Se.Interaction:case Se.Viewport:if(r.trigger.targetName===null){if(o===null)throw new Error("defer on trigger with no target name must have a placeholder block");let c=n.views.get(o);if(c==null)throw new Error("AssertionError: could not find placeholder view for defer on trigger");for(let p of c.create)if(lr(p)&&(ti(p)||p.kind===u.Projection)){r.trigger.targetXref=p.xref,r.trigger.targetView=o,r.trigger.targetSlotViewSteps=-1,r.trigger.targetSlot=p.handle;return}return}let a=o!==null?n.views.get(o):s,l=o!==null?-1:0;for(;a!==null;){let c=t(a);if(c.targets.has(r.trigger.targetName)){let{xref:p,slot:d}=c.targets.get(r.trigger.targetName);r.trigger.targetXref=p,r.trigger.targetView=a.xref,r.trigger.targetSlotViewSteps=l,r.trigger.targetSlot=d;return}a=a.parent!==null?n.views.get(a.parent):null,l++}break;default:throw new Error(`Trigger kind ${r.trigger.kind} not handled`)}}for(let s of n.units){let r=new Map;for(let o of s.create)switch(o.kind){case u.Defer:r.set(o.xref,o);break;case u.DeferOn:let a=r.get(o.defer);i(s,o,o.modifier==="hydrate"?a.mainView:a.placeholderView);break}}}var n1=class{targets=new Map},i1=new Map([[u.ElementEnd,[u.ElementStart,u.Element]],[u.ContainerEnd,[u.ContainerStart,u.Container]],[u.I18nEnd,[u.I18nStart,u.I18n]]]),s1=new Set([u.Pipe]);function r1(n){for(let e of n.units)for(let t of e.create){let i=i1.get(t.kind);if(i===void 0)continue;let[s,r]=i,o=t.prev;for(;o!==null&&s1.has(o.kind);)o=o.prev;o!==null&&o.kind===s&&(o.kind=r,T.remove(t))}}function o1(n){for(let e of n.units)for(let t of e.ops())je(t,i=>d1(i,{job:n}),ge.None),je(t,h1,ge.None)}function $t(n){return n instanceof Ji?$t(n.expr):n instanceof pe?$t(n.lhs)||$t(n.rhs):n instanceof Fn?n.falseCase&&$t(n.falseCase)?!0:$t(n.condition)||$t(n.trueCase):n instanceof Jr?$t(n.condition):n instanceof qn?$t(n.expr):n instanceof Xt?$t(n.receiver):n instanceof ei?$t(n.receiver)||$t(n.index):n instanceof Cn?$t(n.expr):n instanceof Lt||n instanceof Sn||n instanceof Rn||n instanceof ls||n instanceof as}function a1(n){let e=new Set;return V(n,t=>(t instanceof qn&&e.add(t.xref),t),ge.None),e}function l1(n,e,t){return V(n,i=>{if(i instanceof qn&&e.has(i.xref)){let s=new bi(i.xref);return t.job.compatibility===Yt.TemplateDefinitionBuilder?new qn(s,s.xref):s}return i},ge.None),n}function ws(n,e,t){let i;if($t(n)){let s=t.job.allocateXrefId();i=[new qn(n,s),new bi(s)]}else i=[n,n.clone()],l1(i[1],a1(i[0]),t);return new tr(i[0],e(i[1]))}function c1(n){return n instanceof Ks||n instanceof er||n instanceof ls}function u1(n){return n instanceof Xt||n instanceof ei||n instanceof Lt}function Df(n){return c1(n)||u1(n)}function p1(n){if(Df(n)&&n.receiver instanceof tr){let e=n.receiver;for(;e.expr instanceof tr;)e=e.expr;return e}return null}function d1(n,e){if(!Df(n))return n;let t=p1(n);if(t){if(n instanceof Lt)return t.expr=t.expr.callFn(n.args),n.receiver;if(n instanceof Xt)return t.expr=t.expr.prop(n.name),n.receiver;if(n instanceof ei)return t.expr=t.expr.key(n.index),n.receiver;if(n instanceof ls)return t.expr=ws(t.expr,i=>i.callFn(n.args),e),n.receiver;if(n instanceof Ks)return t.expr=ws(t.expr,i=>i.prop(n.name),e),n.receiver;if(n instanceof er)return t.expr=ws(t.expr,i=>i.key(n.index),e),n.receiver}else{if(n instanceof ls)return ws(n.receiver,i=>i.callFn(n.args),e);if(n instanceof Ks)return ws(n.receiver,i=>i.prop(n.name),e);if(n instanceof er)return ws(n.receiver,i=>i.key(n.index),e)}return n}function h1(n){return n instanceof tr?new Cn(new Fn(new pe(I.Equals,n.guard,qs),qs,n.expr)):n}var Ah="\uFFFD",m1="#",f1="*",g1="/",v1=":",_1="[",x1="]",C1="|";function S1(n){let e=new Map,t=new Map,i=new Map;for(let r of n.units)for(let o of r.create)switch(o.kind){case u.I18nContext:let a=E1(n,o);r.create.push(a),e.set(o.xref,a),i.set(o.xref,o);break;case u.I18nStart:t.set(o.xref,o);break}let s=null;for(let r of n.units)for(let o of r.create)switch(o.kind){case u.IcuStart:s=o,T.remove(o);let a=i.get(o.context);if(a.contextKind!==qi.Icu)continue;let l=t.get(a.i18nBlock);if(l.context===a.xref)continue;let c=t.get(l.root),p=e.get(c.context);if(p===void 0)throw Error("AssertionError: ICU sub-message should belong to a root message.");let d=e.get(a.xref);d.messagePlaceholder=o.messagePlaceholder,p.subMessages.push(d.xref);break;case u.IcuEnd:s=null,T.remove(o);break;case u.IcuPlaceholder:if(s===null||s.context==null)throw Error("AssertionError: Unexpected ICU placeholder outside of i18n context");e.get(s.context).postprocessingParams.set(o.name,E(b1(o))),T.remove(o);break}}function E1(n,e,t){let i=Dh(e.params),s=Dh(e.postprocessingParams),r=[...e.params.values()].some(o=>o.length>1);return b_(n.allocateXrefId(),e.xref,e.i18nBlock,e.message,null,i,s,r)}function b1(n){if(n.strings.length!==n.expressionPlaceholders.length+1)throw Error(`AssertionError: Invalid ICU placeholder with ${n.strings.length} strings and ${n.expressionPlaceholders.length} expressions`);let e=n.expressionPlaceholders.map(Ns);return n.strings.flatMap((t,i)=>[t,e[i]||""]).join("")}function Dh(n){let e=new Map;for(let[t,i]of n){let s=w1(i);s!==null&&e.set(t,E(s))}return e}function w1(n){if(n.length===0)return null;let e=n.map(t=>Ns(t));return e.length===1?e[0]:`${_1}${e.join(C1)}${x1}`}function Ns(n){if(n.flags&be.ElementTag&&n.flags&be.TemplateTag){if(typeof n.value!="object")throw Error("AssertionError: Expected i18n param value to have an element and template slot");let s=Ns(De(k({},n),{value:n.value.element,flags:n.flags&~be.TemplateTag})),r=Ns(De(k({},n),{value:n.value.template,flags:n.flags&~be.ElementTag}));return n.flags&be.OpenTag&&n.flags&be.CloseTag?`${r}${s}${r}`:n.flags&be.CloseTag?`${s}${r}`:`${r}${s}`}if(n.flags&be.OpenTag&&n.flags&be.CloseTag)return`${Ns(De(k({},n),{flags:n.flags&~be.CloseTag}))}${Ns(De(k({},n),{flags:n.flags&~be.OpenTag}))}`;if(n.flags===be.None)return`${n.value}`;let e="",t="";n.flags&be.ElementTag?e=m1:n.flags&be.TemplateTag&&(e=f1),e!==""&&(t=n.flags&be.CloseTag?g1:"");let i=n.subTemplateIndex===null?"":`${v1}${n.subTemplateIndex}`;return`${Ah}${t}${e}${n.value}${i}${Ah}`}function y1(n){for(let e of n.units){let t=new Map;for(let s of e.create){if(lr(s)){if(s.handle.slot===null)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls")}else continue;t.set(s.xref,s.handle.slot)}let i=0;for(let s of e.update){let r=null;if(Ao(s)?r=s:nt(s,a=>{r===null&&Ao(a)&&(r=a)}),r===null)continue;if(!t.has(r.target))throw new Error(`AssertionError: reference to unknown slot for target ${r.target}`);let o=t.get(r.target);if(i!==o){let a=o-i;if(a<0)throw new Error("AssertionError: slot counter should never need to move backwards");T.insertBefore(r_(a,r.sourceSpan),s),i=o}}}}function k1(n){for(let e of n.units)for(let t of e.update){if(t.kind!==u.StoreLet)continue;let i={kind:et.Identifier,name:null,identifier:t.declaredName,local:!0};T.replace(t,di(n.allocateXrefId(),i,new Do(t.target,t.value,t.sourceSpan),nn.None))}}function T1(n){let e=n.compatibility===Yt.TemplateDefinitionBuilder,t=[],i=0;for(let s of n.units)for(let r of s.create)r.kind===u.Projection&&(t.push(r.selector),r.projectionSlotIndex=i++);if(t.length>0){let s=null;if(t.length>1||t[0]!=="*"){let r=t.map(o=>o==="*"?o:Cp(o));s=n.pool.getConstLiteral(nr(r),e)}n.contentSelectors=n.pool.getConstLiteral(nr(t),e),n.root.create.prepend([x_(s)])}}function A1(n){$r(n.root,null)}function $r(n,e){let t=D1(n,e);for(let i of n.create)switch(i.kind){case u.ConditionalCreate:case u.ConditionalBranchCreate:case u.Template:$r(n.job.views.get(i.xref),t);break;case u.Projection:i.fallbackView!==null&&$r(n.job.views.get(i.fallbackView),t);break;case u.RepeaterCreate:$r(n.job.views.get(i.xref),t),i.emptyView&&$r(n.job.views.get(i.emptyView),t),i.trackByOps!==null&&i.trackByOps.prepend(Ta(n,t,!1));break;case u.Animation:case u.AnimationListener:case u.Listener:case u.TwoWayListener:i.handlerOps.prepend(Ta(n,t,!0));break}n.update.prepend(Ta(n,t,!1))}function D1(n,e){let t={view:n.xref,viewContextVariable:{kind:et.Context,name:null,view:n.xref},contextVariables:new Map,aliases:n.aliases,references:[],letDeclarations:[],parent:e};for(let i of n.contextVariables.keys())t.contextVariables.set(i,{kind:et.Identifier,name:null,identifier:i,local:!1});for(let i of n.create)switch(i.kind){case u.ElementStart:case u.ConditionalCreate:case u.ConditionalBranchCreate:case u.Template:if(!Array.isArray(i.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let s=0;s<i.localRefs.length;s++)t.references.push({name:i.localRefs[s].name,targetId:i.xref,targetSlot:i.handle,offset:s,variable:{kind:et.Identifier,name:null,identifier:i.localRefs[s].name,local:!1}});break;case u.DeclareLet:t.letDeclarations.push({targetId:i.xref,targetSlot:i.handle,variable:{kind:et.Identifier,name:null,identifier:i.declaredName,local:!1}});break}return t}function Ta(n,e,t){let i=[];e.view!==n.xref&&i.push(di(n.job.allocateXrefId(),e.viewContextVariable,new ml,nn.None));let s=n.job.views.get(e.view);for(let[r,o]of s.contextVariables){let a=new Ei(e.view),l=o===kf?a:new Xt(a,o);i.push(di(n.job.allocateXrefId(),e.contextVariables.get(r),l,nn.None))}for(let r of s.aliases)i.push(di(n.job.allocateXrefId(),r,r.expression.clone(),nn.AlwaysInline));for(let r of e.references)i.push(di(n.job.allocateXrefId(),r.variable,new hl(r.targetId,r.targetSlot,r.offset),nn.None));if(e.view!==n.xref||t)for(let r of e.letDeclarations)i.push(di(n.job.allocateXrefId(),r.variable,new Io(r.targetId,r.targetSlot),nn.None));return e.parent!==null&&i.push(...Ta(n,e.parent,!1)),i}function I1(n){for(let e of n.units)for(let t of e.ops())je(t,i=>i instanceof Lo?E(n.addConst(i.expr)):i,ge.None)}var Ih="style.",Ph="class.",P1="style!",Nh="class!",Lh="!important";function N1(n){for(let e of n.root.update)if(e.kind===u.Binding&&e.bindingKind===H.Property)if(e.name.endsWith(Lh)&&(e.name=e.name.substring(0,e.name.length-Lh.length)),e.name.startsWith(Ih)){e.bindingKind=H.StyleProperty,e.name=e.name.substring(Ih.length),L1(e.name)||(e.name=M1(e.name));let{property:t,suffix:i}=Rc(e.name);e.name=t,e.unit=i}else e.name.startsWith(P1)?(e.bindingKind=H.StyleProperty,e.name="style"):e.name.startsWith(Ph)?(e.bindingKind=H.ClassName,e.name=Rc(e.name.substring(Ph.length)).property):e.name.startsWith(Nh)&&(e.bindingKind=H.ClassName,e.name=Rc(e.name.substring(Nh.length)).property)}function L1(n){return n.startsWith("--")}function M1(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function Rc(n){let e=n.indexOf("!important");e!==-1&&(n=e>0?n.substring(0,e):"");let t=null,i=n,s=n.lastIndexOf(".");return s>0&&(t=n.slice(s+1),i=n.substring(0,s)),{property:i,suffix:t}}function Lu(n,e=!1){return yt(Object.keys(n).map(t=>({key:t,quoted:e,value:n[t]})))}var Mu=class{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){let t=Object.keys(e.cases).map(s=>`${s} {${e.cases[s].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}formatPh(e){return`{${Wo(e,!1)}}`}},B1=new Mu;function If(n){return n.visit(B1)}var ni=class{sourceSpan;i18n;constructor(e,t){this.sourceSpan=e,this.i18n=t}},cs=class extends ni{value;tokens;constructor(e,t,i,s){super(t,s),this.value=e,this.tokens=i}visit(e,t){return e.visitText(this,t)}},Wi=class extends ni{switchValue;type;cases;switchValueSourceSpan;constructor(e,t,i,s,r,o){super(s,o),this.switchValue=e,this.type=t,this.cases=i,this.switchValueSourceSpan=r}visit(e,t){return e.visitExpansion(this,t)}},bl=class{value;expression;sourceSpan;valueSourceSpan;expSourceSpan;constructor(e,t,i,s,r){this.value=e,this.expression=t,this.sourceSpan=i,this.valueSourceSpan=s,this.expSourceSpan=r}visit(e,t){return e.visitExpansionCase(this,t)}},Bu=class extends ni{name;value;keySpan;valueSpan;valueTokens;constructor(e,t,i,s,r,o,a){super(i,a),this.name=e,this.value=t,this.keySpan=s,this.valueSpan=r,this.valueTokens=o}visit(e,t){return e.visitAttribute(this,t)}},en=class extends ni{name;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;isVoid;constructor(e,t,i,s,r,o,a,l=null,c,p){super(o,p),this.name=e,this.attrs=t,this.directives=i,this.children=s,this.isSelfClosing=r,this.startSourceSpan=a,this.endSourceSpan=l,this.isVoid=c}visit(e,t){return e.visitElement(this,t)}},Bo=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitComment(this,t)}},tn=class extends ni{name;parameters;children;nameSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,s,r,o,a=null,l){super(s,l),this.name=e,this.parameters=t,this.children=i,this.nameSpan=r,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,t){return e.visitBlock(this,t)}},It=class extends ni{componentName;tagName;fullName;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;constructor(e,t,i,s,r,o,a,l,c,p=null,d){super(l,d),this.componentName=e,this.tagName=t,this.fullName=i,this.attrs=s,this.directives=r,this.children=o,this.isSelfClosing=a,this.startSourceSpan=c,this.endSourceSpan=p}visit(e,t){return e.visitComponent(this,t)}},Fu=class{name;attrs;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,i,s,r=null){this.name=e,this.attrs=t,this.sourceSpan=i,this.startSourceSpan=s,this.endSourceSpan=r}visit(e,t){return e.visitDirective(this,t)}},wl=class{expression;sourceSpan;constructor(e,t){this.expression=e,this.sourceSpan=t}visit(e,t){return e.visitBlockParameter(this,t)}},yl=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.nameSpan=s,this.valueSpan=r}visit(e,t){return e.visitLetDeclaration(this,t)}};function Te(n,e,t=null){let i=[],s=n.visit?r=>n.visit(r,t)||r.visit(n,t):r=>r.visit(n,t);return e.forEach(r=>{let o=s(r);o&&i.push(o)}),i}var Fo={AElig:"\xC6",AMP:"&",amp:"&",Aacute:"\xC1",Abreve:"\u0102",Acirc:"\xC2",Acy:"\u0410",Afr:"\u{1D504}",Agrave:"\xC0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2A53",Aogon:"\u0104",Aopf:"\u{1D538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xC5",angst:"\xC5",Ascr:"\u{1D49C}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xC3",Auml:"\xC4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2AE7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212C",Bscr:"\u212C",bernou:"\u212C",Beta:"\u0392",Bfr:"\u{1D505}",Bopf:"\u{1D539}",Breve:"\u02D8",breve:"\u02D8",Bumpeq:"\u224E",HumpDownHump:"\u224E",bump:"\u224E",CHcy:"\u0427",COPY:"\xA9",copy:"\xA9",Cacute:"\u0106",Cap:"\u22D2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212D",Cfr:"\u212D",Ccaron:"\u010C",Ccedil:"\xC7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010A",Cedilla:"\xB8",cedil:"\xB8",CenterDot:"\xB7",centerdot:"\xB7",middot:"\xB7",Chi:"\u03A7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201D",rdquo:"\u201D",rdquor:"\u201D",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2A74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222F",DoubleContourIntegral:"\u222F",ContourIntegral:"\u222E",conint:"\u222E",oint:"\u222E",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2A2F",Cscr:"\u{1D49E}",Cup:"\u22D3",CupCap:"\u224D",asympeq:"\u224D",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040F",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21A1",Dashv:"\u2AE4",DoubleLeftTee:"\u2AE4",Dcaron:"\u010E",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1D507}",DiacriticalAcute:"\xB4",acute:"\xB4",DiacriticalDot:"\u02D9",dot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",dblac:"\u02DD",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02DC",tilde:"\u02DC",Diamond:"\u22C4",diam:"\u22C4",diamond:"\u22C4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1D53B}",Dot:"\xA8",DoubleDot:"\xA8",die:"\xA8",uml:"\xA8",DotDot:"\u20DC",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21D3",Downarrow:"\u21D3",dArr:"\u21D3",DoubleLeftArrow:"\u21D0",Leftarrow:"\u21D0",lArr:"\u21D0",DoubleLeftRightArrow:"\u21D4",Leftrightarrow:"\u21D4",hArr:"\u21D4",iff:"\u21D4",DoubleLongLeftArrow:"\u27F8",Longleftarrow:"\u27F8",xlArr:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",Longleftrightarrow:"\u27FA",xhArr:"\u27FA",DoubleLongRightArrow:"\u27F9",Longrightarrow:"\u27F9",xrArr:"\u27F9",DoubleRightArrow:"\u21D2",Implies:"\u21D2",Rightarrow:"\u21D2",rArr:"\u21D2",DoubleRightTee:"\u22A8",vDash:"\u22A8",DoubleUpArrow:"\u21D1",Uparrow:"\u21D1",uArr:"\u21D1",DoubleUpDownArrow:"\u21D5",Updownarrow:"\u21D5",vArr:"\u21D5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",duarr:"\u21F5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",leftharpoondown:"\u21BD",lhard:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",rhard:"\u21C1",rightharpoondown:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",top:"\u22A4",DownTeeArrow:"\u21A7",mapstodown:"\u21A7",Dscr:"\u{1D49F}",Dstrok:"\u0110",ENG:"\u014A",ETH:"\xD0",Eacute:"\xC9",Ecaron:"\u011A",Ecirc:"\xCA",Ecy:"\u042D",Edot:"\u0116",Efr:"\u{1D508}",Egrave:"\xC8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25FB",EmptyVerySmallSquare:"\u25AB",Eogon:"\u0118",Eopf:"\u{1D53C}",Epsilon:"\u0395",Equal:"\u2A75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21CC",rightleftharpoons:"\u21CC",rlhar:"\u21CC",Escr:"\u2130",expectation:"\u2130",Esim:"\u2A73",Eta:"\u0397",Euml:"\xCB",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1D509}",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",blacksquare:"\u25AA",squarf:"\u25AA",squf:"\u25AA",Fopf:"\u{1D53D}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03DC",Gbreve:"\u011E",Gcedil:"\u0122",Gcirc:"\u011C",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1D50A}",Gg:"\u22D9",ggg:"\u22D9",Gopf:"\u{1D53E}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22DB",gel:"\u22DB",gtreqless:"\u22DB",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2A7E",geqslant:"\u2A7E",ges:"\u2A7E",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1D4A2}",Gt:"\u226B",NestedGreaterGreater:"\u226B",gg:"\u226B",HARDcy:"\u042A",Hacek:"\u02C7",caron:"\u02C7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210C",Poincareplane:"\u210C",HilbertSpace:"\u210B",Hscr:"\u210B",hamilt:"\u210B",Hopf:"\u210D",quaternions:"\u210D",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224F",bumpe:"\u224F",bumpeq:"\u224F",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xCD",Icirc:"\xCE",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xCC",Imacr:"\u012A",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222C",Integral:"\u222B",int:"\u222B",Intersection:"\u22C2",bigcap:"\u22C2",xcap:"\u22C2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012E",Iopf:"\u{1D540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xCF",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1D50D}",Jopf:"\u{1D541}",Jscr:"\u{1D4A5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040C",Kappa:"\u039A",Kcedil:"\u0136",Kcy:"\u041A",Kfr:"\u{1D50E}",Kopf:"\u{1D542}",Kscr:"\u{1D4A6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039B",Lang:"\u27EA",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219E",twoheadleftarrow:"\u219E",Lcaron:"\u013D",Lcedil:"\u013B",Lcy:"\u041B",LeftAngleBracket:"\u27E8",lang:"\u27E8",langle:"\u27E8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21E4",larrb:"\u21E4",LeftArrowRightArrow:"\u21C6",leftrightarrows:"\u21C6",lrarr:"\u21C6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27E6",lobrk:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",dharl:"\u21C3",downharpoonleft:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",lfloor:"\u230A",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294E",LeftTee:"\u22A3",dashv:"\u22A3",LeftTeeArrow:"\u21A4",mapstoleft:"\u21A4",LeftTeeVector:"\u295A",LeftTriangle:"\u22B2",vartriangleleft:"\u22B2",vltri:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",ltrie:"\u22B4",trianglelefteq:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",uharl:"\u21BF",upharpoonleft:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",leftharpoonup:"\u21BC",lharu:"\u21BC",LeftVectorBar:"\u2952",LessEqualGreater:"\u22DA",leg:"\u22DA",lesseqgtr:"\u22DA",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2AA1",LessSlantEqual:"\u2A7D",leqslant:"\u2A7D",les:"\u2A7D",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1D50F}",Ll:"\u22D8",Lleftarrow:"\u21DA",lAarr:"\u21DA",Lmidot:"\u013F",LongLeftArrow:"\u27F5",longleftarrow:"\u27F5",xlarr:"\u27F5",LongLeftRightArrow:"\u27F7",longleftrightarrow:"\u27F7",xharr:"\u27F7",LongRightArrow:"\u27F6",longrightarrow:"\u27F6",xrarr:"\u27F6",Lopf:"\u{1D543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21B0",lsh:"\u21B0",Lstrok:"\u0141",Lt:"\u226A",NestedLessLess:"\u226A",ll:"\u226A",Map:"\u2905",Mcy:"\u041C",MediumSpace:"\u205F",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1D510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1D544}",Mu:"\u039C",NJcy:"\u040A",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041D",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",ZeroWidthSpace:"\u200B",NewLine:`
`,Nfr:"\u{1D511}",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nbsp:"\xA0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2AEC",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226F",ngt:"\u226F",ngtr:"\u226F",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",nGtv:"\u226B\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224E\u0338",nbump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",nbumpe:"\u224F\u0338",NotLeftTriangle:"\u22EA",nltri:"\u22EA",ntriangleleft:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",nltrie:"\u22EC",ntrianglelefteq:"\u22EC",NotLess:"\u226E",nless:"\u226E",nlt:"\u226E",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226A\u0338",nLtv:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",npre:"\u2AAF\u0338",npreceq:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",nprcue:"\u22E0",NotReverseElement:"\u220C",notni:"\u220C",notniva:"\u220C",NotRightTriangle:"\u22EB",nrtri:"\u22EB",ntriangleright:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",nrtrie:"\u22ED",ntrianglerighteq:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",nsqsube:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",nsqsupe:"\u22E3",NotSubset:"\u2282\u20D2",nsubset:"\u2282\u20D2",vnsub:"\u2282\u20D2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",nsce:"\u2AB0\u0338",nsucceq:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",nsccue:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",nsupset:"\u2283\u20D2",vnsup:"\u2283\u20D2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1D4A9}",Ntilde:"\xD1",Nu:"\u039D",OElig:"\u0152",Oacute:"\xD3",Ocirc:"\xD4",Ocy:"\u041E",Odblac:"\u0150",Ofr:"\u{1D512}",Ograve:"\xD2",Omacr:"\u014C",Omega:"\u03A9",ohm:"\u03A9",Omicron:"\u039F",Oopf:"\u{1D546}",OpenCurlyDoubleQuote:"\u201C",ldquo:"\u201C",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2A54",Oscr:"\u{1D4AA}",Oslash:"\xD8",Otilde:"\xD5",Otimes:"\u2A37",Ouml:"\xD6",OverBar:"\u203E",oline:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",tbrk:"\u23B4",OverParenthesis:"\u23DC",PartialD:"\u2202",part:"\u2202",Pcy:"\u041F",Pfr:"\u{1D513}",Phi:"\u03A6",Pi:"\u03A0",PlusMinus:"\xB1",plusmn:"\xB1",pm:"\xB1",Popf:"\u2119",primes:"\u2119",Pr:"\u2ABB",Precedes:"\u227A",pr:"\u227A",prec:"\u227A",PrecedesEqual:"\u2AAF",pre:"\u2AAF",preceq:"\u2AAF",PrecedesSlantEqual:"\u227C",prcue:"\u227C",preccurlyeq:"\u227C",PrecedesTilde:"\u227E",precsim:"\u227E",prsim:"\u227E",Prime:"\u2033",Product:"\u220F",prod:"\u220F",Proportional:"\u221D",prop:"\u221D",propto:"\u221D",varpropto:"\u221D",vprop:"\u221D",Pscr:"\u{1D4AB}",Psi:"\u03A8",QUOT:'"',quot:'"',Qfr:"\u{1D514}",Qopf:"\u211A",rationals:"\u211A",Qscr:"\u{1D4AC}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xAE",circledR:"\xAE",reg:"\xAE",Racute:"\u0154",Rang:"\u27EB",Rarr:"\u21A0",twoheadrightarrow:"\u21A0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211C",Rfr:"\u211C",real:"\u211C",realpart:"\u211C",ReverseElement:"\u220B",SuchThat:"\u220B",ni:"\u220B",niv:"\u220B",ReverseEquilibrium:"\u21CB",leftrightharpoons:"\u21CB",lrhar:"\u21CB",ReverseUpEquilibrium:"\u296F",duhar:"\u296F",Rho:"\u03A1",RightAngleBracket:"\u27E9",rang:"\u27E9",rangle:"\u27E9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21E5",rarrb:"\u21E5",RightArrowLeftArrow:"\u21C4",rightleftarrows:"\u21C4",rlarr:"\u21C4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27E7",robrk:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",dharr:"\u21C2",downharpoonright:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rfloor:"\u230B",RightTee:"\u22A2",vdash:"\u22A2",RightTeeArrow:"\u21A6",map:"\u21A6",mapsto:"\u21A6",RightTeeVector:"\u295B",RightTriangle:"\u22B3",vartriangleright:"\u22B3",vrtri:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",rtrie:"\u22B5",trianglerighteq:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",uharr:"\u21BE",upharpoonright:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",rharu:"\u21C0",rightharpoonup:"\u21C0",RightVectorBar:"\u2953",Ropf:"\u211D",reals:"\u211D",RoundImplies:"\u2970",Rrightarrow:"\u21DB",rAarr:"\u21DB",Rscr:"\u211B",realine:"\u211B",Rsh:"\u21B1",rsh:"\u21B1",RuleDelayed:"\u29F4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042C",Sacute:"\u015A",Sc:"\u2ABC",Scaron:"\u0160",Scedil:"\u015E",Scirc:"\u015C",Scy:"\u0421",Sfr:"\u{1D516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03A3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1D54A}",Sqrt:"\u221A",radic:"\u221A",Square:"\u25A1",squ:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228F",sqsub:"\u228F",sqsubset:"\u228F",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1D4AE}",Star:"\u22C6",sstarf:"\u22C6",Sub:"\u22D0",Subset:"\u22D0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227B",sc:"\u227B",succ:"\u227B",SucceedsEqual:"\u2AB0",sce:"\u2AB0",succeq:"\u2AB0",SucceedsSlantEqual:"\u227D",sccue:"\u227D",succcurlyeq:"\u227D",SucceedsTilde:"\u227F",scsim:"\u227F",succsim:"\u227F",Sum:"\u2211",sum:"\u2211",Sup:"\u22D1",Supset:"\u22D1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xDE",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040B",TScy:"\u0426",Tab:"	",Tau:"\u03A4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1D517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223C",sim:"\u223C",thicksim:"\u223C",thksim:"\u223C",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1D54B}",TripleDot:"\u20DB",tdot:"\u20DB",Tscr:"\u{1D4AF}",Tstrok:"\u0166",Uacute:"\xDA",Uarr:"\u219F",Uarrocir:"\u2949",Ubrcy:"\u040E",Ubreve:"\u016C",Ucirc:"\xDB",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1D518}",Ugrave:"\xD9",Umacr:"\u016A",UnderBar:"_",lowbar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",bbrk:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",bigcup:"\u22C3",xcup:"\u22C3",UnionPlus:"\u228E",uplus:"\u228E",Uogon:"\u0172",Uopf:"\u{1D54C}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",udarr:"\u21C5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296E",udhar:"\u296E",UpTee:"\u22A5",bot:"\u22A5",bottom:"\u22A5",perp:"\u22A5",UpTeeArrow:"\u21A5",mapstoup:"\u21A5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",Uring:"\u016E",Uscr:"\u{1D4B0}",Utilde:"\u0168",Uuml:"\xDC",VDash:"\u22AB",Vbar:"\u2AEB",Vcy:"\u0412",Vdash:"\u22A9",Vdashl:"\u2AE6",Vee:"\u22C1",bigvee:"\u22C1",xvee:"\u22C1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200A",hairsp:"\u200A",Vfr:"\u{1D519}",Vopf:"\u{1D54D}",Vscr:"\u{1D4B1}",Vvdash:"\u22AA",Wcirc:"\u0174",Wedge:"\u22C0",bigwedge:"\u22C0",xwedge:"\u22C0",Wfr:"\u{1D51A}",Wopf:"\u{1D54E}",Wscr:"\u{1D4B2}",Xfr:"\u{1D51B}",Xi:"\u039E",Xopf:"\u{1D54F}",Xscr:"\u{1D4B3}",YAcy:"\u042F",YIcy:"\u0407",YUcy:"\u042E",Yacute:"\xDD",Ycirc:"\u0176",Ycy:"\u042B",Yfr:"\u{1D51C}",Yopf:"\u{1D550}",Yscr:"\u{1D4B4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017D",Zcy:"\u0417",Zdot:"\u017B",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1D4B5}",aacute:"\xE1",abreve:"\u0103",ac:"\u223E",mstpos:"\u223E",acE:"\u223E\u0333",acd:"\u223F",acirc:"\xE2",acy:"\u0430",aelig:"\xE6",afr:"\u{1D51E}",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03B1",amacr:"\u0101",amalg:"\u2A3F",and:"\u2227",wedge:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",angle:"\u2220",ange:"\u29A4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angzarr:"\u237C",aogon:"\u0105",aopf:"\u{1D552}",apE:"\u2A70",apacir:"\u2A6F",ape:"\u224A",approxeq:"\u224A",apid:"\u224B",apos:"'",aring:"\xE5",ascr:"\u{1D4B6}",ast:"*",midast:"*",atilde:"\xE3",auml:"\xE4",awint:"\u2A11",bNot:"\u2AED",backcong:"\u224C",bcong:"\u224C",backepsilon:"\u03F6",bepsi:"\u03F6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223D",bsim:"\u223D",backsimeq:"\u22CD",bsime:"\u22CD",barvee:"\u22BD",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23B6",bcy:"\u0431",bdquo:"\u201E",ldquor:"\u201E",bemptyv:"\u29B0",beta:"\u03B2",beth:"\u2136",between:"\u226C",twixt:"\u226C",bfr:"\u{1D51F}",bigcirc:"\u25EF",xcirc:"\u25EF",bigodot:"\u2A00",xodot:"\u2A00",bigoplus:"\u2A01",xoplus:"\u2A01",bigotimes:"\u2A02",xotime:"\u2A02",bigsqcup:"\u2A06",xsqcup:"\u2A06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25BD",xdtri:"\u25BD",bigtriangleup:"\u25B3",xutri:"\u25B3",biguplus:"\u2A04",xuplus:"\u2A04",bkarow:"\u290D",rbarr:"\u290D",blacklozenge:"\u29EB",lozf:"\u29EB",blacktriangle:"\u25B4",utrif:"\u25B4",blacktriangledown:"\u25BE",dtrif:"\u25BE",blacktriangleleft:"\u25C2",ltrif:"\u25C2",blacktriangleright:"\u25B8",rtrif:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bnot:"\u2310",bopf:"\u{1D553}",bowtie:"\u22C8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255D",boxUR:"\u255A",boxUl:"\u255C",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256C",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256B",boxVl:"\u2562",boxVr:"\u255F",boxbox:"\u29C9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250C",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252C",boxhu:"\u2534",boxminus:"\u229F",minusb:"\u229F",boxplus:"\u229E",plusb:"\u229E",boxtimes:"\u22A0",timesb:"\u22A0",boxuL:"\u255B",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256A",boxvL:"\u2561",boxvR:"\u255E",boxvh:"\u253C",boxvl:"\u2524",boxvr:"\u251C",brvbar:"\xA6",bscr:"\u{1D4B7}",bsemi:"\u204F",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2AAE",cacute:"\u0107",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",caps:"\u2229\uFE00",caret:"\u2041",ccaps:"\u2A4D",ccaron:"\u010D",ccedil:"\xE7",ccirc:"\u0109",ccups:"\u2A4C",ccupssm:"\u2A50",cdot:"\u010B",cemptyv:"\u29B2",cent:"\xA2",cfr:"\u{1D520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03C7",cir:"\u25CB",cirE:"\u29C3",circ:"\u02C6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21BA",olarr:"\u21BA",circlearrowright:"\u21BB",orarr:"\u21BB",circledS:"\u24C8",oS:"\u24C8",circledast:"\u229B",oast:"\u229B",circledcirc:"\u229A",ocir:"\u229A",circleddash:"\u229D",odash:"\u229D",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2A6D",copf:"\u{1D554}",copysr:"\u2117",crarr:"\u21B5",cross:"\u2717",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",curlyeqprec:"\u22DE",cuesc:"\u22DF",curlyeqsucc:"\u22DF",cularr:"\u21B6",curvearrowleft:"\u21B6",cularrp:"\u293D",cup:"\u222A",cupbrcap:"\u2A48",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curvearrowright:"\u21B7",curarrm:"\u293C",curlyvee:"\u22CE",cuvee:"\u22CE",curlywedge:"\u22CF",cuwed:"\u22CF",curren:"\xA4",cwint:"\u2231",cylcty:"\u232D",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290F",rBarr:"\u290F",dcaron:"\u010F",dcy:"\u0434",ddarr:"\u21CA",downdownarrows:"\u21CA",ddotseq:"\u2A77",eDDot:"\u2A77",deg:"\xB0",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",dfr:"\u{1D521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03DD",gammad:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",djcy:"\u0452",dlcorn:"\u231E",llcorner:"\u231E",dlcrop:"\u230D",dollar:"$",dopf:"\u{1D555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22A1",sdotb:"\u22A1",drcorn:"\u231F",lrcorner:"\u231F",drcrop:"\u230C",dscr:"\u{1D4B9}",dscy:"\u0455",dsol:"\u29F6",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",triangledown:"\u25BF",dwangle:"\u29A6",dzcy:"\u045F",dzigrarr:"\u27FF",eacute:"\xE9",easter:"\u2A6E",ecaron:"\u011B",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xEA",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044D",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1D522}",eg:"\u2A9A",egrave:"\xE8",egs:"\u2A96",eqslantgtr:"\u2A96",egsdot:"\u2A98",el:"\u2A99",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",eqslantless:"\u2A95",elsdot:"\u2A97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014B",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",epsilon:"\u03B5",epsiv:"\u03F5",straightepsilon:"\u03F5",varepsilon:"\u03F5",equals:"=",equest:"\u225F",questeq:"\u225F",equivDD:"\u2A78",eqvparsl:"\u29E5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212F",eta:"\u03B7",eth:"\xF0",euml:"\xEB",euro:"\u20AC",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",ffr:"\u{1D523}",filig:"\uFB01",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",fopf:"\u{1D557}",fork:"\u22D4",pitchfork:"\u22D4",forkv:"\u2AD9",fpartint:"\u2A0D",frac12:"\xBD",half:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1D4BB}",gEl:"\u2A8C",gtreqqless:"\u2A8C",gacute:"\u01F5",gamma:"\u03B3",gap:"\u2A86",gtrapprox:"\u2A86",gbreve:"\u011F",gcirc:"\u011D",gcy:"\u0433",gdot:"\u0121",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",gfr:"\u{1D524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2A92",gla:"\u2AA5",glj:"\u2AA4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gneq:"\u2A88",gnsim:"\u22E7",gopf:"\u{1D558}",gscr:"\u210A",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtrdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrarr:"\u2978",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",hardcy:"\u044A",harrcir:"\u2948",harrw:"\u21AD",leftrightsquigarrow:"\u21AD",hbar:"\u210F",hslash:"\u210F",planck:"\u210F",plankv:"\u210F",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",larrhk:"\u21A9",hookrightarrow:"\u21AA",rarrhk:"\u21AA",hopf:"\u{1D559}",horbar:"\u2015",hscr:"\u{1D4BD}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xED",icirc:"\xEE",icy:"\u0438",iecy:"\u0435",iexcl:"\xA1",ifr:"\u{1D526}",igrave:"\xEC",iiiint:"\u2A0C",qint:"\u2A0C",iiint:"\u222D",tint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012B",imath:"\u0131",inodot:"\u0131",imof:"\u22B7",imped:"\u01B5",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",intcal:"\u22BA",intercal:"\u22BA",intlarhk:"\u2A17",intprod:"\u2A3C",iprod:"\u2A3C",iocy:"\u0451",iogon:"\u012F",iopf:"\u{1D55A}",iota:"\u03B9",iquest:"\xBF",iscr:"\u{1D4BE}",isinE:"\u22F9",isindot:"\u22F5",isins:"\u22F4",isinsv:"\u22F3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xEF",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1D527}",jmath:"\u0237",jopf:"\u{1D55B}",jscr:"\u{1D4BF}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03BA",kappav:"\u03F0",varkappa:"\u03F0",kcedil:"\u0137",kcy:"\u043A",kfr:"\u{1D528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045C",kopf:"\u{1D55C}",kscr:"\u{1D4C0}",lAtail:"\u291B",lBarr:"\u290E",lEg:"\u2A8B",lesseqqgtr:"\u2A8B",lHar:"\u2962",lacute:"\u013A",laemptyv:"\u29B4",lambda:"\u03BB",langd:"\u2991",lap:"\u2A85",lessapprox:"\u2A85",laquo:"\xAB",larrbfs:"\u291F",larrfs:"\u291D",larrlp:"\u21AB",looparrowleft:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",leftarrowtail:"\u21A2",lat:"\u2AAB",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",lcaron:"\u013E",lcedil:"\u013C",lcy:"\u043B",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21C7",llarr:"\u21C7",leftthreetimes:"\u22CB",lthree:"\u22CB",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessdot:"\u22D6",ltdot:"\u22D6",lfisht:"\u297C",lfr:"\u{1D529}",lgE:"\u2A91",lharul:"\u296A",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296B",lltri:"\u25FA",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lneq:"\u2A87",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",longmapsto:"\u27FC",xmap:"\u27FC",looparrowright:"\u21AC",rarrlp:"\u21AC",lopar:"\u2985",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",loz:"\u25CA",lozenge:"\u25CA",lpar:"(",lparlt:"\u2993",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",lsime:"\u2A8D",lsimg:"\u2A8F",lsquor:"\u201A",sbquo:"\u201A",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltrPar:"\u2996",ltri:"\u25C3",triangleleft:"\u25C3",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",mDDot:"\u223A",macr:"\xAF",strns:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25AE",mcomma:"\u2A29",mcy:"\u043C",mdash:"\u2014",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midcir:"\u2AF0",minus:"\u2212",minusdu:"\u2A2A",mlcp:"\u2ADB",models:"\u22A7",mopf:"\u{1D55E}",mscr:"\u{1D4C2}",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nGg:"\u22D9\u0338",nGt:"\u226B\u20D2",nLeftarrow:"\u21CD",nlArr:"\u21CD",nLeftrightarrow:"\u21CE",nhArr:"\u21CE",nLl:"\u22D8\u0338",nLt:"\u226A\u20D2",nRightarrow:"\u21CF",nrArr:"\u21CF",nVDash:"\u22AF",nVdash:"\u22AE",nacute:"\u0144",nang:"\u2220\u20D2",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",natur:"\u266E",natural:"\u266E",ncap:"\u2A43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",ncy:"\u043D",ndash:"\u2013",neArr:"\u21D7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1D52B}",nharr:"\u21AE",nleftrightarrow:"\u21AE",nhpar:"\u2AF2",nis:"\u22FC",nisd:"\u22FA",njcy:"\u045A",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219A",nleftarrow:"\u219A",nldr:"\u2025",nopf:"\u{1D55F}",not:"\xAC",notinE:"\u22F9\u0338",notindot:"\u22F5\u0338",notinvb:"\u22F7",notinvc:"\u22F6",notnivb:"\u22FE",notnivc:"\u22FD",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",nrarr:"\u219B",nrightarrow:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nscr:"\u{1D4C3}",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsubseteqq:"\u2AC5\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupseteqq:"\u2AC6\u0338",ntilde:"\xF1",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22AD",nvHarr:"\u2904",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwArr:"\u21D6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xF3",ocirc:"\xF4",ocy:"\u043E",odblac:"\u0151",odiv:"\u2A38",odsold:"\u29BC",oelig:"\u0153",ofcir:"\u29BF",ofr:"\u{1D52C}",ogon:"\u02DB",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",olcir:"\u29BE",olcross:"\u29BB",olt:"\u29C0",omacr:"\u014D",omega:"\u03C9",omicron:"\u03BF",omid:"\u29B6",oopf:"\u{1D560}",opar:"\u29B7",operp:"\u29B9",or:"\u2228",vee:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oslash:"\xF8",osol:"\u2298",otilde:"\xF5",otimesas:"\u2A36",ouml:"\xF6",ovbar:"\u233D",para:"\xB6",parsim:"\u2AF3",parsl:"\u2AFD",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1D52D}",phi:"\u03C6",phiv:"\u03D5",straightphi:"\u03D5",varphi:"\u03D5",phone:"\u260E",pi:"\u03C0",piv:"\u03D6",varpi:"\u03D6",planckh:"\u210E",plus:"+",plusacir:"\u2A23",pluscir:"\u2A22",plusdu:"\u2A25",pluse:"\u2A72",plussim:"\u2A26",plustwo:"\u2A27",pointint:"\u2A15",popf:"\u{1D561}",pound:"\xA3",prE:"\u2AB3",prap:"\u2AB7",precapprox:"\u2AB7",precnapprox:"\u2AB9",prnap:"\u2AB9",precneqq:"\u2AB5",prnE:"\u2AB5",precnsim:"\u22E8",prnsim:"\u22E8",prime:"\u2032",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prurel:"\u22B0",pscr:"\u{1D4C5}",psi:"\u03C8",puncsp:"\u2008",qfr:"\u{1D52E}",qopf:"\u{1D562}",qprime:"\u2057",qscr:"\u{1D4C6}",quatint:"\u2A16",quest:"?",rAtail:"\u291C",rHar:"\u2964",race:"\u223D\u0331",racute:"\u0155",raemptyv:"\u29B3",rangd:"\u2992",range:"\u29A5",raquo:"\xBB",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21A3",rightarrowtail:"\u21A3",rarrw:"\u219D",rightsquigarrow:"\u219D",ratail:"\u291A",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21B3",rect:"\u25AD",rfisht:"\u297D",rfr:"\u{1D52F}",rharul:"\u296C",rho:"\u03C1",rhov:"\u03F1",varrho:"\u03F1",rightrightarrows:"\u21C9",rrarr:"\u21C9",rightthreetimes:"\u22CC",rthree:"\u22CC",ring:"\u02DA",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",ropar:"\u2986",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rsaquo:"\u203A",rscr:"\u{1D4C7}",rtimes:"\u22CA",rtri:"\u25B9",triangleright:"\u25B9",rtriltri:"\u29CE",ruluhar:"\u2968",rx:"\u211E",sacute:"\u015B",scE:"\u2AB4",scap:"\u2AB8",succapprox:"\u2AB8",scaron:"\u0161",scedil:"\u015F",scirc:"\u015D",scnE:"\u2AB6",succneqq:"\u2AB6",scnap:"\u2ABA",succnapprox:"\u2ABA",scnsim:"\u22E9",succnsim:"\u22E9",scpolint:"\u2A13",scy:"\u0441",sdot:"\u22C5",sdote:"\u2A66",seArr:"\u21D8",sect:"\xA7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1D530}",sharp:"\u266F",shchcy:"\u0449",shcy:"\u0448",shy:"\xAD",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",varsigma:"\u03C2",simdot:"\u2A6A",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",smashp:"\u2A33",smeparsl:"\u29E4",smile:"\u2323",ssmile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\uFE00",sqcups:"\u2294\uFE00",sscr:"\u{1D4C8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2AC5",subseteqq:"\u2AC5",subdot:"\u2ABD",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subsetneqq:"\u2ACB",subne:"\u228A",subsetneq:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supE:"\u2AC6",supseteqq:"\u2AC6",supdot:"\u2ABE",supdsub:"\u2AD8",supedot:"\u2AC4",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supsetneqq:"\u2ACC",supne:"\u228B",supsetneq:"\u228B",supplus:"\u2AC0",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swArr:"\u21D9",swnwar:"\u292A",szlig:"\xDF",target:"\u2316",tau:"\u03C4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1D531}",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",vartheta:"\u03D1",thorn:"\xFE",times:"\xD7",timesbar:"\u2A31",timesd:"\u2A30",topbot:"\u2336",topcir:"\u2AF1",topf:"\u{1D565}",topfork:"\u2ADA",tprime:"\u2034",triangle:"\u25B5",utri:"\u25B5",triangleq:"\u225C",trie:"\u225C",tridot:"\u25EC",triminus:"\u2A3A",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",tscr:"\u{1D4C9}",tscy:"\u0446",tshcy:"\u045B",tstrok:"\u0167",uHar:"\u2963",uacute:"\xFA",ubrcy:"\u045E",ubreve:"\u016D",ucirc:"\xFB",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297E",ufr:"\u{1D532}",ugrave:"\xF9",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",umacr:"\u016B",uogon:"\u0173",uopf:"\u{1D566}",upsi:"\u03C5",upsilon:"\u03C5",upuparrows:"\u21C8",uuarr:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",uring:"\u016F",urtri:"\u25F9",uscr:"\u{1D4CA}",utdot:"\u22F0",utilde:"\u0169",uuml:"\xFC",uwangle:"\u29A7",vBar:"\u2AE8",vBarv:"\u2AE9",vangrt:"\u299C",varsubsetneq:"\u228A\uFE00",vsubne:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",vsubnE:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",vsupne:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vsupnE:"\u2ACC\uFE00",vcy:"\u0432",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",vfr:"\u{1D533}",vopf:"\u{1D567}",vscr:"\u{1D4CB}",vzigzag:"\u299A",wcirc:"\u0175",wedbar:"\u2A5F",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1D534}",wopf:"\u{1D568}",wscr:"\u{1D4CC}",xfr:"\u{1D535}",xi:"\u03BE",xnis:"\u22FB",xopf:"\u{1D569}",xscr:"\u{1D4CD}",yacute:"\xFD",yacy:"\u044F",ycirc:"\u0177",ycy:"\u044B",yen:"\xA5",yfr:"\u{1D536}",yicy:"\u0457",yopf:"\u{1D56A}",yscr:"\u{1D4CE}",yucy:"\u044E",yuml:"\xFF",zacute:"\u017A",zcaron:"\u017E",zcy:"\u0437",zdot:"\u017C",zeta:"\u03B6",zfr:"\u{1D537}",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"},Pf="\uE500";Fo.ngsp=Pf;var Ru=class{tokens;errors;nonNormalizedIcuExpressions;constructor(e,t,i){this.tokens=e,this.errors=t,this.nonNormalizedIcuExpressions=i}};function F1(n,e,t,i={}){let s=new $u(new ul(n,e),t,i);return s.tokenize(),new Ru(W1(s.tokens),s.errors,s.nonNormalizedIcuExpressions)}var R1=/\r\n?/g;function ys(n){return`Unexpected character "${n===rt?"EOF":String.fromCharCode(n)}"`}function Mh(n){return`Unknown entity "${n}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}function O1(n,e){return`Unable to parse entity "${e}" - ${n} character reference entities must end with ";"`}var Ou=(function(n){return n.HEX="hexadecimal",n.DEC="decimal",n})(Ou||{}),$1=["@if","@else","@for","@switch","@case","@default","@empty","@defer","@placeholder","@loading","@error"],$u=class{_getTagDefinition;_cursor;_tokenizeIcu;_interpolationConfig;_leadingTriviaCodePoints;_currentTokenStart=null;_currentTokenType=null;_expansionCaseStack=[];_openDirectiveCount=0;_inInterpolation=!1;_preserveLineEndings;_i18nNormalizeLineEndingsInICUs;_tokenizeBlocks;_tokenizeLet;_selectorlessEnabled;tokens=[];errors=[];nonNormalizedIcuExpressions=[];constructor(e,t,i){this._getTagDefinition=t,this._tokenizeIcu=i.tokenizeExpansionForms||!1,this._interpolationConfig=i.interpolationConfig||Ln,this._leadingTriviaCodePoints=i.leadingTriviaChars&&i.leadingTriviaChars.map(r=>r.codePointAt(0)||0);let s=i.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=i.escapedString?new Vu(e,s):new kl(e,s),this._preserveLineEndings=i.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=i.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=i.tokenizeBlocks??!0,this._tokenizeLet=i.tokenizeLet??!0,this._selectorlessEnabled=i.selectorlessEnabled??!1;try{this._cursor.init()}catch(r){this.handleError(r)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(R1,`
`)}tokenize(){for(;this._cursor.peek()!==rt;){let e=this._cursor.clone();try{this._attemptCharCode(Rs)?this._attemptCharCode(_u)?this._attemptCharCode(gi)?this._consumeCdata(e):this._attemptCharCode(ll)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(gn)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeLet&&this._cursor.peek()===Es&&!this._inInterpolation&&this._isLetStart()?this._consumeLetDeclaration(e):this._tokenizeBlocks&&this._isBlockStart()?this._consumeBlockStart(e):this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansionCase()&&!this._isInExpansionForm()&&this._attemptCharCode(Et)?this._consumeBlockEnd(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(t){this.handleError(t)}}this._beginToken(41),this._endToken([])}_getBlockName(){let e=!1,t=this._cursor.clone();return this._attemptCharCodeUntilFn(i=>wo(i)?!e:z1(i)?(e=!0,!1):!0),this._cursor.getChars(t).trim()}_consumeBlockStart(e){this._requireCharCode(Es),this._beginToken(24,e);let t=this._endToken([this._getBlockName()]);if(this._cursor.peek()===xn)if(this._cursor.advance(),this._consumeBlockParameters(),this._attemptCharCodeUntilFn(Pe),this._attemptCharCode(St))this._attemptCharCodeUntilFn(Pe);else{t.type=28;return}this._attemptCharCode(_n)?(this._beginToken(25),this._endToken([])):t.type=28}_consumeBlockEnd(e){this._beginToken(26,e),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(Fh);this._cursor.peek()!==St&&this._cursor.peek()!==rt;){this._beginToken(27);let e=this._cursor.clone(),t=null,i=0;for(;this._cursor.peek()!==qt&&this._cursor.peek()!==rt||t!==null;){let s=this._cursor.peek();if(s===Os)this._cursor.advance();else if(s===t)t=null;else if(t===null&&jr(s))t=s;else if(s===xn&&t===null)i++;else if(s===St&&t===null){if(i===0)break;i>0&&i--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(Fh)}}_consumeLetDeclaration(e){if(this._requireStr("@let"),this._beginToken(29,e),wo(this._cursor.peek()))this._attemptCharCodeUntilFn(Pe);else{let s=this._endToken([this._cursor.getChars(e)]);s.type=32;return}let t=this._endToken([this._getLetDeclarationName()]);if(this._attemptCharCodeUntilFn(Pe),!this._attemptCharCode(ht)){t.type=32;return}this._attemptCharCodeUntilFn(s=>Pe(s)&&!cl(s)),this._consumeLetDeclarationValue(),this._cursor.peek()===qt?(this._beginToken(31),this._endToken([]),this._cursor.advance()):(t.type=32,t.sourceSpan=this._cursor.getSpan(e))}_getLetDeclarationName(){let e=this._cursor.clone(),t=!1;return this._attemptCharCodeUntilFn(i=>Qs(i)||i===zl||i===yi||t&&vn(i)?(t=!0,!1):!0),this._cursor.getChars(e).trim()}_consumeLetDeclarationValue(){let e=this._cursor.clone();for(this._beginToken(30,e);this._cursor.peek()!==rt;){let t=this._cursor.peek();if(t===qt)break;jr(t)&&(this._cursor.advance(),this._attemptCharCodeUntilFn(i=>i===Os?(this._cursor.advance(),!1):i===t)),this._cursor.advance()}this._endToken([this._cursor.getChars(e)])}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(U1(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===Et){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,t=this._cursor.clone()){this._currentTokenStart=t,this._currentTokenType=e}_endToken(e,t){if(this._currentTokenStart===null)throw new G(this._cursor.getSpan(t),"Programming error - attempted to end a token when there was no start to the token");if(this._currentTokenType===null)throw new G(this._cursor.getSpan(this._currentTokenStart),"Programming error - attempted to end a token which has no token type");let i={type:this._currentTokenType,parts:e,sourceSpan:(t??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(i),this._currentTokenStart=null,this._currentTokenType=null,i}_createError(e,t){this._isInExpansionForm()&&(e+=` (Do you have an unescaped "{" in your template? Use "{{ '{' }}") to escape it.)`);let i=new G(t,e);return this._currentTokenStart=null,this._currentTokenType=null,i}handleError(e){if(e instanceof Ro&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),e instanceof G)this.errors.push(e);else throw e}_attemptCharCode(e){return this._cursor.peek()===e?(this._cursor.advance(),!0):!1}_attemptCharCodeCaseInsensitive(e){return j1(this._cursor.peek(),e)?(this._cursor.advance(),!0):!1}_requireCharCode(e){let t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(ys(this._cursor.peek()),this._cursor.getSpan(t))}_attemptStr(e){let t=e.length;if(this._cursor.charsLeft()<t)return!1;let i=this._cursor.clone();for(let s=0;s<t;s++)if(!this._attemptCharCode(e.charCodeAt(s)))return this._cursor=i,!1;return!0}_attemptStrCaseInsensitive(e){for(let t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}_requireStr(e){let t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(ys(this._cursor.peek()),this._cursor.getSpan(t))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,t){let i=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(i)<t)throw this._createError(ys(this._cursor.peek()),this._cursor.getSpan(i))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){let e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_peekStr(e){let t=e.length;if(this._cursor.charsLeft()<t)return!1;let i=this._cursor.clone();for(let s=0;s<t;s++){if(i.peek()!==e.charCodeAt(s))return!1;i.advance()}return!0}_isBlockStart(){return this._cursor.peek()===Es&&$1.some(e=>this._peekStr(e))}_isLetStart(){return this._cursor.peek()===Es&&this._peekStr("@let")}_consumeEntity(e){this._beginToken(9);let t=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(Zm)){let i=this._attemptCharCode(of)||this._attemptCharCode(ov),s=this._cursor.clone();if(this._attemptCharCodeUntilFn(H1),this._cursor.peek()!=qt){this._cursor.advance();let o=i?Ou.HEX:Ou.DEC;throw this._createError(O1(o,this._cursor.getChars(t)),this._cursor.getSpan())}let r=this._cursor.getChars(s);this._cursor.advance();try{let o=parseInt(r,i?16:10);this._endToken([String.fromCodePoint(o),this._cursor.getChars(t)])}catch{throw this._createError(Mh(this._cursor.getChars(t)),this._cursor.getSpan())}}else{let i=this._cursor.clone();if(this._attemptCharCodeUntilFn(q1),this._cursor.peek()!=qt)this._beginToken(e,t),this._cursor=i,this._endToken(["&"]);else{let s=this._cursor.getChars(i);this._cursor.advance();let r=Fo.hasOwnProperty(s)&&Fo[s];if(!r)throw this._createError(Mh(s),this._cursor.getSpan(t));this._endToken([r,`&${s};`])}}}_consumeRawText(e,t){this._beginToken(e?6:7);let i=[];for(;;){let s=this._cursor.clone(),r=t();if(this._cursor=s,r)break;e&&this._cursor.peek()===al?(this._endToken([this._processCarriageReturns(i.join(""))]),i.length=0,this._consumeEntity(6),this._beginToken(6)):i.push(this._readChar())}this._endToken([this._processCarriageReturns(i.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(ll),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("-->")),this._beginToken(11),this._requireStr("-->"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);let t=this._cursor.clone();this._attemptUntilChar(Kt);let i=this._cursor.getChars(t);this._cursor.advance(),this._endToken([i])}_consumePrefixAndName(e){let t=this._cursor.clone(),i="";for(;this._cursor.peek()!==Xn&&!V1(this._cursor.peek());)this._cursor.advance();let s;this._cursor.peek()===Xn?(i=this._cursor.getChars(t),this._cursor.advance(),s=this._cursor.clone()):s=t,this._requireCharCodeUntilFn(e,i===""?0:1);let r=this._cursor.getChars(s);return[i,r]}_consumeTagOpen(e){let t,i,s,r;try{if(this._selectorlessEnabled&&da(this._cursor.peek()))r=this._consumeComponentOpenStart(e),[s,i,t]=r.parts,i&&(s+=`:${i}`),t&&(s+=`:${t}`),this._attemptCharCodeUntilFn(Pe);else{if(!Qs(this._cursor.peek()))throw this._createError(ys(this._cursor.peek()),this._cursor.getSpan(e));r=this._consumeTagOpenStart(e),i=r.parts[0],t=s=r.parts[1],this._attemptCharCodeUntilFn(Pe)}for(;!Oh(this._cursor.peek());)if(this._selectorlessEnabled&&this._cursor.peek()===Es){let a=this._cursor.clone(),l=a.clone();l.advance(),da(l.peek())&&this._consumeDirective(a,l)}else this._consumeAttribute();r.type===33?this._consumeComponentOpenEnd():this._consumeTagOpenEnd()}catch(a){if(a instanceof G){r?r.type=r.type===33?37:4:(this._beginToken(5,e),this._endToken(["<"]));return}throw a}let o=this._getTagDefinition(t).getContentType(i);o===Nn.RAW_TEXT?this._consumeRawTextWithTagClose(r,s,!1):o===Nn.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(r,s,!0)}_consumeRawTextWithTagClose(e,t,i){this._consumeRawText(i,()=>!this._attemptCharCode(Rs)||!this._attemptCharCode(gn)||(this._attemptCharCodeUntilFn(Pe),!this._attemptStrCaseInsensitive(t))?!1:(this._attemptCharCodeUntilFn(Pe),this._attemptCharCode(Kt))),this._beginToken(e.type===33?36:3),this._requireCharCodeUntilFn(s=>s===Kt,3),this._cursor.advance(),this._endToken(e.parts)}_consumeTagOpenStart(e){this._beginToken(0,e);let t=this._consumePrefixAndName(Li);return this._endToken(t)}_consumeComponentOpenStart(e){this._beginToken(33,e);let t=this._consumeComponentName();return this._endToken(t)}_consumeComponentName(){let e=this._cursor.clone();for(;Rh(this._cursor.peek());)this._cursor.advance();let t=this._cursor.getChars(e),i="",s="";return this._cursor.peek()===Xn&&(this._cursor.advance(),[i,s]=this._consumePrefixAndName(Li)),[t,i,s]}_consumeAttribute(){this._consumeAttributeName(),this._attemptCharCodeUntilFn(Pe),this._attemptCharCode(ht)&&(this._attemptCharCodeUntilFn(Pe),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(Pe)}_consumeAttributeName(){let e=this._cursor.peek();if(e===bo||e===Eo)throw this._createError(ys(e),this._cursor.getSpan());this._beginToken(14);let t;if(this._openDirectiveCount>0){let s=0;t=r=>{if(this._openDirectiveCount>0){if(r===xn)s++;else if(r===St){if(s===0)return!0;s--}}return Li(r)}}else if(e===gi){let s=0;t=r=>(r===gi?s++:r===Hi&&s--,s<=0?Li(r):cl(r))}else t=Li;let i=this._consumePrefixAndName(t);this._endToken(i)}_consumeAttributeValue(){if(this._cursor.peek()===bo||this._cursor.peek()===Eo){let e=this._cursor.peek();this._consumeQuote(e);let t=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,t,t),this._consumeQuote(e)}else{let e=()=>Li(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){let e=this._attemptCharCode(gn)?2:1;this._beginToken(e),this._requireCharCode(Kt),this._endToken([])}_consumeComponentOpenEnd(){let e=this._attemptCharCode(gn)?35:34;this._beginToken(e),this._requireCharCode(Kt),this._endToken([])}_consumeTagClose(e){if(this._selectorlessEnabled){let i=e.clone();for(;i.peek()!==Kt&&!da(i.peek());)i.advance();if(da(i.peek())){this._beginToken(36,e);let s=this._consumeComponentName();this._attemptCharCodeUntilFn(Pe),this._requireCharCode(Kt),this._endToken(s);return}}this._beginToken(3,e),this._attemptCharCodeUntilFn(Pe);let t=this._consumePrefixAndName(Li);this._attemptCharCodeUntilFn(Pe),this._requireCharCode(Kt),this._endToken(t)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(_n),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);let e=this._readUntil(on),t=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{let s=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(s)}this._requireCharCode(on),this._attemptCharCodeUntilFn(Pe),this._beginToken(7);let i=this._readUntil(on);this._endToken([i]),this._requireCharCode(on),this._attemptCharCodeUntilFn(Pe)}_consumeExpansionCaseStart(){this._beginToken(20);let e=this._readUntil(_n).trim();this._endToken([e]),this._attemptCharCodeUntilFn(Pe),this._beginToken(21),this._requireCharCode(_n),this._endToken([]),this._attemptCharCodeUntilFn(Pe),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(Et),this._endToken([]),this._attemptCharCodeUntilFn(Pe),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(Et),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,t,i,s){this._beginToken(e);let r=[];for(;!i();){let o=this._cursor.clone();this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(this._endToken([this._processCarriageReturns(r.join(""))],o),r.length=0,this._consumeInterpolation(t,o,s),this._beginToken(e)):this._cursor.peek()===al?(this._endToken([this._processCarriageReturns(r.join(""))]),r.length=0,this._consumeEntity(e),this._beginToken(e)):r.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(r.join(""))])}_consumeInterpolation(e,t,i){let s=[];this._beginToken(e,t),s.push(this._interpolationConfig.start);let r=this._cursor.clone(),o=null,a=!1;for(;this._cursor.peek()!==rt&&(i===null||!i());){let l=this._cursor.clone();if(this._isTagStart()){this._cursor=l,s.push(this._getProcessedChars(r,l)),this._endToken(s);return}if(o===null)if(this._attemptStr(this._interpolationConfig.end)){s.push(this._getProcessedChars(r,l)),s.push(this._interpolationConfig.end),this._endToken(s);return}else this._attemptStr("//")&&(a=!0);let c=this._cursor.peek();this._cursor.advance(),c===Os?this._cursor.advance():c===o?o=null:!a&&o===null&&jr(c)&&(o=c)}s.push(this._getProcessedChars(r,this._cursor)),this._endToken(s)}_consumeDirective(e,t){for(this._requireCharCode(Es),this._cursor.advance();Rh(this._cursor.peek());)this._cursor.advance();this._beginToken(38,e);let i=this._cursor.getChars(t);if(this._endToken([i]),this._attemptCharCodeUntilFn(Pe),this._cursor.peek()===xn){for(this._openDirectiveCount++,this._beginToken(39),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(Pe);!Oh(this._cursor.peek())&&this._cursor.peek()!==St;)this._consumeAttribute();if(this._attemptCharCodeUntilFn(Pe),this._openDirectiveCount--,this._cursor.peek()!==St){if(this._cursor.peek()===Kt||this._cursor.peek()===gn)return;throw this._createError(ys(this._cursor.peek()),this._cursor.getSpan(e))}this._beginToken(40),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(Pe)}}_getProcessedChars(e,t){return this._processCarriageReturns(t.getChars(e))}_isTextEnd(){return!!(this._isTagStart()||this._cursor.peek()===rt||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===Et&&this._isInExpansionCase())||this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansion()&&(this._isBlockStart()||this._isLetStart()||this._cursor.peek()===Et))}_isTagStart(){if(this._cursor.peek()===Rs){let e=this._cursor.clone();e.advance();let t=e.peek();if(ss<=t&&t<=Go||wi<=t&&t<=rr||t===gn||t===_u)return!0}return!1}_readUntil(e){let t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}_isInExpansion(){return this._isInExpansionCase()||this._isInExpansionForm()}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===21}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===19}isExpansionFormStart(){if(this._cursor.peek()!==_n)return!1;if(this._interpolationConfig){let e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}};function Pe(n){return!wo(n)||n===rt}function Li(n){return wo(n)||n===Kt||n===Rs||n===gn||n===bo||n===Eo||n===ht||n===rt}function V1(n){return(n<ss||Go<n)&&(n<wi||rr<n)&&(n<Pp||n>Km)}function H1(n){return n===qt||n===rt||!uv(n)}function q1(n){return n===qt||n===rt||!Qs(n)}function U1(n){return n!==Et}function j1(n,e){return Bh(n)===Bh(e)}function Bh(n){return n>=ss&&n<=Go?n-ss+wi:n}function z1(n){return Qs(n)||vn(n)||n===yi}function Fh(n){return n!==qt&&Pe(n)}function da(n){return n===yi||n>=wi&&n<=rr}function Rh(n){return Qs(n)||vn(n)||n===yi}function Oh(n){return n===gn||n===Kt||n===Rs||n===rt}function W1(n){let e=[],t;for(let i=0;i<n.length;i++){let s=n[i];t&&t.type===5&&s.type===5||t&&t.type===16&&s.type===16?(t.parts[0]+=s.parts[0],t.sourceSpan.end=s.sourceSpan.end):(t=s,e.push(t))}return e}var kl=class n{state;file;input;end;constructor(e,t){if(e instanceof n){this.file=e.file,this.input=e.input,this.end=e.end;let i=e.state;this.state={peek:i.peek,offset:i.offset,line:i.line,column:i.column}}else{if(!t)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=t.endPos,this.state={peek:-1,offset:t.startPos,line:t.startLine,column:t.startCol}}}clone(){return new n(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,t){e=e||this;let i=e;if(t)for(;this.diff(e)>0&&t.indexOf(e.peek())!==-1;)i===e&&(e=e.clone()),e.advance();let s=this.locationFromCursor(e),r=this.locationFromCursor(this),o=i!==e?this.locationFromCursor(i):s;return new Q(s,r,o)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new Ro('Unexpected character "EOF"',this);let t=this.charAt(e.offset);t===zi?(e.line++,e.column=0):cl(t)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?rt:this.charAt(e.offset)}locationFromCursor(e){return new yo(e.file,e.state.offset,e.state.line,e.state.column)}},Vu=class n extends kl{internalState;constructor(e,t){e instanceof n?(super(e),this.internalState=k({},e.internalState)):(super(e,t),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new n(this)}getChars(e){let t=e.clone(),i="";for(;t.internalState.offset<this.internalState.offset;)i+=String.fromCodePoint(t.peek()),t.advance();return i}processEscapeSequence(){let e=()=>this.internalState.peek;if(e()===Os)if(this.internalState=k({},this.state),this.advanceState(this.internalState),e()===ef)this.state.peek=zi;else if(e()===tf)this.state.peek=Ip;else if(e()===rf)this.state.peek=Xm;else if(e()===nf)this.state.peek=Dp;else if(e()===lv)this.state.peek=tv;else if(e()===Np)this.state.peek=Ym;else if(e()===sf)if(this.advanceState(this.internalState),e()===_n){this.advanceState(this.internalState);let t=this.clone(),i=0;for(;e()!==Et;)this.advanceState(this.internalState),i++;this.state.peek=this.decodeHexDigits(t,i)}else{let t=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,4)}else if(e()===of){this.advanceState(this.internalState);let t=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,2)}else if(hh(e())){let t="",i=0,s=this.clone();for(;hh(e())&&i<3;)s=this.clone(),t+=String.fromCodePoint(e()),this.advanceState(this.internalState),i++;this.state.peek=parseInt(t,8),this.internalState=s.internalState}else cl(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,t){let i=this.input.slice(e.internalState.offset,e.internalState.offset+t),s=parseInt(i,16);if(isNaN(s))throw e.state=e.internalState,new Ro("Invalid hexadecimal escape sequence",e);return s}},Ro=class extends Error{msg;cursor;constructor(e,t){super(e),this.msg=e,this.cursor=t,Object.setPrototypeOf(this,new.target.prototype)}},Ue=class n extends G{elementName;static create(e,t,i){return new n(e,t,i)}constructor(e,t,i){super(t,i),this.elementName=e}},Tl=class{rootNodes;errors;constructor(e,t){this.rootNodes=e,this.errors=t}},G1=class{getTagDefinition;constructor(e){this.getTagDefinition=e}parse(e,t,i){let s=F1(e,t,this.getTagDefinition,i),r=new Hu(s.tokens,this.getTagDefinition);return r.build(),new Tl(r.rootNodes,[...s.errors,...r.errors])}},Hu=class n{tokens;tagDefinitionResolver;_index=-1;_peek;_containerStack=[];rootNodes=[];errors=[];constructor(e,t){this.tokens=e,this.tagDefinitionResolver=t,this._advance()}build(){for(;this._peek.type!==41;)this._peek.type===0||this._peek.type===4?this._consumeElementStartTag(this._advance()):this._peek.type===3?this._consumeElementEndTag(this._advance()):this._peek.type===12?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===10?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===5||this._peek.type===7||this._peek.type===6?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===19?this._consumeExpansion(this._advance()):this._peek.type===24?(this._closeVoidElement(),this._consumeBlockOpen(this._advance())):this._peek.type===26?(this._closeVoidElement(),this._consumeBlockClose(this._advance())):this._peek.type===28?(this._closeVoidElement(),this._consumeIncompleteBlock(this._advance())):this._peek.type===29?(this._closeVoidElement(),this._consumeLet(this._advance())):this._peek.type===32?(this._closeVoidElement(),this._consumeIncompleteLet(this._advance())):this._peek.type===33||this._peek.type===37?this._consumeComponentStartTag(this._advance()):this._peek.type===36?this._consumeComponentEndTag(this._advance()):this._advance();for(let e of this._containerStack)e instanceof tn&&this.errors.push(Ue.create(e.name,e.sourceSpan,`Unclosed block "${e.name}"`))}_advance(){let e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){let t=this._advanceIf(7),i=this._advanceIf(11),s=t!=null?t.parts[0].trim():null,r=i==null?e.sourceSpan:new Q(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Bo(s,r))}_consumeExpansion(e){let t=this._advance(),i=this._advance(),s=[];for(;this._peek.type===20;){let o=this._parseExpansionCase();if(!o)return;s.push(o)}if(this._peek.type!==23){this.errors.push(Ue.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));return}let r=new Q(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Wi(t.parts[0],i.parts[0],s,r,t.sourceSpan)),this._advance()}_parseExpansionCase(){let e=this._advance();if(this._peek.type!==21)return this.errors.push(Ue.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;let t=this._advance(),i=this._collectExpansionExpTokens(t);if(!i)return null;let s=this._advance();i.push({type:41,parts:[],sourceSpan:s.sourceSpan});let r=new n(i,this.tagDefinitionResolver);if(r.build(),r.errors.length>0)return this.errors=this.errors.concat(r.errors),null;let o=new Q(e.sourceSpan.start,s.sourceSpan.end,e.sourceSpan.fullStart),a=new Q(t.sourceSpan.start,s.sourceSpan.end,t.sourceSpan.fullStart);return new bl(e.parts[0],r.rootNodes,o,e.sourceSpan,a)}_collectExpansionExpTokens(e){let t=[],i=[21];for(;;){if((this._peek.type===19||this._peek.type===21)&&i.push(this._peek.type),this._peek.type===22)if($h(i,21)){if(i.pop(),i.length===0)return t}else return this.errors.push(Ue.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===23)if($h(i,19))i.pop();else return this.errors.push(Ue.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===41)return this.errors.push(Ue.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}_consumeText(e){let t=[e],i=e.sourceSpan,s=e.parts[0];if(s.length>0&&s[0]===`
`){let r=this._getContainer();r!=null&&r.children.length===0&&this._getTagDefinition(r)?.ignoreFirstLf&&(s=s.substring(1),t[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[s]})}for(;this._peek.type===8||this._peek.type===5||this._peek.type===9;)e=this._advance(),t.push(e),e.type===8?s+=e.parts.join("").replace(/&([^;]+);/g,Vh):e.type===9?s+=e.parts[0]:s+=e.parts.join("");if(s.length>0){let r=e.sourceSpan;this._addToParent(new cs(s,new Q(i.start,r.end,i.fullStart,i.details),t))}}_closeVoidElement(){let e=this._getContainer();e!==null&&this._getTagDefinition(e)?.isVoid&&this._containerStack.pop()}_consumeElementStartTag(e){let t=[],i=[];this._consumeAttributesAndDirectives(t,i);let s=this._getElementFullName(e,this._getClosestElementLikeParent()),r=this._getTagDefinition(s),o=!1;this._peek.type===2?(this._advance(),o=!0,r?.canSelfClose||cu(s)!==null||r?.isVoid||this.errors.push(Ue.create(s,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))):this._peek.type===1&&(this._advance(),o=!1);let a=this._peek.sourceSpan.fullStart,l=new Q(e.sourceSpan.start,a,e.sourceSpan.fullStart),c=new Q(e.sourceSpan.start,a,e.sourceSpan.fullStart),p=new en(s,t,i,[],o,l,c,void 0,r?.isVoid??!1),d=this._getContainer(),m=d!==null&&!!this._getTagDefinition(d)?.isClosedByChild(p.name);this._pushContainer(p,m),o?this._popContainer(s,en,l):e.type===4&&(this._popContainer(s,en,null),this.errors.push(Ue.create(s,l,`Opening tag "${s}" not terminated.`)))}_consumeComponentStartTag(e){let t=e.parts[0],i=[],s=[];this._consumeAttributesAndDirectives(i,s);let r=this._getClosestElementLikeParent(),o=this._getComponentTagName(e,r),a=this._getComponentFullName(e,r),l=this._peek.type===35;this._advance();let c=this._peek.sourceSpan.fullStart,p=new Q(e.sourceSpan.start,c,e.sourceSpan.fullStart),d=new Q(e.sourceSpan.start,c,e.sourceSpan.fullStart),m=new It(t,o,a,i,s,[],l,p,d,void 0),_=this._getContainer(),b=_!==null&&m.tagName!==null&&!!this._getTagDefinition(_)?.isClosedByChild(m.tagName);this._pushContainer(m,b),l?this._popContainer(a,It,p):e.type===37&&(this._popContainer(a,It,null),this.errors.push(Ue.create(a,p,`Opening tag "${a}" not terminated.`)))}_consumeAttributesAndDirectives(e,t){for(;this._peek.type===14||this._peek.type===38;)this._peek.type===38?t.push(this._consumeDirective(this._peek)):e.push(this._consumeAttr(this._advance()))}_consumeComponentEndTag(e){let t=this._getComponentFullName(e,this._getClosestElementLikeParent());if(!this._popContainer(t,It,e.sourceSpan)){let i=this._containerStack[this._containerStack.length-1],s;i instanceof It&&i.componentName===e.parts[0]?s=`, did you mean "${i.fullName}"?`:s=". It may happen when the tag has already been closed by another tag.";let r=`Unexpected closing tag "${t}"${s}`;this.errors.push(Ue.create(t,e.sourceSpan,r))}}_getTagDefinition(e){return typeof e=="string"?this.tagDefinitionResolver(e):e instanceof en?this.tagDefinitionResolver(e.name):e instanceof It&&e.tagName!==null?this.tagDefinitionResolver(e.tagName):null}_pushContainer(e,t){t&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeElementEndTag(e){let t=this._getElementFullName(e,this._getClosestElementLikeParent());if(this._getTagDefinition(t)?.isVoid)this.errors.push(Ue.create(t,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`));else if(!this._popContainer(t,en,e.sourceSpan)){let i=`Unexpected closing tag "${t}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this.errors.push(Ue.create(t,e.sourceSpan,i))}}_popContainer(e,t,i){let s=!1;for(let r=this._containerStack.length-1;r>=0;r--){let o=this._containerStack[r];if(((o instanceof It?o.fullName:o.name)===e||e===null)&&o instanceof t)return o.endSourceSpan=i,o.sourceSpan.end=i!==null?i.end:o.sourceSpan.end,this._containerStack.splice(r,this._containerStack.length-r),!s;(o instanceof tn||!this._getTagDefinition(o)?.closedByParent)&&(s=!0)}return!1}_consumeAttr(e){let t=ka(e.parts[0],e.parts[1]),i=e.sourceSpan.end;this._peek.type===15&&this._advance();let s="",r=[],o,a;if(this._peek.type===16)for(o=this._peek.sourceSpan,a=this._peek.sourceSpan.end;this._peek.type===16||this._peek.type===17||this._peek.type===9;){let p=this._advance();r.push(p),p.type===17?s+=p.parts.join("").replace(/&([^;]+);/g,Vh):p.type===9?s+=p.parts[0]:s+=p.parts.join(""),a=i=p.sourceSpan.end}this._peek.type===15&&(i=this._advance().sourceSpan.end);let c=o&&a&&new Q(o.start,a,o.fullStart);return new Bu(t,s,new Q(e.sourceSpan.start,i,e.sourceSpan.fullStart),e.sourceSpan,c,r.length>0?r:void 0,void 0)}_consumeDirective(e){let t=[],i=e.sourceSpan.end,s=null;if(this._advance(),this._peek.type===39){for(i=this._peek.sourceSpan.end,this._advance();this._peek.type===14;)t.push(this._consumeAttr(this._advance()));this._peek.type===40?(s=this._peek.sourceSpan,this._advance()):this.errors.push(Ue.create(null,e.sourceSpan,"Unterminated directive definition"))}let r=new Q(e.sourceSpan.start,i,e.sourceSpan.fullStart),o=new Q(r.start,s===null?e.sourceSpan.end:s.end,r.fullStart);return new Fu(e.parts[0],t,o,r,s)}_consumeBlockOpen(e){let t=[];for(;this._peek.type===27;){let a=this._advance();t.push(new wl(a.parts[0],a.sourceSpan))}this._peek.type===25&&this._advance();let i=this._peek.sourceSpan.fullStart,s=new Q(e.sourceSpan.start,i,e.sourceSpan.fullStart),r=new Q(e.sourceSpan.start,i,e.sourceSpan.fullStart),o=new tn(e.parts[0],t,[],s,e.sourceSpan,r);this._pushContainer(o,!1)}_consumeBlockClose(e){this._popContainer(null,tn,e.sourceSpan)||this.errors.push(Ue.create(null,e.sourceSpan,'Unexpected closing block. The block may have been closed earlier. If you meant to write the } character, you should use the "&#125;" HTML entity instead.'))}_consumeIncompleteBlock(e){let t=[];for(;this._peek.type===27;){let a=this._advance();t.push(new wl(a.parts[0],a.sourceSpan))}let i=this._peek.sourceSpan.fullStart,s=new Q(e.sourceSpan.start,i,e.sourceSpan.fullStart),r=new Q(e.sourceSpan.start,i,e.sourceSpan.fullStart),o=new tn(e.parts[0],t,[],s,e.sourceSpan,r);this._pushContainer(o,!1),this._popContainer(null,tn,null),this.errors.push(Ue.create(e.parts[0],s,`Incomplete block "${e.parts[0]}". If you meant to write the @ character, you should use the "&#64;" HTML entity instead.`))}_consumeLet(e){let t=e.parts[0],i,s;if(this._peek.type!==30){this.errors.push(Ue.create(e.parts[0],e.sourceSpan,`Invalid @let declaration "${t}". Declaration must have a value.`));return}else i=this._advance();if(this._peek.type!==31){this.errors.push(Ue.create(e.parts[0],e.sourceSpan,`Unterminated @let declaration "${t}". Declaration must be terminated with a semicolon.`));return}else s=this._advance();let r=s.sourceSpan.fullStart,o=new Q(e.sourceSpan.start,r,e.sourceSpan.fullStart),a=e.sourceSpan.toString().lastIndexOf(t),l=e.sourceSpan.start.moveBy(a),c=new Q(l,e.sourceSpan.end),p=new yl(t,i.parts[0],o,c,i.sourceSpan);this._addToParent(p)}_consumeIncompleteLet(e){let t=e.parts[0]??"",i=t?` "${t}"`:"";if(t.length>0){let s=e.sourceSpan.toString().lastIndexOf(t),r=e.sourceSpan.start.moveBy(s),o=new Q(r,e.sourceSpan.end),a=new Q(e.sourceSpan.start,e.sourceSpan.start.moveBy(0)),l=new yl(t,"",e.sourceSpan,o,a);this._addToParent(l)}this.errors.push(Ue.create(e.parts[0],e.sourceSpan,`Incomplete @let declaration${i}. @let declarations must be written as \`@let <name> = <value>;\``))}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestElementLikeParent(){for(let e=this._containerStack.length-1;e>-1;e--){let t=this._containerStack[e];if(t instanceof en||t instanceof It)return t}return null}_addToParent(e){let t=this._getContainer();t===null?this.rootNodes.push(e):t.children.push(e)}_getElementFullName(e,t){let i=this._getPrefix(e,t);return ka(i,e.parts[1])}_getComponentFullName(e,t){let i=e.parts[0],s=this._getComponentTagName(e,t);return s===null?i:s.startsWith(":")?i+s:`${i}:${s}`}_getComponentTagName(e,t){let i=this._getPrefix(e,t),s=e.parts[2];return!i&&!s?null:!i&&s?s:ka(i,s||"ng-component")}_getPrefix(e,t){let i,s;if(e.type===33||e.type===37||e.type===36?(i=e.parts[1],s=e.parts[2]):(i=e.parts[0],s=e.parts[1]),i=i||this._getTagDefinition(s)?.implicitNamespacePrefix||"",!i&&t){let r=t instanceof en?t.name:t.tagName;if(r!==null){let o=bn(r)[1],a=this._getTagDefinition(o);a!==null&&!a.preventNamespaceInheritance&&(i=cu(r))}}return i}};function $h(n,e){return n.length>0&&n[n.length-1]===e}function Vh(n,e){return Fo[e]!==void 0?Fo[e]||n:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):n}var Nf="ngPreserveWhitespaces",Hh=new Set(["pre","template","textarea","script","style"]),Lf=` \f
\r	\v\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF`,X1=new RegExp(`[^${Lf}]`),Y1=new RegExp(`[${Lf}]{2,}`,"g");function qh(n){return n.some(e=>e.name===Nf)}function Mf(n){return n.replace(new RegExp(Pf,"g")," ")}var Al=class{preserveSignificantWhitespace;originalNodeMap;requireContext;icuExpansionDepth=0;constructor(e,t,i=!0){this.preserveSignificantWhitespace=e,this.originalNodeMap=t,this.requireContext=i}visitElement(e,t){if(Hh.has(e.name)||qh(e.attrs)){let s=new en(e.name,Dn(this,e.attrs),Dn(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(s,e),s}let i=new en(e.name,e.attrs,e.directives,Dn(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(i,e),i}visitAttribute(e,t){return e.name!==Nf?e:null}visitText(e,t){let i=e.value.match(X1),s=t&&(t.prev instanceof Wi||t.next instanceof Wi);if(this.icuExpansionDepth>0&&this.preserveSignificantWhitespace)return e;if(i||s){let o=e.tokens.map(p=>p.type===5?K1(p):p);if(!this.preserveSignificantWhitespace&&o.length>0){let p=o[0];o.splice(0,1,Q1(p,t));let d=o[o.length-1];o.splice(o.length-1,1,Z1(d,t))}let a=Ff(e.value),l=this.preserveSignificantWhitespace?a:J1(a,t),c=new cs(l,e.sourceSpan,o,e.i18n);return this.originalNodeMap?.set(c,e),c}return null}visitComment(e,t){return e}visitExpansion(e,t){this.icuExpansionDepth++;let i;try{i=new Wi(e.switchValue,e.type,Dn(this,e.cases),e.sourceSpan,e.switchValueSourceSpan,e.i18n)}finally{this.icuExpansionDepth--}return this.originalNodeMap?.set(i,e),i}visitExpansionCase(e,t){let i=new bl(e.value,Dn(this,e.expression),e.sourceSpan,e.valueSourceSpan,e.expSourceSpan);return this.originalNodeMap?.set(i,e),i}visitBlock(e,t){let i=new tn(e.name,e.parameters,Dn(this,e.children),e.sourceSpan,e.nameSpan,e.startSourceSpan,e.endSourceSpan);return this.originalNodeMap?.set(i,e),i}visitBlockParameter(e,t){return e}visitLetDeclaration(e,t){return e}visitComponent(e,t){if(e.tagName&&Hh.has(e.tagName)||qh(e.attrs)){let s=new It(e.componentName,e.tagName,e.fullName,Dn(this,e.attrs),Dn(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(s,e),s}let i=new It(e.componentName,e.tagName,e.fullName,e.attrs,e.directives,Dn(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(i,e),i}visitDirective(e,t){return e}visit(e,t){if(this.requireContext&&!t)throw new Error("WhitespaceVisitor requires context. Visit via `visitAllWithSiblings` to get this context.");return!1}};function Q1(n,e){return n.type!==5||!!e?.prev?n:Bf(n,i=>i.trimStart())}function Z1(n,e){return n.type!==5||!!e?.next?n:Bf(n,i=>i.trimEnd())}function J1(n,e){let t=!e?.prev,i=!e?.next,s=t?n.trimStart():n;return i?s.trimEnd():s}function K1({type:n,parts:e,sourceSpan:t}){return{type:n,parts:[Ff(e[0])],sourceSpan:t}}function Bf({type:n,parts:e,sourceSpan:t},i){return{type:n,parts:[i(e[0])],sourceSpan:t}}function Ff(n){return Mf(n).replace(Y1," ")}function Dn(n,e){let t=[];return e.forEach((i,s)=>{let r={prev:e[s-1],next:e[s+1]},o=i.visit(n,r);o&&t.push(o)}),t}var ne=(function(n){return n[n.Character=0]="Character",n[n.Identifier=1]="Identifier",n[n.PrivateIdentifier=2]="PrivateIdentifier",n[n.Keyword=3]="Keyword",n[n.String=4]="String",n[n.Operator=5]="Operator",n[n.Number=6]="Number",n[n.Error=7]="Error",n})(ne||{}),Gi=(function(n){return n[n.Plain=0]="Plain",n[n.TemplateLiteralPart=1]="TemplateLiteralPart",n[n.TemplateLiteralEnd=2]="TemplateLiteralEnd",n})(Gi||{}),ex=["var","let","as","null","undefined","true","false","if","else","this","typeof","void","in"],Oo=class{tokenize(e){return new qu(e).scan()}},wn=class{index;end;type;numValue;strValue;constructor(e,t,i,s,r){this.index=e,this.end=t,this.type=i,this.numValue=s,this.strValue=r}isCharacter(e){return this.type===ne.Character&&this.numValue===e}isNumber(){return this.type===ne.Number}isString(){return this.type===ne.String}isOperator(e){return this.type===ne.Operator&&this.strValue===e}isIdentifier(){return this.type===ne.Identifier}isPrivateIdentifier(){return this.type===ne.PrivateIdentifier}isKeyword(){return this.type===ne.Keyword}isKeywordLet(){return this.type===ne.Keyword&&this.strValue==="let"}isKeywordAs(){return this.type===ne.Keyword&&this.strValue==="as"}isKeywordNull(){return this.type===ne.Keyword&&this.strValue==="null"}isKeywordUndefined(){return this.type===ne.Keyword&&this.strValue==="undefined"}isKeywordTrue(){return this.type===ne.Keyword&&this.strValue==="true"}isKeywordFalse(){return this.type===ne.Keyword&&this.strValue==="false"}isKeywordThis(){return this.type===ne.Keyword&&this.strValue==="this"}isKeywordTypeof(){return this.type===ne.Keyword&&this.strValue==="typeof"}isKeywordVoid(){return this.type===ne.Keyword&&this.strValue==="void"}isKeywordIn(){return this.type===ne.Keyword&&this.strValue==="in"}isError(){return this.type===ne.Error}toNumber(){return this.type===ne.Number?this.numValue:-1}isTemplateLiteralPart(){return this.isString()&&this.kind===Gi.TemplateLiteralPart}isTemplateLiteralEnd(){return this.isString()&&this.kind===Gi.TemplateLiteralEnd}isTemplateLiteralInterpolationStart(){return this.isOperator("${")}toString(){switch(this.type){case ne.Character:case ne.Identifier:case ne.Keyword:case ne.Operator:case ne.PrivateIdentifier:case ne.String:case ne.Error:return this.strValue;case ne.Number:return this.numValue.toString();default:return null}}},zr=class extends wn{kind;constructor(e,t,i,s){super(e,t,ne.String,0,i),this.kind=s}};function Lr(n,e,t){return new wn(n,e,ne.Character,t,String.fromCharCode(t))}function tx(n,e,t){return new wn(n,e,ne.Identifier,0,t)}function nx(n,e,t){return new wn(n,e,ne.PrivateIdentifier,0,t)}function ix(n,e,t){return new wn(n,e,ne.Keyword,0,t)}function Mr(n,e,t){return new wn(n,e,ne.Operator,0,t)}function sx(n,e,t){return new wn(n,e,ne.Number,t,"")}function rx(n,e,t){return new wn(n,e,ne.Error,0,t)}var ha=new wn(-1,-1,ne.Character,0,""),qu=class{input;tokens=[];length;peek=0;index=-1;braceStack=[];constructor(e){this.input=e,this.length=e.length,this.advance()}scan(){let e=this.scanToken();for(;e!==null;)this.tokens.push(e),e=this.scanToken();return this.tokens}advance(){this.peek=++this.index>=this.length?rt:this.input.charCodeAt(this.index)}scanToken(){let e=this.input,t=this.length,i=this.peek,s=this.index;for(;i<=Qm;)if(++s>=t){i=rt;break}else i=e.charCodeAt(s);if(this.peek=i,this.index=s,s>=t)return null;if(Uh(i))return this.scanIdentifier();if(vn(i))return this.scanNumber(s);let r=s;switch(i){case Or:return this.advance(),vn(this.peek)?this.scanNumber(r):Lr(r,this.index,Or);case xn:case St:case gi:case Hi:case on:case Xn:case qt:return this.scanCharacter(r,i);case _n:return this.scanOpenBrace(r,i);case Et:return this.scanCloseBrace(r,i);case bo:case Eo:return this.scanString();case xu:return this.advance(),this.scanTemplateLiteralPart(r);case Zm:return this.scanPrivateIdentifier();case Jm:return this.scanComplexOperator(r,"+",ht,"=");case ll:return this.scanComplexOperator(r,"-",ht,"=");case gn:return this.scanComplexOperator(r,"/",ht,"=");case nv:return this.scanComplexOperator(r,"%",ht,"=");case av:return this.scanOperator(r,"^");case uh:return this.scanStar(r);case ph:return this.scanQuestion(r);case Rs:case Kt:return this.scanComplexOperator(r,String.fromCharCode(i),ht,"=");case _u:case ht:return this.scanComplexOperator(r,String.fromCharCode(i),ht,"=",ht,"=");case al:return this.scanComplexOperator(r,"&",al,"&",ht,"=");case dh:return this.scanComplexOperator(r,"|",dh,"|",ht,"=");case af:for(;wo(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(i)}]`,0)}scanCharacter(e,t){return this.advance(),Lr(e,this.index,t)}scanOperator(e,t){return this.advance(),Mr(e,this.index,t)}scanOpenBrace(e,t){return this.braceStack.push("expression"),this.advance(),Lr(e,this.index,t)}scanCloseBrace(e,t){return this.advance(),this.braceStack.pop()==="interpolation"?(this.tokens.push(Lr(e,this.index,Et)),this.scanTemplateLiteralPart(this.index)):Lr(e,this.index,t)}scanComplexOperator(e,t,i,s,r,o){this.advance();let a=t;return this.peek==i&&(this.advance(),a+=s),r!=null&&this.peek==r&&(this.advance(),a+=o),Mr(e,this.index,a)}scanIdentifier(){let e=this.index;for(this.advance();jh(this.peek);)this.advance();let t=this.input.substring(e,this.index);return ex.indexOf(t)>-1?ix(e,this.index,t):tx(e,this.index,t)}scanPrivateIdentifier(){let e=this.index;if(this.advance(),!Uh(this.peek))return this.error("Invalid character [#]",-1);for(;jh(this.peek);)this.advance();let t=this.input.substring(e,this.index);return nx(e,this.index,t)}scanNumber(e){let t=this.index===e,i=!1;for(this.advance();;){if(!vn(this.peek))if(this.peek===yi){if(!vn(this.input.charCodeAt(this.index-1))||!vn(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);i=!0}else if(this.peek===Or)t=!1;else if(ox(this.peek)){if(this.advance(),ax(this.peek)&&this.advance(),!vn(this.peek))return this.error("Invalid exponent",-1);t=!1}else break;this.advance()}let s=this.input.substring(e,this.index);i&&(s=s.replace(/_/g,""));let r=t?cx(s):parseFloat(s);return sx(e,this.index,r)}scanString(){let e=this.index,t=this.peek;this.advance();let i="",s=this.index,r=this.input;for(;this.peek!=t;)if(this.peek==Os){let a=this.scanStringBackslash(i,s);if(typeof a!="string")return a;i=a,s=this.index}else{if(this.peek==rt)return this.error("Unterminated quote",0);this.advance()}let o=r.substring(s,this.index);return this.advance(),new zr(e,this.index,i+o,Gi.Plain)}scanQuestion(e){this.advance();let t="?";return this.peek===ph?(t+="?",this.advance(),this.peek===ht&&(t+="=",this.advance())):this.peek===Or&&(t+=".",this.advance()),Mr(e,this.index,t)}scanTemplateLiteralPart(e){let t="",i=this.index;for(;this.peek!==xu;)if(this.peek===Os){let r=this.scanStringBackslash(t,i);if(typeof r!="string")return r;t=r,i=this.index}else if(this.peek===zl){let r=this.index;if(this.advance(),this.peek===_n)return this.braceStack.push("interpolation"),this.tokens.push(new zr(e,r,t+this.input.substring(i,r),Gi.TemplateLiteralPart)),this.advance(),Mr(r,this.index,this.input.substring(r,this.index))}else{if(this.peek===rt)return this.error("Unterminated template literal",0);this.advance()}let s=this.input.substring(i,this.index);return this.advance(),new zr(e,this.index,t+s,Gi.TemplateLiteralEnd)}error(e,t){let i=this.index+t;return rx(i,this.index,`Lexer Error: ${e} at column ${i} in expression [${this.input}]`)}scanStringBackslash(e,t){e+=this.input.substring(t,this.index);let i;if(this.advance(),this.peek===sf){let s=this.input.substring(this.index+1,this.index+5);if(/^[0-9a-f]+$/i.test(s))i=parseInt(s,16);else return this.error(`Invalid unicode escape [\\u${s}]`,0);for(let r=0;r<5;r++)this.advance()}else i=lx(this.peek),this.advance();return e+=String.fromCharCode(i),e}scanStar(e){this.advance();let t="*";return this.peek===uh?(t+="*",this.advance(),this.peek===ht&&(t+="=",this.advance())):this.peek===ht&&(t+="=",this.advance()),Mr(e,this.index,t)}};function Uh(n){return ss<=n&&n<=Go||wi<=n&&n<=rr||n==yi||n==zl}function jh(n){return Qs(n)||vn(n)||n==yi||n==zl}function ox(n){return n==cv||n==sv}function ax(n){return n==ll||n==Jm}function lx(n){switch(n){case ef:return zi;case Np:return Ym;case tf:return Ip;case nf:return Dp;case rf:return Xm;default:return n}}function cx(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Uu=class{strings;expressions;offsets;constructor(e,t,i){this.strings=e,this.expressions=t,this.offsets=i}},ju=class{templateBindings;warnings;errors;constructor(e,t,i){this.templateBindings=e,this.warnings=t,this.errors=i}};function pi(n){return n.start.toString()||"(unknown)"}var Dl=class{_lexer;_supportsDirectPipeReferences;constructor(e,t=!1){this._lexer=e,this._supportsDirectPipeReferences=t}parseAction(e,t,i,s=Ln){let r=[];this._checkNoInterpolation(r,e,t,s);let{stripped:o}=this._stripComments(e),a=this._lexer.tokenize(o),l=new Ri(e,t,i,a,1,r,0,this._supportsDirectPipeReferences).parseChain();return new Ht(l,e,pi(t),i,r)}parseBinding(e,t,i,s=Ln){let r=[],o=this._parseBindingAst(e,t,i,s,r);return new Ht(o,e,pi(t),i,r)}checkSimpleExpression(e){let t=new zu;return e.visit(t),t.errors}parseSimpleBinding(e,t,i,s=Ln){let r=[],o=this._parseBindingAst(e,t,i,s,r),a=this.checkSimpleExpression(o);return a.length>0&&r.push(Ls(`Host binding expression cannot contain ${a.join(" ")}`,e,"",t)),new Ht(o,e,pi(t),i,r)}_parseBindingAst(e,t,i,s,r){this._checkNoInterpolation(r,e,t,s);let{stripped:o}=this._stripComments(e),a=this._lexer.tokenize(o);return new Ri(e,t,i,a,0,r,0,this._supportsDirectPipeReferences).parseChain()}parseTemplateBindings(e,t,i,s,r){let o=this._lexer.tokenize(t),a=[];return new Ri(t,i,r,o,0,a,0,this._supportsDirectPipeReferences).parseTemplateBindings({source:e,span:new zt(s,s+e.length)})}parseInterpolation(e,t,i,s,r=Ln){let o=[],{strings:a,expressions:l,offsets:c}=this.splitInterpolation(e,t,o,s,r);if(l.length===0)return null;let p=[];for(let d=0;d<l.length;++d){let m=s?.[d*2+1]?.sourceSpan,_=l[d].text,{stripped:b,hasComments:A}=this._stripComments(_),L=this._lexer.tokenize(b);if(A&&b.trim().length===0&&L.length===0){o.push(Ls("Interpolation expression cannot only contain a comment",e,`at column ${l[d].start} in`,t));continue}let D=new Ri(m?_:e,m||t,i,L,0,o,c[d],this._supportsDirectPipeReferences).parseChain();p.push(D)}return this.createInterpolationAst(a.map(d=>d.text),p,e,pi(t),i,o)}parseInterpolationExpression(e,t,i){let{stripped:s}=this._stripComments(e),r=this._lexer.tokenize(s),o=[],a=new Ri(e,t,i,r,0,o,0,this._supportsDirectPipeReferences).parseChain(),l=["",""];return this.createInterpolationAst(l,[a],e,pi(t),i,o)}createInterpolationAst(e,t,i,s,r,o){let a=new es(0,i.length),l=new zo(a,a.toAbsolute(r),e,t);return new Ht(l,i,s,r,o)}splitInterpolation(e,t,i,s,r=Ln){let o=[],a=[],l=[],c=s?ux(s):null,p=0,d=!1,m=!1,{start:_,end:b}=r;for(;p<e.length;)if(d){let A=p,L=A+_.length,D=this._getInterpolationEndIndex(e,b,L);if(D===-1){d=!1,m=!0;break}let F=D+b.length,W=e.substring(L,D);W.trim().length===0&&i.push(Ls("Blank expressions are not allowed in interpolated strings",e,`at column ${p} in`,t)),a.push({text:W,start:A,end:F});let ie=(c?.get(A)??A)+_.length;l.push(ie),p=F,d=!1}else{let A=p;p=e.indexOf(_,p),p===-1&&(p=e.length);let L=e.substring(A,p);o.push({text:L,start:A,end:p}),d=!0}if(!d)if(m){let A=o[o.length-1];A.text+=e.substring(p),A.end=e.length}else o.push({text:e.substring(p),start:p,end:e.length});return new Uu(o,a,l)}wrapLiteralPrimitive(e,t,i){let s=new es(0,e==null?0:e.length);return new Ht(new Vt(s,s.toAbsolute(i),e),e,typeof t=="string"?t:pi(t),i,[])}_stripComments(e){let t=this._commentStart(e);return t!=null?{stripped:e.substring(0,t),hasComments:!0}:{stripped:e,hasComments:!1}}_commentStart(e){let t=null;for(let i=0;i<e.length-1;i++){let s=e.charCodeAt(i),r=e.charCodeAt(i+1);if(s===gn&&r==gn&&t==null)return i;t===s?t=null:t==null&&jr(s)&&(t=s)}return null}_checkNoInterpolation(e,t,i,{start:s,end:r}){let o=-1,a=-1;for(let l of this._forEachUnquotedChar(t,0))if(o===-1)t.startsWith(s)&&(o=l);else if(a=this._getInterpolationEndIndex(t,r,l),a>-1)break;o>-1&&a>-1&&e.push(Ls(`Got interpolation (${s}${r}) where expression was expected`,t,`at column ${o} in`,i))}_getInterpolationEndIndex(e,t,i){for(let s of this._forEachUnquotedChar(e,i)){if(e.startsWith(t,s))return s;if(e.startsWith("//",s))return e.indexOf(t,s)}return-1}*_forEachUnquotedChar(e,t){let i=null,s=0;for(let r=t;r<e.length;r++){let o=e[r];jr(e.charCodeAt(r))&&(i===null||i===o)&&s%2===0?i=i===null?o:null:i===null&&(yield r),s=o==="\\"?s+1:0}}},Vr=(function(n){return n[n.None=0]="None",n[n.Writable=1]="Writable",n})(Vr||{}),Ri=class{input;parseSourceSpan;absoluteOffset;tokens;parseFlags;errors;offset;supportsDirectPipeReferences;rparensExpected=0;rbracketsExpected=0;rbracesExpected=0;context=Vr.None;sourceSpanCache=new Map;index=0;constructor(e,t,i,s,r,o,a,l){this.input=e,this.parseSourceSpan=t,this.absoluteOffset=i,this.tokens=s,this.parseFlags=r,this.errors=o,this.offset=a,this.supportsDirectPipeReferences=l}peek(e){let t=this.index+e;return t<this.tokens.length?this.tokens[t]:ha}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:this.tokens.length===0?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let i=this.currentEndIndex;if(t!==void 0&&t>this.currentEndIndex&&(i=t),e>i){let s=i;i=e,e=s}return new es(e,i)}sourceSpan(e,t){let i=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(i)||this.sourceSpanCache.set(i,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(i)}advance(){this.index++}withContext(e,t){this.context|=e;let i=t();return this.context^=e,i}consumeOptionalCharacter(e){return this.next.isCharacter(e)?(this.advance(),!0):!1}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return this.next.isOperator(e)?(this.advance(),!0):!1}isAssignmentOperator(e){return e.type===ne.Operator&&Ct.isAssignmentOperation(e.strValue)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===ha?"end of input":`token ${e}`}expectIdentifierOrKeyword(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null):(this.advance(),e.toString())}expectIdentifierOrKeywordOrString(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()&&!e.isString()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),""):(this.advance(),e.toString())}parseChain(){let e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){let i=this.parsePipe();if(e.push(i),this.consumeOptionalCharacter(qt))for(this.parseFlags&1||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(qt););else if(this.index<this.tokens.length){let s=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===s)break}}if(e.length===0){let i=this.offset,s=this.offset+this.input.length;return new At(this.span(i,s),this.sourceSpan(i,s))}return e.length==1?e[0]:new Us(this.span(t),this.sourceSpan(t),e)}parsePipe(){let e=this.inputIndex,t=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseFlags&1&&this.error("Cannot have a pipe in an action expression");do{let i=this.inputIndex,s=this.expectIdentifierOrKeyword(),r,o;s!==null?r=this.sourceSpan(i):(s="",o=this.next.index!==-1?this.next.index:this.input.length+this.offset,r=new es(o,o).toAbsolute(this.absoluteOffset));let a=[];for(;this.consumeOptionalCharacter(Xn);)a.push(this.parseExpression());let l;if(this.supportsDirectPipeReferences){let c=s.charCodeAt(0);l=c===yi||c>=wi&&c<=rr?ya.ReferencedDirectly:ya.ReferencedByName}else l=ya.ReferencedByName;t=new za(this.span(e),this.sourceSpan(e,o),t,s,a,l,r)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){let e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let i=this.parsePipe(),s;if(this.consumeOptionalCharacter(Xn))s=this.parsePipe();else{let r=this.inputIndex,o=this.input.substring(e,r);this.error(`Conditional expression ${o} requires all 3 expressions`),s=new At(this.span(e),this.sourceSpan(e))}return new ja(this.span(e),this.sourceSpan(e),t,i,s)}else return t}parseLogicalOr(){let e=this.inputIndex,t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let i=this.parseLogicalAnd();t=new Ct(this.span(e),this.sourceSpan(e),"||",t,i)}return t}parseLogicalAnd(){let e=this.inputIndex,t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let i=this.parseNullishCoalescing();t=new Ct(this.span(e),this.sourceSpan(e),"&&",t,i)}return t}parseNullishCoalescing(){let e=this.inputIndex,t=this.parseEquality();for(;this.consumeOptionalOperator("??");){let i=this.parseEquality();t=new Ct(this.span(e),this.sourceSpan(e),"??",t,i)}return t}parseEquality(){let e=this.inputIndex,t=this.parseRelational();for(;this.next.type==ne.Operator;){let i=this.next.strValue;switch(i){case"==":case"===":case"!=":case"!==":this.advance();let s=this.parseRelational();t=new Ct(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parseRelational(){let e=this.inputIndex,t=this.parseAdditive();for(;this.next.type==ne.Operator||this.next.isKeywordIn;){let i=this.next.strValue;switch(i){case"<":case">":case"<=":case">=":case"in":this.advance();let s=this.parseAdditive();t=new Ct(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parseAdditive(){let e=this.inputIndex,t=this.parseMultiplicative();for(;this.next.type==ne.Operator;){let i=this.next.strValue;switch(i){case"+":case"-":this.advance();let s=this.parseMultiplicative();t=new Ct(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parseMultiplicative(){let e=this.inputIndex,t=this.parseExponentiation();for(;this.next.type==ne.Operator;){let i=this.next.strValue;switch(i){case"*":case"%":case"/":this.advance();let s=this.parseExponentiation();t=new Ct(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parseExponentiation(){let e=this.inputIndex,t=this.parsePrefix();for(;this.next.type==ne.Operator&&this.next.strValue==="**";){(t instanceof Fs||t instanceof io||t instanceof so||t instanceof ro)&&this.error("Unary operator used immediately before exponentiation expression. Parenthesis must be used to disambiguate operator precedence"),this.advance();let i=this.parseExponentiation();t=new Ct(this.span(e),this.sourceSpan(e),"**",t,i)}return t}parsePrefix(){if(this.next.type==ne.Operator){let e=this.inputIndex,t=this.next.strValue,i;switch(t){case"+":return this.advance(),i=this.parsePrefix(),Fs.createPlus(this.span(e),this.sourceSpan(e),i);case"-":return this.advance(),i=this.parsePrefix(),Fs.createMinus(this.span(e),this.sourceSpan(e),i);case"!":return this.advance(),i=this.parsePrefix(),new io(this.span(e),this.sourceSpan(e),i)}}else if(this.next.isKeywordTypeof()){this.advance();let e=this.inputIndex,t=this.parsePrefix();return new so(this.span(e),this.sourceSpan(e),t)}else if(this.next.isKeywordVoid()){this.advance();let e=this.inputIndex,t=this.parsePrefix();return new ro(this.span(e),this.sourceSpan(e),t)}return this.parseCallChain()}parseCallChain(){let e=this.inputIndex,t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(Or))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))this.consumeOptionalCharacter(xn)?t=this.parseCall(t,e,!0):t=this.consumeOptionalCharacter(gi)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(gi))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter(xn))t=this.parseCall(t,e,!1);else if(this.consumeOptionalOperator("!"))t=new oo(this.span(e),this.sourceSpan(e),t);else if(this.next.isTemplateLiteralEnd())t=this.parseNoInterpolationTaggedTemplateLiteral(t,e);else if(this.next.isTemplateLiteralPart())t=this.parseTaggedTemplateLiteral(t,e);else return t}parsePrimary(){let e=this.inputIndex;if(this.consumeOptionalCharacter(xn)){this.rparensExpected++;let t=this.parsePipe();return this.consumeOptionalCharacter(St)||(this.error("Missing closing parentheses"),this.consumeOptionalCharacter(St)),this.rparensExpected--,new co(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isKeywordNull())return this.advance(),new Vt(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Vt(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new Vt(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new Vt(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordIn())return this.advance(),new Vt(this.span(e),this.sourceSpan(e),"in");if(this.next.isKeywordThis())return this.advance(),new ts(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(gi)){this.rbracketsExpected++;let t=this.parseExpressionList(Hi);return this.rbracketsExpected--,this.expectCharacter(Hi),new Wa(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isCharacter(_n))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new On(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){let t=this.next.toNumber();return this.advance(),new Vt(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isTemplateLiteralEnd())return this.parseNoInterpolationTemplateLiteral();if(this.next.isTemplateLiteralPart())return this.parseTemplateLiteral();if(this.next.isString()&&this.next.kind===Gi.Plain){let t=this.next.toString();return this.advance(),new Vt(this.span(e),this.sourceSpan(e),t)}else return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new At(this.span(e),this.sourceSpan(e))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new At(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new At(this.span(e),this.sourceSpan(e)))}}}}parseExpressionList(e){let t=[];do if(!this.next.isCharacter(e))t.push(this.parsePipe());else break;while(this.consumeOptionalCharacter(on));return t}parseLiteralMap(){let e=[],t=[],i=this.inputIndex;if(this.expectCharacter(_n),!this.consumeOptionalCharacter(Et)){this.rbracesExpected++;do{let s=this.inputIndex,r=this.next.isString(),o=this.expectIdentifierOrKeywordOrString(),a={key:o,quoted:r};if(e.push(a),r)this.expectCharacter(Xn),t.push(this.parsePipe());else if(this.consumeOptionalCharacter(Xn))t.push(this.parsePipe());else{a.isShorthandInitialized=!0;let l=this.span(s),c=this.sourceSpan(s);t.push(new Zn(l,c,c,new On(l,c),o))}}while(this.consumeOptionalCharacter(on)&&!this.next.isCharacter(Et));this.rbracesExpected--,this.expectCharacter(Et)}return new Ga(this.span(i),this.sourceSpan(i),e,t)}parseAccessMember(e,t,i){let s=this.inputIndex,r=this.withContext(Vr.Writable,()=>{let a=this.expectIdentifierOrKeyword()??"";return a.length===0&&this.error("Expected identifier for property access",e.span.end),a}),o=this.sourceSpan(s);if(i)return this.isAssignmentOperator(this.next)?(this.advance(),this.error("The '?.' operator cannot be used in the assignment"),new At(this.span(t),this.sourceSpan(t))):new to(this.span(t),this.sourceSpan(t),o,e,r);if(this.isAssignmentOperator(this.next)){let a=this.next.strValue;if(!(this.parseFlags&1))return this.advance(),this.error("Bindings cannot contain assignments"),new At(this.span(t),this.sourceSpan(t));let l=new Zn(this.span(t),this.sourceSpan(t),o,e,r);this.advance();let c=this.parseConditional();return new Ct(this.span(t),this.sourceSpan(t),a,l,c)}else return new Zn(this.span(t),this.sourceSpan(t),o,e,r)}parseCall(e,t,i){let s=this.inputIndex;this.rparensExpected++;let r=this.parseCallArguments(),o=this.span(s,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(St),this.rparensExpected--;let a=this.span(t),l=this.sourceSpan(t);return i?new Xa(a,l,e,r,o):new js(a,l,e,r,o)}parseCallArguments(){if(this.next.isCharacter(St))return[];let e=[];do e.push(this.parsePipe());while(this.consumeOptionalCharacter(on));return e}expectTemplateBindingKey(){let e="",t=!1,i=this.currentAbsoluteOffset;do e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-");while(t);return{source:e,span:new zt(i,i+e.length)}}parseTemplateBindings(e){let t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){let i=this.parseLetBinding();if(i)t.push(i);else{let s=this.expectTemplateBindingKey(),r=this.parseAsBinding(s);r?t.push(r):(s.source=e.source+s.source.charAt(0).toUpperCase()+s.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(s)))}this.consumeStatementTerminator()}return new ju(t,[],this.errors)}parseKeyedReadOrWrite(e,t,i){return this.withContext(Vr.Writable,()=>{this.rbracketsExpected++;let s=this.parsePipe();if(s instanceof At&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(Hi),this.isAssignmentOperator(this.next)){let r=this.next.strValue;if(i)this.advance(),this.error("The '?.' operator cannot be used in the assignment");else{let o=new ns(this.span(t),this.sourceSpan(t),e,s);this.advance();let a=this.parseConditional();return new Ct(this.span(t),this.sourceSpan(t),r,o,a)}}else return i?new no(this.span(t),this.sourceSpan(t),e,s):new ns(this.span(t),this.sourceSpan(t),e,s);return new At(this.span(t),this.sourceSpan(t))})}parseDirectiveKeywordBindings(e){let t=[];this.consumeOptionalCharacter(Xn);let i=this.getDirectiveBoundTarget(),s=this.currentAbsoluteOffset,r=this.parseAsBinding(e);r||(this.consumeStatementTerminator(),s=this.currentAbsoluteOffset);let o=new zt(e.span.start,s);return t.push(new ou(o,e,i)),r&&t.push(r),t}getDirectiveBoundTarget(){if(this.next===ha||this.peekKeywordAs()||this.peekKeywordLet())return null;let e=this.parsePipe(),{start:t,end:i}=e.span,s=this.input.substring(t,i);return new Ht(e,s,pi(this.parseSourceSpan),this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();let t=this.expectTemplateBindingKey();this.consumeStatementTerminator();let i=new zt(e.span.start,this.currentAbsoluteOffset);return new uo(i,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;let e=this.currentAbsoluteOffset;this.advance();let t=this.expectTemplateBindingKey(),i=null;this.consumeOptionalOperator("=")&&(i=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let s=new zt(e,this.currentAbsoluteOffset);return new uo(s,t,i)}parseNoInterpolationTaggedTemplateLiteral(e,t){let i=this.parseNoInterpolationTemplateLiteral();return new ao(this.span(t),this.sourceSpan(t),e,i)}parseNoInterpolationTemplateLiteral(){let e=this.next.strValue,t=this.inputIndex;this.advance();let i=this.span(t),s=this.sourceSpan(t);return new lo(i,s,[new Ya(i,s,e)],[])}parseTaggedTemplateLiteral(e,t){let i=this.parseTemplateLiteral();return new ao(this.span(t),this.sourceSpan(t),e,i)}parseTemplateLiteral(){let e=[],t=[],i=this.inputIndex;for(;this.next!==ha;){let s=this.next;if(s.isTemplateLiteralPart()||s.isTemplateLiteralEnd()){let r=this.inputIndex;if(this.advance(),e.push(new Ya(this.span(r),this.sourceSpan(r),s.strValue)),s.isTemplateLiteralEnd())break}else if(s.isTemplateLiteralInterpolationStart()){this.advance(),this.rbracesExpected++;let r=this.parsePipe();r instanceof At?this.error("Template literal interpolation cannot be empty"):t.push(r),this.rbracesExpected--}else this.advance()}return new lo(this.span(i),this.sourceSpan(i),e,t)}consumeStatementTerminator(){this.consumeOptionalCharacter(qt)||this.consumeOptionalCharacter(on)}error(e,t=this.index){this.errors.push(Ls(e,this.input,this.getErrorLocationText(t),this.parseSourceSpan)),this.skip()}getErrorLocationText(e){return e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let i=`Private identifiers are not supported. Unexpected private identifier: ${e}`;t!==null&&(i+=`, ${t}`),this.error(i)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(qt)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(St))&&(this.rbracesExpected<=0||!e.isCharacter(Et))&&(this.rbracketsExpected<=0||!e.isCharacter(Hi))&&(!(this.context&Vr.Writable)||!this.isAssignmentOperator(e));)this.next.isError()&&this.errors.push(Ls(this.next.toString(),this.input,this.getErrorLocationText(this.next.index),this.parseSourceSpan)),this.advance(),e=this.next}};function Ls(n,e,t,i){t.length>0&&(t=` ${t} `);let s=pi(i),r=`Parser Error: ${n}${t}[${e}] in ${s}`;return new G(i,r)}var zu=class extends po{errors=[];visitPipe(){this.errors.push("pipes")}};function ux(n){let e=new Map,t=0,i=0,s=0;for(;s<n.length;){let r=n[s];if(r.type===9){let[o,a]=r.parts;t+=a.length,i+=o.length}else{let o=r.parts.reduce((a,l)=>a+l.length,0);i+=o,t+=o}e.set(i,t),s++}return e}function px(n){return n.visit(new Wu)}var Wu=class{visitUnary(e,t){return`${e.operator}${e.expr.visit(this,t)}`}visitBinary(e,t){return`${e.left.visit(this,t)} ${e.operation} ${e.right.visit(this,t)}`}visitChain(e,t){return e.expressions.map(i=>i.visit(this,t)).join("; ")}visitConditional(e,t){return`${e.condition.visit(this,t)} ? ${e.trueExp.visit(this,t)} : ${e.falseExp.visit(this,t)}`}visitThisReceiver(){return"this"}visitImplicitReceiver(){return""}visitInterpolation(e,t){return hx(e.strings,e.expressions.map(i=>i.visit(this,t))).join("")}visitKeyedRead(e,t){return`${e.receiver.visit(this,t)}[${e.key.visit(this,t)}]`}visitLiteralArray(e,t){return`[${e.expressions.map(i=>i.visit(this,t)).join(", ")}]`}visitLiteralMap(e,t){return`{${dx(e.keys.map(i=>i.quoted?`'${i.key}'`:i.key),e.values.map(i=>i.visit(this,t))).map(([i,s])=>`${i}: ${s}`).join(", ")}}`}visitLiteralPrimitive(e){if(e.value===null)return"null";switch(typeof e.value){case"number":case"boolean":return e.value.toString();case"undefined":return"undefined";case"string":return`'${e.value.replace(/'/g,"\\'")}'`;default:throw new Error(`Unsupported primitive type: ${e.value}`)}}visitPipe(e,t){return`${e.exp.visit(this,t)} | ${e.name}`}visitPrefixNot(e,t){return`!${e.expression.visit(this,t)}`}visitNonNullAssert(e,t){return`${e.expression.visit(this,t)}!`}visitPropertyRead(e,t){return e.receiver instanceof On?e.name:`${e.receiver.visit(this,t)}.${e.name}`}visitSafePropertyRead(e,t){return`${e.receiver.visit(this,t)}?.${e.name}`}visitSafeKeyedRead(e,t){return`${e.receiver.visit(this,t)}?.[${e.key.visit(this,t)}]`}visitCall(e,t){return`${e.receiver.visit(this,t)}(${e.args.map(i=>i.visit(this,t)).join(", ")})`}visitSafeCall(e,t){return`${e.receiver.visit(this,t)}?.(${e.args.map(i=>i.visit(this,t)).join(", ")})`}visitTypeofExpression(e,t){return`typeof ${e.expression.visit(this,t)}`}visitVoidExpression(e,t){return`void ${e.expression.visit(this,t)}`}visitASTWithSource(e,t){return e.ast.visit(this,t)}visitTemplateLiteral(e,t){let i="";for(let s=0;s<e.elements.length;s++){i+=e.elements[s].visit(this,t);let r=s<e.expressions.length?e.expressions[s]:null;r!==null&&(i+="${"+r.visit(this,t)+"}")}return"`"+i+"`"}visitTemplateLiteralElement(e,t){return e.text}visitTaggedTemplateLiteral(e,t){return e.tag.visit(this,t)+e.template.visit(this,t)}visitParenthesizedExpression(e,t){return"("+e.expression.visit(this,t)+")"}};function dx(n,e){if(n.length!==e.length)throw new Error("Array lengths must match");return n.map((t,i)=>[t,e[i]])}function hx(n,e){let t=[];for(let i=0;i<Math.max(n.length,e.length);i++)i<n.length&&t.push(n[i]),i<e.length&&t.push(e[i]);return t}var Aa;function zh(){return Aa||(Aa={},ma(ke.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),ma(ke.STYLE,["*|style"]),ma(ke.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","input|src","ins|cite","q|cite","source|src","track|src","video|poster","video|src"]),ma(ke.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),Aa}function ma(n,e){for(let t of e)Aa[t.toLowerCase()]=n}var mx=new Set(["sandbox","allow","allowfullscreen","referrerpolicy","csp","fetchpriority"]);function fx(n){return mx.has(n.toLowerCase())}var Gu=class{},gx="boolean",vx="number",_x="string",xx="object",Cx=["[Element]|textContent,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColSpan,%ariaCurrent,%ariaDescription,%ariaDisabled,%ariaExpanded,%ariaHasPopup,%ariaHidden,%ariaInvalid,%ariaKeyShortcuts,%ariaLabel,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,!inert,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,search,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","selectedcontent^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","search^[HTMLELement]|","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|",":math:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforeinput,*beforematch,*beforetoggle,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contentvisibilityautostatechange,*contextlost,*contextmenu,*contextrestored,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*scrollend,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":math:math^:math:|",":math:maction^:math:|",":math:menclose^:math:|",":math:merror^:math:|",":math:mfenced^:math:|",":math:mfrac^:math:|",":math:mi^:math:|",":math:mmultiscripts^:math:|",":math:mn^:math:|",":math:mo^:math:|",":math:mover^:math:|",":math:mpadded^:math:|",":math:mphantom^:math:|",":math:mroot^:math:|",":math:mrow^:math:|",":math:ms^:math:|",":math:mspace^:math:|",":math:msqrt^:math:|",":math:mstyle^:math:|",":math:msub^:math:|",":math:msubsup^:math:|",":math:msup^:math:|",":math:mtable^:math:|",":math:mtd^:math:|",":math:mtext^:math:|",":math:mtr^:math:|",":math:munder^:math:|",":math:munderover^:math:|",":math:semantics^:math:|"],Rf=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex","aria-atomic":"ariaAtomic","aria-autocomplete":"ariaAutoComplete","aria-busy":"ariaBusy","aria-checked":"ariaChecked","aria-colcount":"ariaColCount","aria-colindex":"ariaColIndex","aria-colspan":"ariaColSpan","aria-current":"ariaCurrent","aria-disabled":"ariaDisabled","aria-expanded":"ariaExpanded","aria-haspopup":"ariaHasPopup","aria-hidden":"ariaHidden","aria-invalid":"ariaInvalid","aria-keyshortcuts":"ariaKeyShortcuts","aria-label":"ariaLabel","aria-level":"ariaLevel","aria-live":"ariaLive","aria-modal":"ariaModal","aria-multiline":"ariaMultiLine","aria-multiselectable":"ariaMultiSelectable","aria-orientation":"ariaOrientation","aria-placeholder":"ariaPlaceholder","aria-posinset":"ariaPosInSet","aria-pressed":"ariaPressed","aria-readonly":"ariaReadOnly","aria-required":"ariaRequired","aria-roledescription":"ariaRoleDescription","aria-rowcount":"ariaRowCount","aria-rowindex":"ariaRowIndex","aria-rowspan":"ariaRowSpan","aria-selected":"ariaSelected","aria-setsize":"ariaSetSize","aria-sort":"ariaSort","aria-valuemax":"ariaValueMax","aria-valuemin":"ariaValueMin","aria-valuenow":"ariaValueNow","aria-valuetext":"ariaValueText"})),Sx=Array.from(Rf).reduce((n,[e,t])=>(n.set(e,t),n),new Map),ir=class extends Gu{_schema=new Map;_eventSchema=new Map;constructor(){super(),Cx.forEach(e=>{let t=new Map,i=new Set,[s,r]=e.split("|"),o=r.split(","),[a,l]=s.split("^");a.split(",").forEach(p=>{this._schema.set(p.toLowerCase(),t),this._eventSchema.set(p.toLowerCase(),i)});let c=l&&this._schema.get(l.toLowerCase());if(c){for(let[p,d]of c)t.set(p,d);for(let p of this._eventSchema.get(l.toLowerCase()))i.add(p)}o.forEach(p=>{if(p.length>0)switch(p[0]){case"*":i.add(p.substring(1));break;case"!":t.set(p.substring(1),gx);break;case"#":t.set(p.substring(1),vx);break;case"%":t.set(p.substring(1),xx);break;default:t.set(p,_x)}})})}hasProperty(e,t,i){if(i.some(r=>r.name===Wd.name))return!0;if(e.indexOf("-")>-1){if(rh(e)||lu(e))return!1;if(i.some(r=>r.name===zd.name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(t)}hasElement(e,t){return t.some(i=>i.name===Wd.name)||e.indexOf("-")>-1&&(rh(e)||lu(e)||t.some(i=>i.name===zd.name))?!0:this._schema.has(e.toLowerCase())}securityContext(e,t,i){i&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();let s=zh()[e+"|"+t];return s||(s=zh()["*|"+t],s||ke.NONE)}getMappedPropName(e){return Rf.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...
If '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){let t=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(t.keys()).map(i=>Sx.get(i)??i)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return xg(e)}normalizeAnimationStyleValue(e,t,i){let s="",r=i.toString().trim(),o=null;if(Ex(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&(o=`Please provide a CSS unit value for ${t}:${i}`)}return{error:o,value:r+s}}};function Ex(n){switch(n){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}var se=class{closedByChildren={};contentType;closedByParent=!1;implicitNamespacePrefix;isVoid;ignoreFirstLf;canSelfClose;preventNamespaceInheritance;constructor({closedByChildren:e,implicitNamespacePrefix:t,contentType:i=Nn.PARSABLE_DATA,closedByParent:s=!1,isVoid:r=!1,ignoreFirstLf:o=!1,preventNamespaceInheritance:a=!1,canSelfClose:l=!1}={}){e&&e.length>0&&e.forEach(c=>this.closedByChildren[c]=!0),this.isVoid=r,this.closedByParent=s||r,this.implicitNamespacePrefix=t||null,this.contentType=i,this.ignoreFirstLf=o,this.preventNamespaceInheritance=a,this.canSelfClose=l??r}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return typeof this.contentType=="object"?(e===void 0?void 0:this.contentType[e])??this.contentType.default:this.contentType}},Wh,ks;function Xu(n){return ks||(Wh=new se({canSelfClose:!0}),ks=Object.assign(Object.create(null),{base:new se({isVoid:!0}),meta:new se({isVoid:!0}),area:new se({isVoid:!0}),embed:new se({isVoid:!0}),link:new se({isVoid:!0}),img:new se({isVoid:!0}),input:new se({isVoid:!0}),param:new se({isVoid:!0}),hr:new se({isVoid:!0}),br:new se({isVoid:!0}),source:new se({isVoid:!0}),track:new se({isVoid:!0}),wbr:new se({isVoid:!0}),p:new se({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new se({closedByChildren:["tbody","tfoot"]}),tbody:new se({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new se({closedByChildren:["tbody"],closedByParent:!0}),tr:new se({closedByChildren:["tr"],closedByParent:!0}),td:new se({closedByChildren:["td","th"],closedByParent:!0}),th:new se({closedByChildren:["td","th"],closedByParent:!0}),col:new se({isVoid:!0}),svg:new se({implicitNamespacePrefix:"svg"}),foreignObject:new se({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new se({implicitNamespacePrefix:"math"}),li:new se({closedByChildren:["li"],closedByParent:!0}),dt:new se({closedByChildren:["dt","dd"]}),dd:new se({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new se({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new se({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new se({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new se({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new se({closedByChildren:["optgroup"],closedByParent:!0}),option:new se({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new se({ignoreFirstLf:!0}),listing:new se({ignoreFirstLf:!0}),style:new se({contentType:Nn.RAW_TEXT}),script:new se({contentType:Nn.RAW_TEXT}),title:new se({contentType:{default:Nn.ESCAPABLE_RAW_TEXT,svg:Nn.PARSABLE_DATA}}),textarea:new se({contentType:Nn.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),new ir().allKnownElementNames().forEach(e=>{!ks[e]&&cu(e)===null&&(ks[e]=new se({canSelfClose:!1}))})),ks[n]??ks[n.toLowerCase()]??Wh}var Gh={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},Yu=class{_placeHolderNameCounts={};_signatureToName={};getStartTagPlaceholderName(e,t,i){let s=this._hashTag(e,t,i);if(this._signatureToName[s])return this._signatureToName[s];let r=e.toUpperCase(),o=Gh[r]||`TAG_${r}`,a=this._generateUniqueName(i?o:`START_${o}`);return this._signatureToName[s]=a,a}getCloseTagPlaceholderName(e){let t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];let i=e.toUpperCase(),s=Gh[i]||`TAG_${i}`,r=this._generateUniqueName(`CLOSE_${s}`);return this._signatureToName[t]=r,r}getPlaceholderName(e,t){let i=e.toUpperCase(),s=`PH: ${i}=${t}`;if(this._signatureToName[s])return this._signatureToName[s];let r=this._generateUniqueName(i);return this._signatureToName[s]=r,r}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}getStartBlockPlaceholderName(e,t){let i=this._hashBlock(e,t);if(this._signatureToName[i])return this._signatureToName[i];let s=this._generateUniqueName(`START_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[i]=s,s}getCloseBlockPlaceholderName(e){let t=this._hashClosingBlock(e);if(this._signatureToName[t])return this._signatureToName[t];let i=this._generateUniqueName(`CLOSE_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[t]=i,i}_hashTag(e,t,i){let s=`<${e}`,r=Object.keys(t).sort().map(a=>` ${a}=${t[a]}`).join(""),o=i?"/>":`></${e}>`;return s+r+o}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_hashBlock(e,t){let i=t.length===0?"":` (${t.sort().join("; ")})`;return`@${e}${i} {}`}_hashClosingBlock(e){return this._hashBlock(`close_${e}`,[])}_toSnakeCase(e){return e.toUpperCase().replace(/[^A-Z0-9]/g,"_")}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;let i=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=i+1,`${e}_${i}`}},bx=new Dl(new Oo);function wx(n,e,t,i){let s=new Qu(bx,n,e,t,i);return(r,o,a,l,c)=>s.toI18nMessage(r,o,a,l,c)}function yx(n,e){return e}var Qu=class{_expressionParser;_interpolationConfig;_containerBlocks;_retainEmptyTokens;_preserveExpressionWhitespace;constructor(e,t,i,s,r){this._expressionParser=e,this._interpolationConfig=t,this._containerBlocks=i,this._retainEmptyTokens=s,this._preserveExpressionWhitespace=r}toI18nMessage(e,t="",i="",s="",r){let o={isIcu:e.length==1&&e[0]instanceof Wi,icuDepth:0,placeholderRegistry:new Yu,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:r||yx},a=Te(this,e,o);return new wt(a,o.placeholderToContent,o.placeholderToMessage,t,i,s)}visitElement(e,t){return this._visitElementLike(e,t)}visitComponent(e,t){return this._visitElementLike(e,t)}visitDirective(e,t){throw new Error("Unreachable code")}visitAttribute(e,t){let i=e.valueTokens===void 0||e.valueTokens.length===1?new Pr(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitText(e,t){let i=e.tokens.length===1?new Pr(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitComment(e,t){return null}visitExpansion(e,t){t.icuDepth++;let i={},s=new rl(e.switchValue,e.type,i,e.sourceSpan);if(e.cases.forEach(a=>{i[a.value]=new Jn(a.expression.map(l=>l.visit(this,t)),a.expSourceSpan)}),t.icuDepth--,t.isIcu||t.icuDepth>0){let a=t.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return s.expressionPlaceholder=a,t.placeholderToContent[a]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},t.visitNodeFn(e,s)}let r=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[r]=this.toI18nMessage([e],"","","",void 0);let o=new Ys(s,r,e.sourceSpan);return t.visitNodeFn(e,o)}visitExpansionCase(e,t){throw new Error("Unreachable code")}visitBlock(e,t){let i=Te(this,e.children,t);if(this._containerBlocks.has(e.name))return new Jn(i,e.sourceSpan);let s=e.parameters.map(l=>l.expression),r=t.placeholderRegistry.getStartBlockPlaceholderName(e.name,s),o=t.placeholderRegistry.getCloseBlockPlaceholderName(e.name);t.placeholderToContent[r]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan},t.placeholderToContent[o]={text:e.endSourceSpan?e.endSourceSpan.toString():"}",sourceSpan:e.endSourceSpan??e.sourceSpan};let a=new Ci(e.name,s,r,o,i,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,a)}visitBlockParameter(e,t){throw new Error("Unreachable code")}visitLetDeclaration(e,t){return null}_visitElementLike(e,t){let i=Te(this,e.children,t),s={},r=d=>{s[d.name]=d.value},o,a;e instanceof en?(o=e.name,a=Xu(e.name).isVoid):(o=e.fullName,a=e.tagName?Xu(e.tagName).isVoid:!1),e.attrs.forEach(r),e.directives.forEach(d=>d.attrs.forEach(r));let l=t.placeholderRegistry.getStartTagPlaceholderName(o,s,a);t.placeholderToContent[l]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let c="";a||(c=t.placeholderRegistry.getCloseTagPlaceholderName(o),t.placeholderToContent[c]={text:`</${o}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});let p=new xi(o,s,l,c,i,a,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,p)}_visitTextWithInterpolation(e,t,i,s){let r=[],o=!1;for(let a of e)switch(a.type){case 8:case 17:o=!0;let[l,c,p]=a.parts,d=Ix(c)||"INTERPOLATION",m=i.placeholderRegistry.getPlaceholderName(d,c);if(this._preserveExpressionWhitespace)i.placeholderToContent[m]={text:a.parts.join(""),sourceSpan:a.sourceSpan},r.push(new Co(c,m,a.sourceSpan));else{let _=this.normalizeExpression(a);i.placeholderToContent[m]={text:`${l}${_}${p}`,sourceSpan:a.sourceSpan},r.push(new Co(_,m,a.sourceSpan))}break;default:if(a.parts[0].length>0||this._retainEmptyTokens){let _=r[r.length-1];_ instanceof Pr?(_.value+=a.parts[0],_.sourceSpan=new Q(_.sourceSpan.start,a.sourceSpan.end,_.sourceSpan.fullStart,_.sourceSpan.details)):r.push(new Pr(a.parts[0],a.sourceSpan))}else this._retainEmptyTokens&&r.push(new Pr(a.parts[0],a.sourceSpan));break}return o?(kx(r,s),new Jn(r,t)):r[0]}normalizeExpression(e){let t=e.parts[1],i=this._expressionParser.parseBinding(t,e.sourceSpan,e.sourceSpan.start.offset,this._interpolationConfig);return px(i)}};function kx(n,e){if(e instanceof wt&&(Tx(e),e=e.nodes[0]),e instanceof Jn){Ax(e.children,n);for(let t=0;t<n.length;t++)n[t].sourceSpan=e.children[t].sourceSpan}}function Tx(n){let e=n.nodes;if(e.length!==1||!(e[0]instanceof Jn))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}function Ax(n,e){if(n.length!==e.length)throw new Error(`
The number of i18n message children changed between first and second pass.

First pass (${n.length} tokens):
${n.map(t=>`"${t.sourceSpan.toString()}"`).join(`
`)}

Second pass (${e.length} tokens):
${e.map(t=>`"${t.sourceSpan.toString()}"`).join(`
`)}
    `.trim());if(n.some((t,i)=>e[i].constructor!==t.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}var Dx=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;function Ix(n){return n.split(Dx)[2]}var Xh=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function Yh(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),Xh.has(n+"|"+e)||Xh.has("*|"+e)}var Px=n=>(e,t)=>{let i=n.get(e)??e;return i instanceof ni&&(t instanceof Ys&&i.i18n instanceof wt&&(t.previousMessage=i.i18n),i.i18n=t),t},Il=class{interpolationConfig;keepI18nAttrs;enableI18nLegacyMessageIdFormat;containerBlocks;preserveSignificantWhitespace;retainEmptyTokens;hasI18nMeta=!1;_errors=[];constructor(e=Ln,t=!1,i=!1,s=ev,r=!0,o=!r){this.interpolationConfig=e,this.keepI18nAttrs=t,this.enableI18nLegacyMessageIdFormat=i,this.containerBlocks=s,this.preserveSignificantWhitespace=r,this.retainEmptyTokens=o}_generateI18nMessage(e,t="",i){let{meaning:s,description:r,customId:o}=this._parseMetadata(t),l=wx(this.interpolationConfig,this.containerBlocks,this.retainEmptyTokens,this.preserveSignificantWhitespace)(e,s,r,o,i);return this._setMessageId(l,t),this._setLegacyIds(l,t),l}visitAllWithErrors(e){let t=e.map(i=>i.visit(this,null));return new Tl(t,this._errors)}visitElement(e){return this._visitElementLike(e),e}visitComponent(e,t){return this._visitElementLike(e),e}visitExpansion(e,t){let i,s=e.i18n;if(this.hasI18nMeta=!0,s instanceof Ys){let r=s.name;i=this._generateI18nMessage([e],s);let o=Wm(i);o.name=r,t!==null&&(t.placeholderToMessage[r]=i)}else i=this._generateI18nMessage([e],t||s);return e.i18n=i,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlock(e,t){return Te(this,e.children,t),e}visitBlockParameter(e,t){return e}visitLetDeclaration(e,t){return e}visitDirective(e,t){return e}_visitElementLike(e){let t;if(Gg(e)){this.hasI18nMeta=!0;let i=[],s={};for(let r of e.attrs)if(r.name===jm){let o=e.i18n||r.value,a=new Map,l=this.preserveSignificantWhitespace?e.children:Dn(new Al(!1,a),e.children);t=this._generateI18nMessage(l,o,Px(a)),t.nodes.length===0&&(t=void 0),e.i18n=t}else if(r.name.startsWith(vu)){let o=r.name.slice(vu.length),a;e instanceof It?a=e.tagName===null?!1:Yh(e.tagName,o):a=Yh(e.name,o),a?this._reportError(r,`Translating attribute '${o}' is disallowed for security reasons.`):s[o]=r.value}else i.push(r);if(Object.keys(s).length)for(let r of i){let o=s[r.name];o!==void 0&&r.value&&(r.i18n=this._generateI18nMessage([r],r.i18n||o))}this.keepI18nAttrs||(e.attrs=i)}Te(this,e.children,t)}_parseMetadata(e){return typeof e=="string"?Mx(e):e instanceof wt?e:{}}_setMessageId(e,t){e.id||(e.id=t instanceof wt&&t.id||X0(e))}_setLegacyIds(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[G0(e),Bm(e)];else if(typeof t!="string"){let i=t instanceof wt?t:t instanceof Ys?t.previousMessage:void 0;e.legacyIds=i?i.legacyIds:[]}}_reportError(e,t){this._errors.push(new G(e.sourceSpan,t))}},Nx="|",Lx="@@";function Mx(n=""){let e,t,i;if(n=n.trim(),n){let s=n.indexOf(Lx),r=n.indexOf(Nx),o;[o,e]=s>-1?[n.slice(0,s),n.slice(s+2)]:[n,""],[t,i]=r>-1?[o.slice(0,r),o.slice(r+1)]:["",o]}return{customId:e,meaning:t,description:i}}function Bx(n){let e=[];return n.description?e.push({tagName:"desc",text:n.description}):e.push({tagName:"suppress",text:"{msgDescriptions}"}),n.meaning&&e.push({tagName:"meaning",text:n.meaning}),cg(e)}var Fx="goog.getMsg";function Rx(n,e,t,i){let s=$x(e),r=[E(s)];Object.keys(i).length&&(r.push(Lu(kp(i,!0),!0)),r.push(Lu({original_code:yt(Object.keys(i).map(l=>({key:Wo(l),quoted:!0,value:e.placeholders[l]?E(e.placeholders[l].sourceSpan.toString()):E(e.placeholderToMessage[l].nodes.map(c=>c.sourceSpan.toString()).join(""))})))})));let o=new Ze(t.name,oe(Fx).callFn(r),jt,ot.Final);o.addLeadingComment(Bx(e));let a=new cn(n.set(t));return[o,a]}var Zu=class{formatPh(e){return`{$${Wo(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){return If(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}},Ox=new Zu;function $x(n){return n.nodes.map(e=>e.visit(Ox,null)).join("")}function Vx(n,e,t){let{messageParts:i,placeHolders:s}=Hx(e),r=qx(e),o=s.map(c=>t[c.text]),a=dg(e,i,s,o,r),l=n.set(a);return[new cn(l)]}var Ju=class{placeholderToMessage;pieces;constructor(e,t){this.placeholderToMessage=e,this.pieces=t}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Ui)this.pieces[this.pieces.length-1].text+=e.value;else{let t=new Q(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Ui(e.value,t))}}visitContainer(e){e.children.forEach(t=>t.visit(this))}visitIcu(e){this.pieces.push(new Ui(If(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitBlockPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,t,i){return new Ms(Wo(e,!1),t,i)}};function Hx(n){let e=[],t=new Ju(n.placeholderToMessage,e);return n.nodes.forEach(i=>i.visit(t)),Ux(e)}function qx(n){let e=n.nodes[0],t=n.nodes[n.nodes.length-1];return new Q(e.sourceSpan.fullStart,t.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}function Ux(n){let e=[],t=[];n[0]instanceof Ms&&e.push(Oc(n[0].sourceSpan.start));for(let i=0;i<n.length;i++){let s=n[i];s instanceof Ui?e.push(s):(t.push(s),n[i-1]instanceof Ms&&e.push(Oc(n[i-1].sourceSpan.end)))}return n[n.length-1]instanceof Ms&&e.push(Oc(n[n.length-1].sourceSpan.end)),{messageParts:e,placeHolders:t}}function Oc(n){return new Ui("",new Q(n,n))}var Qh="ngI18nClosureMode",jx="i18n_",zx="I18N_EXP_",Zh="\uFFFD",Wx="MSG_";function Jh(n){return`${Wx}${n}`.toUpperCase()}function Gx(n){return new Ze(n.name,void 0,jt,void 0,n.sourceSpan)}function Xx(n){let e=n.relativeContextFilePath.replace(/[^A-Za-z0-9]/g,"_").toUpperCase()+"_",t=new Map,i=new Map,s=new Map,r=new Map;for(let l of n.units)for(let c of l.ops())if(c.kind===u.ExtractedAttribute&&c.i18nContext!==null){let p=t.get(c.i18nContext)??[];p.push(c),t.set(c.i18nContext,p)}else if(c.kind===u.I18nAttributes)i.set(c.target,c);else if(c.kind===u.I18nExpression&&c.usage===or.I18nAttribute){let p=s.get(c.target)??[];p.push(c),s.set(c.target,p)}else c.kind===u.I18nMessage&&r.set(c.xref,c);let o=new Map,a=new Map;for(let l of n.units)for(let c of l.create)if(c.kind===u.I18nMessage){if(c.messagePlaceholder===null){let{mainVar:p,statements:d}=Of(n,e,r,c);if(c.i18nBlock!==null){let m=n.addConst(p,d);a.set(c.i18nBlock,m)}else{n.constsInitializers.push(...d),o.set(c.i18nContext,p);let m=t.get(c.i18nContext);if(m!==void 0)for(let _ of m)_.expression=p.clone()}}T.remove(c)}for(let l of n.units)for(let c of l.create)if(ti(c)){let p=i.get(c.xref);if(p===void 0)continue;let d=s.get(c.xref);if(d===void 0)throw new Error("AssertionError: Could not find any i18n expressions associated with an I18nAttributes instruction");let m=new Set;d=d.filter(b=>{let A=m.has(b.name);return m.add(b.name),!A});let _=d.flatMap(b=>{let A=o.get(b.context);if(A===void 0)throw new Error("AssertionError: Could not find i18n expression's value");return[E(b.name),A]});p.i18nAttributesConfig=n.addConst(new Sn(_))}for(let l of n.units)for(let c of l.create)if(c.kind===u.I18nStart){let p=a.get(c.root);if(p===void 0)throw new Error("AssertionError: Could not find corresponding i18n block index for an i18n message op; was an i18n message incorrectly assumed to correspond to an attribute?");c.messageIndex=p}}function Of(n,e,t,i){let s=[],r=new Map;for(let c of i.subMessages){let p=t.get(c),{mainVar:d,statements:m}=Of(n,e,t,p);s.push(...m);let _=r.get(p.messagePlaceholder)??[];_.push(d),r.set(p.messagePlaceholder,_)}Yx(i,r),i.params=new Map([...i.params.entries()].sort());let o=oe(n.pool.uniqueName(jx)),a=Jx(n.pool,i.message.id,e,n.i18nUseExternalIds),l;if(i.needsPostprocessing||i.postprocessingParams.size>0){let c=Object.fromEntries([...i.postprocessingParams.entries()].sort()),p=kp(c,!1),d=[];i.postprocessingParams.size>0&&d.push(Lu(p,!0)),l=m=>U(f.i18nPostprocess).callFn([m,...d])}return s.push(...Qx(i.message,o,a,i.params,l)),{mainVar:o,statements:s}}function Yx(n,e){for(let[t,i]of e)i.length===1?n.params.set(t,i[0]):(n.params.set(t,E(`${Zh}${zx}${t}${Zh}`)),n.postprocessingParams.set(t,_e(i)))}function Qx(n,e,t,i,s){let r=Object.fromEntries(i),o=[Gx(e),ql(Zx(),Rx(e,n,t,r),Vx(e,n,kp(r,!1)))];return s&&o.push(new cn(e.set(s(e)))),o}function Zx(){return jo(oe(Qh)).notIdentical(E("undefined",bp)).and(oe(Qh))}function Jx(n,e,t,i){let s,r=t;if(i){let o=Jh("EXTERNAL_"),a=n.uniqueName(r);s=`${o}${Fi(e)}$$${a}`}else{let o=Jh(r);s=n.uniqueName(o)}return oe(s)}function Kx(n){for(let e of n.units){let t=null,i=null,s=new Map,r=new Map,o=new Map;for(let a of e.create)switch(a.kind){case u.I18nStart:if(a.context===null)throw Error("I18n op should have its context set.");t=a;break;case u.I18nEnd:t=null;break;case u.IcuStart:if(a.context===null)throw Error("Icu op should have its context set.");i=a;break;case u.IcuEnd:i=null;break;case u.Text:if(t!==null)if(s.set(a.xref,t),r.set(a.xref,i),a.icuPlaceholder!==null){let l=k_(n.allocateXrefId(),a.icuPlaceholder,[a.initialValue]);T.replace(a,l),o.set(a.xref,l)}else T.remove(a);break}for(let a of e.update)switch(a.kind){case u.InterpolateText:if(!s.has(a.target))continue;let l=s.get(a.target),c=r.get(a.target),p=o.get(a.target),d=c?c.context:l.context,m=c?To.Postproccessing:To.Creation,_=[];for(let b=0;b<a.interpolation.expressions.length;b++){let A=a.interpolation.expressions[b];_.push(gf(d,l.xref,l.xref,l.handle,A,p?.xref??null,a.interpolation.i18nPlaceholders[b]??null,m,or.I18nText,"",A.sourceSpan??a.sourceSpan))}T.replaceWithMany(a,_),p!==void 0&&(p.strings=a.interpolation.strings);break}}}function e2(n){for(let e of n.units)for(let t of e.create)switch(t.kind){case u.ElementStart:case u.ConditionalCreate:case u.ConditionalBranchCreate:case u.Template:if(!Array.isArray(t.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(t.numSlotsUsed+=t.localRefs.length,t.localRefs.length>0){let i=t2(t.localRefs);t.localRefs=n.addConst(i)}else t.localRefs=null;break}}function t2(n){let e=[];for(let t of n)e.push(E(t.name),E(t.target));return _e(e)}function n2(n){for(let e of n.units){let t=mt.HTML;for(let i of e.create)i.kind===u.ElementStart&&i.namespace!==t&&(T.insertBefore(__(i.namespace),i),t=i.namespace)}}function i2(n){let e=[],t=0,i=0,s=0,r=0,o=0,a=null;for(;t<n.length;)switch(n.charCodeAt(t++)){case 40:i++;break;case 41:i--;break;case 39:s===0?s=39:s===39&&n.charCodeAt(t-1)!==92&&(s=0);break;case 34:s===0?s=34:s===34&&n.charCodeAt(t-1)!==92&&(s=0);break;case 58:!a&&i===0&&s===0&&(a=$f(n.substring(o,t-1).trim()),r=t);break;case 59:if(a&&r>0&&i===0&&s===0){let c=n.substring(r,t-1).trim();e.push(a,c),o=t,r=0,a=null}break}if(a&&r){let l=n.slice(r).trim();e.push(a,l)}return e}function $f(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function s2(n){let e=new Map;for(let t of n.units)for(let i of t.create)ti(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.create)if(i.kind===u.ExtractedAttribute&&i.bindingKind===H.Attribute&&vf(i.expression)){let s=e.get(i.target);if(s!==void 0&&(s.kind===u.Template||s.kind===u.ConditionalCreate||s.kind===u.ConditionalBranchCreate)&&s.templateKind===Nt.Structural)continue;if(i.name==="style"){let r=i2(i.expression.value);for(let o=0;o<r.length-1;o+=2)T.insertBefore(sn(i.target,H.StyleProperty,null,r[o],E(r[o+1]),null,null,ke.STYLE),i);T.remove(i)}else if(i.name==="class"){let r=i.expression.value.trim().split(/\s+/g);for(let o of r)T.insertBefore(sn(i.target,H.ClassName,null,o,null,null,null,ke.NONE),i);T.remove(i)}}}function r2(n){Hr(n.root,n.componentName,{index:0},n.compatibility===Yt.TemplateDefinitionBuilder)}function Hr(n,e,t,i){n.fnName===null&&(n.fnName=n.job.pool.uniqueName(Fi(`${e}_${n.job.fnSuffix}`),!1));let s=new Map;for(let r of n.ops())switch(r.kind){case u.Property:case u.DomProperty:r.bindingKind===H.LegacyAnimation&&(r.name="@"+r.name);break;case u.Animation:if(r.handlerFnName===null){let p=r.name.replace(".","");r.handlerFnName=`${n.fnName}_${p}_cb`,r.handlerFnName=Fi(r.handlerFnName)}break;case u.AnimationListener:if(r.handlerFnName!==null)break;if(!r.hostListener&&r.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let o=r.name.replace(".","");r.hostListener?r.handlerFnName=`${e}_${o}_HostBindingHandler`:r.handlerFnName=`${n.fnName}_${r.tag.replace("-","_")}_${o}_${r.targetSlot.slot}_listener`,r.handlerFnName=Fi(r.handlerFnName);break;case u.Listener:if(r.handlerFnName!==null)break;if(!r.hostListener&&r.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let a="";r.isLegacyAnimationListener&&(r.name=`@${r.name}.${r.legacyAnimationPhase}`,a="animation"),r.hostListener?r.handlerFnName=`${e}_${a}${r.name}_HostBindingHandler`:r.handlerFnName=`${n.fnName}_${r.tag.replace("-","_")}_${a}${r.name}_${r.targetSlot.slot}_listener`,r.handlerFnName=Fi(r.handlerFnName);break;case u.TwoWayListener:if(r.handlerFnName!==null)break;if(r.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");r.handlerFnName=Fi(`${n.fnName}_${r.tag.replace("-","_")}_${r.name}_${r.targetSlot.slot}_listener`);break;case u.Variable:s.set(r.xref,o2(n,r.variable,t));break;case u.RepeaterCreate:if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");if(r.handle.slot===null)throw new Error("Expected slot to be assigned");if(r.emptyView!==null){let p=n.job.views.get(r.emptyView);Hr(p,`${e}_${r.functionNameSuffix}Empty_${r.handle.slot+2}`,t,i)}Hr(n.job.views.get(r.xref),`${e}_${r.functionNameSuffix}_${r.handle.slot+1}`,t,i);break;case u.Projection:if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");if(r.handle.slot===null)throw new Error("Expected slot to be assigned");if(r.fallbackView!==null){let p=n.job.views.get(r.fallbackView);Hr(p,`${e}_ProjectionFallback_${r.handle.slot}`,t,i)}break;case u.ConditionalCreate:case u.ConditionalBranchCreate:case u.Template:if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");let l=n.job.views.get(r.xref);if(r.handle.slot===null)throw new Error("Expected slot to be assigned");let c=r.functionNameSuffix.length===0?"":`_${r.functionNameSuffix}`;Hr(l,`${e}${c}_${r.handle.slot}`,t,i);break;case u.StyleProp:r.name=a2(r.name),i&&(r.name=Kh(r.name));break;case u.ClassProp:i&&(r.name=Kh(r.name));break}for(let r of n.ops())nt(r,o=>{if(!(!(o instanceof Kn)||o.name!==null)){if(!s.has(o.xref))throw new Error(`Variable ${o.xref} not yet named`);o.name=s.get(o.xref)}})}function o2(n,e,t){if(e.name===null)switch(e.kind){case et.Context:e.name=`ctx_r${t.index++}`;break;case et.Identifier:if(n.job.compatibility===Yt.TemplateDefinitionBuilder){let i=e.identifier==="ctx"?"i":"";e.name=`${e.identifier}_${i}r${++t.index}`}else e.name=`${e.identifier}_i${t.index++}`;break;default:e.name=`_r${++t.index}`;break}return e.name}function a2(n){return n.startsWith("--")?n:$f(n)}function Kh(n){let e=n.indexOf("!important");return e>-1?n.substring(0,e):n}function l2(n){for(let e of n.units){for(let t of e.create)(t.kind===u.Listener||t.kind===u.Animation||t.kind===u.AnimationListener||t.kind===u.TwoWayListener)&&em(t.handlerOps);em(e.update)}}function em(n){for(let e of n){if(e.kind!==u.Statement||!(e.statement instanceof cn)||!(e.statement.expr instanceof ml))continue;let t=e.statement.expr.steps,i=!0;for(let s=e.next;s.kind!==u.ListEnd&&i;s=s.next)nt(s,(r,o)=>{if(!Hn(r))return r;if(i&&!(o&ge.InChildOperation))switch(r.kind){case j.NextContext:r.steps+=t,T.remove(e),i=!1;break;case j.GetCurrentView:case j.Reference:case j.ContextLetReference:i=!1;break}})}}var c2="ng-container";function u2(n){for(let e of n.units){let t=new Set;for(let i of e.create)i.kind===u.ElementStart&&i.tag===c2&&(i.kind=u.ContainerStart,t.add(i.xref)),i.kind===u.ElementEnd&&t.has(i.xref)&&(i.kind=u.ContainerEnd)}}function p2(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function d2(n){let e=new Map;for(let t of n.units)for(let i of t.create)ti(i)&&e.set(i.xref,i);for(let t of n.units)for(let i of t.create)(i.kind===u.ElementStart||i.kind===u.ContainerStart)&&i.nonBindable&&T.insertAfter(m_(i.xref),i),(i.kind===u.ElementEnd||i.kind===u.ContainerEnd)&&p2(e,i.xref).nonBindable&&T.insertBefore(f_(i.xref),i)}function Yn(n){return e=>e.kind===n}function Wr(n,e){return t=>t.kind===n&&e===t.expression instanceof Le}function h2(n){return n.kind===u.Listener&&!(n.hostListener&&n.isLegacyAnimationListener)||n.kind===u.TwoWayListener||n.kind===u.Animation||n.kind===u.AnimationListener}function m2(n){return(n.kind===u.Property||n.kind===u.TwoWayProperty)&&!(n.expression instanceof Le)}var f2=[{test:n=>n.kind===u.Listener&&n.hostListener&&n.isLegacyAnimationListener},{test:h2}],g2=[{test:Yn(u.StyleMap),transform:Pl},{test:Yn(u.ClassMap),transform:Pl},{test:Yn(u.StyleProp)},{test:Yn(u.ClassProp)},{test:Wr(u.Attribute,!0)},{test:Wr(u.Property,!0)},{test:m2},{test:Wr(u.Attribute,!1)}],v2=[{test:Wr(u.DomProperty,!0)},{test:Wr(u.DomProperty,!1)},{test:Yn(u.Attribute)},{test:Yn(u.StyleMap),transform:Pl},{test:Yn(u.ClassMap),transform:Pl},{test:Yn(u.StyleProp)},{test:Yn(u.ClassProp)}],tm=new Set([u.Listener,u.TwoWayListener,u.AnimationListener,u.StyleMap,u.ClassMap,u.StyleProp,u.ClassProp,u.Property,u.TwoWayProperty,u.DomProperty,u.Attribute,u.Animation]);function _2(n){for(let e of n.units){nm(e.create,f2);let t=e.job.kind===B.Host?v2:g2;nm(e.update,t)}}function nm(n,e){let t=[],i=null;for(let s of n){let r=Ao(s)?s.target:null;(!tm.has(s.kind)||r!==i&&i!==null&&r!==null)&&(T.insertBefore(im(t,e),s),t=[],i=null),tm.has(s.kind)&&(t.push(s),T.remove(s),i=r??i)}n.push(im(t,e))}function im(n,e){let t=Array.from(e,()=>new Array);for(let i of n){let s=e.findIndex(r=>r.test(i));t[s].push(i)}return t.flatMap((i,s)=>{let r=e[s].transform;return r?r(i):i})}function Pl(n){return n.slice(n.length-1)}function x2(n){for(let e of n.units){let t=Fp(e);for(let i of e.ops())switch(i.kind){case u.Binding:let s=S2(t,i.target);C2(i.name)&&s.kind===u.Projection&&T.remove(i);break}}}function C2(n){return n.toLowerCase()==="select"}function S2(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an slottable target.");return t}function E2(n){for(let e of n.units)b2(e)}function b2(n){for(let e of n.update)nt(e,(t,i)=>{if(Hn(t)&&t.kind===j.PipeBinding){if(i&ge.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(n.job.compatibility){if(e.target==null)throw new Error("AssertionError: expected slot handle to be assigned for pipe creation");w2(n,e.target,t)}else n.create.push(wf(t.target,t.targetSlot,t.name))}})}function w2(n,e,t){for(let i=n.create.head.next;i.kind!==u.ListEnd;i=i.next){if(!lr(i)||i.xref!==e)continue;for(;i.next.kind===u.Pipe;)i=i.next;let s=wf(t.target,t.targetSlot,t.name);T.insertBefore(s,i.next);return}throw new Error(`AssertionError: unable to find insertion point for pipe ${t.name}`)}function y2(n){for(let e of n.units)for(let t of e.update)je(t,i=>!(i instanceof as)||i.args.length<=4?i:new Po(i.target,i.targetSlot,i.name,_e(i.args),i.args.length),ge.None)}function k2(n){Vf(n.root,0)}function Vf(n,e){let t=null;for(let i of n.create)switch(i.kind){case u.I18nStart:i.subTemplateIndex=e===0?null:e,t=i;break;case u.I18nEnd:t.subTemplateIndex===null&&(e=0),t=null;break;case u.ConditionalCreate:case u.ConditionalBranchCreate:case u.Template:e=fa(n.job.views.get(i.xref),t,i.i18nPlaceholder,e);break;case u.RepeaterCreate:let s=n.job.views.get(i.xref);e=fa(s,t,i.i18nPlaceholder,e),i.emptyView!==null&&(e=fa(n.job.views.get(i.emptyView),t,i.emptyI18nPlaceholder,e));break;case u.Projection:i.fallbackView!==null&&(e=fa(n.job.views.get(i.fallbackView),t,i.fallbackViewI18nPlaceholder,e));break}return e}function fa(n,e,t,i){if(t!==void 0){if(e===null)throw Error("Expected template with i18n placeholder to be in an i18n block.");i++,T2(n,e)}return Vf(n,i)}function T2(n,e){if(n.create.head.next?.kind!==u.I18nStart){let t=n.job.allocateXrefId();T.insertAfter(Gl(t,e.message,e.root,null),n.create.head),T.insertBefore(Xl(t,null),n.create.tail)}}function A2(n){for(let e of n.units)for(let t of e.ops())nt(t,i=>{if(!(i instanceof os)||i.body===null)return;let s=new Ku(i.args.length);i.fn=n.pool.getSharedConstant(s,i.body),i.body=null})}var Ku=class extends Bs{numArgs;constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof Js?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,t){let i=[];for(let r=0;r<this.numArgs;r++)i.push(new tt("a"+r));let s=V(t,r=>r instanceof Js?oe("a"+r.index):r,ge.None);return new Ze(e,new Zi(i,s),void 0,ot.Final)}};function D2(n){for(let e of n.units)for(let t of e.update)je(t,(i,s)=>s&ge.InChildOperation?i:i instanceof Sn?I2(i):i instanceof Rn?P2(i):i,ge.None)}function I2(n){let e=[],t=[];for(let i of n.entries)if(i.isConstant())e.push(i);else{let s=t.length;t.push(i),e.push(new Js(s))}return new os(_e(e),t)}function P2(n){let e=[],t=[];for(let i of n.entries)if(i.value.isConstant())e.push(i);else{let s=t.length;t.push(i.value),e.push(new Hs(i.key,new Js(s),i.quoted))}return new os(yt(e),t)}function N2(n,e,t,i,s){return ki(f.element,n,e,t,i,s)}function L2(n,e,t,i,s){return ki(f.elementStart,n,e,t,i,s)}function ki(n,e,t,i,s,r){let o=[E(e)];return t!==null&&o.push(E(t)),s!==null?o.push(E(i),E(s)):i!==null&&o.push(E(i)),J(n,o,r)}function Hf(n,e,t,i,s,r,o,a,l){let c=[E(e),t,E(i),E(s),E(r),E(o)];for(a!==null&&(c.push(E(a)),c.push(U(f.templateRefExtractor)));c[c.length-1].isEquivalent(qs);)c.pop();return J(n,c,l)}function Rp(n,e,t,i,s){let r=[E(e)];return t instanceof Le?r.push(cr(t,s)):r.push(t),i!==null&&r.push(i),J(n,r,s)}function M2(n){return J(f.elementEnd,[],n)}function B2(n,e,t,i){return ki(f.elementContainerStart,n,null,e,t,i)}function F2(n,e,t,i){return ki(f.elementContainer,n,null,e,t,i)}function R2(){return J(f.elementContainerEnd,[],null)}function O2(n,e,t,i,s,r,o,a){return Hf(f.templateCreate,n,e,t,i,s,r,o,a)}function $2(){return J(f.disableBindings,[],null)}function V2(){return J(f.enableBindings,[],null)}function H2(n,e,t,i,s){let r=[E(n),e];return t!==null&&r.push(U(t)),J(i?f.syntheticHostListener:f.listener,r,s)}function sm(n,e){return U(f.twoWayBindingSet).callFn([n,e])}function q2(n,e,t){return J(f.twoWayListener,[E(n),e],t)}function U2(n,e){return J(f.pipe,[E(n),E(e)],null)}function j2(){return J(f.namespaceHTML,[],null)}function z2(){return J(f.namespaceSVG,[],null)}function W2(){return J(f.namespaceMathML,[],null)}function G2(n,e){return J(f.advance,n>1?[E(n)]:[],e)}function X2(n){return U(f.reference).callFn([E(n)])}function Y2(n){return U(f.nextContext).callFn(n===1?[]:[E(n)])}function Q2(){return U(f.getCurrentView).callFn([])}function Z2(n){return U(f.restoreView).callFn([n])}function J2(n){return U(f.resetView).callFn([n])}function K2(n,e,t){let i=[E(n,null)];return e!==""&&i.push(E(e)),J(f.text,i,t)}function eC(n,e,t,i,s,r,o,a,l,c,p){let d=[E(n),E(e),t??E(null),E(i),E(s),E(r),o??E(null),a??E(null),l?U(f.deferEnableTimerScheduling):E(null),E(p)],m;for(;(m=d[d.length-1])!==null&&m instanceof ct&&m.value===null;)d.pop();return J(f.defer,d,c)}var tC=new Map([[Se.Idle,{none:f.deferOnIdle,prefetch:f.deferPrefetchOnIdle,hydrate:f.deferHydrateOnIdle}],[Se.Immediate,{none:f.deferOnImmediate,prefetch:f.deferPrefetchOnImmediate,hydrate:f.deferHydrateOnImmediate}],[Se.Timer,{none:f.deferOnTimer,prefetch:f.deferPrefetchOnTimer,hydrate:f.deferHydrateOnTimer}],[Se.Hover,{none:f.deferOnHover,prefetch:f.deferPrefetchOnHover,hydrate:f.deferHydrateOnHover}],[Se.Interaction,{none:f.deferOnInteraction,prefetch:f.deferPrefetchOnInteraction,hydrate:f.deferHydrateOnInteraction}],[Se.Viewport,{none:f.deferOnViewport,prefetch:f.deferPrefetchOnViewport,hydrate:f.deferHydrateOnViewport}],[Se.Never,{none:f.deferHydrateNever,prefetch:f.deferHydrateNever,hydrate:f.deferHydrateNever}]]);function nC(n,e,t,i){let s=tC.get(n)?.[t];if(s===void 0)throw new Error(`Unable to determine instruction for trigger ${n}`);return J(s,e.map(r=>E(r)),i)}function iC(n){return J(f.projectionDef,n?[n]:[],null)}function sC(n,e,t,i,s,r,o){let a=[E(n)];return(e!==0||t!==null||i!==null)&&(a.push(E(e)),t!==null&&a.push(t),i!==null&&(t===null&&a.push(E(null)),a.push(oe(i),E(s),E(r)))),J(f.projection,a,o)}function rC(n,e,t,i){let s=[E(n),E(e)];return t!==null&&s.push(E(t)),J(f.i18nStart,s,i)}function oC(n,e,t,i,s,r,o,a){let l=[E(n),e,E(t),E(i),E(s),E(r)];for(o!==null&&(l.push(E(o)),l.push(U(f.templateRefExtractor)));l[l.length-1].isEquivalent(qs);)l.pop();return J(f.conditionalCreate,l,a)}function aC(n,e,t,i,s,r,o,a){let l=[E(n),e,E(t),E(i),E(s),E(r)];for(o!==null&&(l.push(E(o)),l.push(U(f.templateRefExtractor)));l[l.length-1].isEquivalent(qs);)l.pop();return J(f.conditionalBranchCreate,l,a)}function lC(n,e,t,i,s,r,o,a,l,c,p,d,m,_){let b=[E(n),oe(e),E(t),E(i),E(s),E(r),o];return(a||l!==null)&&(b.push(E(a)),l!==null&&(b.push(oe(l),E(c),E(p)),(d!==null||m!==null)&&b.push(E(d)),m!==null&&b.push(E(m)))),J(f.repeaterCreate,b,_)}function cC(n,e){return J(f.repeater,[n],e)}function uC(n,e,t){return n==="prefetch"?J(f.deferPrefetchWhen,[e],t):n==="hydrate"?J(f.deferHydrateWhen,[e],t):J(f.deferWhen,[e],t)}function pC(n,e){return J(f.declareLet,[E(n)],e)}function dC(n,e){return U(f.storeLet).callFn([n],e)}function hC(n){return U(f.readContextLet).callFn([E(n)])}function mC(n,e,t,i){let s=[E(n),E(e)];return t&&s.push(E(t)),J(f.i18n,s,i)}function fC(n){return J(f.i18nEnd,[],n)}function gC(n,e){let t=[E(n),E(e)];return J(f.i18nAttributes,t,null)}function vC(n,e,t){return Rp(f.ariaProperty,n,e,null,t)}function _C(n,e,t,i){return Rp(f.property,n,e,t,i)}function xC(n,e,t,i){let s=[E(n),e];return t!==null&&s.push(t),J(f.twoWayProperty,s,i)}function CC(n,e,t,i,s){let r=[E(n)];return e instanceof Le?r.push(cr(e,s)):r.push(e),(t!==null||i!==null)&&r.push(t??E(null)),i!==null&&r.push(E(i)),J(f.attribute,r,null)}function SC(n,e,t,i){let s=[E(n)];return e instanceof Le?s.push(cr(e,i)):s.push(e),t!==null&&s.push(E(t)),J(f.styleProp,s,i)}function EC(n,e,t){return J(f.classProp,[E(n),e],t)}function bC(n,e){let t=n instanceof Le?cr(n,e):n;return J(f.styleMap,[t],e)}function wC(n,e){let t=n instanceof Le?cr(n,e):n;return J(f.classMap,[t],e)}function yC(n,e,t,i,s){return ki(f.domElement,n,e,t,i,s)}function kC(n,e,t,i,s){return ki(f.domElementStart,n,e,t,i,s)}function TC(n){return J(f.domElementEnd,[],n)}function AC(n,e,t,i){return ki(f.domElementContainerStart,n,null,e,t,i)}function DC(n,e,t,i){return ki(f.domElementContainer,n,null,e,t,i)}function IC(){return J(f.domElementContainerEnd,[],null)}function PC(n,e,t,i){let s=[E(n),e];return t!==null&&s.push(U(t)),J(f.domListener,s,i)}function NC(n,e,t,i,s,r,o,a){return Hf(f.domTemplate,n,e,t,i,s,r,o,a)}var rm=[f.pipeBind1,f.pipeBind2,f.pipeBind3,f.pipeBind4];function LC(n,e,t){if(t.length<1||t.length>rm.length)throw new Error("pipeBind() argument count out of bounds");let i=rm[t.length-1];return U(i).callFn([E(n),E(e),...t])}function MC(n,e,t){return U(f.pipeBindV).callFn([E(n),E(e),t])}function BC(n,e,t){let i=qf(n,e);return YC(WC,[],i,[],t)}function FC(n,e){return J(f.i18nExp,[n],e)}function RC(n,e){return J(f.i18nApply,[E(n)],e)}function OC(n,e,t,i){return Rp(f.domProperty,n,e,t,i)}function $C(n,e,t,i){let s=[e];t!==null&&s.push(t);let r=n==="enter"?f.animationEnter:f.animationLeave;return J(r,s,i)}function VC(n,e,t,i){let r=[e instanceof Le?cr(e,i):e];t!==null&&r.push(t);let o=n==="enter"?f.animationEnter:f.animationLeave;return J(o,r,i)}function HC(n,e,t,i){let s=[e],r=n==="enter"?f.animationEnterListener:f.animationLeaveListener;return J(r,s,i)}function qC(n,e,t){return J(f.syntheticHostProperty,[E(n),e],t)}function UC(n,e,t){return Op(XC,[E(n),e],t,[],null)}function jC(n,e){return J(f.attachSourceLocations,[E(n),e],null)}function qf(n,e){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");let t=[];if(e.length===1&&n[0]===""&&n[1]==="")t.push(e[0]);else{let i;for(i=0;i<e.length;i++)t.push(E(n[i]),e[i]);t.push(E(n[i]))}return t}function cr(n,e){let t=qf(n.strings,n.expressions);return Op(GC,[],t,[],e)}function J(n,e,t){let i=U(n).callFn(e,t);return pn(new cn(i,t))}function zC(n,e,t){let i=[n];return e!==null&&i.push(e),J(f.conditional,i,t)}var WC={constant:[f.textInterpolate,f.textInterpolate1,f.textInterpolate2,f.textInterpolate3,f.textInterpolate4,f.textInterpolate5,f.textInterpolate6,f.textInterpolate7,f.textInterpolate8],variable:f.textInterpolateV,mapping:n=>{if(n%2===0)throw new Error("Expected odd number of arguments");return(n-1)/2}},GC={constant:[f.interpolate,f.interpolate1,f.interpolate2,f.interpolate3,f.interpolate4,f.interpolate5,f.interpolate6,f.interpolate7,f.interpolate8],variable:f.interpolateV,mapping:n=>{if(n%2===0)throw new Error("Expected odd number of arguments");return(n-1)/2}},XC={constant:[f.pureFunction0,f.pureFunction1,f.pureFunction2,f.pureFunction3,f.pureFunction4,f.pureFunction5,f.pureFunction6,f.pureFunction7,f.pureFunction8],variable:f.pureFunctionV,mapping:n=>n};function Op(n,e,t,i,s){let r=n.mapping(t.length),o=t.at(-1);if(i.length===0&&t.length>1&&o instanceof ct&&o.value===""&&t.pop(),r<n.constant.length)return U(n.constant[r]).callFn([...e,...t,...i],s);if(n.variable!==null)return U(n.variable).callFn([...e,_e(t),...i],s);throw new Error("AssertionError: unable to call variadic function")}function YC(n,e,t,i,s){return pn(Op(n,e,t,i,s).toStmt())}var QC=new Map([["window",f.resolveWindow],["document",f.resolveDocument],["body",f.resolveBody]]),ZC=new Map([["class","className"],["for","htmlFor"],["formaction","formAction"],["innerHtml","innerHTML"],["readonly","readOnly"],["tabindex","tabIndex"]]);function JC(n){for(let e of n.units)KC(e,e.create),$p(e,e.update)}function KC(n,e){for(let t of e)switch(je(t,Uf,ge.None),t.kind){case u.Text:T.replace(t,K2(t.handle.slot,t.initialValue,t.sourceSpan));break;case u.ElementStart:T.replace(t,n.job.mode===Dt.DomOnly?kC(t.handle.slot,t.tag,t.attributes,t.localRefs,t.startSourceSpan):L2(t.handle.slot,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case u.Element:T.replace(t,n.job.mode===Dt.DomOnly?yC(t.handle.slot,t.tag,t.attributes,t.localRefs,t.wholeSourceSpan):N2(t.handle.slot,t.tag,t.attributes,t.localRefs,t.wholeSourceSpan));break;case u.ElementEnd:T.replace(t,n.job.mode===Dt.DomOnly?TC(t.sourceSpan):M2(t.sourceSpan));break;case u.ContainerStart:T.replace(t,n.job.mode===Dt.DomOnly?AC(t.handle.slot,t.attributes,t.localRefs,t.startSourceSpan):B2(t.handle.slot,t.attributes,t.localRefs,t.startSourceSpan));break;case u.Container:T.replace(t,n.job.mode===Dt.DomOnly?DC(t.handle.slot,t.attributes,t.localRefs,t.wholeSourceSpan):F2(t.handle.slot,t.attributes,t.localRefs,t.wholeSourceSpan));break;case u.ContainerEnd:T.replace(t,n.job.mode===Dt.DomOnly?IC():R2());break;case u.I18nStart:T.replace(t,rC(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case u.I18nEnd:T.replace(t,fC(t.sourceSpan));break;case u.I18n:T.replace(t,mC(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case u.I18nAttributes:if(t.i18nAttributesConfig===null)throw new Error("AssertionError: i18nAttributesConfig was not set");T.replace(t,gC(t.handle.slot,t.i18nAttributesConfig));break;case u.Template:if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let i=n.job.views.get(t.xref);T.replace(t,t.templateKind===Nt.Block||n.job.mode===Dt.DomOnly?NC(t.handle.slot,oe(i.fnName),i.decls,i.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan):O2(t.handle.slot,oe(i.fnName),i.decls,i.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case u.DisableBindings:T.replace(t,$2());break;case u.EnableBindings:T.replace(t,V2());break;case u.Pipe:T.replace(t,U2(t.handle.slot,t.name));break;case u.DeclareLet:T.replace(t,pC(t.handle.slot,t.sourceSpan));break;case u.AnimationString:T.replace(t,VC(t.animationKind,t.expression,t.sanitizer,t.sourceSpan));break;case u.Animation:let s=ga(n,t.handlerFnName,t.handlerOps,!1);T.replace(t,$C(t.animationKind,s,t.sanitizer,t.sourceSpan));break;case u.AnimationListener:let r=ga(n,t.handlerFnName,t.handlerOps,t.consumesDollarEvent);T.replace(t,HC(t.animationKind,r,null,t.sourceSpan));break;case u.Listener:let o=ga(n,t.handlerFnName,t.handlerOps,t.consumesDollarEvent),a=t.eventTarget?QC.get(t.eventTarget):null;if(a===void 0)throw new Error(`Unexpected global target '${t.eventTarget}' defined for '${t.name}' event. Supported list of global targets: window,document,body.`);T.replace(t,n.job.mode===Dt.DomOnly&&!t.hostListener&&!t.isLegacyAnimationListener?PC(t.name,o,a,t.sourceSpan):H2(t.name,o,a,t.hostListener&&t.isLegacyAnimationListener,t.sourceSpan));break;case u.TwoWayListener:T.replace(t,q2(t.name,ga(n,t.handlerFnName,t.handlerOps,!0),t.sourceSpan));break;case u.Variable:if(t.variable.name===null)throw new Error(`AssertionError: unnamed variable ${t.xref}`);T.replace(t,pn(new Ze(t.variable.name,t.initializer,void 0,ot.Final)));break;case u.Namespace:switch(t.active){case mt.HTML:T.replace(t,j2());break;case mt.SVG:T.replace(t,z2());break;case mt.Math:T.replace(t,W2());break}break;case u.Defer:let l=!!t.loadingMinimumTime||!!t.loadingAfterTime||!!t.placeholderMinimumTime;T.replace(t,eC(t.handle.slot,t.mainSlot.slot,t.resolverFn,t.loadingSlot?.slot??null,t.placeholderSlot?.slot??null,t.errorSlot?.slot??null,t.loadingConfig,t.placeholderConfig,l,t.sourceSpan,t.flags));break;case u.DeferOn:let c=[];switch(t.trigger.kind){case Se.Never:case Se.Idle:case Se.Immediate:break;case Se.Timer:c=[t.trigger.delay];break;case Se.Interaction:case Se.Hover:case Se.Viewport:t.modifier==="hydrate"?c=[]:(c=[t.trigger.targetSlot?.slot??null],t.trigger.targetSlotViewSteps!==0&&c.push(t.trigger.targetSlotViewSteps));break;default:throw new Error(`AssertionError: Unsupported reification of defer trigger kind ${t.trigger.kind}`)}T.replace(t,nC(t.trigger.kind,c,t.modifier,t.sourceSpan));break;case u.ProjectionDef:T.replace(t,iC(t.def));break;case u.Projection:if(t.handle.slot===null)throw new Error("No slot was assigned for project instruction");let p=null,d=null,m=null;if(t.fallbackView!==null){if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");let q=n.job.views.get(t.fallbackView);if(q===void 0)throw new Error("AssertionError: projection had fallback view xref, but fallback view was not found");if(q.fnName===null||q.decls===null||q.vars===null)throw new Error("AssertionError: expected projection fallback view to have been named and counted");p=q.fnName,d=q.decls,m=q.vars}T.replace(t,sC(t.handle.slot,t.projectionSlotIndex,t.attributes,p,d,m,t.sourceSpan));break;case u.ConditionalCreate:if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let _=n.job.views.get(t.xref);T.replace(t,oC(t.handle.slot,oe(_.fnName),_.decls,_.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case u.ConditionalBranchCreate:if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let b=n.job.views.get(t.xref);T.replace(t,aC(t.handle.slot,oe(b.fnName),b.decls,b.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case u.RepeaterCreate:if(t.handle.slot===null)throw new Error("No slot was assigned for repeater instruction");if(!(n instanceof rn))throw new Error("AssertionError: must be compiling a component");let A=n.job.views.get(t.xref);if(A.fnName===null)throw new Error("AssertionError: expected repeater primary view to have been named");let L=null,D=null,F=null;if(t.emptyView!==null){let q=n.job.views.get(t.emptyView);if(q===void 0)throw new Error("AssertionError: repeater had empty view xref, but empty view was not found");if(q.fnName===null||q.decls===null||q.vars===null)throw new Error("AssertionError: expected repeater empty view to have been named and counted");L=q.fnName,D=q.decls,F=q.vars}T.replace(t,lC(t.handle.slot,A.fnName,t.decls,t.vars,t.tag,t.attributes,tS(n,t),t.usesComponentInstance,L,D,F,t.emptyTag,t.emptyAttributes,t.wholeSourceSpan));break;case u.SourceLocation:let W=_e(t.locations.map(({targetSlot:q,offset:ie,line:de,column:Oe})=>{if(q.slot===null)throw new Error("No slot was assigned for source location");return _e([E(q.slot),E(ie),E(de),E(Oe)])}));T.replace(t,jC(t.templatePath,W));break;case u.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${u[t.kind]}`)}}function $p(n,e){for(let t of e)switch(je(t,Uf,ge.None),t.kind){case u.Advance:T.replace(t,G2(t.delta,t.sourceSpan));break;case u.Property:T.replace(t,n.job.mode===Dt.DomOnly&&t.bindingKind!==H.LegacyAnimation&&t.bindingKind!==H.Animation?om(t):eS(t));break;case u.TwoWayProperty:T.replace(t,xC(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case u.StyleProp:T.replace(t,SC(t.name,t.expression,t.unit,t.sourceSpan));break;case u.ClassProp:T.replace(t,EC(t.name,t.expression,t.sourceSpan));break;case u.StyleMap:T.replace(t,bC(t.expression,t.sourceSpan));break;case u.ClassMap:T.replace(t,wC(t.expression,t.sourceSpan));break;case u.I18nExpression:T.replace(t,FC(t.expression,t.sourceSpan));break;case u.I18nApply:T.replace(t,RC(t.handle.slot,t.sourceSpan));break;case u.InterpolateText:T.replace(t,BC(t.interpolation.strings,t.interpolation.expressions,t.sourceSpan));break;case u.Attribute:T.replace(t,CC(t.name,t.expression,t.sanitizer,t.namespace,t.sourceSpan));break;case u.DomProperty:if(t.expression instanceof Le)throw new Error("not yet handled");t.bindingKind===H.LegacyAnimation||t.bindingKind===H.Animation?T.replace(t,qC(t.name,t.expression,t.sourceSpan)):T.replace(t,om(t));break;case u.Variable:if(t.variable.name===null)throw new Error(`AssertionError: unnamed variable ${t.xref}`);T.replace(t,pn(new Ze(t.variable.name,t.initializer,void 0,ot.Final)));break;case u.Conditional:if(t.processed===null)throw new Error("Conditional test was not set.");T.replace(t,zC(t.processed,t.contextValue,t.sourceSpan));break;case u.Repeater:T.replace(t,cC(t.collection,t.sourceSpan));break;case u.DeferWhen:T.replace(t,uC(t.modifier,t.expr,t.sourceSpan));break;case u.StoreLet:throw new Error(`AssertionError: unexpected storeLet ${t.declaredName}`);case u.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${u[t.kind]}`)}}function om(n){return OC(ZC.get(n.name)??n.name,n.expression,n.sanitizer,n.sourceSpan)}function eS(n){return Tf(n.name)?vC(n.name,n.expression,n.sourceSpan):_C(n.name,n.expression,n.sanitizer,n.sourceSpan)}function Uf(n){if(!Hn(n))return n;switch(n.kind){case j.NextContext:return Y2(n.steps);case j.Reference:return X2(n.targetSlot.slot+1+n.offset);case j.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${n.name}`);case j.TwoWayBindingSet:throw new Error("AssertionError: unresolved TwoWayBindingSet");case j.RestoreView:if(typeof n.view=="number")throw new Error("AssertionError: unresolved RestoreView");return Z2(n.view);case j.ResetView:return J2(n.expr);case j.GetCurrentView:return Q2();case j.ReadVariable:if(n.name===null)throw new Error(`Read of unnamed variable ${n.xref}`);return oe(n.name);case j.ReadTemporaryExpr:if(n.name===null)throw new Error(`Read of unnamed temporary ${n.xref}`);return oe(n.name);case j.AssignTemporaryExpr:if(n.name===null)throw new Error(`Assign of unnamed temporary ${n.xref}`);return oe(n.name).set(n.expr);case j.PureFunctionExpr:if(n.fn===null)throw new Error("AssertionError: expected PureFunctions to have been extracted");return UC(n.varOffset,n.fn,n.args);case j.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case j.PipeBinding:return LC(n.targetSlot.slot,n.varOffset,n.args);case j.PipeBindingVariadic:return MC(n.targetSlot.slot,n.varOffset,n.args);case j.SlotLiteralExpr:return E(n.slot.slot);case j.ContextLetReference:return hC(n.targetSlot.slot);case j.StoreLet:return dC(n.value,n.sourceSpan);case j.TrackContext:return oe("this");default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${j[n.kind]}`)}}function ga(n,e,t,i){$p(n,t);let s=[];for(let o of t){if(o.kind!==u.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${u[o.kind]}`);s.push(o.statement)}let r=[];return i&&r.push(new tt("$event")),vi(r,s,void 0,void 0,e)}function tS(n,e){if(e.trackByFn!==null)return e.trackByFn;let t=[new tt("$index"),new tt("$item")],i;if(e.trackByOps===null)i=e.usesComponentInstance?vi(t,[new at(e.track)]):En(t,e.track);else{$p(n,e.trackByOps);let s=[];for(let r of e.trackByOps){if(r.kind!==u.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${u[r.kind]}`);s.push(r.statement)}i=e.usesComponentInstance||s.length!==1||!(s[0]instanceof at)?vi(t,s):En(t,s[0].value)}return e.trackByFn=n.job.pool.getSharedFunctionReference(i,"_forTrack"),e.trackByFn}function nS(n){for(let e of n.units)for(let t of e.update)switch(t.kind){case u.Attribute:case u.Binding:case u.ClassProp:case u.ClassMap:case u.Property:case u.StyleProp:case u.StyleMap:t.expression instanceof No&&T.remove(t);break}}function iS(n){for(let e of n.units)for(let t of e.create)switch(t.kind){case u.I18nContext:T.remove(t);break;case u.I18nStart:t.context=null;break}}function sS(n){for(let e of n.units)for(let t of e.update){if(t.kind!==u.Variable||t.variable.kind!==et.Identifier||!(t.initializer instanceof Do))continue;let i=t.variable.identifier,s=t;for(;s&&s.kind!==u.ListEnd;)je(s,r=>r instanceof st&&r.name===i?E(void 0):r,ge.None),s=s.prev}}function rS(n){for(let e of n.units){let t=new Set;for(let i of e.update)switch(i.kind){case u.I18nExpression:t.add(i.i18nOwner)}for(let i of e.create)switch(i.kind){case u.I18nAttributes:if(t.has(i.xref))continue;T.remove(i)}}}function oS(n){for(let e of n.units)Nl(e,e.create),Nl(e,e.update)}function Nl(n,e){let t=new Map;t.set(n.xref,oe("ctx"));for(let i of e)switch(i.kind){case u.Variable:switch(i.variable.kind){case et.Context:t.set(i.variable.view,new Kn(i.xref));break}break;case u.Animation:case u.AnimationListener:case u.Listener:case u.TwoWayListener:Nl(n,i.handlerOps);break;case u.RepeaterCreate:i.trackByOps!==null&&Nl(n,i.trackByOps);break}n===n.job.root&&t.set(n.xref,oe("ctx"));for(let i of e)je(i,s=>{if(s instanceof Ei){if(!t.has(s.view))throw new Error(`No context found for reference to view ${s.view} from view ${n.xref}`);return t.get(s.view)}else return s},ge.None)}function aS(n){for(let e of n.units)for(let t of e.create)if(t.kind===u.Defer){if(t.resolverFn!==null)continue;if(t.ownResolverFn!==null){if(t.handle.slot===null)throw new Error("AssertionError: slot must be assigned before extracting defer deps functions");let i=e.fnName?.replace("_Template","");t.resolverFn=n.pool.getSharedFunctionReference(t.ownResolverFn,`${i}_Defer_${t.handle.slot}_DepsFn`,!1)}}}function lS(n){for(let e of n.units)am(e.create),am(e.update)}function am(n){for(let e of n)(e.kind===u.Listener||e.kind===u.TwoWayListener||e.kind===u.AnimationListener)&&je(e,t=>t instanceof st&&t.name==="$event"?((e.kind===u.Listener||e.kind===u.AnimationListener)&&(e.consumesDollarEvent=!0),new ln(t.name)):t,ge.InChildOperation)}function cS(n){let e=new Map,t=new Map;for(let i of n.units)for(let s of i.create)switch(s.kind){case u.I18nContext:e.set(s.xref,s);break;case u.ElementStart:t.set(s.xref,s);break}In(n,n.root,e,t)}function In(n,e,t,i,s){let r=null,o=new Map;for(let a of e.create)switch(a.kind){case u.I18nStart:if(!a.context)throw Error("Could not find i18n context for i18n op");r={i18nBlock:a,i18nContext:t.get(a.context)};break;case u.I18nEnd:r=null;break;case u.ElementStart:if(a.i18nPlaceholder!==void 0){if(r===null)throw Error("i18n tag placeholder should only occur inside an i18n block");lm(a,r.i18nContext,r.i18nBlock,s),s&&a.i18nPlaceholder.closeName&&o.set(a.xref,s),s=void 0}break;case u.ElementEnd:let l=i.get(a.xref);if(l&&l.i18nPlaceholder!==void 0){if(r===null)throw Error("AssertionError: i18n tag placeholder should only occur inside an i18n block");cm(l,r.i18nContext,r.i18nBlock,o.get(a.xref)),o.delete(a.xref)}break;case u.Projection:if(a.i18nPlaceholder!==void 0){if(r===null)throw Error("i18n tag placeholder should only occur inside an i18n block");lm(a,r.i18nContext,r.i18nBlock,s),cm(a,r.i18nContext,r.i18nBlock,s),s=void 0}if(a.fallbackView!==null){let m=n.views.get(a.fallbackView);if(a.fallbackViewI18nPlaceholder===void 0)In(n,m,t,i);else{if(r===null)throw Error("i18n tag placeholder should only occur inside an i18n block");va(n,m,a.handle.slot,a.fallbackViewI18nPlaceholder,r.i18nContext,r.i18nBlock,s),In(n,m,t,i),_a(n,m,a.handle.slot,a.fallbackViewI18nPlaceholder,r.i18nContext,r.i18nBlock,s),s=void 0}}break;case u.ConditionalCreate:case u.ConditionalBranchCreate:case u.Template:let c=n.views.get(a.xref);if(a.i18nPlaceholder===void 0)In(n,c,t,i);else{if(r===null)throw Error("i18n tag placeholder should only occur inside an i18n block");a.templateKind===Nt.Structural?In(n,c,t,i,a):(va(n,c,a.handle.slot,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),In(n,c,t,i),_a(n,c,a.handle.slot,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),s=void 0)}break;case u.RepeaterCreate:if(s!==void 0)throw Error("AssertionError: Unexpected structural directive associated with @for block");let p=a.handle.slot+1,d=n.views.get(a.xref);if(a.i18nPlaceholder===void 0)In(n,d,t,i);else{if(r===null)throw Error("i18n tag placeholder should only occur inside an i18n block");va(n,d,p,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),In(n,d,t,i),_a(n,d,p,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),s=void 0}if(a.emptyView!==null){let m=a.handle.slot+2,_=n.views.get(a.emptyView);if(a.emptyI18nPlaceholder===void 0)In(n,_,t,i);else{if(r===null)throw Error("i18n tag placeholder should only occur inside an i18n block");va(n,_,m,a.emptyI18nPlaceholder,r.i18nContext,r.i18nBlock,s),In(n,_,t,i),_a(n,_,m,a.emptyI18nPlaceholder,r.i18nContext,r.i18nBlock,s),s=void 0}}break}}function lm(n,e,t,i){let{startName:s,closeName:r}=n.i18nPlaceholder,o=be.ElementTag|be.OpenTag,a=n.handle.slot;i!==void 0&&(o|=be.TemplateTag,a={element:a,template:i.handle.slot}),r||(o|=be.CloseTag),sr(e.params,s,a,t.subTemplateIndex,o)}function cm(n,e,t,i){let{closeName:s}=n.i18nPlaceholder;if(s){let r=be.ElementTag|be.CloseTag,o=n.handle.slot;i!==void 0&&(r|=be.TemplateTag,o={element:o,template:i.handle.slot}),sr(e.params,s,o,t.subTemplateIndex,r)}}function va(n,e,t,i,s,r,o){let{startName:a,closeName:l}=i,c=be.TemplateTag|be.OpenTag;l||(c|=be.CloseTag),o!==void 0&&sr(s.params,a,o.handle.slot,r.subTemplateIndex,c),sr(s.params,a,t,jf(n,r,e),c)}function _a(n,e,t,i,s,r,o){let{closeName:a}=i,l=be.TemplateTag|be.CloseTag;a&&(sr(s.params,a,t,jf(n,r,e),l),o!==void 0&&sr(s.params,a,o.handle.slot,r.subTemplateIndex,l))}function jf(n,e,t){for(let i of t.create)if(i.kind===u.I18nStart)return i.subTemplateIndex;return e.subTemplateIndex}function sr(n,e,t,i,s){let r=n.get(e)??[];r.push({value:t,subTemplateIndex:i,flags:s}),n.set(e,r)}function uS(n){let e=new Map,t=new Map,i=new Map;for(let o of n.units)for(let a of o.create)switch(a.kind){case u.I18nStart:e.set(a.xref,a.subTemplateIndex);break;case u.I18nContext:t.set(a.xref,a);break;case u.IcuPlaceholder:i.set(a.xref,a);break}let s=new Map,r=o=>o.usage===or.I18nText?o.i18nOwner:o.context;for(let o of n.units)for(let a of o.update)if(a.kind===u.I18nExpression){let l=s.get(r(a))||0,c=e.get(a.i18nOwner)??null,p={value:l,subTemplateIndex:c,flags:be.ExpressionIndex};pS(a,p,t,i),s.set(r(a),l+1)}}function pS(n,e,t,i){if(n.i18nPlaceholder!==null){let s=t.get(n.context),r=n.resolutionTime===To.Creation?s.params:s.postprocessingParams,o=r.get(n.i18nPlaceholder)||[];o.push(e),r.set(n.i18nPlaceholder,o)}n.icuPlaceholder!==null&&i.get(n.icuPlaceholder)?.expressionPlaceholders.push(e)}function dS(n){for(let e of n.units)Ll(e,e.create,null),Ll(e,e.update,null)}function Ll(n,e,t){let i=new Map,s=new Map;for(let r of e)switch(r.kind){case u.Variable:switch(r.variable.kind){case et.Identifier:if(r.variable.local){if(s.has(r.variable.identifier))continue;s.set(r.variable.identifier,r.xref)}else if(i.has(r.variable.identifier))continue;i.set(r.variable.identifier,r.xref);break;case et.Alias:if(i.has(r.variable.identifier))continue;i.set(r.variable.identifier,r.xref);break;case et.SavedView:t={view:r.variable.view,variable:r.xref};break}break;case u.Animation:case u.AnimationListener:case u.Listener:case u.TwoWayListener:Ll(n,r.handlerOps,t);break;case u.RepeaterCreate:r.trackByOps!==null&&Ll(n,r.trackByOps,t);break}for(let r of e)r.kind==u.Listener||r.kind===u.TwoWayListener||r.kind===u.Animation||r.kind===u.AnimationListener||je(r,o=>{if(o instanceof st)return s.has(o.name)?new Kn(s.get(o.name)):i.has(o.name)?new Kn(i.get(o.name)):new Xt(new Ei(n.job.root.xref),o.name);if(o instanceof fl&&typeof o.view=="number"){if(t===null||t.view!==o.view)throw new Error(`AssertionError: no saved view ${o.view} from view ${n.xref}`);return o.view=new Kn(t.variable),o}else return o},ge.None);for(let r of e)nt(r,o=>{if(o instanceof st)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${o.name}`)})}var hS=new Map([[ke.HTML,f.sanitizeHtml],[ke.RESOURCE_URL,f.sanitizeResourceUrl],[ke.SCRIPT,f.sanitizeScript],[ke.STYLE,f.sanitizeStyle],[ke.URL,f.sanitizeUrl]]),mS=new Map([[ke.HTML,f.trustConstantHtml],[ke.RESOURCE_URL,f.trustConstantResourceUrl]]);function fS(n){for(let e of n.units){let t=Fp(e);if(n.kind!==B.Host){for(let i of e.create)if(i.kind===u.ExtractedAttribute){let s=mS.get(um(i.securityContext))??null;i.trustedValueFn=s!==null?U(s):null}}for(let i of e.update)switch(i.kind){case u.Property:case u.Attribute:case u.DomProperty:let s=null;if(Array.isArray(i.securityContext)&&i.securityContext.length===2&&i.securityContext.indexOf(ke.URL)>-1&&i.securityContext.indexOf(ke.RESOURCE_URL)>-1?s=f.sanitizeUrlOrResourceUrl:s=hS.get(um(i.securityContext))??null,i.sanitizer=s!==null?U(s):null,i.sanitizer===null){let r=!1;if(n.kind===B.Host||i.kind===u.DomProperty)r=!0;else{let o=t.get(i.target);if(o===void 0||!ti(o))throw Error("Property should have an element-like owner");r=gS(o)}r&&fx(i.name)&&(i.sanitizer=U(f.validateIframeAttribute))}break}}}function gS(n){return n.kind===u.ElementStart&&n.tag?.toLowerCase()==="iframe"}function um(n){if(Array.isArray(n)){if(n.length>1)throw Error("AssertionError: Ambiguous security context");return n[0]||ke.NONE}return n}function vS(n){for(let e of n.units){e.create.prepend([di(e.job.allocateXrefId(),{kind:et.SavedView,name:null,view:e.xref},new Au,nn.None)]);for(let t of e.create){if(t.kind!==u.Listener&&t.kind!==u.TwoWayListener&&t.kind!==u.Animation&&t.kind!==u.AnimationListener)continue;let i=e!==n.root;if(!i)for(let s of t.handlerOps)nt(s,r=>{(r instanceof hl||r instanceof Io)&&(i=!0)});i&&_S(e,t)}}}function _S(n,e){e.handlerOps.prepend([di(n.job.allocateXrefId(),{kind:et.Context,name:null,view:n.xref},new fl(n.xref),nn.None)]);for(let t of e.handlerOps)t.kind===u.Statement&&t.statement instanceof at&&(t.statement.value=new Du(t.statement.value))}function xS(n){let e=new Map;for(let t of n.units){let i=0;for(let s of t.create)lr(s)&&(s.handle.slot=i,e.set(s.xref,s.handle.slot),i+=s.numSlotsUsed);t.decls=i}for(let t of n.units)for(let i of t.ops())if(i.kind===u.Template||i.kind===u.ConditionalCreate||i.kind===u.ConditionalBranchCreate||i.kind===u.RepeaterCreate){let s=n.views.get(i.xref);i.decls=s.decls}}function CS(n){let e=new Set,t=new Map;for(let i of n.units)for(let s of i.ops())s.kind===u.DeclareLet&&t.set(s.xref,s),nt(s,r=>{r instanceof Io&&e.add(r.target)});for(let i of n.units)for(let s of i.update)je(s,r=>r instanceof Do&&!e.has(r.target)?(SS(r)||T.remove(t.get(r.target)),r.value):r,ge.None)}function SS(n){let e=!1;return V(n,t=>((t instanceof as||t instanceof Po)&&(e=!0),t),ge.None),e}function ES(n){let e=new Set;for(let t of n.units)for(let i of t.ops())nt(i,s=>{if(s instanceof pe)switch(s.operator){case I.Exponentiation:bS(s,e);break;case I.NullishCoalesce:wS(s,e);break;case I.And:case I.Or:yS(s,e)}});for(let t of n.units)for(let i of t.ops())je(i,s=>s instanceof Cn?e.has(s)?s:s.expr:s,ge.None)}function bS(n,e){n.lhs instanceof Cn&&n.lhs.expr instanceof Ji&&e.add(n.lhs)}function wS(n,e){n.lhs instanceof Cn&&(pm(n.lhs.expr)||n.lhs.expr instanceof Fn)&&e.add(n.lhs),n.rhs instanceof Cn&&(pm(n.rhs.expr)||n.rhs.expr instanceof Fn)&&e.add(n.rhs)}function yS(n,e){n.lhs instanceof Cn&&n.lhs.expr instanceof pe&&n.lhs.expr.operator===I.NullishCoalesce&&e.add(n.lhs)}function pm(n){return n instanceof pe&&(n.operator===I.And||n.operator===I.Or)}function kS(n){for(let e of n.units)for(let t of e.update)if(t.kind===u.Binding)switch(t.bindingKind){case H.ClassName:if(t.expression instanceof Le)throw new Error("Unexpected interpolation in ClassName binding");T.replace(t,n_(t.target,t.name,t.expression,t.sourceSpan));break;case H.StyleProperty:T.replace(t,t_(t.target,t.name,t.expression,t.unit,t.sourceSpan));break;case H.Property:case H.Template:t.name==="style"?T.replace(t,i_(t.target,t.expression,t.sourceSpan)):t.name==="class"&&T.replace(t,s_(t.target,t.expression,t.sourceSpan));break}}function TS(n){for(let e of n.units)e.create.prepend(Ml(e.create)),e.update.prepend(Ml(e.update))}function Ml(n){let e=0,t=[];for(let i of n){let s=new Map;nt(i,(c,p)=>{p&ge.InChildOperation||c instanceof bi&&s.set(c.xref,c)});let r=0,o=new Set,a=new Set,l=new Map;nt(i,(c,p)=>{p&ge.InChildOperation||(c instanceof qn?(o.has(c.xref)||(o.add(c.xref),l.set(c.xref,`tmp_${e}_${r++}`)),dm(l,c)):c instanceof bi&&(s.get(c.xref)===c&&(a.add(c.xref),r--),dm(l,c)))}),t.push(...Array.from(new Set(l.values())).map(c=>pn(new Ze(c)))),e++,i.kind===u.Listener||i.kind===u.Animation||i.kind===u.AnimationListener||i.kind===u.TwoWayListener?i.handlerOps.prepend(Ml(i.handlerOps)):i.kind===u.RepeaterCreate&&i.trackByOps!==null&&i.trackByOps.prepend(Ml(i.trackByOps))}return t}function dm(n,e){let t=n.get(e.xref);if(t===void 0)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=t}function AS(n){for(let e of n.units)for(let t of e.create)if(t.kind===u.RepeaterCreate)if(t.track instanceof ln&&t.track.name==="$index")t.trackByFn=U(f.repeaterTrackByIndex);else if(t.track instanceof ln&&t.track.name==="$item")t.trackByFn=U(f.repeaterTrackByIdentity);else if(DS(n.root.xref,t.track))t.usesComponentInstance=!0,t.track.receiver.receiver.view===e.xref?t.trackByFn=t.track.receiver:(t.trackByFn=U(f.componentInstance).callFn([]).prop(t.track.receiver.name),t.track=t.trackByFn);else{t.track=V(t.track,s=>{if(s instanceof as||s instanceof Po)throw new Error("Illegal State: Pipes are not allowed in this context");return s instanceof Ei?(t.usesComponentInstance=!0,new Tu(s.view)):s},ge.None);let i=new T;i.push(pn(new at(t.track,t.track.sourceSpan))),t.trackByOps=i}}function DS(n,e){if(!(e instanceof Lt)||e.args.length===0||e.args.length>2||!(e.receiver instanceof Xt&&e.receiver.receiver instanceof Ei)||e.receiver.receiver.view!==n)return!1;let[t,i]=e.args;return!(t instanceof ln)||t.name!=="$index"?!1:e.args.length===1?!0:!(!(i instanceof ln)||i.name!=="$item")}function IS(n){for(let e of n.units)for(let t of e.create)t.kind===u.RepeaterCreate&&(t.track=V(t.track,i=>{if(i instanceof st){if(t.varNames.$index.has(i.name))return oe("$index");if(i.name===t.varNames.$implicit)return oe("$item")}return i},ge.None))}function PS(n){for(let e of n.units)for(let t of e.create)t.kind===u.TwoWayListener&&je(t,i=>{if(!(i instanceof gl))return i;let{target:s,value:r}=i;if(s instanceof Xt||s instanceof ei)return sm(s,r).or(s.set(r));if(s instanceof Kn)return sm(s,r);throw new Error("Unsupported expression in two-way action binding.")},ge.InChildOperation)}function NS(n){for(let e of n.units){let t=0;for(let i of e.ops())Mc(i)&&(t+=LS(i));for(let i of e.ops())nt(i,s=>{Hn(s)&&(n.compatibility===Yt.TemplateDefinitionBuilder&&s instanceof os||(Sh(s)&&(s.varOffset=t),Mc(s)&&(t+=hm(s))))});if(n.compatibility===Yt.TemplateDefinitionBuilder)for(let i of e.ops())nt(i,s=>{!Hn(s)||!(s instanceof os)||(Sh(s)&&(s.varOffset=t),Mc(s)&&(t+=hm(s)))});e.vars=t}if(n instanceof Mo)for(let e of n.units)for(let t of e.create){if(t.kind!==u.Template&&t.kind!==u.RepeaterCreate&&t.kind!==u.ConditionalCreate&&t.kind!==u.ConditionalBranchCreate)continue;let i=n.views.get(t.xref);t.vars=i.vars}}function LS(n){let e;switch(n.kind){case u.Attribute:return e=1,n.expression instanceof Le&&!MS(n.expression)&&(e+=n.expression.expressions.length),e;case u.Property:case u.DomProperty:return e=1,n.expression instanceof Le&&(e+=n.expression.expressions.length),e;case u.TwoWayProperty:return 1;case u.StyleProp:case u.ClassProp:case u.StyleMap:case u.ClassMap:return e=2,n.expression instanceof Le&&(e+=n.expression.expressions.length),e;case u.InterpolateText:return n.interpolation.expressions.length;case u.I18nExpression:case u.Conditional:case u.DeferWhen:case u.StoreLet:return 1;case u.RepeaterCreate:return n.emptyView?1:0;default:throw new Error(`Unhandled op: ${u[n.kind]}`)}}function hm(n){switch(n.kind){case j.PureFunctionExpr:return 1+n.args.length;case j.PipeBinding:return 1+n.args.length;case j.PipeBindingVariadic:return 1+n.numArgs;case j.StoreLet:return 1;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${n.constructor.name}`)}}function MS(n){return!(n.expressions.length!==1||n.strings.length!==2||n.strings[0]!==""||n.strings[1]!=="")}function BS(n){for(let e of n.units){xa(e.create),xa(e.update);for(let t of e.create)t.kind===u.Listener||t.kind===u.Animation||t.kind===u.AnimationListener||t.kind===u.TwoWayListener?xa(t.handlerOps):t.kind===u.RepeaterCreate&&t.trackByOps!==null&&xa(t.trackByOps);Ca(e.create,n.compatibility),Ca(e.update,n.compatibility);for(let t of e.create)t.kind===u.Listener||t.kind===u.Animation||t.kind===u.AnimationListener||t.kind===u.TwoWayListener?Ca(t.handlerOps,n.compatibility):t.kind===u.RepeaterCreate&&t.trackByOps!==null&&Ca(t.trackByOps,n.compatibility)}}var Qe=(function(n){return n[n.None=0]="None",n[n.ViewContextRead=1]="ViewContextRead",n[n.ViewContextWrite=2]="ViewContextWrite",n[n.SideEffectful=4]="SideEffectful",n})(Qe||{});function xa(n){let e=new Map;for(let t of n)t.kind===u.Variable&&t.flags&nn.AlwaysInline&&(nt(t,i=>{if(Hn(i)&&Vp(i)!==Qe.None)throw new Error("AssertionError: A context-sensitive variable was marked AlwaysInline")}),e.set(t.xref,t)),je(t,i=>i instanceof Kn&&e.has(i.xref)?e.get(i.xref).initializer.clone():i,ge.None);for(let t of e.values())T.remove(t)}function Ca(n,e){let t=new Map,i=new Map,s=new Set,r=new Map;for(let c of n){if(c.kind===u.Variable){if(t.has(c.xref)||i.has(c.xref))throw new Error(`Should not see two declarations of the same variable: ${c.xref}`);t.set(c.xref,c),i.set(c.xref,0)}r.set(c,FS(c)),RS(c,i,s)}let o=!1;for(let c of n.reversed()){let p=r.get(c);if(c.kind===u.Variable&&i.get(c.xref)===0){if(o&&p.fences&Qe.ViewContextWrite||p.fences&Qe.SideEffectful){let d=pn(c.initializer.toStmt());r.set(d,p),T.replace(c,d)}else OS(c,i),T.remove(c);r.delete(c),t.delete(c.xref),i.delete(c.xref);continue}p.fences&Qe.ViewContextRead&&(o=!0)}let a=[];for(let[c,p]of i){let m=!!(t.get(c).flags&nn.AlwaysInline);p!==1||m||s.has(c)||a.push(c)}let l;for(;l=a.pop();){let c=t.get(l),p=r.get(c);if(!!(c.flags&nn.AlwaysInline))throw new Error("AssertionError: Found an 'AlwaysInline' variable after the always inlining pass.");for(let m=c.next;m.kind!==u.ListEnd;m=m.next){let _=r.get(m);if(_.variablesUsed.has(l)){if(e===Yt.TemplateDefinitionBuilder&&!VS(c,m))break;if($S(l,c.initializer,m,p.fences)){_.variablesUsed.delete(l);for(let b of p.variablesUsed)_.variablesUsed.add(b);_.fences|=p.fences,t.delete(l),i.delete(l),r.delete(c),T.remove(c)}break}if(!zf(_.fences,p.fences))break}}}function Vp(n){switch(n.kind){case j.NextContext:return Qe.ViewContextRead|Qe.ViewContextWrite;case j.RestoreView:return Qe.ViewContextRead|Qe.ViewContextWrite|Qe.SideEffectful;case j.StoreLet:return Qe.SideEffectful;case j.Reference:case j.ContextLetReference:return Qe.ViewContextRead;default:return Qe.None}}function FS(n){let e=Qe.None,t=new Set;return nt(n,i=>{if(Hn(i))switch(i.kind){case j.ReadVariable:t.add(i.xref);break;default:e|=Vp(i)}}),{fences:e,variablesUsed:t}}function RS(n,e,t){nt(n,(i,s)=>{if(!Hn(i)||i.kind!==j.ReadVariable)return;let r=e.get(i.xref);r!==void 0&&(e.set(i.xref,r+1),s&ge.InChildOperation&&t.add(i.xref))})}function OS(n,e){nt(n,t=>{if(!Hn(t)||t.kind!==j.ReadVariable)return;let i=e.get(t.xref);if(i!==void 0){if(i===0)throw new Error(`Inaccurate variable count: ${t.xref} - found another read but count is already 0`);e.set(t.xref,i-1)}})}function zf(n,e){if(n&Qe.ViewContextWrite){if(e&Qe.ViewContextRead)return!1}else if(n&Qe.ViewContextRead&&e&Qe.ViewContextWrite)return!1;return!0}function $S(n,e,t,i){let s=!1,r=!0;return je(t,(o,a)=>{if(!Hn(o)||s||!r)return o;if(a&ge.InChildOperation&&i&Qe.ViewContextRead)return o;switch(o.kind){case j.ReadVariable:if(o.xref===n)return s=!0,e;break;default:let l=Vp(o);r=r&&zf(l,i);break}return o},ge.None),s}function VS(n,e){switch(n.variable.kind){case et.Identifier:return n.initializer instanceof ln&&n.initializer.name==="ctx";case et.Context:return e.kind===u.Variable;default:return!0}}function HS(n){for(let e of n.units){let t=null,i=null;for(let s of e.create)switch(s.kind){case u.I18nStart:t=s;break;case u.I18nEnd:t=null;break;case u.IcuStart:t===null&&(i=n.allocateXrefId(),T.insertBefore(Gl(i,s.message,void 0,null),s));break;case u.IcuEnd:i!==null&&(T.insertAfter(Xl(i,null),s),i=null);break}}}var qS=[{kind:B.Tmpl,fn:x2},{kind:B.Host,fn:N1},{kind:B.Tmpl,fn:n2},{kind:B.Tmpl,fn:k2},{kind:B.Tmpl,fn:HS},{kind:B.Both,fn:K_},{kind:B.Both,fn:kS},{kind:B.Both,fn:O_},{kind:B.Both,fn:Y_},{kind:B.Both,fn:B_},{kind:B.Tmpl,fn:J_},{kind:B.Both,fn:s2},{kind:B.Tmpl,fn:nS},{kind:B.Both,fn:H_},{kind:B.Both,fn:_2},{kind:B.Tmpl,fn:q_},{kind:B.Tmpl,fn:E2},{kind:B.Tmpl,fn:e1},{kind:B.Tmpl,fn:y2},{kind:B.Both,fn:D2},{kind:B.Tmpl,fn:T1},{kind:B.Tmpl,fn:k1},{kind:B.Tmpl,fn:A1},{kind:B.Tmpl,fn:vS},{kind:B.Both,fn:D_},{kind:B.Both,fn:lS},{kind:B.Tmpl,fn:IS},{kind:B.Tmpl,fn:sS},{kind:B.Both,fn:dS},{kind:B.Tmpl,fn:t1},{kind:B.Tmpl,fn:PS},{kind:B.Tmpl,fn:AS},{kind:B.Both,fn:oS},{kind:B.Both,fn:fS},{kind:B.Tmpl,fn:e2},{kind:B.Both,fn:o1},{kind:B.Both,fn:ES},{kind:B.Both,fn:TS},{kind:B.Both,fn:BS},{kind:B.Both,fn:CS},{kind:B.Tmpl,fn:Kx},{kind:B.Tmpl,fn:Z_},{kind:B.Tmpl,fn:rS},{kind:B.Tmpl,fn:L_},{kind:B.Tmpl,fn:P_},{kind:B.Tmpl,fn:xS},{kind:B.Tmpl,fn:cS},{kind:B.Tmpl,fn:uS},{kind:B.Tmpl,fn:S1},{kind:B.Tmpl,fn:Xx},{kind:B.Tmpl,fn:I1},{kind:B.Both,fn:W_},{kind:B.Tmpl,fn:iS},{kind:B.Both,fn:NS},{kind:B.Tmpl,fn:y1},{kind:B.Both,fn:r2},{kind:B.Tmpl,fn:aS},{kind:B.Tmpl,fn:l2},{kind:B.Tmpl,fn:u2},{kind:B.Tmpl,fn:r1},{kind:B.Tmpl,fn:M_},{kind:B.Tmpl,fn:d2},{kind:B.Both,fn:A2},{kind:B.Both,fn:JC},{kind:B.Both,fn:V_}];function Wf(n,e){for(let t of qS)(t.kind===e||t.kind===B.Both)&&t.fn(n)}function US(n,e){let t=Xf(n.root);return Gf(n.root,e),t}function Gf(n,e){for(let t of n.job.units){if(t.parent!==n.xref)continue;Gf(t,e);let i=Xf(t);e.statements.push(i.toDeclStmt(i.name))}}function Xf(n){if(n.fnName===null)throw new Error(`AssertionError: view ${n.xref} is unnamed`);let e=[];for(let r of n.create){if(r.kind!==u.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${u[r.kind]}`);e.push(r.statement)}let t=[];for(let r of n.update){if(r.kind!==u.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${u[r.kind]}`);t.push(r.statement)}let i=Bl(1,e),s=Bl(2,t);return vi([new tt("rf"),new tt("ctx")],[...i,...s],void 0,void 0,n.fnName)}function Bl(n,e){return e.length===0?[]:[ql(new pe(I.BitwiseAnd,oe("rf"),E(n)),e)]}function jS(n){if(n.root.fnName===null)throw new Error("AssertionError: host binding function is unnamed");let e=[];for(let r of n.root.create){if(r.kind!==u.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${u[r.kind]}`);e.push(r.statement)}let t=[];for(let r of n.root.update){if(r.kind!==u.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${u[r.kind]}`);t.push(r.statement)}if(e.length===0&&t.length===0)return null;let i=Bl(1,e),s=Bl(2,t);return vi([new tt("rf"),new tt("ctx")],[...i,...s],void 0,void 0,n.root.fnName)}var Yf=Yt.TemplateDefinitionBuilder,Xi=new ir,Yi="ng-template",zS="animate.";function Da(n){return n instanceof wt}function WS(n){return Da(n)&&n.nodes.length===1&&n.nodes[0]instanceof rl}function GS(n,e,t,i,s,r,o,a,l,c){let p=new Mo(n,t,Yf,i,s,r,o,a,l,c);return ii(p.root,e),p}function XS(n,e,t){let i=new El(n.componentName,t,Yf,Dt.DomOnly);for(let s of n.properties??[]){let r=H.Property;s.name.startsWith("attr.")&&(s.name=s.name.substring(5),r=H.Attribute),s.isLegacyAnimation&&(r=H.LegacyAnimation),s.isAnimation&&(r=H.Animation);let o=e.calcPossibleSecurityContexts(n.componentSelector,s.name,r===H.Attribute).filter(a=>a!==ke.NONE);YS(i,s,r,o)}for(let[s,r]of Object.entries(n.attributes)??[]){let o=e.calcPossibleSecurityContexts(n.componentSelector,s,!0).filter(a=>a!==ke.NONE);QS(i,s,r,o)}for(let s of n.events??[])ZS(i,s);return i}function YS(n,e,t,i){let s,r=e.expression.ast;r instanceof zo?s=new Le(r.strings,r.expressions.map(o=>re(o,n,e.sourceSpan)),[]):s=re(r,n,e.sourceSpan),n.root.update.push(rs(n.root.xref,t,e.name,s,null,i,!1,!1,null,null,e.sourceSpan))}function QS(n,e,t,i){let s=rs(n.root.xref,H.Attribute,e,t,null,i,!0,!1,null,null,t.sourceSpan);n.root.update.push(s)}function ZS(n,e){let t;if(e.type===bt.Animation)t=Ef(n.root.xref,new ut,e.name,null,$o(n.root,e.handler,e.handlerSpan),e.name.endsWith("enter")?"enter":"leave",e.targetOrPhase,!0,e.sourceSpan);else{let[i,s]=e.type!==bt.LegacyAnimation?[null,e.targetOrPhase]:[e.targetOrPhase,null];t=Bp(n.root.xref,new ut,e.name,null,$o(n.root,e.handler,e.handlerSpan),i,s,!0,e.sourceSpan)}n.root.create.push(t)}function ii(n,e){for(let t of e)if(t instanceof $n)JS(n,t);else if(t instanceof Wt)KS(n,t);else if(t instanceof Xs)eE(n,t);else if(t instanceof Vi)Qf(n,t,null);else if(t instanceof zs)Zf(n,t,null);else if(t instanceof il)tE(n,t);else if(t instanceof nl)nE(n,t);else if(t instanceof is)iE(n,t);else if(t instanceof Um)rE(n,t);else if(t instanceof Gs)oE(n,t);else if(t instanceof yp)lE(n,t);else if(!(t instanceof Ur))throw new Error(`Unsupported template node: ${t.constructor.name}`)}function JS(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof wt||e.i18n instanceof xi))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let t=n.job.allocateXrefId(),[i,s]=bn(e.name),r=p_(s,t,Af(i),e.i18n instanceof xi?e.i18n:void 0,e.startSourceSpan,e.sourceSpan);n.create.push(r),uE(n,r,e),e0(r,e);let o=null;e.i18n instanceof wt&&(o=n.job.allocateXrefId(),n.create.push(Gl(o,e.i18n,void 0,e.startSourceSpan))),ii(n,e.children);let a=h_(t,e.endSourceSpan??e.startSourceSpan);n.create.push(a),o!==null&&T.insertBefore(Xl(o,e.endSourceSpan??e.startSourceSpan),a)}function KS(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof wt||e.i18n instanceof xi))throw Error(`Unhandled i18n metadata type for template: ${e.i18n.constructor.name}`);let t=n.job.allocateView(n.xref),i=e.tagName,s="";e.tagName&&([s,i]=bn(e.tagName));let r=e.i18n instanceof xi?e.i18n:void 0,o=Af(s),a=i===null?"":z_(i,o),l=cE(e)?Nt.NgTemplate:Nt.Structural,c=_f(t.xref,l,i,a,o,r,e.startSourceSpan,e.sourceSpan);n.create.push(c),pE(n,c,e,l),e0(c,e),ii(t,e.children);for(let{name:p,value:d}of e.variables)t.contextVariables.set(p,d!==""?d:"$implicit");if(l===Nt.NgTemplate&&e.i18n instanceof wt){let p=n.job.allocateXrefId();T.insertAfter(Gl(p,e.i18n,void 0,e.startSourceSpan),t.create.head),T.insertBefore(Xl(p,e.endSourceSpan??e.startSourceSpan),t.create.tail)}}function eE(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof xi))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let t=null;e.children.some(r=>!(r instanceof jl)&&(!(r instanceof Vi)||r.value.trim().length>0))&&(t=n.job.allocateView(n.xref),ii(t,e.children));let i=n.job.allocateXrefId(),s=C_(i,e.selector,e.i18n,t?.xref??null,e.sourceSpan);for(let r of e.attributes){let o=Xi.securityContext(e.name,r.name,!0);n.update.push(rs(s.xref,H.Attribute,r.name,E(r.value),null,o,!0,!1,null,Qn(r.i18n),r.sourceSpan))}n.create.push(s)}function Qf(n,e,t){n.create.push(Sf(n.job.allocateXrefId(),e.value,t,e.sourceSpan))}function Zf(n,e,t){let i=e.value;if(i instanceof Ht&&(i=i.ast),!(i instanceof zo))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${i.constructor.name}`);if(e.i18n!==void 0&&!(e.i18n instanceof Jn))throw Error(`Unhandled i18n metadata type for text interpolation: ${e.i18n?.constructor.name}`);let s=e.i18n instanceof Jn?e.i18n.children.filter(a=>a instanceof Co).map(a=>a.name):[];if(s.length>0&&s.length!==i.expressions.length)throw Error(`Unexpected number of i18n placeholders (${i.expressions.length}) for BoundText with ${i.expressions.length} expressions`);let r=n.job.allocateXrefId();n.create.push(Sf(r,"",t,e.sourceSpan));let o=n.job.compatibility?null:e.sourceSpan;n.update.push(Jv(r,new Le(i.strings,i.expressions.map(a=>re(a,n.job,o)),s),e.sourceSpan))}function tE(n,e){let t=null,i=[];for(let s=0;s<e.branches.length;s++){let r=e.branches[s],o=n.job.allocateView(n.xref),a=Fl(n,o.xref,r);r.expressionAlias!==null&&o.contextVariables.set(r.expressionAlias.name,kf);let l;if(r.i18n!==void 0){if(!(r.i18n instanceof Ci))throw Error(`Unhandled i18n metadata type for if block: ${r.i18n?.constructor.name}`);l=r.i18n}let p=(s===0?xf:Cf)(o.xref,Nt.Block,a,"Conditional",mt.HTML,l,r.startSourceSpan,r.sourceSpan);n.create.push(p),t===null&&(t=o.xref);let d=r.expression?re(r.expression,n.job,null):null,m=new _l(d,p.xref,p.handle,r.expressionAlias);i.push(m),ii(o,r.children)}n.update.push(ff(t,null,i,e.sourceSpan))}function nE(n,e){if(e.cases.length===0)return;let t=null,i=[];for(let s=0;s<e.cases.length;s++){let r=e.cases[s],o=n.job.allocateView(n.xref),a=Fl(n,o.xref,r),l;if(r.i18n!==void 0){if(!(r.i18n instanceof Ci))throw Error(`Unhandled i18n metadata type for switch block: ${r.i18n?.constructor.name}`);l=r.i18n}let p=(s===0?xf:Cf)(o.xref,Nt.Block,a,"Case",mt.HTML,l,r.startSourceSpan,r.sourceSpan);n.create.push(p),t===null&&(t=o.xref);let d=r.expression?re(r.expression,n.job,e.startSourceSpan):null,m=new _l(d,p.xref,p.handle);i.push(m),ii(o,r.children)}n.update.push(ff(t,re(e.expression,n.job,null),i,e.sourceSpan))}function Sa(n,e,t,i,s){if(t!==void 0&&!(t instanceof Ci))throw Error("Unhandled i18n metadata type for defer block");if(i===void 0)return null;let r=n.job.allocateView(n.xref);ii(r,i);let o=_f(r.xref,Nt.Block,null,`Defer${e}`,mt.HTML,t,s,s);return n.create.push(o),o}function iE(n,e){let t=null;if(n.job.deferMeta.mode===0){if(!n.job.deferMeta.blocks.has(e))throw new Error("AssertionError: unable to find a dependency function for this deferred block");t=n.job.deferMeta.blocks.get(e)??null}let i=Sa(n,"",e.i18n,e.children,e.sourceSpan),s=Sa(n,"Loading",e.loading?.i18n,e.loading?.children,e.loading?.sourceSpan),r=Sa(n,"Placeholder",e.placeholder?.i18n,e.placeholder?.children,e.placeholder?.sourceSpan),o=Sa(n,"Error",e.error?.i18n,e.error?.children,e.error?.sourceSpan),a=n.job.allocateXrefId(),l=S_(a,i.xref,i.handle,t,n.job.allDeferrableDepsFn,e.sourceSpan);l.placeholderView=r?.xref??null,l.placeholderSlot=r?.handle??null,l.loadingSlot=s?.handle??null,l.errorSlot=o?.handle??null,l.placeholderMinimumTime=e.placeholder?.minimumTime??null,l.loadingMinimumTime=e.loading?.minimumTime??null,l.loadingAfterTime=e.loading?.afterTime??null,l.flags=sE(e),n.create.push(l);let c=[],p=[];$c("hydrate",e.hydrateTriggers,c,p,n,a),$c("none",e.triggers,c,p,n,a),$c("prefetch",e.prefetchTriggers,c,p,n,a),c.some(m=>m.modifier==="none")||p.some(m=>m.modifier==="none")||c.push(ci(a,{kind:Se.Idle},"none",null)),n.create.push(c),n.update.push(p)}function sE(n){return Object.keys(n.hydrateTriggers).length>0?1:null}function $c(n,e,t,i,s,r){if(e.idle!==void 0){let o=ci(r,{kind:Se.Idle},n,e.idle.sourceSpan);t.push(o)}if(e.immediate!==void 0){let o=ci(r,{kind:Se.Immediate},n,e.immediate.sourceSpan);t.push(o)}if(e.timer!==void 0){let o=ci(r,{kind:Se.Timer,delay:e.timer.delay},n,e.timer.sourceSpan);t.push(o)}if(e.hover!==void 0){let o=ci(r,{kind:Se.Hover,targetName:e.hover.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.hover.sourceSpan);t.push(o)}if(e.interaction!==void 0){let o=ci(r,{kind:Se.Interaction,targetName:e.interaction.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.interaction.sourceSpan);t.push(o)}if(e.viewport!==void 0){let o=ci(r,{kind:Se.Viewport,targetName:e.viewport.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.viewport.sourceSpan);t.push(o)}if(e.never!==void 0){let o=ci(r,{kind:Se.Never},n,e.never.sourceSpan);t.push(o)}if(e.when!==void 0){if(e.when.value instanceof zo)throw new Error("Unexpected interpolation in defer block when trigger");let o=a_(r,re(e.when.value,s.job,e.when.sourceSpan),n,e.when.sourceSpan);i.push(o)}}function rE(n,e){if(e.i18n instanceof wt&&WS(e.i18n)){let t=n.job.allocateXrefId();n.create.push(w_(t,e.i18n,Wm(e.i18n).name,null));for(let[i,s]of Object.entries(k(k({},e.vars),e.placeholders)))s instanceof zs?Zf(n,s,i):Qf(n,s,i);n.create.push(y_(t))}else throw Error(`Unhandled i18n metadata type for ICU: ${e.i18n?.constructor.name}`)}function oE(n,e){let t=n.job.allocateView(n.xref),i=`\u0275$index_${t.xref}`,s=`\u0275$count_${t.xref}`,r=new Set;t.contextVariables.set(e.item.name,e.item.value);for(let D of e.contextVariables)D.value==="$index"&&r.add(D.name),D.name==="$index"?t.contextVariables.set("$index",D.value).set(i,D.value):D.name==="$count"?t.contextVariables.set("$count",D.value).set(s,D.value):t.aliases.add({kind:et.Alias,name:null,identifier:D.name,expression:aE(D,i,s)});let o=Xe(e.trackBy.span,e.sourceSpan),a=re(e.trackBy,n.job,o);ii(t,e.children);let l=null,c=null;e.empty!==null&&(l=n.job.allocateView(n.xref),ii(l,e.empty.children),c=Fl(n,l.xref,e.empty));let p={$index:r,$implicit:e.item.name};if(e.i18n!==void 0&&!(e.i18n instanceof Ci))throw Error("AssertionError: Unhandled i18n metadata type or @for");if(e.empty?.i18n!==void 0&&!(e.empty.i18n instanceof Ci))throw Error("AssertionError: Unhandled i18n metadata type or @empty");let d=e.i18n,m=e.empty?.i18n,_=Fl(n,t.xref,e),b=d_(t.xref,l?.xref??null,_,a,p,c,d,m,e.startSourceSpan,e.sourceSpan);n.create.push(b);let A=re(e.expression,n.job,Xe(e.expression.span,e.sourceSpan)),L=o_(b.xref,b.handle,A,e.sourceSpan);n.update.push(L)}function aE(n,e,t){switch(n.value){case"$index":return new st(e);case"$count":return new st(t);case"$first":return new st(e).identical(E(0));case"$last":return new st(e).identical(new st(t).minus(E(1)));case"$even":return new st(e).modulo(E(2)).identical(E(0));case"$odd":return new st(e).modulo(E(2)).notIdentical(E(0));default:throw new Error(`AssertionError: unknown @for loop variable ${n.value}`)}}function lE(n,e){let t=n.job.allocateXrefId();n.create.push(E_(t,e.name,e.sourceSpan)),n.update.push(c_(t,e.name,re(e.value,n.job,e.valueSpan),e.sourceSpan))}function re(n,e,t){if(n instanceof Ht)return re(n.ast,e,t);if(n instanceof Zn)return n.receiver instanceof On&&!(n.receiver instanceof ts)?new st(n.name):new Xt(re(n.receiver,e,t),n.name,null,Xe(n.span,t));if(n instanceof js){if(n.receiver instanceof On)throw new Error("Unexpected ImplicitReceiver");return new Lt(re(n.receiver,e,t),n.args.map(i=>re(i,e,t)),void 0,Xe(n.span,t))}else{if(n instanceof Vt)return E(n.value,void 0,Xe(n.span,t));if(n instanceof Fs)switch(n.operator){case"+":return new Ji(Xr.Plus,re(n.expr,e,t),void 0,Xe(n.span,t));case"-":return new Ji(Xr.Minus,re(n.expr,e,t),void 0,Xe(n.span,t));default:throw new Error(`AssertionError: unknown unary operator ${n.operator}`)}else if(n instanceof Ct){let i=U_.get(n.operation);if(i===void 0)throw new Error(`AssertionError: unknown binary operator ${n.operation}`);return new pe(i,re(n.left,e,t),re(n.right,e,t),void 0,Xe(n.span,t))}else{if(n instanceof ts)return new Ei(e.root.xref);if(n instanceof ns)return new ei(re(n.receiver,e,t),re(n.key,e,t),void 0,Xe(n.span,t));if(n instanceof Us)throw new Error("AssertionError: Chain in unknown context");if(n instanceof Ga){let i=n.keys.map((s,r)=>{let o=n.values[r];return new Hs(s.key,re(o,e,t),s.quoted)});return new Rn(i,void 0,Xe(n.span,t))}else{if(n instanceof Wa)return new Sn(n.expressions.map(i=>re(i,e,t)));if(n instanceof ja)return new Fn(re(n.condition,e,t),re(n.trueExp,e,t),re(n.falseExp,e,t),void 0,Xe(n.span,t));if(n instanceof oo)return re(n.expression,e,t);if(n instanceof za)return new as(e.allocateXrefId(),new ut,n.name,[re(n.exp,e,t),...n.args.map(i=>re(i,e,t))]);if(n instanceof no)return new er(re(n.receiver,e,t),re(n.key,e,t),Xe(n.span,t));if(n instanceof to)return new Ks(re(n.receiver,e,t),n.name);if(n instanceof Xa)return new ls(re(n.receiver,e,t),n.args.map(i=>re(i,e,t)));if(n instanceof At)return new No(Xe(n.span,t));if(n instanceof io)return ug(re(n.expression,e,t),Xe(n.span,t));if(n instanceof so)return jo(re(n.expression,e,t));if(n instanceof ro)return new Ba(re(n.expression,e,t),void 0,Xe(n.span,t));if(n instanceof lo)return mm(n,e,t);if(n instanceof ao)return new Yr(re(n.tag,e,t),mm(n.template,e,t),void 0,Xe(n.span,t));if(n instanceof co)return new Cn(re(n.expression,e,t),void 0,Xe(n.span,t));throw new Error(`Unhandled expression type "${n.constructor.name}" in file "${t?.start.file.url}"`)}}}}function mm(n,e,t){return new Zr(n.elements.map(i=>new Fa(i.text,Xe(i.span,t))),n.expressions.map(i=>re(i,e,t)),Xe(n.span,t))}function ep(n,e,t,i){let s;return e instanceof zo?s=new Le(e.strings,e.expressions.map(r=>re(r,n,null)),Object.keys(Qn(t)?.placeholders??{})):e instanceof Ie?s=re(e,n,null):s=E(e),s}var Jf=new Map([[he.Property,H.Property],[he.TwoWay,H.TwoWayProperty],[he.Attribute,H.Attribute],[he.Class,H.ClassName],[he.Style,H.StyleProperty],[he.LegacyAnimation,H.LegacyAnimation],[he.Animation,H.Animation]]);function cE(n){return bn(n.tagName??"")[1]===Yi}function Qn(n){if(n==null)return null;if(!(n instanceof wt))throw Error(`Expected i18n meta to be a Message, but got: ${n.constructor.name}`);return n}function uE(n,e,t){let i=new Array,s=new Set;for(let r of t.attributes){let o=Xi.securityContext(t.name,r.name,!0);i.push(rs(e.xref,H.Attribute,r.name,ep(n.job,r.value,r.i18n),null,o,!0,!1,null,Qn(r.i18n),r.sourceSpan)),r.i18n&&s.add(r.name)}for(let r of t.inputs)s.has(r.name)&&console.error(`On component ${n.job.componentName}, the binding ${r.name} is both an i18n attribute and a property. You may want to remove the property binding. This will become a compilation error in future versions of Angular.`),i.push(rs(e.xref,Jf.get(r.type),r.name,ep(n.job,Vo(r.value),r.i18n),r.unit,r.securityContext,!1,!1,null,Qn(r.i18n)??null,r.sourceSpan));n.create.push(i.filter(r=>r?.kind===u.ExtractedAttribute)),n.update.push(i.filter(r=>r?.kind===u.Binding));for(let r of t.outputs){if(r.type===bt.LegacyAnimation&&r.phase===null)throw Error("Animation listener should have a phase");r.type===bt.TwoWay?n.create.push(bf(e.xref,e.handle,r.name,e.tag,Kf(n,r.handler,r.handlerSpan),r.sourceSpan)):r.type===bt.Animation?n.create.push(Ef(e.xref,e.handle,r.name,e.tag,$o(n,r.handler,r.handlerSpan),r.name.endsWith("enter")?"enter":"leave",r.target,!1,r.sourceSpan)):n.create.push(Bp(e.xref,e.handle,r.name,e.tag,$o(n,r.handler,r.handlerSpan),r.phase,r.target,!1,r.sourceSpan))}i.some(r=>r?.i18nMessage)!==null&&n.create.push(yf(n.job.allocateXrefId(),new ut,e.xref))}function pE(n,e,t,i){let s=new Array;for(let r of t.templateAttrs)if(r instanceof Ws){let o=Xi.securityContext(Yi,r.name,!0);s.push(Ea(n,e.xref,he.Attribute,r.name,r.value,null,o,!0,i,Qn(r.i18n),r.sourceSpan))}else s.push(Ea(n,e.xref,r.type,r.name,Vo(r.value),r.unit,r.securityContext,!0,i,Qn(r.i18n),r.sourceSpan));for(let r of t.attributes){let o=Xi.securityContext(Yi,r.name,!0);s.push(Ea(n,e.xref,he.Attribute,r.name,r.value,null,o,!1,i,Qn(r.i18n),r.sourceSpan))}for(let r of t.inputs)s.push(Ea(n,e.xref,r.type,r.name,Vo(r.value),r.unit,r.securityContext,!1,i,Qn(r.i18n),r.sourceSpan));n.create.push(s.filter(r=>r?.kind===u.ExtractedAttribute)),n.update.push(s.filter(r=>r?.kind===u.Binding));for(let r of t.outputs){if(r.type===bt.LegacyAnimation&&r.phase===null)throw Error("Animation listener should have a phase");if(i===Nt.NgTemplate&&(r.type===bt.TwoWay?n.create.push(bf(e.xref,e.handle,r.name,e.tag,Kf(n,r.handler,r.handlerSpan),r.sourceSpan)):n.create.push(Bp(e.xref,e.handle,r.name,e.tag,$o(n,r.handler,r.handlerSpan),r.phase,r.target,!1,r.sourceSpan))),i===Nt.Structural&&r.type!==bt.LegacyAnimation){let o=Xi.securityContext(Yi,r.name,!1);n.create.push(sn(e.xref,H.Property,null,r.name,null,null,null,o))}}s.some(r=>r?.i18nMessage)!==null&&n.create.push(yf(n.job.allocateXrefId(),new ut,e.xref))}function Ea(n,e,t,i,s,r,o,a,l,c,p){let d=typeof s=="string";if(l===Nt.Structural){if(!a)switch(t){case he.Property:case he.Class:case he.Style:return sn(e,H.Property,null,i,null,null,c,o);case he.TwoWay:return sn(e,H.TwoWayProperty,null,i,null,null,c,o)}if(!d&&(t===he.Attribute||t===he.LegacyAnimation||t===he.Animation))return null}let m=Jf.get(t);return l===Nt.NgTemplate&&(t===he.Class||t===he.Style||t===he.Attribute&&!d)&&(m=H.Property),rs(e,m,i,ep(n.job,s,c),r,o,d,a,l,c,p)}function $o(n,e,t){e=Vo(e);let i=new Array,s=e instanceof Us?e.expressions:[e];if(s.length===0)throw new Error("Expected listener to have non-empty expression list.");let r=s.map(a=>re(a,n.job,t)),o=r.pop();return i.push(...r.map(a=>pn(new cn(a,a.sourceSpan)))),i.push(pn(new at(o,o.sourceSpan))),i}function Kf(n,e,t){e=Vo(e);let i=new Array;if(e instanceof Us)if(e.expressions.length===1)e=e.expressions[0];else throw new Error("Expected two-way listener to have a single expression.");let s=re(e,n.job,t),r=new st("$event"),o=new gl(s,r);return i.push(pn(new cn(o))),i.push(pn(new at(r))),i}function Vo(n){return n instanceof Ht?n.ast:n}function e0(n,e){dE(n.localRefs);for(let{name:t,value:i}of e.references)n.localRefs.push({name:t,target:i})}function dE(n){if(!Array.isArray(n))throw new Error("AssertionError: expected an array")}function Xe(n,e){if(e===null)return null;let t=e.start.moveBy(n.start),i=e.start.moveBy(n.end),s=e.fullStart.moveBy(n.start);return new Q(t,i,s)}function Fl(n,e,t){let i=null;for(let s of t.children)if(!(s instanceof jl||s instanceof yp)){if(i!==null)return null;if(s instanceof $n||s instanceof Wt&&s.tagName!==null)i=s;else return null}if(i!==null){for(let r of i.attributes)if(!r.name.startsWith(zS)){let o=Xi.securityContext(Yi,r.name,!0);n.update.push(rs(e,H.Attribute,r.name,E(r.value),null,o,!0,!1,null,Qn(r.i18n),r.sourceSpan))}for(let r of i.inputs)if(r.type!==he.LegacyAnimation&&r.type!==he.Animation&&r.type!==he.Attribute){let o=Xi.securityContext(Yi,r.name,!0);n.create.push(sn(e,H.Property,null,r.name,null,null,null,o))}let s=i instanceof $n?i.name:i.tagName;return s===Yi?null:s}return null}var hE=!1;function mE(){return hE}function Rl(n,e){return ql(oe(Ap).bitwiseAnd(E(n),null),e)}function fE(n){return(n.descendants?1:0)|(n.static?2:0)|(n.emitDistinctChangesOnly?4:0)}function gE(n,e){if(Array.isArray(n.predicate)){let t=[];return n.predicate.forEach(i=>{let s=i.split(",").map(r=>E(r.trim()));t.push(...s)}),e.getConstLiteral(_e(t),!0)}else switch(n.predicate.forwardRef){case 0:case 2:return n.predicate.expression;case 1:return U(f.resolveForwardRef).callFn([n.predicate.expression])}}function t0(n,e,t,i){let s=[];i!==void 0&&s.push(...i),n.isSignal&&s.push(new Xt(oe(So),n.propertyName)),s.push(gE(n,e),E(fE(n))),n.read&&s.push(n.read);let r=n.isSignal?t.signalBased:t.nonSignal;return U(r).callFn(s)}var Hp=Symbol("queryAdvancePlaceholder");function n0(n){let e=[],t=0,i=()=>{t>0&&(e.unshift(U(f.queryAdvance).callFn(t===1?[]:[E(t)]).toStmt()),t=0)};for(let s=n.length-1;s>=0;s--){let r=n[s];r===Hp?t++:(i(),e.unshift(r))}return i(),e}function vE(n,e,t){let i=[],s=[],r=Gm(a=>s.push(a),Tp);n.forEach(a=>{let l=t0(a,e,{signalBased:f.viewQuerySignal,nonSignal:f.viewQuery});if(i.push(l.toStmt()),a.isSignal){s.push(Hp);return}let c=r(),p=U(f.loadQuery).callFn([]),d=U(f.queryRefresh).callFn([c.set(p)]),m=oe(So).prop(a.propertyName).set(a.first?c.prop("first"):c);s.push(d.and(m).toStmt())});let o=t?`${t}_Query`:null;return vi([new tt(Ap,Ep),new tt(So,null)],[Rl(1,i),Rl(2,n0(s))],jt,null,o)}function _E(n,e,t){let i=[],s=[],r=Gm(a=>s.push(a),Tp);for(let a of n){if(i.push(t0(a,e,{nonSignal:f.contentQuery,signalBased:f.contentQuerySignal},[oe("dirIndex")]).toStmt()),a.isSignal){s.push(Hp);continue}let l=r(),c=U(f.loadQuery).callFn([]),p=U(f.queryRefresh).callFn([l.set(c)]),d=oe(So).prop(a.propertyName).set(a.first?l.prop("first"):l);s.push(p.and(d).toStmt())}let o=t?`${t}_ContentQueries`:null;return vi([new tt(Ap,Ep),new tt(So,null),new tt("dirIndex",null)],[Rl(1,i),Rl(2,n0(s))],jt,null,o)}var tp=class extends G1{constructor(){super(Xu)}parse(e,t,i){return super.parse(e,t,i)}},ba=".",xE="attr",Vc="animate",CE="class",SE="style",EE="*",Hc="animate-",np=class{_exprParser;_interpolationConfig;_schemaRegistry;errors;constructor(e,t,i,s){this._exprParser=e,this._interpolationConfig=t,this._schemaRegistry=i,this.errors=s}get interpolationConfig(){return this._interpolationConfig}createBoundHostProperties(e,t){let i=[];for(let s of Object.keys(e)){let r=e[s];typeof r=="string"?this.parsePropertyBinding(s,r,!0,!1,t,t.start.offset,void 0,[],i,t):this._reportError(`Value of the host property binding "${s}" needs to be a string representing an expression but got "${r}" (${typeof r})`,t)}return i}createDirectiveHostEventAsts(e,t){let i=[];for(let s of Object.keys(e)){let r=e[s];typeof r=="string"?this.parseEvent(s,r,!1,t,t,[],i,t):this._reportError(`Value of the host listener "${s}" needs to be a string representing an expression but got "${r}" (${typeof r})`,t)}return i}parseInterpolation(e,t,i){let s=t.fullStart.offset;try{let r=this._exprParser.parseInterpolation(e,t,s,i,this._interpolationConfig);return r&&this.errors.push(...r.errors),r}catch(r){return this._reportError(`${r}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,s)}}parseInterpolationExpression(e,t){let i=t.start.offset;try{let s=this._exprParser.parseInterpolationExpression(e,t,i);return s&&this.errors.push(...s.errors),s}catch(s){return this._reportError(`${s}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,i)}}parseInlineTemplateBinding(e,t,i,s,r,o,a,l){let c=i.start.offset+EE.length,p=this._parseTemplateBindings(e,t,i,c,s);for(let d of p){let m=ai(i,d.sourceSpan),_=d.key.source,b=ai(i,d.key.span);if(d instanceof uo){let A=d.value?d.value.source:"$implicit",L=d.value?ai(i,d.value.span):void 0;a.push(new au(_,A,m,b,L))}else if(d.value){let A=l?m:i,L=ai(i,d.value.ast.sourceSpan);this._parsePropertyAst(_,d.value,!1,A,b,L,r,o)}else r.push([_,""]),this.parseLiteralAttr(_,null,b,s,void 0,r,o,b)}}_parseTemplateBindings(e,t,i,s,r){try{let o=this._exprParser.parseTemplateBindings(e,t,i,s,r);return o.errors.forEach(a=>this.errors.push(a)),o.warnings.forEach(a=>{this._reportError(a,i,hi.WARNING)}),o.templateBindings}catch(o){return this._reportError(`${o}`,i),[]}}parseLiteralAttr(e,t,i,s,r,o,a,l){qc(e)?(e=e.substring(1),l!==void 0&&(l=ai(l,new zt(l.start.offset+1,l.end.offset))),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',i,hi.ERROR),this._parseLegacyAnimation(e,t,i,s,l,r,o,a)):a.push(new Ds(e,this._exprParser.wrapLiteralPrimitive(t,"",s),Pn.LITERAL_ATTR,i,l,r))}parsePropertyBinding(e,t,i,s,r,o,a,l,c,p){e.length===0&&this._reportError("Property name is missing in binding",r);let d=!1;e.startsWith(Hc)?(d=!0,e=e.substring(Hc.length),p!==void 0&&(p=ai(p,new zt(p.start.offset+Hc.length,p.end.offset)))):qc(e)&&(d=!0,e=e.substring(1),p!==void 0&&(p=ai(p,new zt(p.start.offset+1,p.end.offset)))),d?this._parseLegacyAnimation(e,t,r,o,p,a,l,c):e.startsWith(`${Vc}${ba}`)?this._parseAnimation(e,this.parseBinding(t,i,a||r,o),r,p,a,l,c):this._parsePropertyAst(e,this.parseBinding(t,i,a||r,o),s,r,p,a,l,c)}parsePropertyInterpolation(e,t,i,s,r,o,a,l){let c=this.parseInterpolation(t,s||i,l);return c?(this._parsePropertyAst(e,c,!1,i,a,s,r,o),!0):!1}_parsePropertyAst(e,t,i,s,r,o,a,l){a.push([e,t.source]),l.push(new Ds(e,t,i?Pn.TWO_WAY:Pn.DEFAULT,s,r,o))}_parseAnimation(e,t,i,s,r,o,a){o.push([e,t.source]),a.push(new Ds(e,t,Pn.ANIMATION,i,s,r))}_parseLegacyAnimation(e,t,i,s,r,o,a,l){e.length===0&&this._reportError("Animation trigger is missing",i);let c=this.parseBinding(t||"undefined",!1,o||i,s);a.push([e,c.source]),l.push(new Ds(e,c,Pn.LEGACY_ANIMATION,i,r,o))}parseBinding(e,t,i,s){try{let r=t?this._exprParser.parseSimpleBinding(e,i,s,this._interpolationConfig):this._exprParser.parseBinding(e,i,s,this._interpolationConfig);return r&&this.errors.push(...r.errors),r}catch(r){return this._reportError(`${r}`,i),this._exprParser.wrapLiteralPrimitive("ERROR",i,s)}}createBoundElementProperty(e,t,i=!1,s=!0){if(t.isLegacyAnimation)return new Za(t.name,he.LegacyAnimation,ke.NONE,t.expression,null,t.sourceSpan,t.keySpan,t.valueSpan);let r=null,o,a=null,l=t.name.split(ba),c;if(l.length>1)if(l[0]==xE){a=l.slice(1).join(ba),i||this._validatePropertyOrAttributeName(a,t.sourceSpan,!0),c=Uc(this._schemaRegistry,e,a,!0);let p=a.indexOf(":");if(p>-1){let d=a.substring(0,p),m=a.substring(p+1);a=ka(d,m)}o=he.Attribute}else l[0]==CE?(a=l[1],o=he.Class,c=[ke.NONE]):l[0]==SE?(r=l.length>2?l[2]:null,a=l[1],o=he.Style,c=[ke.STYLE]):l[0]==Vc&&(a=t.name,o=he.Animation,c=[ke.NONE]);if(a===null){let p=this._schemaRegistry.getMappedPropName(t.name);a=s?p:t.name,c=Uc(this._schemaRegistry,e,p,!1),o=t.type===Pn.TWO_WAY?he.TwoWay:he.Property,i||this._validatePropertyOrAttributeName(p,t.sourceSpan,!1)}return new Za(a,o,c[0],t.expression,r,t.sourceSpan,t.keySpan,t.valueSpan)}parseEvent(e,t,i,s,r,o,a,l){e.length===0&&this._reportError("Event name is missing in binding",s),qc(e)?(e=e.slice(1),l!==void 0&&(l=ai(l,new zt(l.start.offset+1,l.end.offset))),this._parseLegacyAnimationEvent(e,t,s,r,a,l)):this._parseRegularEvent(e,t,i,s,r,o,a,l)}calcPossibleSecurityContexts(e,t,i){let s=this._schemaRegistry.getMappedPropName(t);return Uc(this._schemaRegistry,e,s,i)}parseEventListenerName(e){let[t,i]=Cg(e,[null,e]);return{eventName:i,target:t}}parseLegacyAnimationEventName(e){let t=Sg(e,[e,null]);return{eventName:t[0],phase:t[1]===null?null:t[1].toLowerCase()}}_parseLegacyAnimationEvent(e,t,i,s,r,o){let{eventName:a,phase:l}=this.parseLegacyAnimationEventName(e),c=this._parseAction(t,s);r.push(new Qa(a,l,bt.LegacyAnimation,c,i,s,o)),a.length===0&&this._reportError("Animation event name is missing in binding",i),l?l!=="start"&&l!=="done"&&this._reportError(`The provided animation output phase value "${l}" for "@${a}" is not supported (use start or done)`,i):this._reportError(`The animation trigger output event (@${a}) is missing its phase value name (start or done are currently supported)`,i)}_parseRegularEvent(e,t,i,s,r,o,a,l){let{eventName:c,target:p}=this.parseEventListenerName(e),d=this.errors.length,m=this._parseAction(t,r),_=this.errors.length===d;o.push([e,m.source]),i&&_&&!this._isAllowedAssignmentEvent(m)&&this._reportError("Unsupported expression in a two-way binding",s);let b=bt.Regular;i&&(b=bt.TwoWay),e.startsWith(`${Vc}${ba}`)&&(b=bt.Animation),a.push(new Qa(c,p,b,m,s,r,l))}_parseAction(e,t){let i=t&&t.start?t.start.offset:0;try{let s=this._exprParser.parseAction(e,t,i,this._interpolationConfig);return s&&this.errors.push(...s.errors),!s||s.ast instanceof At?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",t,i)):s}catch(s){return this._reportError(`${s}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,i)}}_reportError(e,t,i=hi.ERROR){this.errors.push(new G(t,e,i))}_validatePropertyOrAttributeName(e,t,i){let s=i?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);s.error&&this._reportError(s.msg,t,hi.ERROR)}_isAllowedAssignmentEvent(e){return e instanceof Ht?this._isAllowedAssignmentEvent(e.ast):e instanceof oo?this._isAllowedAssignmentEvent(e.expression):e instanceof js&&e.args.length===1&&e.receiver instanceof Zn&&e.receiver.name==="$any"&&e.receiver.receiver instanceof On&&!(e.receiver.receiver instanceof ts)?this._isAllowedAssignmentEvent(e.args[0]):(e instanceof Zn||e instanceof ns)&&!ip(e)}};function ip(n){return n instanceof to||n instanceof no?!0:n instanceof co?ip(n.expression):n instanceof Zn||n instanceof ns||n instanceof js?ip(n.receiver):!1}function qc(n){return n[0]=="@"}function Uc(n,e,t,i){let s,r=o=>n.securityContext(o,t,i);return e===null?s=n.allKnownElementNames().map(r):(s=[],$s.parse(e).forEach(o=>{let a=o.element?[o.element]:n.allKnownElementNames(),l=new Set(o.notSelectors.filter(p=>p.isElementSelector()).map(p=>p.element)),c=a.filter(p=>!l.has(p));s.push(...c.map(r))})),s.length===0?[ke.NONE]:Array.from(new Set(s)).sort()}function ai(n,e){let t=e.start-n.start.offset,i=e.end-n.end.offset;return new Q(n.start.moveBy(t),n.end.moveBy(i),n.fullStart.moveBy(t),n.details)}function bE(n){if(n==null||n.length===0||n[0]=="/")return!1;let e=n.match(wE);return e===null||e[1]=="package"||e[1]=="asset"}var wE=/^([^:/?#]+):/,yE="select",kE="link",TE="rel",AE="href",DE="stylesheet",IE="style",PE="script",NE="ngNonBindable",LE="ngProjectAs";function i0(n){let e=null,t=null,i=null,s=!1,r="";n.attrs.forEach(l=>{let c=l.name.toLowerCase();c==yE?e=l.value:c==AE?t=l.value:c==TE?i=l.value:l.name==NE?s=!0:l.name==LE&&l.value.length>0&&(r=l.value)}),e=ME(e);let o=n.name.toLowerCase(),a=Ut.OTHER;return lu(o)?a=Ut.NG_CONTENT:o==IE?a=Ut.STYLE:o==PE?a=Ut.SCRIPT:o==kE&&i==DE&&(a=Ut.STYLESHEET),new sp(a,e,t,s,r)}var Ut=(function(n){return n[n.NG_CONTENT=0]="NG_CONTENT",n[n.STYLE=1]="STYLE",n[n.STYLESHEET=2]="STYLESHEET",n[n.SCRIPT=3]="SCRIPT",n[n.OTHER=4]="OTHER",n})(Ut||{}),sp=class{type;selectAttr;hrefAttr;nonBindable;projectAs;constructor(e,t,i,s,r){this.type=e,this.selectAttr=t,this.hrefAttr=i,this.nonBindable=s,this.projectAs=r}};function ME(n){return n===null||n.length===0?"*":n}var BE=/^\s*([0-9A-Za-z_$]*)\s+of\s+([\S\s]*)/,FE=/^track\s+([\S\s]*)/,RE=/^(as\s+)(.*)/,Yl=/^else[^\S\r\n]+if/,OE=/^let\s+([\S\s]*)/,$E=/^[$A-Z_][0-9A-Z_$]*$/i,fm=/(\s*)(\S+)(\s*)/,Gr=new Set(["$index","$first","$last","$even","$odd","$count"]);function gm(n){return n==="empty"}function vm(n){return n==="else"||Yl.test(n)}function VE(n,e,t,i){let s=WE(e),r=[],o=_m(n,s,i);o!==null&&r.push(new ji(o.expression,Te(t,n.children,n.children),o.expressionAlias,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan,n.i18n));for(let d of e)if(Yl.test(d.name)){let m=_m(d,s,i);if(m!==null){let _=Te(t,d.children,d.children);r.push(new ji(m.expression,_,m.expressionAlias,d.sourceSpan,d.startSourceSpan,d.endSourceSpan,d.nameSpan,d.i18n))}}else if(d.name==="else"){let m=Te(t,d.children,d.children);r.push(new ji(null,m,null,d.sourceSpan,d.startSourceSpan,d.endSourceSpan,d.nameSpan,d.i18n))}let a=r.length>0?r[0].startSourceSpan:n.startSourceSpan,l=r.length>0?r[r.length-1].endSourceSpan:n.endSourceSpan,c=n.sourceSpan,p=r[r.length-1];return p!==void 0&&(c=new Q(a.start,p.sourceSpan.end)),{node:new il(r,c,n.startSourceSpan,l,n.nameSpan),errors:s}}function HE(n,e,t,i){let s=[],r=UE(n,s,i),o=null,a=null;for(let l of e)l.name==="empty"?a!==null?s.push(new G(l.sourceSpan,"@for loop can only have one @empty block")):l.parameters.length>0?s.push(new G(l.sourceSpan,"@empty block cannot have parameters")):a=new vo(Te(t,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n):s.push(new G(l.sourceSpan,`Unrecognized @for loop block "${l.name}"`));if(r!==null)if(r.trackBy===null)s.push(new G(n.startSourceSpan,'@for loop must have a "track" expression'));else{let l=a?.endSourceSpan??n.endSourceSpan,c=new Q(n.sourceSpan.start,l?.end??n.sourceSpan.end);jE(r.trackBy.expression,r.trackBy.keywordSpan,s),o=new Gs(r.itemName,r.expression,r.trackBy.expression,r.trackBy.keywordSpan,r.context,Te(t,n.children,n.children),a,c,n.sourceSpan,n.startSourceSpan,l,n.nameSpan,n.i18n)}return{node:o,errors:s}}function qE(n,e,t){let i=GE(n),s=n.parameters.length>0?Ho(n.parameters[0],t):t.parseBinding("",!1,n.sourceSpan,0),r=[],o=[],a=null;for(let l of n.children){if(!(l instanceof tn))continue;if((l.name!=="case"||l.parameters.length===0)&&l.name!=="default"){o.push(new sl(l.name,l.sourceSpan,l.nameSpan));continue}let c=l.name==="case"?Ho(l.parameters[0],t):null,p=new go(c,Te(e,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n);c===null?a=p:r.push(p)}return a!==null&&r.push(a),{node:new nl(s,r,o,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan),errors:i}}function UE(n,e,t){if(n.parameters.length===0)return e.push(new G(n.startSourceSpan,"@for loop does not have an expression")),null;let[i,...s]=n.parameters,r=XE(i,e)?.match(BE);if(!r||r[2].trim().length===0)return e.push(new G(i.sourceSpan,'Cannot parse expression. @for loop expression must match the pattern "<identifier> of <expression>"')),null;let[,o,a]=r;Gr.has(o)&&e.push(new G(i.sourceSpan,`@for loop item name cannot be one of ${Array.from(Gr).join(", ")}.`));let l=i.expression.split(" ")[0],c=new Q(i.sourceSpan.start,i.sourceSpan.start.moveBy(l.length)),p={itemName:new _i(o,"$implicit",c,c),trackBy:null,expression:Ho(i,t,a),context:Array.from(Gr,d=>{let m=new Q(n.startSourceSpan.end,n.startSourceSpan.end);return new _i(d,d,m,m)})};for(let d of s){let m=d.expression.match(OE);if(m!==null){let b=new Q(d.sourceSpan.start.moveBy(m[0].length-m[1].length),d.sourceSpan.end);zE(d.sourceSpan,m[1],b,o,p.context,e);continue}let _=d.expression.match(FE);if(_!==null){if(p.trackBy!==null)e.push(new G(d.sourceSpan,'@for loop can only have one "track" expression'));else{let b=Ho(d,t,_[1]);b.ast instanceof At&&e.push(new G(n.startSourceSpan,'@for loop must have a "track" expression'));let A=new Q(d.sourceSpan.start,d.sourceSpan.start.moveBy(5));p.trackBy={expression:b,keywordSpan:A}}continue}e.push(new G(d.sourceSpan,`Unrecognized @for loop parameter "${d.expression}"`))}return p}function jE(n,e,t){let i=new rp;n.ast.visit(i),i.hasPipe&&t.push(new G(e,"Cannot use pipes in track expressions"))}function zE(n,e,t,i,s,r){let o=e.split(","),a=t.start;for(let l of o){let c=l.split("="),p=c.length===2?c[0].trim():"",d=c.length===2?c[1].trim():"";if(p.length===0||d.length===0)r.push(new G(n,'Invalid @for loop "let" parameter. Parameter should match the pattern "<name> = <variable name>"'));else if(!Gr.has(d))r.push(new G(n,`Unknown "let" parameter variable "${d}". The allowed variables are: ${Array.from(Gr).join(", ")}`));else if(p===i)r.push(new G(n,`Invalid @for loop "let" parameter. Variable cannot be called "${i}"`));else if(s.some(m=>m.name===p))r.push(new G(n,`Duplicate "let" parameter variable "${d}"`));else{let[,m,_]=c[0].match(fm)??[],b=m!==void 0&&c.length===2?new Q(a.moveBy(m.length),a.moveBy(m.length+_.length)):t,A;if(c.length===2){let[,D,F]=c[1].match(fm)??[];A=D!==void 0?new Q(a.moveBy(c[0].length+1+D.length),a.moveBy(c[0].length+1+D.length+F.length)):void 0}let L=new Q(b.start,A?.end??b.end);s.push(new _i(p,d,L,b,A))}a=a.moveBy(l.length+1)}}function WE(n){let e=[],t=!1;for(let i=0;i<n.length;i++){let s=n[i];s.name==="else"?(t?e.push(new G(s.startSourceSpan,"Conditional can only have one @else block")):n.length>1&&i<n.length-1?e.push(new G(s.startSourceSpan,"@else block must be last inside the conditional")):s.parameters.length>0&&e.push(new G(s.startSourceSpan,"@else block cannot have parameters")),t=!0):Yl.test(s.name)||e.push(new G(s.startSourceSpan,`Unrecognized conditional block @${s.name}`))}return e}function GE(n){let e=[],t=!1;if(n.parameters.length!==1)return e.push(new G(n.startSourceSpan,"@switch block must have exactly one parameter")),e;for(let i of n.children)if(!(i instanceof Bo||i instanceof cs&&i.value.trim().length===0)){if(!(i instanceof tn)||i.name!=="case"&&i.name!=="default"){e.push(new G(i.sourceSpan,"@switch block can only contain @case and @default blocks"));continue}i.name==="default"?(t?e.push(new G(i.startSourceSpan,"@switch block can only have one @default block")):i.parameters.length>0&&e.push(new G(i.startSourceSpan,"@default block cannot have parameters")),t=!0):i.name==="case"&&i.parameters.length!==1&&e.push(new G(i.startSourceSpan,"@case block must have exactly one parameter"))}return e}function Ho(n,e,t){let i,s;return typeof t=="string"?(i=Math.max(0,n.expression.lastIndexOf(t)),s=i+t.length):(i=0,s=n.expression.length),e.parseBinding(n.expression.slice(i,s),!1,n.sourceSpan,n.sourceSpan.start.offset+i)}function _m(n,e,t){if(n.parameters.length===0)return e.push(new G(n.startSourceSpan,"Conditional block does not have an expression")),null;let i=Ho(n.parameters[0],t),s=null;for(let r=1;r<n.parameters.length;r++){let o=n.parameters[r],a=o.expression.match(RE);if(a===null)e.push(new G(o.sourceSpan,`Unrecognized conditional parameter "${o.expression}"`));else if(n.name!=="if"&&!Yl.test(n.name))e.push(new G(o.sourceSpan,'"as" expression is only allowed on `@if` and `@else if` blocks'));else if(s!==null)e.push(new G(o.sourceSpan,'Conditional can only have one "as" expression'));else{let l=a[2].trim();if($E.test(l)){let c=o.sourceSpan.start.moveBy(a[1].length),p=new Q(c,c.moveBy(l.length));s=new _i(l,l,p,p)}else e.push(new G(o.sourceSpan,'"as" expression must be a valid JavaScript identifier'))}}return{expression:i,expressionAlias:s}}function XE(n,e){let t=n.expression,i=/^\s$/,s=0,r=0,o=t.length-1;for(let a=0;a<t.length;a++){let l=t[a];if(l==="(")r=a+1,s++;else{if(i.test(l))continue;break}}if(s===0)return t;for(let a=t.length-1;a>-1;a--){let l=t[a];if(l===")"){if(o=a,s--,s===0)break}else{if(i.test(l))continue;break}}return s!==0?(e.push(new G(n.sourceSpan,"Unclosed parentheses in expression")),null):t.slice(r,o)}var rp=class extends po{hasPipe=!1;visitPipe(){this.hasPipe=!0}},YE=/^\d+\.?\d*(ms|s)?$/,QE=/^\s$/,xm=new Map([[_n,Et],[gi,Hi],[xn,St]]),Pt=(function(n){return n.IDLE="idle",n.TIMER="timer",n.INTERACTION="interaction",n.IMMEDIATE="immediate",n.HOVER="hover",n.VIEWPORT="viewport",n.NEVER="never",n})(Pt||{});function ZE({expression:n,sourceSpan:e},t,i){let s=n.indexOf("never"),r=new Q(e.start.moveBy(s),e.start.moveBy(s+5)),o=qp(n,e),a=Up(n,e);s===-1?i.push(new G(e,'Could not find "never" keyword in expression')):jp("never",t,i,new du(r,e,o,null,a))}function jc({expression:n,sourceSpan:e},t,i,s){let r=n.indexOf("when"),o=new Q(e.start.moveBy(r),e.start.moveBy(r+4)),a=qp(n,e),l=Up(n,e);if(r===-1)s.push(new G(e,'Could not find "when" keyword in expression'));else{let c=qo(n,r+1),p=t.parseBinding(n.slice(c),!1,e,e.start.offset+c);jp("when",i,s,new Ja(p,e,a,o,l))}}function zc({expression:n,sourceSpan:e},t,i,s){let r=n.indexOf("on"),o=new Q(e.start.moveBy(r),e.start.moveBy(r+2)),a=qp(n,e),l=Up(n,e);if(r===-1)i.push(new G(e,'Could not find "on" keyword in expression'));else{let c=qo(n,r+1);new op(n,c,e,t,i,n.startsWith("hydrate")?rb:sb,s,a,o,l).parse()}}function qp(n,e){return n.startsWith("prefetch")?new Q(e.start,e.start.moveBy(8)):null}function Up(n,e){return n.startsWith("hydrate")?new Q(e.start,e.start.moveBy(7)):null}var op=class{expression;start;span;triggers;errors;validator;placeholder;prefetchSpan;onSourceSpan;hydrateSpan;index=0;tokens;constructor(e,t,i,s,r,o,a,l,c,p){this.expression=e,this.start=t,this.span=i,this.triggers=s,this.errors=r,this.validator=o,this.placeholder=a,this.prefetchSpan=l,this.onSourceSpan=c,this.hydrateSpan=p,this.tokens=new Oo().tokenize(e.slice(t))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){let e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(on))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast(xn)){this.advance();let t=this.errors.length,i=this.consumeParameters();if(this.errors.length!==t)break;this.consumeTrigger(e,i),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1?!0:this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,t){let i=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),s=new Q(i,i.moveBy(e.strValue.length)),r=i.moveBy(this.token().end-e.index),o=e.index===0,a=o?this.onSourceSpan:null,l=o?this.prefetchSpan:null,c=o?this.hydrateSpan:null,p=new Q(o?this.span.start:i,r);try{switch(e.toString()){case Pt.IDLE:this.trackTrigger("idle",JE(t,s,p,l,a,c));break;case Pt.TIMER:this.trackTrigger("timer",KE(t,s,p,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Pt.INTERACTION:this.trackTrigger("interaction",nb(t,s,p,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case Pt.IMMEDIATE:this.trackTrigger("immediate",eb(t,s,p,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Pt.HOVER:this.trackTrigger("hover",tb(t,s,p,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.placeholder,this.validator));break;case Pt.VIEWPORT:this.trackTrigger("viewport",ib(t,s,p,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(d){this.error(e,d.message)}}consumeParameters(){let e=[];if(!this.token().isCharacter(xn))return this.unexpectedToken(this.token()),e;this.advance();let t=[],i="";for(;this.index<this.tokens.length;){let s=this.token();if(s.isCharacter(St)&&t.length===0){i.length&&e.push(i);break}if(s.type===ne.Character&&xm.has(s.numValue)&&t.push(xm.get(s.numValue)),t.length>0&&s.isCharacter(t[t.length-1])&&t.pop(),t.length===0&&s.isCharacter(on)&&i.length>0){e.push(i),i="",this.advance();continue}i+=this.tokenText(),this.advance()}return(!this.token().isCharacter(St)||t.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(on)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenText(){return this.expression.slice(this.start+this.token().index,this.start+this.token().end)}trackTrigger(e,t){jp(e,this.triggers,this.errors,t)}error(e,t){let i=this.span.start.moveBy(this.start+e.index),s=i.moveBy(e.end-e.index);this.errors.push(new G(new Q(i,s),t))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}};function jp(n,e,t,i){e[n]?t.push(new G(i.sourceSpan,`Duplicate "${n}" trigger is not allowed`)):e[n]=i}function JE(n,e,t,i,s,r){if(n.length>0)throw new Error(`"${Pt.IDLE}" trigger cannot have parameters`);return new hu(e,t,i,s,r)}function KE(n,e,t,i,s,r){if(n.length!==1)throw new Error(`"${Pt.TIMER}" trigger must have exactly one parameter`);let o=Ol(n[0]);if(o===null)throw new Error(`Could not parse time value of trigger "${Pt.TIMER}"`);return new fu(o,e,t,i,s,r)}function eb(n,e,t,i,s,r){if(n.length>0)throw new Error(`"${Pt.IMMEDIATE}" trigger cannot have parameters`);return new mu(e,t,i,s,r)}function tb(n,e,t,i,s,r,o,a){return a(Pt.HOVER,n),new Ka(n[0]??null,e,t,i,s,r)}function nb(n,e,t,i,s,r,o){return o(Pt.INTERACTION,n),new el(n[0]??null,e,t,i,s,r)}function ib(n,e,t,i,s,r,o){return o(Pt.VIEWPORT,n),new tl(n[0]??null,e,t,i,s,r)}function sb(n,e){if(e.length>1)throw new Error(`"${n}" trigger can only have zero or one parameters`)}function rb(n,e){if(e.length>0)throw new Error(`Hydration trigger "${n}" cannot have parameters`)}function qo(n,e=0){let t=!1;for(let i=e;i<n.length;i++)if(QE.test(n[i]))t=!0;else if(t)return i;return-1}function Ol(n){let e=n.match(YE);if(!e)return null;let[t,i]=e;return parseFloat(t)*(i==="s"?1e3:1)}var ob=/^prefetch\s+when\s/,ab=/^prefetch\s+on\s/,lb=/^hydrate\s+when\s/,cb=/^hydrate\s+on\s/,ub=/^hydrate\s+never(\s*)$/,s0=/^minimum\s/,pb=/^after\s/,db=/^when\s/,hb=/^on\s/;function ap(n){return n==="placeholder"||n==="loading"||n==="error"}function mb(n,e,t,i){let s=[],{placeholder:r,loading:o,error:a}=fb(e,s,t),{triggers:l,prefetchTriggers:c,hydrateTriggers:p}=xb(n,i,s,r),d=n.endSourceSpan,m=n.sourceSpan.end;if(e.length>0){let A=e[e.length-1];d=A.endSourceSpan,m=A.sourceSpan.end}let _=new Q(n.sourceSpan.start,m);return{node:new is(Te(t,n.children,n.children),l,c,p,r,o,a,n.nameSpan,_,n.sourceSpan,n.startSourceSpan,d,n.i18n),errors:s}}function fb(n,e,t){let i=null,s=null,r=null;for(let o of n)try{if(!ap(o.name)){e.push(new G(o.startSourceSpan,`Unrecognized block "@${o.name}"`));break}switch(o.name){case"placeholder":i!==null?e.push(new G(o.startSourceSpan,"@defer block can only have one @placeholder block")):i=gb(o,t);break;case"loading":s!==null?e.push(new G(o.startSourceSpan,"@defer block can only have one @loading block")):s=vb(o,t);break;case"error":r!==null?e.push(new G(o.startSourceSpan,"@defer block can only have one @error block")):r=_b(o,t);break}}catch(a){e.push(new G(o.startSourceSpan,a.message))}return{placeholder:i,loading:s,error:r}}function gb(n,e){let t=null;for(let i of n.parameters)if(s0.test(i.expression)){if(t!=null)throw new Error('@placeholder block can only have one "minimum" parameter');let s=Ol(i.expression.slice(qo(i.expression)));if(s===null)throw new Error('Could not parse time value of parameter "minimum"');t=s}else throw new Error(`Unrecognized parameter in @placeholder block: "${i.expression}"`);return new ho(Te(e,n.children,n.children),t,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function vb(n,e){let t=null,i=null;for(let s of n.parameters)if(pb.test(s.expression)){if(t!=null)throw new Error('@loading block can only have one "after" parameter');let r=Ol(s.expression.slice(qo(s.expression)));if(r===null)throw new Error('Could not parse time value of parameter "after"');t=r}else if(s0.test(s.expression)){if(i!=null)throw new Error('@loading block can only have one "minimum" parameter');let r=Ol(s.expression.slice(qo(s.expression)));if(r===null)throw new Error('Could not parse time value of parameter "minimum"');i=r}else throw new Error(`Unrecognized parameter in @loading block: "${s.expression}"`);return new mo(Te(e,n.children,n.children),t,i,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function _b(n,e){if(n.parameters.length>0)throw new Error("@error block cannot have parameters");return new fo(Te(e,n.children,n.children),n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function xb(n,e,t,i){let s={},r={},o={};for(let a of n.parameters)db.test(a.expression)?jc(a,e,s,t):hb.test(a.expression)?zc(a,s,t,i):ob.test(a.expression)?jc(a,e,r,t):ab.test(a.expression)?zc(a,r,t,i):lb.test(a.expression)?jc(a,e,o,t):cb.test(a.expression)?zc(a,o,t,i):ub.test(a.expression)?ZE(a,o,t):t.push(new G(a.sourceSpan,"Unrecognized trigger"));return o.never&&Object.keys(o).length>1&&t.push(new G(n.startSourceSpan,"Cannot specify additional `hydrate` triggers if `hydrate never` is present")),{triggers:s,prefetchTriggers:r,hydrateTriggers:o}}var Cb=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,Cm=1,Sm=2,Em=3,bm=4,wm=5,Sb=6,Br=7,li={BANANA_BOX:{start:"[(",end:")]"},PROPERTY:{start:"[",end:"]"},EVENT:{start:"(",end:")"}},Wc="*",Eb=new Set(["link","style","script","ng-template","ng-container","ng-content"]),bb=new Set(["ngProjectAs","ngNonBindable"]);function wb(n,e,t){let i=new lp(e,t),s=Te(i,n,n),r=e.errors.concat(i.errors),o={nodes:s,errors:r,styleUrls:i.styleUrls,styles:i.styles,ngContentSelectors:i.ngContentSelectors};return t.collectCommentNodes&&(o.commentNodes=i.commentNodes),o}var lp=class{bindingParser;options;errors=[];styles=[];styleUrls=[];ngContentSelectors=[];commentNodes=[];inI18nBlock=!1;processedNodes=new Set;constructor(e,t){this.bindingParser=e,this.options=t}visitElement(e){let t=Da(e.i18n);t&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);let i=i0(e);if(i.type===Ut.SCRIPT)return null;if(i.type===Ut.STYLE){let D=yb(e);return D!==null&&this.styles.push(D),null}else if(i.type===Ut.STYLESHEET&&bE(i.hrefAttr))return this.styleUrls.push(i.hrefAttr),null;let s=qg(e.name),{attributes:r,boundEvents:o,references:a,variables:l,templateVariables:c,elementHasInlineTemplate:p,parsedProperties:d,templateParsedProperties:m,i18nAttrsMeta:_}=this.prepareAttributes(e.attrs,s),b=this.extractDirectives(e),A;i.nonBindable?A=Te(ym,e.children).flat(1/0):A=Te(this,e.children,e.children);let L;if(i.type===Ut.NG_CONTENT){let D=i.selectAttr,F=e.attrs.map(W=>this.visitAttribute(W));L=new Xs(D,F,A,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n),this.ngContentSelectors.push(D)}else if(s){let D=this.categorizePropertyAttributes(e.name,d,_);L=new Wt(e.name,r,D.bound,o,b,[],A,a,l,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{let D=this.categorizePropertyAttributes(e.name,d,_);if(e.name==="ng-container")for(let F of D.bound)F.type===he.Attribute&&this.reportError("Attribute bindings are not supported on ng-container. Use property bindings instead.",F.sourceSpan);L=new $n(e.name,r,D.bound,o,b,A,a,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n)}return p&&(L=this.wrapInTemplate(L,m,c,_,s,t)),t&&(this.inI18nBlock=!1),L}visitAttribute(e){return new Ws(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this.processedNodes.has(e)?null:this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!Da(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);let t=e.i18n,i={},s={};return Object.keys(t.placeholders).forEach(r=>{let o=t.placeholders[r];if(r.startsWith(Wg)){let a=r.trim(),l=this.bindingParser.parseInterpolationExpression(o.text,o.sourceSpan);i[a]=new zs(l,o.sourceSpan)}else s[r]=this._visitTextWithInterpolation(o.text,o.sourceSpan,null)}),new Um(i,s,e.sourceSpan,t)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new jl(e.value||"",e.sourceSpan)),null}visitLetDeclaration(e,t){let i=this.bindingParser.parseBinding(e.value,!1,e.valueSpan,e.valueSpan.start.offset);return i.errors.length===0&&i.ast instanceof At&&this.reportError("@let declaration value cannot be empty",e.valueSpan),new yp(e.name,i,e.sourceSpan,e.nameSpan,e.valueSpan)}visitComponent(e){let t=Da(e.i18n);if(t&&(this.inI18nBlock&&this.reportError("Cannot mark a component as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0),e.tagName!==null&&Eb.has(e.tagName))return this.reportError(`Tag name "${e.tagName}" cannot be used as a component tag`,e.startSourceSpan),null;let{attributes:i,boundEvents:s,references:r,templateVariables:o,elementHasInlineTemplate:a,parsedProperties:l,templateParsedProperties:c,i18nAttrsMeta:p}=this.prepareAttributes(e.attrs,!1);this.validateSelectorlessReferences(r);let d=this.extractDirectives(e),m;e.attrs.find(A=>A.name==="ngNonBindable")?m=Te(ym,e.children).flat(1/0):m=Te(this,e.children,e.children);let _=this.categorizePropertyAttributes(e.tagName,l,p),b=new Ur(e.componentName,e.tagName,e.fullName,i,_.bound,s,d,m,r,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return a&&(b=this.wrapInTemplate(b,c,o,p,!1,t)),t&&(this.inI18nBlock=!1),b}visitDirective(){return null}visitBlockParameter(){return null}visitBlock(e,t){let i=Array.isArray(t)?t.indexOf(e):-1;if(i===-1)throw new Error("Visitor invoked incorrectly. Expecting visitBlock to be invoked siblings array as its context");if(this.processedNodes.has(e))return null;let s=null;switch(e.name){case"defer":s=mb(e,this.findConnectedBlocks(i,t,ap),this,this.bindingParser);break;case"switch":s=qE(e,this,this.bindingParser);break;case"for":s=HE(e,this.findConnectedBlocks(i,t,gm),this,this.bindingParser);break;case"if":s=VE(e,this.findConnectedBlocks(i,t,vm),this,this.bindingParser);break;default:let r;ap(e.name)?(r=`@${e.name} block can only be used after an @defer block.`,this.processedNodes.add(e)):gm(e.name)?(r=`@${e.name} block can only be used after an @for block.`,this.processedNodes.add(e)):vm(e.name)?(r=`@${e.name} block can only be used after an @if or @else if block.`,this.processedNodes.add(e)):r=`Unrecognized block @${e.name}.`,s={node:new sl(e.name,e.sourceSpan,e.nameSpan),errors:[new G(e.sourceSpan,r)]};break}return this.errors.push(...s.errors),s.node}findConnectedBlocks(e,t,i){let s=[];for(let r=e+1;r<t.length;r++){let o=t[r];if(!(o instanceof Bo)){if(o instanceof cs&&o.value.trim().length===0){this.processedNodes.add(o);continue}if(!(o instanceof tn)||!i(o.name))break;s.push(o),this.processedNodes.add(o)}}return s}categorizePropertyAttributes(e,t,i){let s=[],r=[];return t.forEach(o=>{let a=i[o.name];if(o.isLiteral)r.push(new Ws(o.name,o.expression.source||"",o.sourceSpan,o.keySpan,o.valueSpan,a));else{let l=this.bindingParser.createBoundElementProperty(e,o,!0,!1);s.push(uu.fromBoundElementProperty(l,a))}}),{bound:s,literal:r}}prepareAttributes(e,t){let i=[],s=[],r=[],o=[],a=[],l={},c=[],p=[],d=!1;for(let m of e){let _=!1,b=km(m.name),A=!1;if(m.i18n&&(l[m.name]=m.i18n),b.startsWith(Wc)){d&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",m.sourceSpan),A=!0,d=!0;let L=m.value,D=b.substring(Wc.length),F=[],W=m.valueSpan?m.valueSpan.fullStart.offset:m.sourceSpan.fullStart.offset+m.name.length;this.bindingParser.parseInlineTemplateBinding(D,L,m.sourceSpan,W,[],c,F,!0),p.push(...F.map(q=>new _i(q.name,q.value,q.sourceSpan,q.keySpan,q.valueSpan)))}else _=this.parseAttribute(t,m,[],i,s,r,o);!_&&!A&&a.push(this.visitAttribute(m))}return{attributes:a,boundEvents:s,references:o,variables:r,templateVariables:p,elementHasInlineTemplate:d,parsedProperties:i,templateParsedProperties:c,i18nAttrsMeta:l}}parseAttribute(e,t,i,s,r,o,a){let l=km(t.name),c=t.value,p=t.sourceSpan,d=t.valueSpan?t.valueSpan.fullStart.offset:p.fullStart.offset;function m(D,F,W){let q=t.name.length-l.length,ie=D.start.moveBy(F.length+q),de=ie.moveBy(W.length);return new Q(ie,de,ie,W)}let _=l.match(Cb);if(_){if(_[Cm]!=null){let D=_[Br],F=m(p,_[Cm],D);this.bindingParser.parsePropertyBinding(D,c,!1,!1,p,d,t.valueSpan,i,s,F)}else if(_[Sm])if(e){let D=_[Br],F=m(p,_[Sm],D);this.parseVariable(D,c,p,F,t.valueSpan,o)}else this.reportError('"let-" is only supported on ng-template elements.',p);else if(_[Em]){let D=_[Br],F=m(p,_[Em],D);this.parseReference(D,c,p,F,t.valueSpan,a)}else if(_[bm]){let D=[],F=_[Br],W=m(p,_[bm],F);this.bindingParser.parseEvent(F,c,!1,p,t.valueSpan||p,i,D,W),Gc(D,r)}else if(_[wm]){let D=_[Br],F=m(p,_[wm],D);this.bindingParser.parsePropertyBinding(D,c,!1,!0,p,d,t.valueSpan,i,s,F),this.parseAssignmentEvent(D,c,p,t.valueSpan,i,r,F,d)}else if(_[Sb]){let D=m(p,"",l);this.bindingParser.parseLiteralAttr(l,c,p,d,t.valueSpan,i,s,D)}return!0}let b=null;if(l.startsWith(li.BANANA_BOX.start)?b=li.BANANA_BOX:l.startsWith(li.PROPERTY.start)?b=li.PROPERTY:l.startsWith(li.EVENT.start)&&(b=li.EVENT),b!==null&&l.endsWith(b.end)&&l.length>b.start.length+b.end.length){let D=l.substring(b.start.length,l.length-b.end.length),F=m(p,b.start,D);if(b.start===li.BANANA_BOX.start)this.bindingParser.parsePropertyBinding(D,c,!1,!0,p,d,t.valueSpan,i,s,F),this.parseAssignmentEvent(D,c,p,t.valueSpan,i,r,F,d);else if(b.start===li.PROPERTY.start)this.bindingParser.parsePropertyBinding(D,c,!1,!1,p,d,t.valueSpan,i,s,F);else{let W=[];this.bindingParser.parseEvent(D,c,!1,p,t.valueSpan||p,i,W,F),Gc(W,r)}return!0}let A=m(p,"",l);return this.bindingParser.parsePropertyInterpolation(l,c,p,t.valueSpan,i,s,A,t.valueTokens??null)}extractDirectives(e){let t=e instanceof It?e.tagName:e.name,i=[],s=new Set;for(let r of e.directives){let o=!1;for(let _ of r.attrs)_.name.startsWith(Wc)?(o=!0,this.reportError(`Shorthand template syntax "${_.name}" is not supported inside a directive context`,_.sourceSpan)):bb.has(_.name)&&(o=!0,this.reportError(`Attribute "${_.name}" is not supported in a directive context`,_.sourceSpan));if(!o&&s.has(r.name)&&(o=!0,this.reportError(`Cannot apply directive "${r.name}" multiple times on the same element`,r.sourceSpan)),o)continue;let{attributes:a,parsedProperties:l,boundEvents:c,references:p,i18nAttrsMeta:d}=this.prepareAttributes(r.attrs,!1);this.validateSelectorlessReferences(p);let{bound:m}=this.categorizePropertyAttributes(t,l,d);for(let _ of m)_.type!==he.Property&&_.type!==he.TwoWay&&(o=!0,this.reportError("Binding is not supported in a directive context",_.sourceSpan));o||(s.add(r.name),i.push(new qm(r.name,a,m,c,p,r.sourceSpan,r.startSourceSpan,r.endSourceSpan,void 0)))}return i}filterAnimationAttributes(e){return e.filter(t=>!t.name.startsWith("animate."))}filterAnimationInputs(e){return e.filter(t=>t.type!==he.Animation)}wrapInTemplate(e,t,i,s,r,o){let a=this.categorizePropertyAttributes("ng-template",t,s),l=[];a.literal.forEach(m=>l.push(m)),a.bound.forEach(m=>l.push(m));let c={attributes:[],inputs:[],outputs:[]};(e instanceof $n||e instanceof Ur)&&(c.attributes.push(...this.filterAnimationAttributes(e.attributes)),c.inputs.push(...this.filterAnimationInputs(e.inputs)),c.outputs.push(...e.outputs));let p=r&&o?void 0:e.i18n,d;return e instanceof Ur?d=e.tagName:e instanceof Wt?d=null:d=e.name,new Wt(d,c.attributes,c.inputs,c.outputs,[],l,[e],[],i,!1,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,p)}_visitTextWithInterpolation(e,t,i,s){let r=Mf(e),o=this.bindingParser.parseInterpolation(r,t,i);return o?new zs(o,t,s):new Vi(r,t)}parseVariable(e,t,i,s,r,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',i):e.length===0&&this.reportError("Variable does not have a name",i),o.push(new _i(e,t,i,s,r))}parseReference(e,t,i,s,r,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',i):e.length===0?this.reportError("Reference does not have a name",i):o.some(a=>a.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,i),o.push(new _o(e,t,i,s,r))}parseAssignmentEvent(e,t,i,s,r,o,a,l){let c=[];this.bindingParser.parseEvent(`${e}Change`,t,!0,i,s||i,r,c,a),Gc(c,o)}validateSelectorlessReferences(e){if(e.length===0)return;let t=new Set;for(let i of e)i.value.length>0?this.reportError("Cannot specify a value for a local reference in this context",i.valueSpan||i.sourceSpan):t.has(i.name)?this.reportError("Duplicate reference names are not allowed",i.sourceSpan):t.add(i.name)}reportError(e,t,i=hi.ERROR){this.errors.push(new G(t,e,i))}},cp=class{visitElement(e){let t=i0(e);if(t.type===Ut.SCRIPT||t.type===Ut.STYLE||t.type===Ut.STYLESHEET)return null;let i=Te(this,e.children,null);return new $n(e.name,Te(this,e.attrs),[],[],[],i,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid)}visitComment(e){return null}visitAttribute(e){return new Ws(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new Vi(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlock(e,t){let i=[new Vi(e.startSourceSpan.toString(),e.startSourceSpan),...Te(this,e.children)];return e.endSourceSpan!==null&&i.push(new Vi(e.endSourceSpan.toString(),e.endSourceSpan)),i}visitBlockParameter(e,t){return null}visitLetDeclaration(e,t){return new Vi(`@let ${e.name} = ${e.value};`,e.sourceSpan)}visitComponent(e,t){let i=Te(this,e.children,null);return new $n(e.fullName,Te(this,e.attrs),[],[],[],i,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,!1)}visitDirective(e,t){return null}},ym=new cp;function km(n){return/^data-/i.test(n)?n.substring(5):n}function Gc(n,e){e.push(...n.map(t=>pu.fromParsedEvent(t)))}function yb(n){return n.children.length!==1||!(n.children[0]instanceof cs)?null:n.children[0].value}var kb=[" ",`
`,"\r","	"];function Tb(n,e,t={}){let{interpolationConfig:i,preserveWhitespaces:s,enableI18nLegacyMessageIdFormat:r}=t,o=t.enableSelectorless??!1,a=$l(i,o),c=new tp().parse(n,e,De(k({leadingTriviaChars:kb},t),{tokenizeExpansionForms:!0,tokenizeBlocks:t.enableBlockSyntax??!0,tokenizeLet:t.enableLetSyntax??!0,selectorlessEnabled:o}));if(!t.alwaysAttemptHtmlToR3AstConversion&&c.errors&&c.errors.length>0){let ie={interpolationConfig:i,preserveWhitespaces:s,errors:c.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(ie.commentNodes=[]),ie}let p=c.rootNodes,d=!(t.preserveSignificantWhitespace??!0),m=new Il(i,!s,r,void 0,t.preserveSignificantWhitespace,d),_=m.visitAllWithErrors(p);if(!t.alwaysAttemptHtmlToR3AstConversion&&_.errors&&_.errors.length>0){let ie={interpolationConfig:i,preserveWhitespaces:s,errors:_.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(ie.commentNodes=[]),ie}p=_.rootNodes,s||(p=Te(new Al(!0,void 0,!1),p),m.hasI18nMeta&&(p=Te(new Il(i,!1,void 0,void 0,!0,d),p)));let{nodes:b,errors:A,styleUrls:L,styles:D,ngContentSelectors:F,commentNodes:W}=wb(p,a,{collectCommentNodes:!!t.collectCommentNodes});A.push(...c.errors,..._.errors);let q={interpolationConfig:i,preserveWhitespaces:s,errors:A.length>0?A:null,nodes:b,styleUrls:L,styles:D,ngContentSelectors:F};return t.collectCommentNodes&&(q.commentNodes=W),q}var Ab=new ir;function $l(n=Ln,e=!1){return new np(new Dl(new Oo,e),n,Ab,[])}var r0="%COMP%",Db=`_nghost-${r0}`,Ib=`_ngcontent-${r0}`;function o0(n,e,t){let i=new Si,s=Cp(n.selector);return i.set("type",n.type.value),s.length>0&&i.set("selectors",Is(s)),n.queries.length>0&&i.set("contentQueries",_E(n.queries,e,n.name)),n.viewQueries.length&&i.set("viewQuery",vE(n.viewQueries,e,n.name)),i.set("hostBindings",Ob(n.host,n.typeSourceSpan,t,e,n.selector||"",n.name,i)),i.set("inputs",oh(n.inputs,!0)),i.set("outputs",oh(n.outputs)),n.exportAs!==null&&i.set("exportAs",_e(n.exportAs.map(r=>E(r)))),n.isStandalone===!1&&i.set("standalone",E(!1)),n.isSignal&&i.set("signals",E(!0)),i}function a0(n,e){let t=[],i=e.providers,s=e.viewProviders;if(i||s){let r=[i||new Sn([])];s&&r.push(s),t.push(U(f.ProvidersFeature).callFn(r))}if(e.hostDirectives?.length&&t.push(U(f.HostDirectivesFeature).callFn([Ub(e.hostDirectives)])),e.usesInheritance&&t.push(U(f.InheritDefinitionFeature)),e.fullInheritance&&t.push(U(f.CopyDefinitionFeature)),e.lifecycle.usesOnChanges&&t.push(U(f.NgOnChangesFeature)),"externalStyles"in e&&e.externalStyles?.length){let r=e.externalStyles.map(o=>E(o));t.push(U(f.ExternalStylesFeature).callFn([_e(r)]))}t.length&&n.set("features",_e(t))}function Pb(n,e,t){let i=o0(n,e,t);a0(i,n);let s=U(f.defineDirective).callFn([i.toLiteralMap()],void 0,!0),r=Rb(n);return{expression:s,type:r,statements:[]}}function Nb(n,e,t){let i=o0(n,e,t);a0(i,n);let s=n.selector&&$s.parse(n.selector),r=s&&s[0];if(r){let b=r.getAttrs();b.length&&i.set("attrs",e.getConstLiteral(_e(b.map(A=>A!=null?E(A):E(void 0))),!0))}let o=n.name,a=null;if(n.defer.mode===1&&n.defer.dependenciesFn!==null){let b=`${o}_DeferFn`;e.statements.push(new Ze(b,n.defer.dependenciesFn,void 0,ot.Final)),a=oe(b)}let l=n.isStandalone&&!n.hasDirectiveDependencies?Dt.DomOnly:Dt.Full,c=GS(n.name,n.template.nodes,e,l,n.relativeContextFilePath,n.i18nUseExternalIds,n.defer,a,n.relativeTemplatePath,mE());Wf(c,B.Tmpl);let p=US(c,e);if(c.contentSelectors!==null&&i.set("ngContentSelectors",c.contentSelectors),i.set("decls",E(c.root.decls)),i.set("vars",E(c.root.vars)),c.consts.length>0&&(c.constsInitializers.length>0?i.set("consts",En([],[...c.constsInitializers,new at(_e(c.consts))])):i.set("consts",_e(c.consts))),i.set("template",p),n.declarationListEmitMode!==3&&n.declarations.length>0)i.set("dependencies",Mb(_e(n.declarations.map(b=>b.type)),n.declarationListEmitMode));else if(n.declarationListEmitMode===3){let b=[n.type.value];n.rawImports&&b.push(n.rawImports),i.set("dependencies",U(f.getComponentDepsFactory).callFn(b))}n.encapsulation===null&&(n.encapsulation=Mi.Emulated);let d=!!n.externalStyles?.length;if(n.styles&&n.styles.length){let A=(n.encapsulation==Mi.Emulated?qb(n.styles,Ib,Db):n.styles).reduce((L,D)=>(D.trim().length>0&&L.push(e.getConstLiteral(E(D))),L),[]);A.length>0&&(d=!0,i.set("styles",_e(A)))}!d&&n.encapsulation===Mi.Emulated&&(n.encapsulation=Mi.None),n.encapsulation!==Mi.Emulated&&i.set("encapsulation",E(n.encapsulation)),n.animations!==null&&i.set("data",yt([{key:"animation",value:n.animations,quoted:!1}])),n.changeDetection!==null&&(typeof n.changeDetection=="number"&&n.changeDetection!==xp.Default?i.set("changeDetection",E(n.changeDetection)):typeof n.changeDetection=="object"&&i.set("changeDetection",n.changeDetection));let m=U(f.defineComponent).callFn([i.toLiteralMap()],void 0,!0),_=Lb(n);return{expression:m,type:_,statements:[]}}function Lb(n){let e=l0(n);return e.push(pp(n.template.ngContentSelectors)),e.push(lt(E(n.isStandalone))),e.push(c0(n)),n.isSignal&&e.push(lt(E(n.isSignal))),lt(U(f.ComponentDeclaration,e))}function Mb(n,e){switch(e){case 0:return n;case 1:return En([],n);case 2:let t=n.prop("map").callFn([U(f.resolveForwardRef)]);return En([],t);case 3:throw new Error("Unsupported with an array of pre-resolved dependencies")}}function Bb(n){return lt(E(n))}function up(n){let e=Object.keys(n).map(t=>{let i=Array.isArray(n[t])?n[t][0]:n[t];return{key:t,value:E(i),quoted:!0}});return yt(e)}function pp(n){return n.length>0?lt(_e(n.map(e=>E(e)))):Bn}function l0(n){let e=n.selector!==null?n.selector.replace(/\n/g,""):null;return[Ul(n.type.type,n.typeArgumentCount),e!==null?Bb(e):Bn,n.exportAs!==null?pp(n.exportAs):Bn,lt(Fb(n)),lt(up(n.outputs)),pp(n.queries.map(t=>t.propertyName))]}function Fb(n){return yt(Object.keys(n.inputs).map(e=>{let t=n.inputs[e],i=[{key:"alias",value:E(t.bindingPropertyName),quoted:!0},{key:"required",value:E(t.required),quoted:!0}];return t.isSignal&&i.push({key:"isSignal",value:E(t.isSignal),quoted:!0}),{key:e,value:yt(i),quoted:!0}}))}function Rb(n){let e=l0(n);return e.push(Bn),e.push(lt(E(n.isStandalone))),e.push(c0(n)),n.isSignal&&e.push(lt(E(n.isSignal))),lt(U(f.DirectiveDeclaration,e))}function Ob(n,e,t,i,s,r,o){let a=t.createBoundHostProperties(n.properties,e),l=t.createDirectiveHostEventAsts(n.listeners,e);n.specialAttributes.styleAttr&&(n.attributes.style=E(n.specialAttributes.styleAttr)),n.specialAttributes.classAttr&&(n.attributes.class=E(n.specialAttributes.classAttr));let c=XS({componentName:r,componentSelector:s,properties:a,events:l,attributes:n.attributes},t,i);Wf(c,B.Host),o.set("hostAttrs",c.root.attributes);let p=c.root.vars;return p!==null&&p>0&&o.set("hostVars",E(p)),jS(c)}var $b=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function Vb(n){let e={},t={},i={},s={};for(let r of Object.keys(n)){let o=n[r],a=r.match($b);if(a===null)switch(r){case"class":if(typeof o!="string")throw new Error("Class binding must be string");s.classAttr=o;break;case"style":if(typeof o!="string")throw new Error("Style binding must be string");s.styleAttr=o;break;default:typeof o=="string"?e[r]=E(o):e[r]=o}else if(a[1]!=null){if(typeof o!="string")throw new Error("Property binding must be string");i[a[1]]=o}else if(a[2]!=null){if(typeof o!="string")throw new Error("Event binding must be string");t[a[2]]=o}}return{attributes:e,listeners:t,properties:i,specialAttributes:s}}function Hb(n,e){let t=$l();return t.createDirectiveHostEventAsts(n.listeners,e),t.createBoundHostProperties(n.properties,e),t.errors}function qb(n,e,t){let i=new wu;return n.map(s=>i.shimCssText(s,e,t))}function c0(n){return n.hostDirectives?.length?lt(_e(n.hostDirectives.map(e=>yt([{key:"directive",value:jo(e.directive.type),quoted:!1},{key:"inputs",value:up(e.inputs||{}),quoted:!1},{key:"outputs",value:up(e.outputs||{}),quoted:!1}])))):Bn}function Ub(n){let e=[],t=!1;for(let i of n){if(!i.inputs&&!i.outputs)e.push(i.directive.type);else{let s=[{key:"directive",value:i.directive.type,quoted:!1}];if(i.inputs){let r=Tm(i.inputs);r&&s.push({key:"inputs",value:r,quoted:!1})}if(i.outputs){let r=Tm(i.outputs);r&&s.push({key:"outputs",value:r,quoted:!1})}e.push(yt(s))}i.isForwardReference&&(t=!0)}return t?new fi([],[new at(_e(e))]):_e(e)}function Tm(n){let e=[];for(let t in n)n.hasOwnProperty(t)&&e.push(E(t),E(n[t]));return e.length>0?_e(e):null}var dp=class extends po{visit(e){e instanceof Ht?this.visit(e.ast):e.visit(this)}visitElement(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitTemplate(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.templateAttrs),this.visitAllTemplateNodes(e.variables),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitContent(e){this.visitAllTemplateNodes(e.children)}visitBoundAttribute(e){this.visit(e.value)}visitBoundEvent(e){this.visit(e.handler)}visitBoundText(e){this.visit(e.value)}visitIcu(e){Object.keys(e.vars).forEach(t=>this.visit(e.vars[t])),Object.keys(e.placeholders).forEach(t=>this.visit(e.placeholders[t]))}visitDeferredBlock(e){e.visitAll(this)}visitDeferredTrigger(e){e instanceof Ja&&this.visit(e.value)}visitDeferredBlockPlaceholder(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockError(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockLoading(e){this.visitAllTemplateNodes(e.children)}visitSwitchBlock(e){this.visit(e.expression),this.visitAllTemplateNodes(e.cases)}visitSwitchBlockCase(e){e.expression&&this.visit(e.expression),this.visitAllTemplateNodes(e.children)}visitForLoopBlock(e){e.item.visit(this),this.visitAllTemplateNodes(e.contextVariables),this.visit(e.expression),this.visitAllTemplateNodes(e.children),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.visitAllTemplateNodes(e.children)}visitIfBlock(e){this.visitAllTemplateNodes(e.branches)}visitIfBlockBranch(e){e.expression&&this.visit(e.expression),e.expressionAlias?.visit(this),this.visitAllTemplateNodes(e.children)}visitLetDeclaration(e){this.visit(e.value)}visitComponent(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitDirective(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.references)}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitText(e){}visitUnknownBlock(e){}visitAllTemplateNodes(e){for(let t of e)this.visit(t)}};var hp=class{directiveMatcher;constructor(e){this.directiveMatcher=e}bind(e){if(!e.template&&!e.host)throw new Error("Empty bound targets are not supported");let t=new Map,i=[],s=new Set,r=new Map,o=new Map,a=new Map,l=new Map,c=new Map,p=new Map,d=new Set,m=new Set,_=[];if(e.template){let b=Vl.apply(e.template);jb(b,a),mp.apply(e.template,this.directiveMatcher,t,i,s,r,o),Hl.applyWithScope(e.template,b,l,c,p,d,m,_)}return e.host&&(t.set(e.host.node,e.host.directives),Hl.applyWithScope(e.host.node,Vl.apply(e.host.node),l,c,p,d,m,_)),new fp(e,t,i,s,r,o,l,c,p,a,d,m,_)}},Vl=class n{parentScope;rootNode;namedEntities=new Map;elementLikeInScope=new Set;childScopes=new Map;isDeferred;constructor(e,t){this.parentScope=e,this.rootNode=t,this.isDeferred=e!==null&&e.isDeferred?!0:t instanceof is}static newRootScope(){return new n(null,null)}static apply(e){let t=n.newRootScope();return t.ingest(e),t}ingest(e){e instanceof Wt?(e.variables.forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof ji?(e.expressionAlias!==null&&this.visitVariable(e.expressionAlias),e.children.forEach(t=>t.visit(this))):e instanceof Gs?(this.visitVariable(e.item),e.contextVariables.forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof go||e instanceof vo||e instanceof is||e instanceof fo||e instanceof ho||e instanceof mo||e instanceof Xs?e.children.forEach(t=>t.visit(this)):e instanceof xo||e.forEach(t=>t.visit(this))}visitElement(e){this.visitElementLike(e)}visitTemplate(e){e.directives.forEach(t=>t.visit(this)),e.references.forEach(t=>this.visitReference(t)),this.ingestScopedNode(e)}visitVariable(e){this.maybeDeclare(e)}visitReference(e){this.maybeDeclare(e)}visitDeferredBlock(e){this.ingestScopedNode(e),e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){this.ingestScopedNode(e)}visitForLoopBlock(e){this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){this.maybeDeclare(e)}visitComponent(e){this.visitElementLike(e)}visitDirective(e){e.references.forEach(t=>this.visitReference(t))}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundText(e){}visitText(e){}visitTextAttribute(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitElementLike(e){e.directives.forEach(t=>t.visit(this)),e.references.forEach(t=>this.visitReference(t)),e.children.forEach(t=>t.visit(this)),this.elementLikeInScope.add(e)}maybeDeclare(e){this.namedEntities.has(e.name)||this.namedEntities.set(e.name,e)}lookup(e){return this.namedEntities.has(e)?this.namedEntities.get(e):this.parentScope!==null?this.parentScope.lookup(e):null}getChildScope(e){let t=this.childScopes.get(e);if(t===void 0)throw new Error(`Assertion error: child scope for ${e} not found`);return t}ingestScopedNode(e){let t=new n(this,e);t.ingest(e),this.childScopes.set(e,t)}},mp=class n{directiveMatcher;directives;eagerDirectives;missingDirectives;bindings;references;isInDeferBlock=!1;constructor(e,t,i,s,r,o){this.directiveMatcher=e,this.directives=t,this.eagerDirectives=i,this.missingDirectives=s,this.bindings=r,this.references=o}static apply(e,t,i,s,r,o,a){new n(t,i,s,r,o,a).ingest(e)}ingest(e){e.forEach(t=>t.visit(this))}visitElement(e){this.visitElementOrTemplate(e)}visitTemplate(e){this.visitElementOrTemplate(e)}visitDeferredBlock(e){let t=this.isInDeferBlock;this.isInDeferBlock=!0,e.children.forEach(i=>i.visit(this)),this.isInDeferBlock=t,e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockError(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockLoading(e){e.children.forEach(t=>t.visit(this))}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){e.children.forEach(t=>t.visit(this))}visitForLoopBlock(e){e.item.visit(this),e.contextVariables.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this)),e.empty?.visit(this)}visitForLoopBlockEmpty(e){e.children.forEach(t=>t.visit(this))}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){e.expressionAlias?.visit(this),e.children.forEach(t=>t.visit(this))}visitContent(e){e.children.forEach(t=>t.visit(this))}visitComponent(e){if(this.directiveMatcher instanceof Pa){let t=this.directiveMatcher.match(e.componentName);t.length>0?this.trackSelectorlessMatchesAndDirectives(e,t):this.missingDirectives.add(e.componentName)}e.directives.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this))}visitDirective(e){if(this.directiveMatcher instanceof Pa){let t=this.directiveMatcher.match(e.name);t.length>0?this.trackSelectorlessMatchesAndDirectives(e,t):this.missingDirectives.add(e.name)}}visitElementOrTemplate(e){if(this.directiveMatcher instanceof Ia){let t=[],i=Yg(e);this.directiveMatcher.match(i,(s,r)=>t.push(...r)),this.trackSelectorBasedBindingsAndDirectives(e,t)}else e.references.forEach(t=>{t.value.trim()===""&&this.references.set(t,e)});e.directives.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this))}trackMatchedDirectives(e,t){t.length>0&&(this.directives.set(e,t),this.isInDeferBlock||this.eagerDirectives.push(...t))}trackSelectorlessMatchesAndDirectives(e,t){if(t.length===0)return;this.trackMatchedDirectives(e,t);let i=(s,r,o)=>{s[o].hasBindingPropertyName(r.name)&&this.bindings.set(r,s)};for(let s of t)e.inputs.forEach(r=>i(s,r,"inputs")),e.attributes.forEach(r=>i(s,r,"inputs")),e.outputs.forEach(r=>i(s,r,"outputs"));e.references.forEach(s=>this.references.set(s,{directive:t[0],node:e}))}trackSelectorBasedBindingsAndDirectives(e,t){this.trackMatchedDirectives(e,t),e.references.forEach(s=>{let r=null;if(s.value.trim()==="")r=t.find(o=>o.isComponent)||null;else if(r=t.find(o=>o.exportAs!==null&&o.exportAs.some(a=>a===s.value))||null,r===null)return;r!==null?this.references.set(s,{directive:r,node:e}):this.references.set(s,e)});let i=(s,r)=>{let o=t.find(l=>l[r].hasBindingPropertyName(s.name)),a=o!==void 0?o:e;this.bindings.set(s,a)};e.inputs.forEach(s=>i(s,"inputs")),e.attributes.forEach(s=>i(s,"inputs")),e instanceof Wt&&e.templateAttrs.forEach(s=>i(s,"inputs")),e.outputs.forEach(s=>i(s,"outputs"))}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundAttributeOrEvent(e){}visitText(e){}visitBoundText(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitLetDeclaration(e){}},Hl=class n extends dp{bindings;symbols;usedPipes;eagerPipes;deferBlocks;nestingLevel;scope;rootNode;level;visitNode=e=>e.visit(this);constructor(e,t,i,s,r,o,a,l,c){super(),this.bindings=e,this.symbols=t,this.usedPipes=i,this.eagerPipes=s,this.deferBlocks=r,this.nestingLevel=o,this.scope=a,this.rootNode=l,this.level=c}static applyWithScope(e,t,i,s,r,o,a,l){let c=e instanceof Wt?e:null;new n(i,s,o,a,l,r,t,c,0).ingest(e)}ingest(e){if(e instanceof Wt)e.variables.forEach(this.visitNode),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof ji)e.expressionAlias!==null&&this.visitNode(e.expressionAlias),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Gs)this.visitNode(e.item),e.contextVariables.forEach(t=>this.visitNode(t)),e.trackBy.visit(this),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof is){if(this.scope.rootNode!==e)throw new Error(`Assertion error: resolved incorrect scope for deferred block ${e}`);this.deferBlocks.push([e,this.scope]),e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)}else e instanceof go||e instanceof vo||e instanceof fo||e instanceof ho||e instanceof mo||e instanceof Xs?(e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)):e instanceof xo?this.nestingLevel.set(e,0):e.forEach(this.visitNode)}visitTemplate(e){e.inputs.forEach(this.visitNode),e.outputs.forEach(this.visitNode),e.directives.forEach(this.visitNode),e.templateAttrs.forEach(this.visitNode),e.references.forEach(this.visitNode),this.ingestScopedNode(e)}visitVariable(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitReference(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitDeferredBlock(e){this.ingestScopedNode(e),e.triggers.when?.value.visit(this),e.prefetchTriggers.when?.value.visit(this),e.hydrateTriggers.when?.value.visit(this),e.hydrateTriggers.never?.visit(this),e.placeholder&&this.visitNode(e.placeholder),e.loading&&this.visitNode(e.loading),e.error&&this.visitNode(e.error)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlockCase(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitForLoopBlock(e){e.expression.visit(this),this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlockBranch(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){super.visitLetDeclaration(e),this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitPipe(e,t){return this.usedPipes.add(e.name),this.scope.isDeferred||this.eagerPipes.add(e.name),super.visitPipe(e,t)}visitPropertyRead(e,t){return this.maybeMap(e,e.name),super.visitPropertyRead(e,t)}visitSafePropertyRead(e,t){return this.maybeMap(e,e.name),super.visitSafePropertyRead(e,t)}ingestScopedNode(e){let t=this.scope.getChildScope(e);new n(this.bindings,this.symbols,this.usedPipes,this.eagerPipes,this.deferBlocks,this.nestingLevel,t,e,this.level+1).ingest(e)}maybeMap(e,t){if(!(e.receiver instanceof On)||e.receiver instanceof ts)return;let i=this.scope.lookup(t);i!==null&&this.bindings.set(e,i)}},fp=class{target;directives;eagerDirectives;missingDirectives;bindings;references;exprTargets;symbols;nestingLevel;scopedNodeEntities;usedPipes;eagerPipes;deferredBlocks;deferredScopes;constructor(e,t,i,s,r,o,a,l,c,p,d,m,_){this.target=e,this.directives=t,this.eagerDirectives=i,this.missingDirectives=s,this.bindings=r,this.references=o,this.exprTargets=a,this.symbols=l,this.nestingLevel=c,this.scopedNodeEntities=p,this.usedPipes=d,this.eagerPipes=m,this.deferredBlocks=_.map(b=>b[0]),this.deferredScopes=new Map(_)}getEntitiesInScope(e){return this.scopedNodeEntities.get(e)??new Set}getDirectivesOfNode(e){return this.directives.get(e)||null}getReferenceTarget(e){return this.references.get(e)||null}getConsumerOfBinding(e){return this.bindings.get(e)||null}getExpressionTarget(e){return this.exprTargets.get(e)||null}getDefinitionNodeOfSymbol(e){return this.symbols.get(e)||null}getNestingLevel(e){return this.nestingLevel.get(e)||0}getUsedDirectives(){let e=new Set;return this.directives.forEach(t=>t.forEach(i=>e.add(i))),Array.from(e.values())}getEagerlyUsedDirectives(){let e=new Set(this.eagerDirectives);return Array.from(e.values())}getUsedPipes(){return Array.from(this.usedPipes)}getEagerlyUsedPipes(){return Array.from(this.eagerPipes)}getDeferBlocks(){return this.deferredBlocks}getDeferredTriggerTarget(e,t){if(!(t instanceof el)&&!(t instanceof tl)&&!(t instanceof Ka))return null;let i=t.reference;if(i===null){let r=null;if(e.placeholder!==null){for(let o of e.placeholder.children)if(!(o instanceof jl)){if(r!==null)return null;o instanceof $n&&(r=o)}}return r}let s=this.findEntityInScope(e,i);if(s instanceof _o&&this.getDefinitionNodeOfSymbol(s)!==e){let r=this.getReferenceTarget(s);if(r!==null)return this.referenceTargetToElement(r)}if(e.placeholder!==null){let r=this.findEntityInScope(e.placeholder,i),o=r instanceof _o?this.getReferenceTarget(r):null;if(o!==null)return this.referenceTargetToElement(o)}return null}isDeferred(e){for(let t of this.deferredBlocks){if(!this.deferredScopes.has(t))continue;let i=[this.deferredScopes.get(t)];for(;i.length>0;){let s=i.pop();if(s.elementLikeInScope.has(e))return!0;i.push(...s.childScopes.values())}}return!1}referencedDirectiveExists(e){return!this.missingDirectives.has(e)}findEntityInScope(e,t){let i=this.getEntitiesInScope(e);for(let s of i)if(s.name===t)return s;return null}referenceTargetToElement(e){return e instanceof $n?e:e instanceof Wt||e.node instanceof Ur||e.node instanceof qm||e.node instanceof xo?null:this.referenceTargetToElement(e.node)}};function jb(n,e){let t=new Map;function i(r){if(t.has(r.rootNode))return t.get(r.rootNode);let o=r.namedEntities,a;return r.parentScope!==null?a=new Map([...i(r.parentScope),...o]):a=new Map(o),t.set(r.rootNode,a),a}let s=[n];for(;s.length>0;){let r=s.pop();for(let o of r.childScopes.values())s.push(o);i(r)}for(let[r,o]of t)e.set(r,new Set(o.values()))}var gp=class{},vp=class{jitEvaluator;FactoryTarget=Gn;ResourceLoader=gp;elementSchemaRegistry=new ir;constructor(e=new Su){this.jitEvaluator=e}compilePipe(e,t,i){let s={name:i.name,type:Ye(i.type),typeArgumentCount:0,deps:null,pipeName:i.pipeName,pure:i.pure,isStandalone:i.isStandalone},r=vh(s);return this.jitExpression(r.expression,e,t,[])}compilePipeDeclaration(e,t,i){let s=aw(i),r=vh(s);return this.jitExpression(r.expression,e,t,[])}compileInjectable(e,t,i){let{expression:s,statements:r}=ah({name:i.name,type:Ye(i.type),typeArgumentCount:i.typeArgumentCount,providedIn:Lm(i.providedIn),useClass:Ts(i,"useClass"),useFactory:Nm(i,"useFactory"),useValue:Ts(i,"useValue"),useExisting:Ts(i,"useExisting"),deps:i.deps?.map(h0)},!0);return this.jitExpression(s,e,t,r)}compileInjectableDeclaration(e,t,i){let{expression:s,statements:r}=ah({name:i.type.name,type:Ye(i.type),typeArgumentCount:0,providedIn:Lm(i.providedIn),useClass:Ts(i,"useClass"),useFactory:Nm(i,"useFactory"),useValue:Ts(i,"useValue"),useExisting:Ts(i,"useExisting"),deps:i.deps?.map(Mm)},!0);return this.jitExpression(s,e,t,r)}compileInjector(e,t,i){let s={name:i.name,type:Ye(i.type),providers:i.providers&&i.providers.length>0?new le(i.providers):null,imports:i.imports.map(o=>new le(o))},r=gh(s);return this.jitExpression(r.expression,e,t,[])}compileInjectorDeclaration(e,t,i){let s=lw(i),r=gh(s);return this.jitExpression(r.expression,e,t,[])}compileNgModule(e,t,i){let s={kind:mi.Global,type:Ye(i.type),bootstrap:i.bootstrap.map(Ye),declarations:i.declarations.map(Ye),publicDeclarationTypes:null,imports:i.imports.map(Ye),includeImportTypes:!0,exports:i.exports.map(Ye),selectorScopeMode:pl.Inline,containsForwardDecls:!1,schemas:i.schemas?i.schemas.map(Ye):null,id:i.id?new le(i.id):null},r=_v(s);return this.jitExpression(r.expression,e,t,[])}compileNgModuleDeclaration(e,t,i){let s=xv(i);return this.jitExpression(s,e,t,[])}compileDirective(e,t,i){let s=Im(i);return this.compileDirectiveFromMeta(e,t,s)}compileDirectiveDeclaration(e,t,i){let s=this.createParseSourceSpan("Directive",i.type.name,t),r=p0(i,s);return this.compileDirectiveFromMeta(e,t,r)}compileDirectiveFromMeta(e,t,i){let s=new Ha,r=$l(),o=Pb(i,s,r);return this.jitExpression(o.expression,e,t,s.statements)}compileComponent(e,t,i){let{template:s,interpolation:r,defer:o}=d0(i.template,i.name,t,i.preserveWhitespaces,i.interpolation,void 0),a=De(k(k({},i),Im(i)),{selector:i.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:s,declarations:i.declarations.map(Xb),declarationListEmitMode:0,defer:o,styles:[...i.styles,...s.styles],encapsulation:i.encapsulation,interpolation:r,changeDetection:i.changeDetection??null,animations:i.animations!=null?new le(i.animations):null,viewProviders:i.viewProviders!=null?new le(i.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null}),l=`ng:///${i.name}.js`;return this.compileComponentFromMeta(e,l,a)}compileComponentDeclaration(e,t,i){let s=this.createParseSourceSpan("Component",i.type.name,t),r=Gb(i,s,t);return this.compileComponentFromMeta(e,t,r)}compileComponentFromMeta(e,t,i){let s=new Ha,r=$l(i.interpolation),o=Nb(i,s,r);return this.jitExpression(o.expression,e,t,s.statements)}compileFactory(e,t,i){let s=Bi({name:i.name,type:Ye(i.type),typeArgumentCount:i.typeArgumentCount,deps:Zb(i.deps),target:i.target});return this.jitExpression(s.expression,e,t,s.statements)}compileFactoryDeclaration(e,t,i){let s=Bi({name:i.type.name,type:Ye(i.type),typeArgumentCount:0,deps:Array.isArray(i.deps)?i.deps.map(Mm):i.deps,target:i.target});return this.jitExpression(s.expression,e,t,s.statements)}createParseSourceSpan(e,t,i){return pv(e,t,i)}jitExpression(e,t,i,s){let r=[...s,new Ze("$def",e,void 0,ot.Exported)];return this.jitEvaluator.evaluateStatements(i,r,new bu(t),!0).$def}};function Am(n){return De(k({},n),{isSignal:n.isSignal,predicate:u0(n.predicate),read:n.read?new le(n.read):null,static:n.static,emitDistinctChangesOnly:n.emitDistinctChangesOnly})}function Dm(n){return{propertyName:n.propertyName,first:n.first??!1,predicate:u0(n.predicate),descendants:n.descendants??!1,read:n.read?new le(n.read):null,static:n.static??!1,emitDistinctChangesOnly:n.emitDistinctChangesOnly??!0,isSignal:!!n.isSignal}}function u0(n){return Array.isArray(n)?n:wp(new le(n),1)}function Im(n){let e=ow(n.inputs||[]),t=Yc(n.outputs||[]),i=n.propMetadata,s={},r={};for(let a in i)i.hasOwnProperty(a)&&i[a].forEach(l=>{nw(l)?s[a]={bindingPropertyName:l.alias||a,classPropertyName:a,required:l.required||!1,isSignal:!!l.isSignal,transformFunction:l.transform!=null?new le(l.transform):null}:iw(l)&&(r[a]=l.alias||a)});let o=n.hostDirectives?.length?n.hostDirectives.map(a=>typeof a=="function"?{directive:Ye(a),inputs:null,outputs:null,isForwardReference:!1}:{directive:Ye(a.directive),isForwardReference:!1,inputs:a.inputs?Yc(a.inputs):null,outputs:a.outputs?Yc(a.outputs):null}):null;return De(k({},n),{typeArgumentCount:0,typeSourceSpan:n.typeSourceSpan,type:Ye(n.type),deps:null,host:k({},Kb(n.propMetadata,n.typeSourceSpan,n.host)),inputs:k(k({},e),s),outputs:k(k({},t),r),queries:n.queries.map(Am),providers:n.providers!=null?new le(n.providers):null,viewQueries:n.viewQueries.map(Am),fullInheritance:!1,hostDirectives:o})}function p0(n,e){let t=n.hostDirectives?.length?n.hostDirectives.map(i=>({directive:Ye(i.directive),isForwardReference:!1,inputs:i.inputs?Pm(i.inputs):null,outputs:i.outputs?Pm(i.outputs):null})):null;return{name:n.type.name,type:Ye(n.type),typeSourceSpan:e,selector:n.selector??null,inputs:n.inputs?sw(n.inputs):{},outputs:n.outputs??{},host:zb(n.host),queries:(n.queries??[]).map(Dm),viewQueries:(n.viewQueries??[]).map(Dm),providers:n.providers!==void 0?new le(n.providers):null,exportAs:n.exportAs??null,usesInheritance:n.usesInheritance??!1,lifecycle:{usesOnChanges:n.usesOnChanges??!1},deps:null,typeArgumentCount:0,fullInheritance:!1,isStandalone:n.isStandalone??Hm(n.version),isSignal:n.isSignal??!1,hostDirectives:t}}function zb(n={}){return{attributes:Wb(n.attributes??{}),listeners:n.listeners??{},properties:n.properties??{},specialAttributes:{classAttr:n.classAttribute,styleAttr:n.styleAttribute}}}function Pm(n){let e=null;for(let t=1;t<n.length;t+=2)e=e||{},e[n[t-1]]=n[t];return e}function Wb(n){let e={};for(let t of Object.keys(n))e[t]=new le(n[t]);return e}function Gb(n,e,t){let{template:i,interpolation:s,defer:r}=d0(n.template,n.type.name,t,n.preserveWhitespaces??!1,n.interpolation,n.deferBlockDependencies),o=[];if(n.dependencies)for(let l of n.dependencies)switch(l.kind){case"directive":case"component":o.push(Xc(l));break;case"pipe":o.push(Qb(l));break}else(n.components||n.directives||n.pipes)&&(n.components&&o.push(...n.components.map(l=>Xc(l,!0))),n.directives&&o.push(...n.directives.map(l=>Xc(l))),n.pipes&&o.push(...Yb(n.pipes)));let a=o.some(({kind:l})=>l===Zs.Directive||l===Zs.NgModule);return De(k({},p0(n,e)),{template:i,styles:n.styles??[],declarations:o,viewProviders:n.viewProviders!==void 0?new le(n.viewProviders):null,animations:n.animations!==void 0?new le(n.animations):null,defer:r,changeDetection:n.changeDetection??xp.Default,encapsulation:n.encapsulation??Mi.Emulated,interpolation:s,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null,hasDirectiveDependencies:a})}function Xb(n){return De(k({},n),{type:new le(n.type)})}function Xc(n,e=null){return{kind:Zs.Directive,isComponent:e||n.kind==="component",selector:n.selector,type:new le(n.type),inputs:n.inputs??[],outputs:n.outputs??[],exportAs:n.exportAs??null}}function Yb(n){return n?Object.keys(n).map(e=>({kind:Zs.Pipe,name:e,type:new le(n[e])})):[]}function Qb(n){return{kind:Zs.Pipe,name:n.name,type:new le(n.type)}}function d0(n,e,t,i,s,r){let o=s?ol.fromArray(s):Ln,a=Tb(n,t,{preserveWhitespaces:i,interpolationConfig:o});if(a.errors!==null){let p=a.errors.map(d=>d.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${p}`)}let c=new hp(null).bind({template:a.nodes});return{template:a,interpolation:o,defer:Jb(c,r)}}function Ts(n,e){if(n.hasOwnProperty(e))return wp(new le(n[e]),0)}function Nm(n,e){if(n.hasOwnProperty(e))return new le(n[e])}function Lm(n){let e=typeof n=="function"?new le(n):new ct(n??null);return wp(e,0)}function Zb(n){return n==null?null:n.map(h0)}function h0(n){let e=n.attribute!=null,t=n.token===null?null:new le(n.token),i=e?new le(n.attribute):t;return m0(i,e,n.host,n.optional,n.self,n.skipSelf)}function Mm(n){let e=n.attribute??!1,t=n.token===null?null:new le(n.token);return m0(t,e,n.host??!1,n.optional??!1,n.self??!1,n.skipSelf??!1)}function m0(n,e,t,i,s,r){let o=e?E("unknown"):null;return{token:n,attributeNameType:o,host:t,optional:i,self:s,skipSelf:r}}function Jb(n,e){let t=n.getDeferBlocks(),i=new Map;for(let s=0;s<t.length;s++){let r=e?.[s];i.set(t[s],r?new le(r):null)}return{mode:0,blocks:i}}function Kb(n,e,t){let i=Vb(t||{}),s=Hb(i,e);if(s.length)throw new Error(s.map(r=>r.msg).join(`
`));for(let r in n)n.hasOwnProperty(r)&&n[r].forEach(o=>{ew(o)?i.properties[o.hostPropertyName||r]=Pg("this",r):tw(o)&&(i.listeners[o.eventName||r]=`${r}(${(o.args||[]).join(",")})`)});return i}function ew(n){return n.ngMetadataName==="HostBinding"}function tw(n){return n.ngMetadataName==="HostListener"}function nw(n){return n.ngMetadataName==="Input"}function iw(n){return n.ngMetadataName==="Output"}function sw(n){return Object.keys(n).reduce((e,t)=>{let i=n[t];return typeof i=="string"||Array.isArray(i)?e[t]=rw(i):e[t]={bindingPropertyName:i.publicName,classPropertyName:t,transformFunction:i.transformFunction!==null?new le(i.transformFunction):null,required:i.isRequired,isSignal:i.isSignal},e},{})}function rw(n){return typeof n=="string"?{bindingPropertyName:n,classPropertyName:n,transformFunction:null,required:!1,isSignal:!1}:{bindingPropertyName:n[0],classPropertyName:n[1],transformFunction:n[2]?new le(n[2]):null,required:!1,isSignal:!1}}function ow(n){return n.reduce((e,t)=>{if(typeof t=="string"){let[i,s]=f0(t);e[s]={bindingPropertyName:i,classPropertyName:s,required:!1,isSignal:!1,transformFunction:null}}else e[t.name]={bindingPropertyName:t.alias||t.name,classPropertyName:t.name,required:t.required||!1,isSignal:!1,transformFunction:t.transform!=null?new le(t.transform):null};return e},{})}function Yc(n){return n.reduce((e,t)=>{let[i,s]=f0(t);return e[s]=i,e},{})}function f0(n){let[e,t]=n.split(":",2).map(i=>i.trim());return[t??e,e]}function aw(n){return{name:n.type.name,type:Ye(n.type),typeArgumentCount:0,pipeName:n.name,deps:null,pure:n.pure??!0,isStandalone:n.isStandalone??Hm(n.version)}}function lw(n){return{name:n.type.name,type:Ye(n.type),providers:n.providers!==void 0&&n.providers.length>0?new le(n.providers):null,imports:n.imports!==void 0?n.imports.map(e=>new le(e)):[]}}function cw(n){let e=n.ng||(n.ng={});e.\u0275compilerFacade=new vp}var _p=class{closedByParent=!1;implicitNamespacePrefix=null;isVoid=!1;ignoreFirstLf=!1;canSelfClose=!0;preventNamespaceInheritance=!1;requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return Nn.PARSABLE_DATA}},kA=new _p;var TA=new tu("20.3.12");cw(qr);var Xo=class{_doc;constructor(e){this._doc=e}manager},Ql=(()=>{class n extends Xo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s,r){return t.addEventListener(i,s,r),()=>this.removeEventListener(t,i,s,r)}removeEventListener(t,i,s,r){return t.removeEventListener(i,s,r)}static \u0275fac=function(i){return new(i||n)(ye(mn))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),Jl=new kr(""),Yp=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(o=>{o.manager=this});let s=t.filter(o=>!(o instanceof Ql));this._plugins=s.slice().reverse();let r=t.find(o=>o instanceof Ql);r&&this._plugins.push(r)}addEventListener(t,i,s,r){return this._findPluginFor(i).addEventListener(t,i,s,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(r=>r.supports(t)),!i)throw new zn(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(ye(Jl),ye(Ar))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),zp="ng-app-id";function g0(n){for(let e of n)e.remove()}function v0(n,e){let t=e.createElement("style");return t.textContent=n,t}function uw(n,e,t,i){let s=n.head?.querySelectorAll(`style[${zp}="${e}"],link[${zp}="${e}"]`);if(s)for(let r of s)r.removeAttribute(zp),r instanceof HTMLLinkElement?i.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&t.set(r.textContent,{usage:0,elements:[r]})}function Gp(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Qp=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,s,r={}){this.doc=t,this.appId=i,this.nonce=s,uw(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let s of t)this.addUsage(s,this.inline,v0);i?.forEach(s=>this.addUsage(s,this.external,Gp))}removeStyles(t,i){for(let s of t)this.removeUsage(s,this.inline);i?.forEach(s=>this.removeUsage(s,this.external))}addUsage(t,i,s){let r=i.get(t);r?r.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(t,this.doc)))})}removeUsage(t,i){let s=i.get(t);s&&(s.usage--,s.usage<=0&&(g0(s.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])g0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:s}]of this.inline)s.push(this.addElement(t,v0(i,this.doc)));for(let[i,{elements:s}]of this.external)s.push(this.addElement(t,Gp(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ye(mn),ye(xc),ye(Cc,8),ye(na))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),Wp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zp=/%COMP%/g;var x0="%COMP%",pw=`_nghost-${x0}`,dw=`_ngcontent-${x0}`,hw=!0,mw=new kr("",{providedIn:"root",factory:()=>hw});function fw(n){return dw.replace(Zp,n)}function gw(n){return pw.replace(Zp,n)}function C0(n,e){return e.map(t=>t.replace(Zp,n))}var Jp=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,s,r,o,a,l=null,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Yo(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let s=this.getOrCreateRenderer(t,i);return s instanceof Zl?s.applyToHost(t):s instanceof Qo&&s.applyStyles(),s}getOrCreateRenderer(t,i){let s=this.rendererByCompId,r=s.get(i.id);if(!r){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,d=this.platformIsServer,m=this.tracingService;switch(i.encapsulation){case Sc.Emulated:r=new Zl(l,c,i,this.appId,p,o,a,d,m);break;case Sc.ShadowDom:return new Xp(l,c,t,i,o,a,this.nonce,d,m);default:r=new Qo(l,c,i,p,o,a,d,m);break}s.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(ye(Yp),ye(Qp),ye(xc),ye(mw),ye(mn),ye(Ar),ye(Cc),ye(Ed,8))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),Yo=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,s,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=s,this.tracingService=r}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Wp[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_0(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(_0(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new zn(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,s){if(s){t=s+":"+t;let r=Wp[s];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let s=Wp[i];s?e.removeAttributeNS(s,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,s){s&(Tr.DashCase|Tr.Important)?e.style.setProperty(t,i,s&Tr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Tr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,s){if(typeof e=="string"&&(e=Dr().getGlobalEventTarget(this.doc,e),!e))throw new zn(5102,!1);let r=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(e,t,r)),this.eventManager.addEventListener(e,t,r,s)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function _0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xp=class extends Yo{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,s,r,o,a,l,c){super(e,r,o,l,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=s.styles;p=C0(s.id,p);for(let m of p){let _=document.createElement("style");a&&_.setAttribute("nonce",a),_.textContent=m,this.shadowRoot.appendChild(_)}let d=s.getExternalStyles?.();if(d)for(let m of d){let _=Gp(m,r);a&&_.setAttribute("nonce",a),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qo=class extends Yo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,s,r,o,a,l,c){super(e,r,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s;let p=i.styles;this.styles=c?C0(c,p):p,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Sd.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zl=class extends Qo{contentAttr;hostAttr;constructor(e,t,i,s,r,o,a,l,c){let p=s+"-"+i.id;super(e,t,i,r,o,a,l,c,p),this.contentAttr=fw(p),this.hostAttr=gw(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var Kl=class n extends Fd{supportsDOMEvents=!0;static makeCurrent(){Bd(new n)}onAndCancel(e,t,i,s){return e.addEventListener(t,i,s),()=>{e.removeEventListener(t,i,s)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Cw();return t==null?null:Sw(t)}resetBaseElement(){Zo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Rd(document.cookie,e)}},Zo=null;function Cw(){return Zo=Zo||document.head.querySelector("base"),Zo?Zo.getAttribute("href"):null}function Sw(n){return new URL(n,document.baseURI).pathname}var Ew=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),S0=["alt","control","meta","shift"],bw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ww={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},E0=(()=>{class n extends Xo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,s,r){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dr().onAndCancel(t,o.domEventName,a,r))}static parseEventName(t){let i=t.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let r=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),S0.forEach(c=>{let p=i.indexOf(c);p>-1&&(i.splice(p,1),o+=c+".")}),o+=r,i.length!=0||r.length===0)return null;let l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let s=bw[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(s=t.code,r="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),S0.forEach(o=>{if(o!==s){let a=ww[o];a(t)&&(r+=o+".")}}),r+=s,r===i)}static eventCallback(t,i,s){return r=>{n.matchEventFullKeyCode(r,t)&&s.runGuarded(()=>i(r))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(ye(mn))};static \u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function Kp(n,e,t){let i=k({rootComponent:n,platformRef:t?.platformRef},yw(e));return Md(i)}function yw(n){return{appProviders:[...Iw,...n?.providers??[]],platformProviders:Dw}}function kw(){Kl.makeCurrent()}function Tw(){return new _c}function Aw(){return dd(document),document}var Dw=[{provide:na,useValue:$d},{provide:hd,useValue:kw,multi:!0},{provide:mn,useFactory:Aw}];var Iw=[{provide:cd,useValue:"root"},{provide:_c,useFactory:Tw},{provide:Jl,useClass:Ql,multi:!0,deps:[mn]},{provide:Jl,useClass:E0,multi:!0,deps:[mn]},Jp,Qp,Yp,{provide:bd,useExisting:Jp},{provide:Od,useClass:Ew},[]];var Jo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=$e({token:n,factory:function(i){let s=null;return i?s=new(i||n):s=ye(Nw),s},providedIn:"root"})}return n})(),Nw=(()=>{class n extends Jo{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Pi.NONE:return i;case Pi.HTML:return vs(i,"HTML")?gs(i):Cd(this._doc,String(i)).toString();case Pi.STYLE:return vs(i,"Style")?gs(i):i;case Pi.SCRIPT:if(vs(i,"Script"))return gs(i);throw new zn(5200,!1);case Pi.URL:return vs(i,"URL")?gs(i):xd(String(i));case Pi.RESOURCE_URL:if(vs(i,"ResourceURL"))return gs(i);throw new zn(5201,!1);default:throw new zn(5202,!1)}}bypassSecurityTrustHtml(t){return md(t)}bypassSecurityTrustStyle(t){return fd(t)}bypassSecurityTrustScript(t){return gd(t)}bypassSecurityTrustUrl(t){return vd(t)}bypassSecurityTrustResourceUrl(t){return _d(t)}static \u0275fac=function(i){return new(i||n)(ye(mn))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hn={attack:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M18.8025 2.44L6.9025 14.34L4.7825 12.22L3.3725 13.63L5.8425 16.1L2.6625 19.28C2.2725 19.67 2.2725 20.3 2.6625 20.69L3.3725 21.4C3.7625 21.79 4.3925 21.79 4.7825 21.4L8.0025 18.23L10.4425 20.7L11.8525 19.29L9.7325 17.17L21.6325 5.27V2.44H18.8025Z"></path></svg>',precision:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M19.5,3.09L20.91,4.5L16.41,9H20V11H13V4H15V7.59L19.5,3.09M20.91,19.5L19.5,20.91L15,16.41V20H13V13H20V15H16.41L20.91,19.5M4.5,3.09L9,7.59V4H11V11H4V9H7.59L3.09,4.5L4.5,3.09M3.09,19.5L7.59,15H4V13H11V20H9V16.41L4.5,20.91L3.09,19.5Z"></path></svg>',critical_chance:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M4.35 21H21V4.35L17.85 12L15.5 5L14.25 10.2L3 3L10.2 14.25L4.5 15.5L12 17.85L4.35 21Z"></path></svg>',critical_damage:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,10.84 21.79,9.69 21.39,8.61L19.79,10.21C19.93,10.8 20,11.4 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.6,4 13.2,4.07 13.79,4.21L15.4,2.6C14.31,2.21 13.16,2 12,2M19,2L15,6V7.5L12.45,10.05C12.3,10 12.15,10 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12C14,11.85 14,11.7 13.95,11.55L16.5,9H18L22,5H19V2M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12H16A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8V6Z"></path></svg>',armor:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"></path></svg>',dodge:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M16.5,5.5A2,2 0 0,0 18.5,3.5A2,2 0 0,0 16.5,1.5A2,2 0 0,0 14.5,3.5A2,2 0 0,0 16.5,5.5M12.9,19.4L13.9,15L16,17V23H18V15.5L15.9,13.5L16.5,10.5C17.89,12.09 19.89,13 22,13V11C20.24,11.03 18.6,10.11 17.7,8.6L16.7,7C16.34,6.4 15.7,6 15,6C14.7,6 14.5,6.1 14.2,6.1L9,8.3V13H11V9.6L12.8,8.9L11.2,17L6.3,16L5.9,18L12.9,19.4M4,9A1,1 0 0,1 3,8A1,1 0 0,1 4,7H7V9H4M5,5A1,1 0 0,1 4,4A1,1 0 0,1 5,3H10V5H5M3,13A1,1 0 0,1 2,12A1,1 0 0,1 3,11H7V13H3Z"></path></svg>',health:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"></path></svg>',loot_chance:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M5,4H19A3,3 0 0,1 22,7V11H15V10H9V11H2V7A3,3 0 0,1 5,4M11,11H13V13H11V11M2,12H9V13L11,15H13L15,13V12H22V20H2V12Z"></path></svg>',hunger:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M11,9H9V2H7V9H5V2H3V9C3,11.12 4.66,12.84 6.75,12.97V22H9.25V12.97C11.34,12.84 13,11.12 13,9V2H11V9M16,6V14H18.5V22H21V2C18.24,2 16,4.24 16,6Z"></path></svg>',entrepreneurship:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z"></path></svg>',energy:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M11,15H6L13 1V9H18L11 23V15Z"></path></svg>',production:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M14.79,10.62L3.5,21.9L2.1,20.5L13.38,9.21L14.79,10.62M19.27,7.73L19.86,7.14L19.07,6.35L19.71,5.71L18.29,4.29L17.65,4.93L16.86,4.14L16.27,4.73C14.53,3.31 12.57,2.17 10.47,1.37L9.64,3.16C11.39,4.08 13,5.19 14.5,6.5L14,7L17,10L17.5,9.5C18.81,11 19.92,12.61 20.84,14.36L22.63,13.53C21.83,11.43 20.69,9.47 19.27,7.73Z"></path></svg>',business_limit:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M4,18V20H8V18H4M4,14V16H14V14H4M10,18V20H14V18H10M16,14V16H20V14H16M16,18V20H20V18H16M2,22V8L7,12V8L12,12V8L17,12L18,2H21L22,12V22H2Z"></path></svg>',management:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M12 3C14.21 3 16 4.79 16 7S14.21 11 12 11 8 9.21 8 7 9.79 3 12 3M16 13.54C16 14.6 15.72 17.07 13.81 19.83L13 15L13.94 13.12C13.32 13.05 12.67 13 12 13S10.68 13.05 10.06 13.12L11 15L10.19 19.83C8.28 17.07 8 14.6 8 13.54C5.61 14.24 4 15.5 4 17V21H20V17C20 15.5 18.4 14.24 16 13.54Z"></path></svg>',bonus_damage_percent:"fa-solid fa-angles-up",political_ethics:'<svg class="mdi-icon " width="24" height="24" fill="currentColor" viewBox="0 0 24 24" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M17 21V22H7V21H9V11H15V21H17M17.5 6C17.5 4.39 16.41 3.05 14.93 2.64C14.78 2.27 14.43 2 14 2C13.45 2 13 2.45 13 3C13 3.55 13.45 4 14 4C14.31 4 14.58 3.85 14.76 3.63C15.77 3.95 16.5 4.89 16.5 6H4L5 10H19L20 6H17.5Z"></path></svg>'},b0={equipment:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; height: 1em;"><path d="M16,5V4A2,2 0 0,0 14,2H10A2,2 0 0,0 8,4V5A4,4 0 0,0 4,9V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V9A4,4 0 0,0 16,5M10,4H14V5H10V4M12,9L14,11L12,13L10,11L12,9M18,16H9V18H8V16H6V15H18V16Z"></path></svg>',skills:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; height: 1em;"><path d="M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"></path></svg>'},ur={mu_hq:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em;"><path d="M12 7.5C12.69 7.5 13.27 7.73 13.76 8.2S14.5 9.27 14.5 10C14.5 11.05 14 11.81 13 12.28V21H11V12.28C10 11.81 9.5 11.05 9.5 10C9.5 9.27 9.76 8.67 10.24 8.2S11.31 7.5 12 7.5M16.69 5.3C17.94 6.55 18.61 8.11 18.7 10C18.7 11.8 18.03 13.38 16.69 14.72L15.5 13.5C16.5 12.59 17 11.42 17 10C17 8.67 16.5 7.5 15.5 6.5L16.69 5.3M6.09 4.08C4.5 5.67 3.7 7.64 3.7 10S4.5 14.3 6.09 15.89L4.92 17.11C3 15.08 2 12.7 2 10C2 7.3 3 4.94 4.92 2.91L6.09 4.08M19.08 2.91C21 4.94 22 7.3 22 10C22 12.8 21 15.17 19.08 17.11L17.91 15.89C19.5 14.3 20.3 12.33 20.3 10S19.5 5.67 17.91 4.08L19.08 2.91M7.31 5.3L8.5 6.5C7.5 7.42 7 8.58 7 10C7 11.33 7.5 12.5 8.5 13.5L7.31 14.72C5.97 13.38 5.3 11.8 5.3 10C5.3 8.2 5.97 6.64 7.31 5.3Z"></path></svg>',bunker:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em;"><path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"></path></svg>',military_base:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em; font-size: 120%; filter: drop-shadow(black 1px 1px 0px);"><path d="M18.8025 2.44L6.9025 14.34L4.7825 12.22L3.3725 13.63L5.8425 16.1L2.6625 19.28C2.2725 19.67 2.2725 20.3 2.6625 20.69L3.3725 21.4C3.7625 21.79 4.3925 21.79 4.7825 21.4L8.0025 18.23L10.4425 20.7L11.8525 19.29L9.7325 17.17L21.6325 5.27V2.44H18.8025Z"></path></svg>',mu_order_default:'<svg viewBox="0 0 24 24" fill="currentColor" style="width: 1em; overflow: visible; height: 1em;"><path d="M17,4V8H18V10H17.64L21,23H18.93L18.37,20.83L12,17.15L5.63,20.83L5.07,23H3L6.36,10H6V8H7V4H6V3L12,1L18,3V4H17M7.28,14.43L6.33,18.12L10,16L7.28,14.43M15.57,10H8.43L7.8,12.42L12,14.85L16.2,12.42L15.57,10M17.67,18.12L16.72,14.43L14,16L17.67,18.12Z"></path></svg>'},w0={Weapon:"fa-solid fa-gun",Ammo:"fa-solid fa-layer-group",Booster:"fa-solid fa-pills",Food:"fa-solid fa-apple-whole",Helmet:"fa-solid fa-hard-hat",Chest:"fa-solid fa-shirt",Pants:"fa-solid fa-person-hiking",Boots:"fa-solid fa-shoe-prints",Gloves:"fa-solid fa-mitten"},Ti={attack:"text-orange-400",precision:"text-orange-400",bonus_damage_percent:"text-orange-400",critical_chance:"text-red-500",critical_damage:"text-red-500",hunger:"text-red-500",armor:"text-white",dodge:"text-white",health:"text-green-500",loot_chance:"text-green-500",entrepreneurship:"text-pink-500",energy:"text-blue-400",production:"text-yellow-400",business_limit:"text-yellow-400",management:"text-purple-400",default:"text-blue-400"},y0={common:{border:"border-gray-500",text:"text-gray-500"},uncommon:{border:"border-green-600",text:"text-green-600"},rare:{border:"border-blue-500",text:"text-blue-500"},epic:{border:"border-purple-600",text:"text-purple-600"},legendary:{border:"border-yellow-500",text:"text-yellow-500"},mythic:{border:"border-red-600",text:"text-red-600"}};var us=class us{constructor(e,t,i){this.characterStateService=e;this.marketPriceService=t;this.gameDataService=i;this.equipmentCost=qe(()=>{let e=0,t=0,i=["Weapon","Helmet","Chest","Pants","Boots","Gloves"],s=this.marketPriceService.goldCosts();i.forEach(o=>{let a=this.characterStateService.equippedItems()[o];if(a){let l=this.itemCraftCosts[a.rarity];l&&(e+=l.steel,t+=l.craft)}});let r=e*s.steel+t*s.craft;return{total_steel:e,total_craft:t,total_gold_value:r}});this.allCalculatedData=qe(()=>this.calculateAllStatsForState(this.characterStateService.skillLevels(),this.characterStateService.equippedItems(),this.characterStateService.bonusLevels(),this.characterStateService.isCapitalLinkEnabled(),this.characterStateService.isSwornEnemyEnabled(),this.characterStateService.isPatriotEnabled(),this.characterStateService.isAllianceEnabled(),this.characterStateService.resistancePercent(),this.characterStateService.militaryRankBonus(),this.characterStateService.ethicsMilitary(),this.characterStateService.ethicsDiplomacy()));this.totalStats=qe(()=>this.allCalculatedData().totalStats);this.calculatedStats=qe(()=>this.allCalculatedData().calculatedStats);this.skillsData=this.gameDataService.getSkills(),this.itemCraftCosts=this.gameDataService.getItemCraftCosts()}calculateAllStatsForState(e,t,i,s,r,o,a,l,c,p,d){let m=i??this.characterStateService.bonusLevels(),_=s??this.characterStateService.isCapitalLinkEnabled(),b=r??this.characterStateService.isSwornEnemyEnabled(),A=o??this.characterStateService.isPatriotEnabled(),L=a??this.characterStateService.isAllianceEnabled(),D=l??this.characterStateService.resistancePercent(),F=c??this.characterStateService.militaryRankBonus(),W=p??this.characterStateService.ethicsMilitary(),q=d??this.characterStateService.ethicsDiplomacy(),ie=this._calculateStatsFromSkills(e),de=this._calculateBaseStats(ie,t),Oe=this._applyPercentageBonuses(de,t,m,_,b,A,L,D,F,W,q),Je=this._calculateDerivedStats(Oe,ie,t);return{totalStats:Oe,calculatedStats:Je}}_calculateBaseStats(e,t){let i={};for(let s in e)i[s]={min:e[s],max:e[s]};for(let s in t){let r=t[s];if(r?.item?.stats)for(let o in r.item.stats){if(o==="bonus_damage_percent")continue;i[o]||(i[o]={min:0,max:0});let a=r.item.stats[o];i[o].min+=a.min,i[o].max+=a.max}}return i}_calculateStatsFromSkills(e){let t={};for(let i in this.skillsData)for(let s in this.skillsData[i]){let r=this.skillsData[i][s],o=e[s]??0;t[s]=r.base_value+o*r.increase_per_level}return t}_applyPercentageBonuses(e,t,i,s,r,o,a,l,c,p,d){let m=k({},e),_=1,b=0;for(let A in t){let L=t[A];if(L?.item?.stats?.bonus_damage_percent){let D=L.item.stats.bonus_damage_percent.min;_*=1+D/100,b+=D}}for(let A in i){let L=(i[A]??0)*5;_*=1+L/100}return s||(_*=.75),r&&(_*=1.1),o&&(_*=1.1),a&&(_*=1.1),_*=1+l/100,_*=1+c/100,p===1&&(_*=1.05),p===2&&(_*=1.15),p===-1&&(_*=1.05),p===-2&&(_*=1.15),a&&(d===1&&(_*=1.05),d===2&&(_*=1.15)),r&&(d===-1&&(_*=1.05),d===-2&&(_*=1.15)),m.attack&&(m.attack={min:m.attack.min*_,max:m.attack.max*_}),b>0&&(m.bonus_damage_percent={min:b,max:b}),m}_getHealthPerFood(e){return e?.item.stats.health?.min??0}_calculateDamageAndHitsForHealthPool(e,t,i,s,r,o){if(e<=0||t<=0)return{total_hits:0,damage:0,misses:0,crits:0,dodges:0};let l=Math.ceil(e/t),c=l*i,p=l*(1-s/100),d=l*(s/100)*(r/100),m=l*(o/100);return{total_hits:l,damage:c,misses:p,crits:d,dodges:m}}_calculateAllMetrics(e,t,i,s){let r=Ii=>t[Ii]?.[e]??0,o=this.marketPriceService.goldCosts(),a=r("attack"),l=Math.min(100,r("precision")),c=Math.min(100,r("critical_chance")),p=r("critical_damage")/100,d=Math.min(90,r("armor"))/100,m=Math.min(90,r("dodge")),_=i.health??0,b=i.hunger??0,A=s.Food,L=this._getHealthPerFood(A),D=_+b*L,F=1-l/100,W=F*a*.5+(1-F)*(1-c/100)*a+(1-F)*(c/100)*a*(1+p),ie=10*(1-d)*(1-m/100),de=this._calculateDamageAndHitsForHealthPool(D,ie,W,l,c,m),Oe=Math.floor(b*.1*8),Je=Math.floor(b*.1*24),Zt=D+_*.1*8+Oe*L,Me=this._calculateDamageAndHitsForHealthPool(Zt,ie,W,l,c,m),jn=D+_*.1*24+Je*L,We=this._calculateDamageAndHitsForHealthPool(jn,ie,W,l,c,m),gt=s.Weapon?W*100:0,Ft=Object.keys(s).some(Ii=>["Helmet","Chest","Pants","Boots","Gloves"].includes(Ii)&&s[Ii]),vt=0;Ft&&(vt=m/100>=1?"Infinite":W*(100/(1-m/100)));let Be=0,_t=A?.item.name;_t&&o.food[_t]&&(Be+=b*o.food[_t]);let pt=s.Ammo?.item.name;pt&&o.ammo[pt]&&(Be+=de.total_hits*o.ammo[pt]),s.Booster&&o.pill&&(Be+=o.pill);let Jt=s.Weapon,Di=Jt?this.itemCraftCosts[Jt.rarity].steel*o.steel+this.itemCraftCosts[Jt.rarity].craft*o.craft:0,dt=["Helmet","Chest","Pants","Boots","Gloves"].reduce((Ii,q0)=>{let gc=s[q0];if(gc){let U0=this.itemCraftCosts[gc.rarity].steel*o.steel+this.itemCraftCosts[gc.rarity].craft*o.craft;return Ii+U0}return Ii},0),Ae=pt?o.ammo[pt]??0:0,yn=s.Booster?o.pill??0:0,kt=de.total_hits>0?yn/de.total_hits:0,yr=Di/100+Ae+dt/100*(1-m/100)+kt,fs=W>0?yr/W*1e3:0,L0=_t?b+Oe:0,M0=pt?Me.total_hits:0,B0=s.Booster?1:0,F0=s.Weapon?Math.max(0,100-Me.total_hits):"N/A",R0=Ft?Math.max(0,100-(Me.total_hits-Me.dodges)):"N/A",O0=s.Weapon?Math.ceil(Me.total_hits/100):"N/A",$0=Ft?Math.ceil((Me.total_hits-Me.dodges)/100):"N/A",V0=s.Weapon?Math.ceil(We.total_hits/100):"N/A",H0=Ft?Math.ceil((We.total_hits-We.dodges)/100):"N/A";return{avg_dmg:W,burst_damage:de.damage,burst_cost:Be,dmg_8h:Me.damage,dmg_24h:We.damage,weapon_life_dmg:gt,armor_life_dmg:vt,cost_per_1k_dmg:fs,total_hits_burst:de.total_hits,total_hits_8h:Me.total_hits,total_hits_24h:We.total_hits,misses_burst:de.misses,crits_burst:de.crits,dodges_burst:de.dodges,misses_8h:Me.misses,crits_8h:Me.crits,dodges_8h:Me.dodges,misses_24h:We.misses,crits_24h:We.crits,dodges_24h:We.dodges,food_consumed_8h:L0,ammo_consumed_8h:M0,booster_consumed_8h:B0,weapon_durability_remaining_8h:F0,armor_durability_remaining_8h:R0,weapons_depleted_8h:O0,armors_depleted_8h:$0,weapons_depleted_24h:V0,armors_depleted_24h:H0}}_calculateDerivedStats(e,t,i){let s=this._calculateAllMetrics("min",e,t,i),r=this._calculateAllMetrics("max",e,t,i);return{avg_dmg_min:s.avg_dmg,avg_dmg_max:r.avg_dmg,burst_damage_min:s.burst_damage,burst_damage_max:r.burst_damage,burst_cost_min:s.burst_cost,burst_cost_max:r.burst_cost,dmg_8h_min:s.dmg_8h,dmg_8h_max:r.dmg_8h,dmg_24h_min:s.dmg_24h,dmg_24h_max:r.dmg_24h,weapon_life_dmg_min:s.weapon_life_dmg,weapon_life_dmg_max:r.weapon_life_dmg,armor_life_dmg_min:s.armor_life_dmg,armor_life_dmg_max:r.armor_life_dmg,cost_per_1k_dmg_min:s.cost_per_1k_dmg,cost_per_1k_dmg_max:r.cost_per_1k_dmg,total_hits_burst_min:s.total_hits_burst,total_hits_burst_max:r.total_hits_burst,total_hits_8h_min:s.total_hits_8h,total_hits_8h_max:r.total_hits_8h,total_hits_24h_min:s.total_hits_24h,total_hits_24h_max:r.total_hits_24h,misses_burst_min:s.misses_burst,misses_burst_max:r.misses_burst,crits_burst_min:s.crits_burst,crits_burst_max:r.crits_burst,dodges_burst_min:s.dodges_burst,dodges_burst_max:r.dodges_burst,misses_8h_min:s.misses_8h,misses_8h_max:r.misses_8h,crits_8h_min:s.crits_8h,crits_8h_max:r.crits_8h,dodges_8h_min:s.dodges_8h,dodges_8h_max:r.dodges_8h,misses_24h_min:s.misses_24h,misses_24h_max:r.misses_24h,crits_24h_min:s.crits_24h,crits_24h_max:r.crits_24h,dodges_24h_min:s.dodges_24h,dodges_24h_max:r.dodges_24h,food_consumed_8h_min:s.food_consumed_8h,food_consumed_8h_max:r.food_consumed_8h,ammo_consumed_8h_min:s.ammo_consumed_8h,ammo_consumed_8h_max:r.ammo_consumed_8h,booster_consumed_8h_min:s.booster_consumed_8h,booster_consumed_8h_max:r.booster_consumed_8h,weapon_durability_remaining_8h_min:s.weapon_durability_remaining_8h,weapon_durability_remaining_8h_max:r.weapon_durability_remaining_8h,armor_durability_remaining_8h_min:s.armor_durability_remaining_8h,armor_durability_remaining_8h_max:r.armor_durability_remaining_8h,weapons_depleted_8h_min:s.weapons_depleted_8h,weapons_depleted_8h_max:r.weapons_depleted_8h,armors_depleted_8h_min:s.armors_depleted_8h,armors_depleted_8h_max:r.armors_depleted_8h,weapons_depleted_24h_min:s.weapons_depleted_24h,weapons_depleted_24h_max:r.weapons_depleted_24h,armors_depleted_24h_min:s.armors_depleted_24h,armors_depleted_24h_max:r.armors_depleted_24h}}};us.\u0275fac=function(t){return new(t||us)(ye(Re),ye(oi),ye(Tt))},us.\u0275prov=$e({token:us,factory:us.\u0275fac,providedIn:"root"});var Bt=us;var ec=["common","uncommon","rare","epic","legendary","mythic"],k0=["Weapon","Helmet","Chest","Pants","Boots","Gloves"];function Ko(n,e,t){let i=[],s=Math.pow(ec.length,k0.length);for(let r=0;r<s;r++){let o=r,a=[],l=0,c=!0;for(let p of k0){let d=o%ec.length,m=ec[d],_=n[p.toLowerCase()]?.[m];if(_){a.push({slot:p,item:_,rarity:m});let b=e[m];l+=b.craft*t.craft+b.steel*t.steel}else{c=!1;break}o=Math.floor(o/ec.length)}c&&i.push({items:a,cost:l})}return i}function tc(n,e){let t={};n.forEach(i=>t[i.slot]={item:i.item,rarity:i.rarity,type:i.slot});for(let i of["Food","Ammo","Booster"]){let s=e[i];s&&(t[i]=s)}return t}var ps=class ps{constructor(){this.isFindingBuild=Y(!1);this.findProfitableBuildProgress=Y(null);this.isFindingCostBuild=Y(!1);this.findCostBuildProgress=Y(null);this.isFindingLowestCostPerDmg=Y(!1);this.findLowestCostPerDmgProgress=Y(null);this.isFinding8hCostBuild=Y(!1);this.find8hCostBuildProgress=Y(null);this.characterStateService=X(Re);this.combatCalculatorService=X(Bt);this.marketPriceService=X(oi);this.gameDataService=X(Tt);this.skillsData=this.gameDataService.getSkills(),this.itemsData=this.gameDataService.getItems(),this.itemCraftCosts=this.gameDataService.getItemCraftCosts()}optimizeCombatSkillsForBurstDamage(){return this._runCombatSkillOptimization("burst_damage_max")}optimizeCombatSkillsForMaxHits(){return this._runCombatSkillOptimization("total_hits_burst_max")}optimizeCombatSkillsForArmorLifeDamage(){return this._runCombatSkillOptimization("armor_life_dmg_max")}getStatValue(e,t){if(t==="loot_per_armor_life"){let s=Math.min(.9,(e.totalStats.dodge?.max??0)/100),r=e.totalStats.loot_chance?.max??0;return s>=1?1/0:r/(1-s)}let i=e.calculatedStats[t];return typeof i=="number"?i:0}_optimizeSkillsForStat(e,t,i,s){let r=new Map,o=Object.keys(this.skillsData.combat).sort(),a=k({},t);for(;i>0;){let l={skillName:"",newLevel:0,cost:1/0,gainPerPoint:-1},c=o.map(m=>a[m]).join(","),p=r.get(c);p||(p=this.combatCalculatorService.calculateAllStatsForState(a,e),r.set(c,p));let d=this.getStatValue(p,s);if(d===1/0)break;for(let m of o){let _=a[m]??0;if(_>=10)continue;let b=_+1;if(b>i)continue;let A=De(k({},a),{[m]:_+1}),L=o.map(q=>A[q]).join(","),D=r.get(L);D||(D=this.combatCalculatorService.calculateAllStatsForState(A,e),r.set(L,D));let F=this.getStatValue(D,s);if(F===1/0){l={skillName:m,newLevel:_+1,cost:b,gainPerPoint:1/0};break}let W=(F-d)/b;W>l.gainPerPoint&&(l={skillName:m,newLevel:_+1,cost:b,gainPerPoint:W})}if(l.gainPerPoint>=0&&l.skillName)a=De(k({},a),{[l.skillName]:l.newLevel}),i-=l.cost;else break}return a}_runCombatSkillOptimization(e){let t=k({},this.characterStateService.skillLevels());Object.keys(this.skillsData.combat).forEach(s=>{t[s]=0});let i=this.characterStateService.playerLevel()*4;return Object.keys(this.skillsData.economic).forEach(s=>{let r=t[s]??0;i-=r*(r+1)/2}),this._optimizeSkillsForStat(this.characterStateService.equippedItems(),t,i,e)}_getOptimalSkillsForEquipment(e,t,i,s){let r=k({},this.characterStateService.skillLevels());Object.keys(this.skillsData.combat).forEach(a=>{r[a]=s?.[a]??0});let o=i??this.characterStateService.playerLevel()*4;return Object.keys(this.skillsData.economic).forEach(a=>{let l=r[a]??0;o-=l*(l+1)/2}),s&&Object.entries(s).forEach(([a,l])=>{for(let c=0;c<l;c++)o-=c+1}),o<0&&(o=0),this._optimizeSkillsForStat(t,r,o,e)}async reportProgress(e,t,i,s=100){t%s===0&&(e.set(t/i*100),await new Promise(r=>setTimeout(r,10)))}async findProfitableBuild(){this.isFindingBuild.set(!0),this.findProfitableBuildProgress.set(0),await new Promise(m=>setTimeout(m,50));let e=this.marketPriceService.goldCosts(),t=this.marketPriceService.marketPrices().Case??0;if(t===0){alert("Cannot find profitable build because the market price for 'Case' is missing or zero. Please refresh market data."),this.isFindingBuild.set(!1),this.findProfitableBuildProgress.set(null);return}let i=null;Object.entries(this.itemsData.food).forEach(([m,_])=>{let b=e.food[_.name]??0,A=_.stats.health?.min??0;if(b>0&&A>0){let L=b/A;(!i||L<i.costPerHp)&&(i={item:_,rarity:m,costPerHp:L})}});let r=Ko(this.itemsData,this.itemCraftCosts,e).filter(m=>m.cost<2e6).sort((m,_)=>m.cost-_.cost),o=[],a=[null,...Object.entries(this.itemsData.ammo).map(([m,_])=>({item:_,rarity:m,type:"Ammo"}))],l=[null,...Object.entries(this.itemsData.booster).map(([m,_])=>({item:_,rarity:m,type:"Booster"}))];for(let m of a)for(let _ of l){let b={Food:i?{item:i.item,rarity:i.rarity,type:"Food"}:null,Ammo:m?{item:m.item,rarity:m.rarity,type:"Ammo"}:null,Booster:_?{item:_.item,rarity:_.rarity,type:"Booster"}:null},A=(m?m.item.name:"No Ammo")+" + "+(_?_.item.name:"No Booster");o.push({name:A,items:b})}let c=null,p=r.length*o.length,d=0;for(let m of o)for(let _ of r){d++,await this.reportProgress(this.findProfitableBuildProgress,d,p,500);let b=tc(_.items,m.items),A={},L=this.characterStateService.playerLevel()*4,D=0,F=0;for(let Ae=1;Ae<=10&&D+Ae<=L;Ae++)D+=Ae,F=Ae;A.loot_chance=F;let W=this._getOptimalSkillsForEquipment("total_hits_8h_max",b,void 0,A),{calculatedStats:q,totalStats:ie}=this.combatCalculatorService.calculateAllStatsForState(W,b),de=q.total_hits_8h_max,Oe=q.dmg_8h_max,Je=ie.loot_chance?.max??0,Zt=de*Je/100,Me=Oe*625e-7,We=(Zt+Me)*t,gt=0,Ft=_.items.find(Ae=>Ae.slot==="Weapon"),vt=0;if(Ft){let Ae=this.itemCraftCosts[Ft.rarity];vt=Ae.steel*e.steel+Ae.craft*e.craft}let Be=_.cost-vt,_t=q.weapons_depleted_8h_max;typeof _t=="number"&&(gt+=_t*vt);let pt=q.armors_depleted_8h_max;typeof pt=="number"&&(gt+=pt*Be);let Jt=q.food_consumed_8h_max;m.items.Food&&Jt>0&&(gt+=Jt*(e.food[m.items.Food.item.name]||0));let Di=q.ammo_consumed_8h_max;m.items.Ammo&&Di>0&&(gt+=Di*(e.ammo[m.items.Ammo.item.name]||0));let we=q.booster_consumed_8h_max;m.items.Booster&&we>0&&(gt+=we*(e.pill||0));let dt=We-gt;dt>0&&(!c||dt>c.profit)&&(c={items:_.items,consumables:m.items,cost:_.cost,skills:W,profit:dt,revenue:We,expenses:gt})}c?(this.characterStateService.equipMultipleItems(c.items),["Food","Ammo","Booster"].forEach(m=>{let _=c.consumables[m];this.characterStateService.equipItem(m,_?.item||null,_?.rarity||null)}),this.characterStateService.skillLevels.set(c.skills),alert(`Found the most profitable 8h build!

- Net Profit (8h): ${c.profit.toFixed(0)} G
- Revenue: ${c.revenue.toFixed(0)} G
- Expenses: ${c.expenses.toFixed(0)} G
- Gear Cost: ${c.cost.toFixed(0)} G

Optimized for maximum profit using available bonuses.`)):alert("Could not find a profitable build for 8h simulation. Expenses exceed loot value."),this.isFindingBuild.set(!1),this.findProfitableBuildProgress.set(null)}async findLowestCostForDamage(e){this.isFindingCostBuild.set(!0),this.findCostBuildProgress.set(0),await new Promise(r=>setTimeout(r,50));let t=this.marketPriceService.goldCosts(),i=Ko(this.itemsData,this.itemCraftCosts,t);i.sort((r,o)=>r.cost-o.cost);let s=null;for(let r=0;r<i.length;r++){await this.reportProgress(this.findCostBuildProgress,r,i.length);let o=i[r],a=tc(o.items,this.characterStateService.equippedItems()),l=this._getOptimalSkillsForEquipment("burst_damage_max",a),{calculatedStats:c}=this.combatCalculatorService.calculateAllStatsForState(l,a);if(c.burst_damage_max>=e){s={items:o.items,cost:o.cost,skills:l,achievedDamage:c.burst_damage_max};break}}s?(this.characterStateService.equipMultipleItems(s.items),this.characterStateService.skillLevels.set(s.skills),alert(`Found a build!

- Target Damage: ${e.toLocaleString()}
- Achieved Damage: ${s.achievedDamage.toLocaleString()}
- Equipment Cost: ${s.cost.toFixed(2)} G

Skills and equipment have been updated.`)):alert("Could not find an equipment combination to reach the target damage with current consumables and bonuses."),this.isFindingCostBuild.set(!1),this.findCostBuildProgress.set(null)}async findLowestCostFor8hDamage(e){this.isFinding8hCostBuild.set(!0),this.find8hCostBuildProgress.set(0),await new Promise(p=>setTimeout(p,50));let t=this.marketPriceService.goldCosts(),i=Ko(this.itemsData,this.itemCraftCosts,t);i.sort((p,d)=>p.cost-d.cost);let s=[null,...Object.entries(this.itemsData.ammo).map(([p,d])=>({item:d,rarity:p,type:"Ammo"}))],r=[null,...Object.entries(this.itemsData.food).map(([p,d])=>({item:d,rarity:p,type:"Food"}))],o=Object.entries(this.itemsData.booster).map(([p,d])=>({item:d,rarity:p,type:"Booster"})),a=null,l=0,c=s.length*r.length*o.length;for(let p of s)for(let d of r)for(let m of o){l++,this.find8hCostBuildProgress.set(l/c*100),await new Promise(b=>setTimeout(b,10));let _={Ammo:p,Food:d,Booster:m};for(let b of i){let A=k({},_);b.items.forEach(F=>A[F.slot]={item:F.item,rarity:F.rarity,type:F.slot});let L=this._getOptimalSkillsForEquipment("dmg_8h_max",A),{calculatedStats:D}=this.combatCalculatorService.calculateAllStatsForState(L,A);if(D.dmg_8h_max>=e){let F=0,W=D.weapons_depleted_8h_max;typeof W=="number"&&W>0&&(F+=W*b.cost);let q=D.armors_depleted_8h_max;if(typeof q=="number"&&q>0){let ie=0;["Helmet","Chest","Pants","Boots","Gloves"].forEach(de=>{let Oe=A[de];if(Oe){let Je=this.itemCraftCosts[Oe.rarity];ie+=Je.craft*t.craft+Je.steel*t.steel}}),F+=q*ie}p&&(F+=(D.ammo_consumed_8h_max||0)*(t.ammo[p.item.name]||0)),d&&(F+=(D.food_consumed_8h_max||0)*(t.food[d.item.name]||0)),m&&(F+=(D.booster_consumed_8h_max||0)*(t.pill||0)),(!a||F<a.cost)&&(a={items:b.items,consumables:_,cost:F,skills:L,achievedDamage:D.dmg_8h_max});break}}}if(a){let p=[...a.items];this.characterStateService.unequipMultipleItems(["Ammo","Food","Booster"]),Object.values(a.consumables).forEach(d=>{d&&p.push({slot:d.type,item:d.item,rarity:d.rarity})}),this.characterStateService.equipMultipleItems(p),this.characterStateService.skillLevels.set(a.skills),alert(`Found a build for 8h combat!

- Target Damage: ${e.toLocaleString()}
- Achieved Damage: ${a.achievedDamage.toLocaleString()}
- Total 8h Cost: ${a.cost.toFixed(2)} G

Skills and equipment have been updated.`)}else alert("Could not find an equipment and consumable combination to reach the target 8h damage.");this.isFinding8hCostBuild.set(!1),this.find8hCostBuildProgress.set(null)}async findLowestCostPer1kDmg(){this.isFindingLowestCostPerDmg.set(!0),this.findLowestCostPerDmgProgress.set(0),await new Promise(s=>setTimeout(s,50));let e=this.marketPriceService.goldCosts();if(e.steel===0||e.craft===0){alert("Cannot run optimization because market prices for Steel or Scraps are missing. Please refresh market data."),this.isFindingLowestCostPerDmg.set(!1),this.findLowestCostPerDmgProgress.set(null);return}let t=Ko(this.itemsData,this.itemCraftCosts,e),i=null;for(let s=0;s<t.length;s++){await this.reportProgress(this.findLowestCostPerDmgProgress,s,t.length);let r=t[s],o=tc(r.items,this.characterStateService.equippedItems()),a=this._getOptimalSkillsForEquipment("avg_dmg_max",o),{calculatedStats:l}=this.combatCalculatorService.calculateAllStatsForState(a,o),c=l.cost_per_1k_dmg_max;c>0&&(!i||c<i.costPerDmg)&&(i={items:r.items,costPerDmg:c,skills:a,cost:r.cost,damage:l.avg_dmg_max})}i?(this.characterStateService.equipMultipleItems(i.items),this.characterStateService.skillLevels.set(i.skills),alert(`Found most cost-efficient build!

- Lowest Cost: ${i.costPerDmg.toFixed(2)} G / 1k Damage
- Equipment Cost: ${i.cost.toFixed(2)} G
- Avg Damage/Hit: ${i.damage.toLocaleString(void 0,{maximumFractionDigits:0})}

Skills and equipment have been updated.`)):alert("Could not find an optimal build. Market prices might be missing."),this.isFindingLowestCostPerDmg.set(!1),this.findLowestCostPerDmgProgress.set(null)}};ps.\u0275fac=function(t){return new(t||ps)},ps.\u0275prov=$e({token:ps,factory:ps.\u0275fac,providedIn:"root"});var nc=ps;var ds=class ds{constructor(){this.data=Y(null)}show(e,t){let i=t.getBoundingClientRect();this.data.set({content:e,targetRect:i})}hide(){this.data.set(null)}};ds.\u0275fac=function(t){return new(t||ds)},ds.\u0275prov=$e({token:ds,factory:ds.\u0275fac,providedIn:"root"});var pr=ds;var dr=class dr{constructor(){this.content="";this.elementRef=X(ta);this.tooltipService=X(pr);this.isVisible=!1}onMouseEnter(){this.content&&this.show()}onMouseLeave(){this.hide()}onClick(e){this.content&&(e.stopPropagation(),this.isVisible?this.hide():this.show())}onScroll(){this.isVisible&&this.hide()}show(){this.isVisible=!0,this.tooltipService.show(this.content,this.elementRef.nativeElement)}hide(){this.isVisible=!1,this.tooltipService.data()?.content===this.content&&this.tooltipService.hide()}};dr.\u0275fac=function(t){return new(t||dr)},dr.\u0275dir=yd({type:dr,selectors:[["","appTooltip",""]],hostBindings:function(t,i){t&1&&$("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()})("click",function(r){return i.onClick(r)})("scroll",function(r){return i.onScroll(r)},ri)},inputs:{content:[0,"appTooltip","content"]}});var Ai=dr;var hr=class hr{constructor(){this.sanitizer=X(Jo)}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}};hr.\u0275fac=function(t){return new(t||hr)},hr.\u0275pipe=kd({name:"safeHtml",type:hr,pure:!0});var ft=hr;var Bw=(n,e)=>e._id,Fw=(n,e)=>e.key,Rw=(n,e)=>e.skillName;function Ow(n,e){n&1&&(C(0,"div",7),M(1,"i",29),S())}function $w(n,e){if(n&1&&M(0,"img",32),n&2){let t=g().$implicit;ee("src",t.avatarUrl,kn)}}function Vw(n,e){n&1&&(C(0,"div",33),M(1,"i",37),S())}function Hw(n,e){if(n&1){let t=ce();C(0,"button",31),$("click",function(){let s=R(t).$implicit,r=g(2);return O(r.selectUser(s))}),P(1,$w,1,1,"img",32)(2,Vw,2,0,"div",33),C(3,"div",34)(4,"span",35),v(5),S(),C(6,"span",36),v(7),S()()()}if(n&2){let t=e.$implicit;h(),N(t.avatarUrl?1:2),h(4),te(t.username),h(2),K("Level ",t.leveling.level)}}function qw(n,e){if(n&1&&(C(0,"div",8),me(1,Hw,8,3,"button",30,Bw),S()),n&2){let t=g();h(),fe(t.searchResults())}}function Uw(n,e){n&1&&M(0,"img",38),n&2&&ee("src",e,kn)}function jw(n,e){if(n&1&&(C(0,"div",9),P(1,Uw,1,1,"img",38),C(2,"div",39)(3,"span",40),v(4),S(),C(5,"span",36),v(6),S()()()),n&2){let t,i=g();h(),N((t=i.userAvatar())?1:-1,t),h(3),te(e),h(2),K("Level ",i.playerLevel())}}function zw(n,e){n&1&&M(0,"i",50)}function Ww(n,e){n&1&&M(0,"i",51)}function Gw(n,e){n&1&&M(0,"i",50)}function Xw(n,e){n&1&&M(0,"i",52)}function Yw(n,e){n&1&&M(0,"i",50)}function Qw(n,e){n&1&&M(0,"i",53)}function Zw(n,e){n&1&&M(0,"i",50)}function Jw(n,e){n&1&&M(0,"i",54)}function Kw(n,e){if(n&1){let t=ce();C(0,"div",41),$("click",function(){R(t);let s=g();return O(s.closeOptimizeMenu())}),S(),C(1,"div",42)(2,"div",43)(3,"button",44),$("click",function(){R(t);let s=g();return O(s.runOptimization("burst"))}),M(4,"i",45),C(5,"span"),v(6,"Optimize (Burst Damage)"),S()(),C(7,"button",44),$("click",function(){R(t);let s=g();return O(s.runOptimization("hits"))}),M(8,"i",46),C(9,"span"),v(10,"Optimize (Max Hits)"),S()(),C(11,"button",44),$("click",function(){R(t);let s=g();return O(s.runOptimization("armor"))}),M(12,"i",47),C(13,"span"),v(14,"Optimize (Armor Life)"),S()(),M(15,"div",48),C(16,"button",49),$("click",function(){R(t);let s=g();return O(s.openProfitableBuildModal())}),P(17,zw,1,0,"i",50)(18,Ww,1,0,"i",51),C(19,"span"),v(20,"Find Profitable Build"),S()(),C(21,"button",49),$("click",function(){R(t);let s=g();return O(s.openTargetDamageModal())}),P(22,Gw,1,0,"i",50)(23,Xw,1,0,"i",52),C(24,"span"),v(25,"Find Lowest Cost for Damage"),S()(),C(26,"button",49),$("click",function(){R(t);let s=g();return O(s.openTarget8hDamageModal())}),P(27,Yw,1,0,"i",50)(28,Qw,1,0,"i",53),C(29,"span"),v(30,"Find Lowest Cost for 8h Damage"),S()(),C(31,"button",49),$("click",function(){R(t);let s=g();return O(s.runFindLowestCostPer1kDmg())}),P(32,Zw,1,0,"i",50)(33,Jw,1,0,"i",54),C(34,"span"),v(35,"Find Lowest Cost / 1k Dmg"),S()()()()}if(n&2){let t=g();h(16),ee("disabled",t.isAnyOptimizationRunning()),h(),N(t.isFindingBuild()?17:18),h(4),ee("disabled",t.isAnyOptimizationRunning()),h(),N(t.isFindingCostBuild()?22:23),h(4),ee("disabled",t.isAnyOptimizationRunning()),h(),N(t.isFinding8hCostBuild()?27:28),h(4),ee("disabled",t.isAnyOptimizationRunning()),h(),N(t.isFindingLowestCostPerDmg()?32:33)}}function ey(n,e){if(n&1&&(M(0,"span",59),ve(1,"safeHtml")),n&2){let t=g(2).$implicit,i=g(2);z(i.getStatColor(t)+" flex items-center justify-center"),ee("innerHTML",Ne(1,3,i.icons[t]),Ve)}}function ty(n,e){if(n&1&&M(0,"i"),n&2){let t=g(2).$implicit,i=g(2);z(i.icons[t]+" "+i.getStatColor(t))}}function ny(n,e){if(n&1&&(C(0,"div",55),P(1,ey,2,5,"span",56)(2,ty,1,2,"i",57),C(3,"span",58),v(4),S()()),n&2){let t=e,i=g().$implicit,s=g(2);ee("appTooltip",s.getStatDescription(i)),h(),N(s.isIconSvg(s.icons[i])?1:2),h(3),K(" ",s.formatRange(t.min,t.max)," ")}}function iy(n,e){if(n&1&&P(0,ny,5,3,"div",55),n&2){let t,i=e.$implicit,s=g();N((t=s[i])?0:-1,t)}}function sy(n,e){if(n&1&&(C(0,"div",27),me(1,iy,1,1,null,null,Ke),S()),n&2){let t=g();h(),fe(t.statOrder)}}function ry(n,e){if(n&1&&(C(0,"div",55),M(1,"i"),C(2,"span",58),v(3),S()()),n&2){let t=e.$implicit,i=g(),s=g(),r=t.key+"_min",o=t.key+"_max";ee("appTooltip",t.description),h(),z(t.icon+" "+t.color),h(2),K(" ",s.formatRange(i[r],i[o])," ")}}function oy(n,e){if(n&1&&(C(0,"div",27),me(1,ry,4,4,"div",55,Fw),S()),n&2){let t=g();h(),fe(t.kpiStatOrder)}}function ay(n,e){if(n&1&&(C(0,"span",75),v(1),S()),n&2){let t=g().$implicit;h(),K("(+",t.to-t.from,")")}}function ly(n,e){if(n&1&&(C(0,"span",76),v(1),S()),n&2){let t=g().$implicit;h(),K("(-",t.from-t.to,")")}}function cy(n,e){if(n&1&&(C(0,"div",68)(1,"span",73),v(2),S(),C(3,"span",74),v(4),S(),P(5,ay,2,1,"span",75)(6,ly,2,1,"span",76),S()),n&2){let t=e.$implicit;h(2),te(t.label),h(2),Tn("",t.from," \u2192 ",t.to),h(),N(t.to>t.from?5:6)}}function uy(n,e){if(n&1){let t=ce();C(0,"div",60),$("click",function(){R(t);let s=g();return O(s.cancelOptimization())}),C(1,"div",61),$("click",function(s){return R(t),O(s.stopPropagation())}),C(2,"div",62)(3,"h3",63),v(4),S(),C(5,"button",64),$("click",function(){R(t);let s=g();return O(s.cancelOptimization())}),v(6,"\xD7"),S()(),C(7,"div",65)(8,"p",66),v(9,"The following skill changes are recommended:"),S(),C(10,"div",67),me(11,cy,7,4,"div",68,Rw),S()(),C(13,"div",69)(14,"button",70),$("click",function(){R(t);let s=g();return O(s.cancelOptimization())}),v(15," Cancel "),S(),C(16,"button",71),$("click",function(){R(t);let s=g();return O(s.applyOptimization())}),M(17,"i",72),C(18,"span"),v(19,"Apply Changes"),S()()()()()}if(n&2){let t=e;h(4),te(t.title),h(7),fe(t.changes)}}function py(n,e){n&1&&(C(0,"div",80),M(1,"div",83),S()),n&2&&(h(),Wn("width",e+"%"))}function dy(n,e){n&1&&(C(0,"span"),v(1),ve(2,"number"),S()),n&2&&(h(),K("Searching... (",Ot(2,1,e,"1.0-0"),"%)"))}function hy(n,e){n&1&&(C(0,"span"),v(1,"Searching..."),S())}function my(n,e){if(n&1&&(M(0,"i",84),P(1,dy,3,4,"span")(2,hy,2,0,"span")),n&2){let t,i=g(2);h(),N((t=i.findCostBuildProgress())?1:2,t)}}function fy(n,e){n&1&&(M(0,"i",85),C(1,"span"),v(2,"Find Build"),S())}function gy(n,e){if(n&1){let t=ce();C(0,"div",60),$("click",function(){R(t);let s=g();return O(s.closeTargetDamageModal())}),C(1,"div",61),$("click",function(s){return R(t),O(s.stopPropagation())}),C(2,"div",62)(3,"h3",63),v(4,"Find Lowest Cost Build"),S(),C(5,"button",64),$("click",function(){R(t);let s=g();return O(s.closeTargetDamageModal())}),v(6,"\xD7"),S()(),C(7,"div",65)(8,"div")(9,"label",77),v(10,"Target Burst Damage"),S(),C(11,"input",78),$("input",function(s){R(t);let r=g();return O(r.onTargetDamageChange(s))}),S()(),C(12,"p",79),v(13," Finds the cheapest equipment set to reach the target damage by optimizing combat skills. Uses currently equipped consumables (Food, Ammo, Booster) and bonuses in the calculation. Ignores current equipment and combat skill levels. "),S(),P(14,py,2,2,"div",80),S(),C(15,"div",81)(16,"button",82),$("click",function(){R(t);let s=g();return O(s.runFindLowestCost())}),P(17,my,3,1)(18,fy,3,0),S()()()()}if(n&2){let t,i=g();h(11),ee("value",i.targetDamage()),h(3),N((t=i.isFindingCostBuild()&&i.findCostBuildProgress())?14:-1,t),h(2),ee("disabled",i.isFindingCostBuild()),h(),N(i.isFindingCostBuild()?17:18)}}function vy(n,e){n&1&&(C(0,"div",80),M(1,"div",83),S()),n&2&&(h(),Wn("width",e+"%"))}function _y(n,e){n&1&&(C(0,"span"),v(1),ve(2,"number"),S()),n&2&&(h(),K("Searching... (",Ot(2,1,e,"1.0-0"),"%)"))}function xy(n,e){n&1&&(C(0,"span"),v(1,"Searching..."),S())}function Cy(n,e){if(n&1&&(M(0,"i",84),P(1,_y,3,4,"span")(2,xy,2,0,"span")),n&2){let t,i=g(2);h(),N((t=i.find8hCostBuildProgress())?1:2,t)}}function Sy(n,e){n&1&&(M(0,"i",85),C(1,"span"),v(2,"Find Build"),S())}function Ey(n,e){if(n&1){let t=ce();C(0,"div",60),$("click",function(){R(t);let s=g();return O(s.closeTarget8hDamageModal())}),C(1,"div",61),$("click",function(s){return R(t),O(s.stopPropagation())}),C(2,"div",62)(3,"h3",63),v(4,"Find Lowest Cost Build (8h)"),S(),C(5,"button",64),$("click",function(){R(t);let s=g();return O(s.closeTarget8hDamageModal())}),v(6,"\xD7"),S()(),C(7,"div",65)(8,"div")(9,"label",86),v(10,"Target 8h Damage"),S(),C(11,"input",87),$("input",function(s){R(t);let r=g();return O(r.onTarget8hDamageChange(s))}),S()(),C(12,"p",79),v(13," Finds the cheapest combination of equipment, consumables, and skills to reach the target 8-hour damage. This powerful calculation searches for the optimal gear and consumables to use, including their total cost (wear, ammo, food, boosters) over the 8-hour period. "),S(),P(14,vy,2,2,"div",80),S(),C(15,"div",81)(16,"button",82),$("click",function(){R(t);let s=g();return O(s.runFindLowestCostFor8hDamage())}),P(17,Cy,3,1)(18,Sy,3,0),S()()()()}if(n&2){let t,i=g();h(11),ee("value",i.target8hDamage()),h(3),N((t=i.isFinding8hCostBuild()&&i.find8hCostBuildProgress())?14:-1,t),h(2),ee("disabled",i.isFinding8hCostBuild()),h(),N(i.isFinding8hCostBuild()?17:18)}}function by(n,e){n&1&&(C(0,"div",80),M(1,"div",83),S()),n&2&&(h(),Wn("width",e+"%"))}function wy(n,e){n&1&&(C(0,"span"),v(1),ve(2,"number"),S()),n&2&&(h(),K("Searching... (",Ot(2,1,e,"1.0-0"),"%)"))}function yy(n,e){n&1&&(C(0,"span"),v(1,"Searching..."),S())}function ky(n,e){if(n&1&&(M(0,"i",84),P(1,wy,3,4,"span")(2,yy,2,0,"span")),n&2){let t,i=g(2);h(),N((t=i.findProfitableBuildProgress())?1:2,t)}}function Ty(n,e){n&1&&(M(0,"i",89),C(1,"span"),v(2,"Find Profitable Build"),S())}function Ay(n,e){if(n&1){let t=ce();C(0,"div",60),$("click",function(){R(t);let s=g();return O(s.closeProfitableBuildModal())}),C(1,"div",61),$("click",function(s){return R(t),O(s.stopPropagation())}),C(2,"div",62)(3,"h3",63),v(4,"Find Cheapest Profitable Build"),S(),C(5,"button",64),$("click",function(){R(t);let s=g();return O(s.closeProfitableBuildModal())}),v(6,"\xD7"),S()(),C(7,"div",65)(8,"p",88),v(9," Finds the lowest cost equipment set where the expected gold value of loot per armor-life is greater than the equipment's cost. "),S(),C(10,"p",79),v(11," This is a complex calculation that checks thousands of gear combinations and may take a minute. Uses currently equipped consumables (Food, Ammo, Booster) and bonuses. "),S(),P(12,by,2,2,"div",80),S(),C(13,"div",81)(14,"button",82),$("click",function(){R(t);let s=g();return O(s.runFindProfitableBuild())}),P(15,ky,3,1)(16,Ty,3,0),S()()()()}if(n&2){let t,i=g();h(12),N((t=i.isFindingBuild()&&i.findProfitableBuildProgress())?12:-1,t),h(2),ee("disabled",i.isFindingBuild()),h(),N(i.isFindingBuild()?15:16)}}var mr=class mr{constructor(){this.stateService=X(Re);this.calculatorService=X(Bt);this.optimizationService=X(nc);this.companyService=X(Ud);this.economicPlannerService=X(la);this.gameDataService=X(Tt);this.userDataService=X(qd);this.playerLevel=this.stateService.playerLevel;this.availablePoints=this.stateService.availableSkillPoints;this.totalStats=this.calculatorService.totalStats;this.calculatedStats=this.calculatorService.calculatedStats;this.isFindingBuild=this.optimizationService.isFindingBuild;this.isFindingCostBuild=this.optimizationService.isFindingCostBuild;this.findCostBuildProgress=this.optimizationService.findCostBuildProgress;this.findProfitableBuildProgress=this.optimizationService.findProfitableBuildProgress;this.isFindingLowestCostPerDmg=this.optimizationService.isFindingLowestCostPerDmg;this.findLowestCostPerDmgProgress=this.optimizationService.findLowestCostPerDmgProgress;this.isFinding8hCostBuild=this.optimizationService.isFinding8hCostBuild;this.find8hCostBuildProgress=this.optimizationService.find8hCostBuildProgress;this.userId=this.stateService.userId;this.userName=this.stateService.userName;this.userAvatar=this.stateService.userAvatar;this.isFetchingUser=this.stateService.isFetchingUser;this.searchSubject=new td;this.searchResults=Y([]);this.isSearching=Y(!1);this.searchInput=Y("");this.isAnyOptimizationRunning=qe(()=>this.isFindingBuild()||this.isFindingCostBuild()||this.isFindingLowestCostPerDmg()||this.isFinding8hCostBuild());this.optimizationSuggestion=Y(null);this.statOrder=["attack","precision","critical_chance","critical_damage","armor","dodge","health","loot_chance","hunger"];this.kpiStatOrder=[{key:"burst_damage",label:"Burst Damage",icon:"fa-solid fa-bomb",color:"text-red-500",description:"Total damage dealt before your health runs out (or 5000 hits cap). Ignores time."},{key:"dmg_24h",label:"24h Damage",icon:"fa-solid fa-hourglass-end",color:"text-purple-400",description:"Total damage potential in 24 hours, accounting for health regen and hunger refills."},{key:"armor_life_dmg",label:"Armor Life Damage",icon:"fa-solid fa-shield-heart",color:"text-blue-400",description:"Total damage dealt before your armor breaks (100 hits taken). High dodge increases this."},{key:"cost_per_1k_dmg",label:"Cost / 1k Dmg",icon:"fa-solid fa-coins",color:"text-yellow-400",description:"Gold cost to deal 1,000 damage. Includes equipment wear and consumables."}];this.icons=hn;this.statColors=Ti;this._isOptimizeMenuOpen=Y(!1);this.isOptimizeMenuOpen=this._isOptimizeMenuOpen.asReadonly();this._isTargetDamageModalOpen=Y(!1);this.isTargetDamageModalOpen=this._isTargetDamageModalOpen.asReadonly();this._isTarget8hDamageModalOpen=Y(!1);this.isTarget8hDamageModalOpen=this._isTarget8hDamageModalOpen.asReadonly();this._isProfitableBuildModalOpen=Y(!1);this.isProfitableBuildModalOpen=this._isProfitableBuildModalOpen.asReadonly();this.targetDamage=Y(1e5);this.target8hDamage=Y(1e6);this.formatNumber=xs;this.formatRange=Cs;this.isIconSvg=An;this.searchSubject.pipe(sd(300),rd(),ld(()=>this.isSearching.set(!0)),ad(e=>this.userDataService.searchUsersWithDetails(e))).subscribe({next:e=>{this.searchResults.set(e),this.isSearching.set(!1)},error:e=>{console.error("Search error",e),this.isSearching.set(!1),this.searchResults.set([])}})}ngOnDestroy(){this.searchSubject.complete()}toggleOptimizeMenu(){this._isOptimizeMenuOpen.update(e=>!e)}closeOptimizeMenu(){this._isOptimizeMenuOpen.set(!1)}runOptimization(e){let t,i="";switch(e){case"burst":t=this.optimizationService.optimizeCombatSkillsForBurstDamage(),i="Optimize Skills for Burst Damage";break;case"hits":t=this.optimizationService.optimizeCombatSkillsForMaxHits(),i="Optimize Skills for Max Hits";break;case"armor":t=this.optimizationService.optimizeCombatSkillsForArmorLifeDamage(),i="Optimize Skills for Armor Life Damage";break}let s=this.stateService.skillLevels(),r=[],o=this.gameDataService.getSkills();Object.keys(t).forEach(a=>{let l=s[a]??0,c=t[a];if(l!==c){let p=o.combat[a]||o.economic[a];r.push({skillName:a,label:p.label,from:l,to:c})}}),r.length>0?this.optimizationSuggestion.set({title:i,changes:r,newSkillLevels:t}):alert("No optimization found. Skills might already be optimal for the current gear."),this.closeOptimizeMenu()}applyOptimization(){let e=this.optimizationSuggestion();e&&(this.stateService.skillLevels.set(e.newSkillLevels),this.optimizationSuggestion.set(null))}cancelOptimization(){this.optimizationSuggestion.set(null)}openTargetDamageModal(){this.closeOptimizeMenu(),this._isTargetDamageModalOpen.set(!0)}closeTargetDamageModal(){this._isTargetDamageModalOpen.set(!1)}runFindLowestCost(){this.optimizationService.findLowestCostForDamage(this.targetDamage())}openTarget8hDamageModal(){this.closeOptimizeMenu(),this._isTarget8hDamageModalOpen.set(!0)}closeTarget8hDamageModal(){this._isTarget8hDamageModalOpen.set(!1)}runFindLowestCostFor8hDamage(){this.optimizationService.findLowestCostFor8hDamage(this.target8hDamage())}openProfitableBuildModal(){this.closeOptimizeMenu(),this._isProfitableBuildModalOpen.set(!0)}closeProfitableBuildModal(){this._isProfitableBuildModalOpen.set(!1)}runFindProfitableBuild(){this.optimizationService.findProfitableBuild()}runFindLowestCostPer1kDmg(){this.closeOptimizeMenu(),this.optimizationService.findLowestCostPer1kDmg()}getStatColor(e){return this.statColors[e]||this.statColors.default}getStatDescription(e){let t=this.gameDataService.getSkills();return t.combat[e]?.description||t.economic[e]?.description||""}onLevelChange(e){let t=e.target,i=parseInt(t.value,10)||0;this.stateService.setPlayerLevel(i)}onTargetDamageChange(e){let t=e.target.value;if(t===".")return;let i=parseFloat(t);this.targetDamage.set(isNaN(i)?0:i)}onTarget8hDamageChange(e){let t=e.target.value;if(t===".")return;let i=parseFloat(t);this.target8hDamage.set(isNaN(i)?0:i)}changeLevel(e){this.stateService.setPlayerLevel(this.playerLevel()+e)}onSearchInput(e){let i=e.target.value;this.searchInput.set(i),this.searchSubject.next(i)}selectUser(e){this.stateService.fetchAndApplyUserData(e._id),this.companyService.loadUserCompanies(e._id),this.economicPlannerService.refreshDynamicData(!0),this.searchResults.set([]),this.searchInput.set("")}};mr.\u0275fac=function(t){return new(t||mr)},mr.\u0275cmp=Fe({type:mr,selectors:[["app-player-controls"]],decls:41,vars:20,consts:[[1,"flex","flex-col","gap-4"],[1,"flex","flex-col","gap-4","pb-4","border-b","border-slate-700"],[1,"flex","flex-wrap","items-center","gap-3","bg-slate-900/30","p-2","rounded-lg","border","border-slate-700/50"],[1,"relative","flex","items-center","gap-2","flex-grow","sm:flex-grow-0","min-w-[280px]"],["for","user-search-input",1,"text-xs","font-semibold","text-slate-400","whitespace-nowrap"],[1,"relative","w-full"],["type","text","id","user-search-input","autocomplete","off","placeholder","Search by name...",1,"bg-slate-900","border","border-slate-600","text-white","rounded","px-2","py-1","text-sm","w-full","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500","outline-none","pr-8",3,"input","value"],[1,"absolute","right-2","top-1/2","-translate-y-1/2","text-slate-400"],[1,"absolute","top-full","left-0","right-0","mt-1","bg-slate-800","border","border-slate-600","rounded-lg","shadow-xl","z-50","overflow-hidden","animate-fade-in-short","max-h-60","overflow-y-auto"],[1,"flex","items-center","gap-2","ml-auto","animate-fade-in"],[1,"flex","flex-col","sm:flex-row","flex-wrap","gap-4","items-center","justify-between"],["id","player-level-container",1,"flex","items-center","gap-2"],["for","player-level-input",1,"font-semibold","text-slate-300"],[1,"bg-slate-700","hover:bg-slate-600","disabled:opacity-50","disabled:cursor-not-allowed","text-white","font-bold","w-8","h-8","rounded-full","transition-colors",3,"click","disabled"],["type","number","id","player-level-input","min","0","max","999",1,"bg-slate-900","border","border-slate-600","text-white","rounded-lg","w-20","text-center","font-mono","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none",3,"change","value"],[1,"flex","items-center","gap-2","bg-slate-900/50","border","border-slate-700","px-4","py-2","rounded-full"],[1,"font-semibold","text-slate-400"],[1,"font-mono","font-bold","text-lg"],[1,"flex","items-center","gap-2"],["aria-label","Reset Skills","title","Reset Skills",1,"bg-slate-700","hover:bg-red-600/50","text-red-400","hover:text-white","w-10","h-10","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"fa-solid","fa-trash"],[1,"relative"],["id","optimize-button","aria-label","Open optimization menu",1,"bg-slate-700","hover:bg-indigo-600/50","text-indigo-400","hover:text-white","w-10","h-10","rounded-full","flex","items-center","justify-center","transition-colors",3,"click","appTooltip"],[1,"fa-solid","fa-wand-magic-sparkles"],["aria-label","Show tutorial","title","Show Tutorial",1,"bg-slate-700","hover:bg-blue-600/50","text-blue-400","hover:text-white","w-10","h-10","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"fa-solid","fa-circle-question"],["id","calculated-stats-container",1,"pt-4","space-y-3"],[1,"flex","flex-row","flex-wrap","justify-center","gap-2"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/70","backdrop-blur-sm","animate-fade-in"],[1,"fa-solid","fa-spinner","fa-spin","text-xs"],[1,"w-full","text-left","flex","items-center","gap-3","p-2","hover:bg-slate-700","transition-colors","border-b","border-slate-700/50","last:border-0"],[1,"w-full","text-left","flex","items-center","gap-3","p-2","hover:bg-slate-700","transition-colors","border-b","border-slate-700/50","last:border-0",3,"click"],[1,"w-8","h-8","rounded-full","border","border-slate-500","flex-shrink-0",3,"src"],[1,"w-8","h-8","rounded-full","bg-slate-600","flex","items-center","justify-center","border","border-slate-500","flex-shrink-0"],[1,"flex","flex-col","min-w-0"],[1,"text-sm","font-bold","text-white","truncate"],[1,"text-[10px]","text-indigo-300"],[1,"fa-solid","fa-user","text-xs"],["alt","Avatar",1,"w-8","h-8","rounded-full","border","border-slate-500",3,"src"],[1,"flex","flex-col","leading-tight"],[1,"text-sm","font-bold","text-white"],[1,"fixed","inset-0","z-10",3,"click"],[1,"absolute","right-0","mt-2","w-64","bg-slate-800","border","border-slate-700","rounded-xl","shadow-lg","z-20","animate-scale-in"],[1,"p-1"],[1,"w-full","text-left","p-3","rounded-lg","text-sm","text-slate-300","hover:bg-slate-700","flex","items-center","gap-3",3,"click"],[1,"fa-solid","fa-wand-magic-sparkles","w-4","text-center"],[1,"fa-solid","fa-hand-fist","w-4","text-center"],[1,"fa-solid","fa-shield-heart","w-4","text-center"],[1,"border-t","border-slate-700","my-1"],[1,"w-full","text-left","p-3","rounded-lg","text-sm","text-slate-300","hover:bg-slate-700","flex","items-center","gap-3","disabled:opacity-50","disabled:cursor-wait",3,"click","disabled"],[1,"fa-solid","fa-spinner","fa-spin","w-4","text-center"],[1,"fa-solid","fa-sack-dollar","w-4","text-center"],[1,"fa-solid","fa-dollar-sign","w-4","text-center"],[1,"fa-solid","fa-clock","w-4","text-center"],[1,"fa-solid","fa-hand-holding-dollar","w-4","text-center"],[1,"flex","items-center","gap-2","bg-slate-900/70","border","border-slate-700","rounded-full","px-3","py-1.5","text-sm","cursor-pointer",3,"appTooltip"],[3,"innerHTML","class"],[3,"class"],[1,"value","font-mono","font-semibold","text-white"],[3,"innerHTML"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/70","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-800","border","border-slate-700","rounded-xl","shadow-xl","w-full","max-w-md","flex","flex-col","animate-scale-in",3,"click"],[1,"flex","justify-between","items-center","p-4","border-b","border-slate-700"],[1,"text-lg","font-semibold","text-white"],[1,"text-slate-400","hover:text-white",3,"click"],[1,"p-6","space-y-4"],[1,"text-sm","text-slate-300"],[1,"max-h-60","overflow-y-auto","space-y-2","pr-2","-mr-2"],[1,"grid","grid-cols-[1fr_auto_auto]","items-center","gap-4","bg-slate-900/50","p-2","rounded-md"],[1,"p-4","mt-auto","border-t","border-slate-700","flex","items-center","justify-end","gap-3"],[1,"bg-slate-600","hover:bg-slate-500","text-white","font-semibold","py-2","px-4","rounded-full","transition-colors","text-sm",3,"click"],[1,"bg-indigo-600","hover:bg-indigo-500","text-white","font-semibold","py-2","px-4","rounded-full","transition-colors","flex","items-center","justify-center","gap-2","text-sm",3,"click"],[1,"fa-solid","fa-check"],[1,"font-semibold","text-slate-200"],[1,"font-mono"],[1,"font-mono","text-green-400","font-bold"],[1,"font-mono","text-red-400","font-bold"],["for","target-damage-input",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","number","id","target-damage-input","min","0",1,"bg-slate-900","border","border-slate-600","text-white","rounded-lg","w-full","p-2.5","text-center","font-mono","text-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none",3,"input","value"],[1,"text-xs","text-slate-400","text-center"],[1,"w-full","bg-slate-700","rounded-full","h-2.5"],[1,"p-4","mt-auto","border-t","border-slate-700"],[1,"w-full","bg-indigo-600","hover:bg-indigo-500","disabled:bg-slate-600","disabled:cursor-wait","text-white","font-bold","py-2.5","px-4","rounded-full","transition-colors","flex","items-center","justify-center","gap-3",3,"click","disabled"],[1,"bg-indigo-500","h-2.5","rounded-full","transition-all","duration-300"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"fa-solid","fa-calculator"],["for","target-8h-damage-input",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","number","id","target-8h-damage-input","min","0",1,"bg-slate-900","border","border-slate-600","text-white","rounded-lg","w-full","p-2.5","text-center","font-mono","text-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none",3,"input","value"],[1,"text-sm","text-slate-300","text-center"],[1,"fa-solid","fa-sack-dollar"]],template:function(t,i){if(t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),v(5,"Load Player:"),S(),C(6,"div",5)(7,"input",6),$("input",function(r){return i.onSearchInput(r)}),S(),P(8,Ow,2,0,"div",7),P(9,qw,3,0,"div",8),S()(),P(10,jw,7,3,"div",9),S(),C(11,"div",10)(12,"div",11)(13,"label",12),v(14,"Level"),S(),C(15,"button",13),$("click",function(){return i.changeLevel(-1)}),v(16,"-"),S(),C(17,"input",14),$("change",function(r){return i.onLevelChange(r)}),S(),C(18,"button",13),$("click",function(){return i.changeLevel(1)}),v(19,"+"),S()(),C(20,"div",15)(21,"span",16),v(22,"Skill Points:"),S(),C(23,"span",17),v(24),S()(),C(25,"div",18)(26,"button",19),$("click",function(){return i.stateService.resetSkills()}),M(27,"i",20),S(),C(28,"div",21)(29,"button",22),$("click",function(){return i.toggleOptimizeMenu()}),M(30,"i",23),S(),P(31,Kw,36,8),S(),C(32,"button",24),$("click",function(){return i.stateService.startTutorial()}),M(33,"i",25),S()()()(),C(34,"div",26),P(35,sy,3,0,"div",27),P(36,oy,3,0,"div",27),S()(),P(37,uy,20,1,"div",28),P(38,gy,19,4,"div",28),P(39,Ey,19,4,"div",28),P(40,Ay,17,3,"div",28)),t&2){let s,r,o,a;h(7),ee("value",i.searchInput()),h(),N(i.isSearching()||i.isFetchingUser()?8:-1),h(),N(i.searchResults().length>0?9:-1),h(),N((s=i.userName())?10:-1,s),h(5),ee("disabled",i.playerLevel()<=0),h(2),ee("value",i.playerLevel()),h(),ee("disabled",i.playerLevel()>=999),h(5),Ge("text-white",i.availablePoints()>=0)("text-red-400",i.availablePoints()<0),h(),K(" ",i.availablePoints()," "),h(5),ee("appTooltip","Optimizes combat skills for your current equipment. For best results, make sure your desired Ammo, Booster, and Food are equipped first."),h(2),N(i.isOptimizeMenuOpen()?31:-1),h(4),N((r=i.totalStats())?35:-1,r),h(),N((o=i.calculatedStats())?36:-1,o),h(),N((a=i.optimizationSuggestion())?37:-1,a),h(),N(i.isTargetDamageModalOpen()?38:-1),h(),N(i.isTarget8hDamageModalOpen()?39:-1),h(),N(i.isProfitableBuildModalOpen()?40:-1)}},dependencies:[He,Ai,_s,ft],encapsulation:2,changeDetection:0});var ic=mr;var T0=()=>[];function Dy(n,e){if(n&1&&(M(0,"span",15),ve(1,"safeHtml")),n&2){let t=g(2).$implicit,i=g(2);z(i.getStatColor(t)+" text-lg flex items-center justify-center"),ee("innerHTML",Ne(1,3,i.icons[t]),Ve)}}function Iy(n,e){if(n&1&&M(0,"i",16),n&2){let t=g(2).$implicit,i=g(2);z(i.icons[t]+" "+i.getStatColor(t))}}function Py(n,e){if(n&1){let t=ce();Rt(0)(1),C(2,"div",17),$("click",function(s){R(t);let r=it(0),o=it(1),a=g(2).$implicit,l=g(2);return!o&&l.setSkillLevel(a,r),O(s.stopPropagation())}),S()}if(n&2){let t=e.$index;g();let i=it(0),s=g().$implicit,r=xt(t+1);h();let o=xt(g(2).isSetLevelDisabled(s,r));h(),z(t<i?"bg-indigo-500":"bg-slate-700"),Ge("cursor-pointer",!o)("cursor-not-allowed",o)("opacity-50",o&&t>=i)}}function Ny(n,e){if(n&1){let t=ce();Rt(0),C(1,"div",5)(2,"span",6),v(3),S(),C(4,"div",7)(5,"div",8),P(6,Dy,2,5,"span",9)(7,Iy,1,2,"i",10),C(8,"span",11),v(9),S()(),C(10,"div",12),me(11,Py,3,10,"div",13,Ni),S()(),C(13,"div",8)(14,"button",14),$("click",function(){R(t);let s=g().$implicit,r=g(2);return O(r.changeSkill(s,-1))}),v(15,"-"),S(),C(16,"button",14),$("click",function(){R(t);let s=g().$implicit,r=g(2);return O(r.changeSkill(s,1))}),v(17,"+"),S()()()}if(n&2){let t=e,i=g().$implicit,s=g(2),r=s.statsFromSkills()[i]??0,o=xt(s.skillLevels()[i]??0);h(3),te(r),h(),ee("appTooltip",t.description),h(2),N(s.isIconSvg(s.icons[i])?6:7),h(3),te(t.label),h(2),fe(fn(7,T0).constructor(10)),h(3),ee("disabled",s.isDecrementDisabled(o)),h(2),ee("disabled",s.isIncrementDisabled(o,o+1))}}function Ly(n,e){if(n&1&&P(0,Ny,18,8,"div",5),n&2){let t,i=e.$implicit,s=g();N((t=s.combat[i])?0:-1,t)}}function My(n,e){if(n&1&&(M(0,"span",15),ve(1,"safeHtml")),n&2){let t=g(2).$implicit,i=g(2);z(i.getStatColor(t)+" text-lg flex items-center justify-center"),ee("innerHTML",Ne(1,3,i.icons[t]),Ve)}}function By(n,e){if(n&1&&M(0,"i",16),n&2){let t=g(2).$implicit,i=g(2);z(i.icons[t]+" "+i.getStatColor(t))}}function Fy(n,e){if(n&1){let t=ce();Rt(0)(1),C(2,"div",17),$("click",function(s){R(t);let r=it(0),o=it(1),a=g(2).$implicit,l=g(2);return!o&&l.setSkillLevel(a,r),O(s.stopPropagation())}),S()}if(n&2){let t=e.$index;g();let i=it(0),s=g().$implicit,r=xt(t+1);h();let o=xt(g(2).isSetLevelDisabled(s,r));h(),z(t<i?"bg-amber-500":"bg-slate-700"),Ge("cursor-pointer",!o)("cursor-not-allowed",o)("opacity-50",o&&t>=i)}}function Ry(n,e){if(n&1){let t=ce();Rt(0),C(1,"div",5)(2,"span",6),v(3),S(),C(4,"div",7)(5,"div",8),P(6,My,2,5,"span",9)(7,By,1,2,"i",10),C(8,"span",11),v(9),S()(),C(10,"div",12),me(11,Fy,3,10,"div",13,Ni),S()(),C(13,"div",8)(14,"button",14),$("click",function(){R(t);let s=g().$implicit,r=g(2);return O(r.changeSkill(s,-1))}),v(15,"-"),S(),C(16,"button",14),$("click",function(){R(t);let s=g().$implicit,r=g(2);return O(r.changeSkill(s,1))}),v(17,"+"),S()()()}if(n&2){let t=e,i=g().$implicit,s=g(2),r=s.statsFromSkills()[i]??0,o=xt(s.skillLevels()[i]??0);h(3),te(r),h(),ee("appTooltip",t.description),h(2),N(s.isIconSvg(s.icons[i])?6:7),h(3),te(t.label),h(2),fe(fn(7,T0).constructor(10)),h(3),ee("disabled",s.isDecrementDisabled(o)),h(2),ee("disabled",s.isIncrementDisabled(o,o+1))}}function Oy(n,e){if(n&1&&P(0,Ry,18,8,"div",5),n&2){let t,i=e.$implicit,s=g();N((t=s.economic[i])?0:-1,t)}}function $y(n,e){if(n&1&&(C(0,"div",1)(1,"div")(2,"h3",2),v(3,"Combat Skills"),S(),C(4,"div",3),me(5,Ly,1,1,null,null,Ke),S()(),C(7,"div")(8,"h3",4),v(9,"Economic Skills"),S(),C(10,"div",3),me(11,Oy,1,1,null,null,Ke),S()()()),n&2){let t=g();h(5),fe(t.combatSkillNames),h(6),fe(t.economicSkillNames)}}var fr=class fr{constructor(){this.stateService=X(Re);this.gameDataService=X(Tt);this.skillLevels=this.stateService.skillLevels;this.statsFromSkills=this.stateService.statsFromSkills;this.availablePoints=this.stateService.availableSkillPoints;this.allSkillsData=this.gameDataService.getSkills();this.combatSkillNames=Object.keys(this.allSkillsData.combat);this.economicSkillNames=Object.keys(this.allSkillsData.economic);this.icons=hn;this.statColors=Ti;this.isIconSvg=An}getStatColor(e){return this.statColors[e]||this.statColors.default}changeSkill(e,t){this.stateService.changeSkillLevel(e,t)}setSkillLevel(e,t){let s=(this.skillLevels()[e]??0)===t?0:t;this.stateService.setSkillLevel(e,s)}isSetLevelDisabled(e,t){let i=this.skillLevels()[e]??0;if(t<=i)return!1;let s=i*(i+1)/2,o=t*(t+1)/2-s;return this.availablePoints()<o}isIncrementDisabled(e,t){return e>=10||this.availablePoints()<t}isDecrementDisabled(e){return e<=0}};fr.\u0275fac=function(t){return new(t||fr)},fr.\u0275cmp=Fe({type:fr,selectors:[["app-skills-panel"]],decls:2,vars:1,consts:[[1,"p-4","h-full"],[1,"space-y-6"],[1,"text-lg","font-semibold","text-indigo-400","pb-2","mb-3","border-b","border-slate-700"],[1,"space-y-4"],[1,"text-lg","font-semibold","text-amber-400","pb-2","mb-3","border-b","border-slate-700"],[1,"grid","grid-cols-[auto_1fr_auto]","items-center","gap-x-4","gap-y-1"],[1,"font-mono","font-bold","text-lg","text-white","w-8","text-right"],[1,"cursor-pointer",3,"appTooltip"],[1,"flex","items-center","gap-2"],[3,"innerHTML","class"],[1,"text-lg",3,"class"],[1,"font-semibold"],[1,"flex","items-center","gap-1","mt-1"],[1,"h-1.5","flex-1","rounded-full","transition-colors",3,"class","cursor-pointer","cursor-not-allowed","opacity-50"],[1,"bg-slate-700","hover:bg-slate-600","disabled:opacity-50","disabled:cursor-not-allowed","text-white","font-bold","w-9","h-9","rounded-full","text-lg","transition-colors",3,"click","disabled"],[3,"innerHTML"],[1,"text-lg"],[1,"h-1.5","flex-1","rounded-full","transition-colors",3,"click"]],template:function(t,i){if(t&1&&(C(0,"div",0),P(1,$y,13,0,"div",1),S()),t&2){let s;h(),N((s=i.allSkillsData)?1:-1,s)}},dependencies:[He,Ai,ft],encapsulation:2,changeDetection:0});var sc=fr;var Vy=(n,e)=>e.id;function Hy(n,e){n&1&&(ae(0,"i",15),v(1," Copied! "))}function qy(n,e){n&1&&(ae(0,"i",16),v(1," Share "))}function Uy(n,e){if(n&1){let t=ce();w(0,"button",17),ue("click",function(){R(t);let s=g().$implicit,r=g(2);return O(r.confirmDeleteBuild(s.id))}),ae(1,"i",15),v(2," Confirm "),y()}}function jy(n,e){if(n&1){let t=ce();w(0,"button",18),ue("click",function(){R(t);let s=g().$implicit,r=g(2);return O(r.requestDeleteBuild(s.id))}),ae(1,"i",19),v(2," Delete "),y()}if(n&2){let t=g(3);Ce("disabled",t.buildPendingDeletion()!==null)}}function zy(n,e){if(n&1){let t=ce();w(0,"div",7)(1,"span",8),v(2),y(),w(3,"div",9)(4,"button",10),ue("click",function(){let s=R(t).$implicit,r=g(2);return O(r.shareBuild(s))}),P(5,Hy,2,0)(6,qy,2,0),y(),w(7,"button",11),ue("click",function(){let s=R(t).$implicit,r=g(2);return O(r.loadBuild(s.id))}),ae(8,"i",12),v(9," Load "),y(),P(10,Uy,3,0,"button",13)(11,jy,3,1,"button",14),y()()}if(n&2){let t=e.$implicit,i=g(2);h(2),te(t.name),h(2),z(i.recentlySharedId()===t.id?"bg-green-500 text-white":"bg-teal-600 hover:bg-teal-500 text-white"),Ce("disabled",i.buildPendingDeletion()!==null),h(),N(i.recentlySharedId()===t.id?5:6),h(2),Ce("disabled",i.buildPendingDeletion()!==null),h(3),N(i.buildPendingDeletion()===t.id?10:11)}}function Wy(n,e){if(n&1&&me(0,zy,12,7,"div",7,Vy),n&2){let t=g();fe(t.savedBuilds())}}function Gy(n,e){n&1&&(w(0,"p",6),v(1,"No builds saved yet. Save the current configuration to get started!"),y())}var gr=class gr{constructor(){this.stateService=X(Re);this.calculatorService=X(Bt);this.savedBuilds=this.stateService.savedBuilds;this.newBuildName=Y("");this.buildPendingDeletion=Y(null);this.recentlySharedId=Y(null)}ngOnDestroy(){clearTimeout(this.deleteTimeout),clearTimeout(this.shareTimeout)}onBuildNameChange(e){this.newBuildName.set(e.target.value)}saveBuild(){let e=this.newBuildName().trim();if(e){let t=this.stateService,i=this.calculatorService,s={id:crypto.randomUUID(),name:e,playerLevel:t.playerLevel(),skillLevels:t.skillLevels(),equippedItems:t.equippedItems(),bonusLevels:t.bonusLevels(),isCapitalLinkEnabled:t.isCapitalLinkEnabled(),isSwornEnemyEnabled:t.isSwornEnemyEnabled(),isPatriotEnabled:t.isPatriotEnabled(),isAllianceEnabled:t.isAllianceEnabled(),resistancePercent:t.resistancePercent(),militaryRankBonus:t.militaryRankBonus(),ethicsMilitary:t.ethicsMilitary(),ethicsDiplomacy:t.ethicsDiplomacy(),totalStats:i.totalStats(),calculatedStats:i.calculatedStats(),equipmentCost:i.equipmentCost()};this.stateService.addSavedBuild(s),this.newBuildName.set("")}}loadBuild(e){this.stateService.loadBuildById(e)}shareBuild(e){let t={playerLevel:e.playerLevel,skillLevels:e.skillLevels,equippedItems:e.equippedItems,bonusLevels:e.bonusLevels,isCapitalLinkEnabled:e.isCapitalLinkEnabled,isSwornEnemyEnabled:e.isSwornEnemyEnabled,isPatriotEnabled:e.isPatriotEnabled,isAllianceEnabled:e.isAllianceEnabled,resistancePercent:e.resistancePercent,militaryRankBonus:e.militaryRankBonus??0,ethicsMilitary:e.ethicsMilitary??0,ethicsDiplomacy:e.ethicsDiplomacy??0};try{let i=this.stateService.compressBuildState(t),s=`${window.location.origin}${window.location.pathname}#/share/${i}`;navigator.clipboard.writeText(s).then(()=>{this.recentlySharedId.set(e.id),clearTimeout(this.shareTimeout),this.shareTimeout=setTimeout(()=>this.recentlySharedId.set(null),2e3)})}catch(i){console.error("Failed to create share link",i),alert("Could not create share link.")}}requestDeleteBuild(e){this.buildPendingDeletion.set(e),clearTimeout(this.deleteTimeout),this.deleteTimeout=setTimeout(()=>{this.buildPendingDeletion()===e&&this.buildPendingDeletion.set(null)},3e3)}confirmDeleteBuild(e){clearTimeout(this.deleteTimeout),this.stateService.deleteBuild(e),this.buildPendingDeletion.set(null)}};gr.\u0275fac=function(t){return new(t||gr)},gr.\u0275cmp=Fe({type:gr,selectors:[["app-build-management"]],decls:9,vars:3,consts:[["id","build-management-panel",1,"p-4","flex","flex-col","gap-4"],[1,"flex","flex-wrap","gap-2","items-center"],["type","text","placeholder","Enter build name...",1,"flex-grow","bg-gray-900","border","border-gray-600","text-white","rounded","px-3","py-2","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none",3,"input","keyup.enter","value"],[1,"bg-blue-600","hover:bg-blue-500","disabled:bg-gray-600","disabled:cursor-not-allowed","text-white","font-bold","py-2","px-4","rounded","transition-colors",3,"click","disabled"],[1,"fa-solid","fa-save","mr-2"],[1,"flex","flex-col","gap-2","pt-4","border-t","border-gray-700"],[1,"text-center","text-gray-500","italic"],[1,"bg-gray-900/50","p-3","rounded-md","flex","items-center","justify-between","gap-4","hover:bg-gray-900","transition-colors","flex-wrap"],[1,"font-semibold","text-white"],[1,"flex","items-center","gap-2"],["title","Share this build",1,"font-bold","py-1","px-3","rounded","text-sm","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["title","Load this build",1,"bg-blue-600","hover:bg-blue-500","text-white","font-bold","py-1","px-3","rounded","text-sm","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"fa-solid","fa-upload"],["title","Confirm deletion",1,"bg-yellow-500","hover:bg-yellow-400","text-black","font-bold","py-1","px-3","rounded","text-sm","transition-colors"],["title","Delete this build",1,"bg-red-600","hover:bg-red-500","text-white","font-bold","py-1","px-3","rounded","text-sm","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"fa-solid","fa-check"],[1,"fa-solid","fa-share-nodes"],["title","Confirm deletion",1,"bg-yellow-500","hover:bg-yellow-400","text-black","font-bold","py-1","px-3","rounded","text-sm","transition-colors",3,"click"],["title","Delete this build",1,"bg-red-600","hover:bg-red-500","text-white","font-bold","py-1","px-3","rounded","text-sm","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"fa-solid","fa-trash"]],template:function(t,i){t&1&&(w(0,"div",0)(1,"div",1)(2,"input",2),ue("input",function(r){return i.onBuildNameChange(r)})("keyup.enter",function(){return i.saveBuild()}),y(),w(3,"button",3),ue("click",function(){return i.saveBuild()}),ae(4,"i",4),v(5,"Save Current Build "),y()(),w(6,"div",5),P(7,Wy,2,0)(8,Gy,2,0,"p",6),y()()),t&2&&(h(2),Ce("value",i.newBuildName()),h(),Ce("disabled",!i.newBuildName().trim()),h(4),N(i.savedBuilds().length>0?7:8))},dependencies:[He],encapsulation:2,changeDetection:0});var rc=gr;var Xy=["comparisonChart"],A0=(n,e)=>e.id,Yy=(n,e)=>e.keyMin;function Qy(n,e){n&1&&(w(0,"p",2),v(1,"You need at least two saved builds to use the comparison tool."),y())}function Zy(n,e){if(n&1&&(w(0,"option",7),v(1),y()),n&2){let t=e.$implicit;Ce("value",t.id),h(),te(t.name)}}function Jy(n,e){if(n&1&&(w(0,"option",7),v(1),y()),n&2){let t=e.$implicit;Ce("value",t.id),h(),te(t.name)}}function Ky(n,e){if(n&1&&(ae(0,"span",29),ve(1,"safeHtml")),n&2){let t=g(3).$implicit,i=g(4);z(i.statColors[t]+" flex items-center justify-center"),Ce("innerHTML",Ne(1,3,i.icons[t]),Ve)}}function ek(n,e){if(n&1&&ae(0,"i"),n&2){let t=g(3).$implicit,i=g(4);z(i.icons[t]+" "+i.statColors[t])}}function tk(n,e){if(n&1&&(w(0,"tr",22)(1,"th",23),P(2,Ky,2,5,"span",24)(3,ek,1,2,"i",25),v(4),ve(5,"titlecase"),y(),w(6,"td",26),v(7),y(),w(8,"td",26)(9,"div",27)(10,"span"),v(11),y(),w(12,"span",28),v(13),y()()()()),n&2){let t=e,i=g(),s=g().$implicit,r=g(4);h(2),N(r.isIconSvg(r.icons[s])?2:3),h(2),K(" ",Ne(5,7,s)," "),h(3),te(r.formatRange(i.min,i.max)),h(4),te(r.formatRange(t.min,t.max)),h(),z(r.getDiffClass(s,t.min,i.min)),h(),K("(",r.getDiff(t.min,i.min),")")}}function nk(n,e){if(n&1&&P(0,tk,14,9,"tr",22),n&2){let t,i=g().$implicit,s=g();N((t=s.totalStats[i])?0:-1,t)}}function ik(n,e){if(n&1&&P(0,nk,1,1),n&2){let t,i=e.$implicit,s=g(2);N((t=s.totalStats[i])?0:-1,t)}}function sk(n,e){if(n&1&&(w(0,"tr",22)(1,"th",30),v(2),y(),w(3,"td",26),v(4),y(),w(5,"td",26)(6,"div",27)(7,"span"),v(8),y(),w(9,"span",28),v(10),y()()()()),n&2){let t=g().$implicit,i=g(),s=g(),r=g(2);h(2),te(t.label),h(2),te(r.formatRange(s.calculatedStats[t.keyMin],s.calculatedStats[t.keyMax])),h(4),te(r.formatRange(i.calculatedStats[t.keyMin],i.calculatedStats[t.keyMax])),h(),z(r.getDiffClass(t.keyMin,i.calculatedStats[t.keyMin],s.calculatedStats[t.keyMin])),h(),K(" (",r.getDiff(i.calculatedStats[t.keyMin],s.calculatedStats[t.keyMin]),") ")}}function rk(n,e){if(n&1&&P(0,sk,11,6,"tr",22),n&2){let t=e.$implicit,i=g(),s=g();N(s.calculatedStats[t.keyMin]!==void 0&&i.calculatedStats[t.keyMin]!==void 0?0:-1)}}function ok(n,e){if(n&1&&(w(0,"div",11)(1,"table",12)(2,"thead",13)(3,"tr")(4,"th",14),v(5,"Stat"),y(),w(6,"th",14),v(7),y(),w(8,"th",14),v(9),y()()(),w(10,"tbody",15)(11,"tr",16)(12,"td",17),v(13,"Primary Stats"),y()(),me(14,ik,1,1,null,null,Ke),w(16,"tr",16)(17,"td",18),v(18,"Calculated Stats"),y()(),me(19,rk,1,1,null,null,Yy),y()()(),w(21,"div",19)(22,"h3",20),v(23,"Visual Comparison"),y(),w(24,"div",21),ae(25,"canvas",null,0),y()()),n&2){let t=g(),i=g(2);h(7),te(t.name),h(2),te(e.name),h(5),fe(i.statOrder),h(5),fe(i.calcStatOrder)}}function ak(n,e){n&1&&(w(0,"p",10),v(1,"Please select a second build to compare."),y())}function lk(n,e){if(n&1&&P(0,ok,27,2)(1,ak,2,0,"p",10),n&2){let t,i=g(2);N((t=i.selectedBuild2())?0:i.selectedBuild1()?1:-1,t)}}function ck(n,e){n&1&&(w(0,"p",10),v(1,"Select two builds above to see their comparison."),y())}function uk(n,e){if(n&1){let t=ce();w(0,"div",3)(1,"div")(2,"label",4),v(3,"Compare Build 1:"),y(),w(4,"select",5),ue("change",function(s){R(t);let r=g();return O(r.onSelectionChange(s,1))}),w(5,"option",6),v(6,"Select a build..."),y(),me(7,Zy,2,2,"option",7,A0),y()(),w(9,"div")(10,"label",8),v(11,"With Build 2:"),y(),w(12,"select",9),ue("change",function(s){R(t);let r=g();return O(r.onSelectionChange(s,2))}),w(13,"option",6),v(14,"Select a build..."),y(),me(15,Jy,2,2,"option",7,A0),y()()(),P(17,lk,2,1)(18,ck,2,0,"p",10)}if(n&2){let t,i=g();h(7),fe(i.savedBuilds()),h(8),fe(i.savedBuilds()),h(2),N((t=i.selectedBuild1())?17:18,t)}}var vr=class vr{constructor(){this.stateService=X(Re);this.savedBuilds=this.stateService.savedBuilds;this.selectedBuild1Id=Y(null);this.selectedBuild2Id=Y(null);this.chartCanvas=Ld("comparisonChart");this.chartInstance=null;this.statOrder=["attack","precision","critical_chance","critical_damage","armor","dodge","health","loot_chance","hunger"];this.calcStatOrder=[{keyMin:"avg_dmg_min",keyMax:"avg_dmg_max",label:"Avg Dmg/Hit"},{keyMin:"burst_damage_min",keyMax:"burst_damage_max",label:"Burst Damage"},{keyMin:"burst_cost_min",keyMax:"burst_cost_max",label:"Burst Cost"},{keyMin:"total_hits_burst_min",keyMax:"total_hits_burst_max",label:"Burst Hits"},{keyMin:"cost_per_1k_dmg_min",keyMax:"cost_per_1k_dmg_max",label:"Cost / 1k Dmg"},{keyMin:"dmg_8h_min",keyMax:"dmg_8h_max",label:"Damage/8h"},{keyMin:"total_hits_8h_min",keyMax:"total_hits_8h_max",label:"Hits/8h"},{keyMin:"dmg_24h_min",keyMax:"dmg_24h_max",label:"Damage/24h"},{keyMin:"total_hits_24h_min",keyMax:"total_hits_24h_max",label:"Hits/24h"},{keyMin:"weapon_life_dmg_min",keyMax:"weapon_life_dmg_max",label:"Weapon Life Dmg"},{keyMin:"armor_life_dmg_min",keyMax:"armor_life_dmg_max",label:"Armor Life Dmg"}];this.icons=hn;this.statColors=Ti;this.selectedBuild1=qe(()=>this.savedBuilds().find(e=>e.id===this.selectedBuild1Id())??null);this.selectedBuild2=qe(()=>this.savedBuilds().find(e=>e.id===this.selectedBuild2Id())??null);this.higherIsBetter={avg_dmg:!0,burst_damage:!0,dmg_8h:!0,dmg_24h:!0,weapon_life_dmg:!0,armor_life_dmg:!0,attack:!0,precision:!0,critical_chance:!0,critical_damage:!0,armor:!0,dodge:!0,health:!0,loot_chance:!0,hunger:!0,total_hits_burst:!0,total_hits_8h:!0,total_hits_24h:!0,burst_cost:!1,cost_per_1k_dmg:!1};this.formatNumber=xs;this.formatRange=Cs;this.isIconSvg=An;ia(()=>{let e=this.selectedBuild1(),t=this.selectedBuild2();e&&t?this.updateChart(e,t):this.destroyChart()})}ngOnDestroy(){this.destroyChart()}onSelectionChange(e,t){let i=e.target.value||null;t===1?this.selectedBuild1Id.set(i):this.selectedBuild2Id.set(i)}getDiff(e,t){if(e==="Infinite"||t==="Infinite"||typeof e!="number"||typeof t!="number")return"";let i=e-t;return i===0?"\xB10":`${i>0?"+":""}${this.formatNumber(i)}`}getDiffClass(e,t,i){if(t==="Infinite"||i==="Infinite"||typeof t!="number"||typeof i!="number")return"text-gray-400";let s=e.replace(/_min$|_max$/,""),r=t-i;return r===0?"text-gray-400":this.higherIsBetter[s]?r>0?"text-green-500":"text-red-500":r<0?"text-green-500":"text-red-500"}destroyChart(){this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=null)}updateChart(e,t){let i=this.chartCanvas()?.nativeElement;if(!i)return;this.destroyChart();let s={labels:["Burst Damage","24h Damage","Equipment Cost (G)"],datasets:[{label:e.name,data:[e.calculatedStats.burst_damage_max,e.calculatedStats.dmg_24h_max,e.equipmentCost.total_gold_value],backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1},{label:t.name,data:[t.calculatedStats.burst_damage_max,t.calculatedStats.dmg_24h_max,t.equipmentCost.total_gold_value],backgroundColor:"rgba(234, 179, 8, 0.5)",borderColor:"rgba(234, 179, 8, 1)",borderWidth:1}]};this.chartInstance=new Chart(i,{type:"bar",data:s,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#d1d5db"}},tooltip:{callbacks:{label:function(r){let o=r.dataset.label||"";return o&&(o+=": "),r.parsed.y!==null&&(o+=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(r.parsed.y)),o}}}},scales:{y:{beginAtZero:!0,ticks:{color:"#9ca3af",callback:function(r){return r>=1e6?r/1e6+"M":r>=1e3?r/1e3+"K":r}},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"#9ca3af"},grid:{display:!1}}}}})}};vr.\u0275fac=function(t){return new(t||vr)},vr.\u0275cmp=Fe({type:vr,selectors:[["app-build-comparison"]],viewQuery:function(t,i){t&1&&Td(i.chartCanvas,Xy,5),t&2&&Ad()},decls:3,vars:1,consts:[["comparisonChart",""],[1,"p-4","flex","flex-col","gap-4"],[1,"text-center","text-gray-500","italic"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","build1-select",1,"block","mb-2","text-sm","font-medium","text-gray-300"],["id","build1-select",1,"bg-gray-900","border","border-gray-600","text-white","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"change"],["value",""],[3,"value"],["for","build2-select",1,"block","mb-2","text-sm","font-medium","text-gray-300"],["id","build2-select",1,"bg-gray-900","border","border-gray-600","text-white","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"change"],[1,"text-center","text-gray-500","italic","pt-4"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","text-gray-400"],[1,"text-xs","text-gray-300","uppercase","bg-gray-700/50"],["scope","col",1,"px-4","py-3"],[1,"font-mono"],[1,"bg-gray-900/30"],["colspan","3",1,"px-4","py-2","font-sans","font-bold","text-blue-400"],["colspan","3",1,"px-4","py-2","font-sans","font-bold","text-yellow-400"],[1,"mt-6","pt-4","border-t","border-gray-700"],[1,"text-lg","font-bold","text-white","text-center","mb-4"],[1,"relative","h-96"],[1,"border-b","border-gray-700/50","hover:bg-gray-900/20"],["scope","row",1,"px-4","py-2","font-sans","font-medium","text-gray-300","whitespace-nowrap","flex","items-center","gap-2"],[3,"innerHTML","class"],[3,"class"],[1,"px-4","py-2"],[1,"flex","items-center","gap-2"],[1,"text-xs","font-sans"],[3,"innerHTML"],["scope","row",1,"px-4","py-2","font-sans","font-medium","text-gray-300","whitespace-nowrap"]],template:function(t,i){t&1&&(w(0,"div",1),P(1,Qy,2,0,"p",2)(2,uk,19,1),y()),t&2&&(h(),N(i.savedBuilds().length<2?1:2))},dependencies:[He,ra,ft],encapsulation:2,changeDetection:0});var oc=vr;function pk(n,e){if(n&1){let t=ce();w(0,"button",13),ue("click",function(){R(t);let s=g(2);return O(s.prev())}),v(1,"Prev"),y()}}function dk(n,e){n&1&&(w(0,"span"),v(1,"Finish"),y())}function hk(n,e){n&1&&(w(0,"span"),v(1,"Next"),y())}function mk(n,e){if(n&1&&ae(0,"div",14),n&2){let t=e.$index,i=g(2);z(t===i.currentStepIndex()?"bg-blue-500":"bg-gray-600")}}function fk(n,e){if(n&1){let t=ce();w(0,"div",3)(1,"h3",4),v(2),y(),w(3,"p",5),v(4),y(),w(5,"div",6)(6,"button",7),ue("click",function(){R(t);let s=g();return O(s.skip())}),v(7,"Skip Tour"),y(),w(8,"div",8),P(9,pk,2,0,"button",9),w(10,"button",10),ue("click",function(){R(t);let s=g();return O(s.next())}),P(11,dk,2,0,"span")(12,hk,2,0,"span"),y()()(),w(13,"div",11),me(14,mk,1,2,"div",12,Ke),y()()}if(n&2){let t=e,i=g();kc(i.popoverStyle()),h(2),te(t.title),h(2),te(t.content),h(5),N(i.currentStepIndex()>0?9:-1),h(2),N(i.currentStepIndex()===i.steps.length-1?11:12),h(3),fe(i.steps)}}var _r=class _r{constructor(e,t){this.tutorialFinished=sa();this.tutorialSkipped=sa();this.stepRequiresStateChange=sa();this.economicPlannerService=X(la);this.currentStepIndex=Y(0);this.highlightStyle=Y({});this.popoverStyle=Y({});this.steps=[{title:"Welcome to the Warera Simulator!",content:"This quick tour will walk you through the main features. Let's get started!",popoverPosition:"center",requiredMainTab:"combat"},{elementSelector:"#player-level-container",title:"Set Your Player Level",content:"Start by setting your player level. This determines your total available skill points (4 per level).",popoverPosition:"bottom",requiredMainTab:"combat"},{elementSelector:"#skills-panel",title:"Allocate Skill Points",content:"Spend your points on Combat and Economic skills. The cost to upgrade increases with each level.",popoverPosition:"right",requiredMainTab:"combat",requiredCombatTab:"skills"},{elementSelector:"#equipment-mannequin-container",title:"Equip Your Gear",content:"Click any slot to equip items. Their stats are essential for any strong build.",popoverPosition:"right",requiredMainTab:"combat",requiredCombatTab:"equipment"},{elementSelector:"#quick-set-container",title:"Quick Set Rarity",content:"Quickly equip a full set of armor of a specific rarity to test different gear tiers.",popoverPosition:"bottom",requiredMainTab:"combat",requiredCombatTab:"equipment"},{elementSelector:"#bonuses-panel",title:"Activate Bonuses",content:"These toggles and inputs apply powerful percentage-based damage bonuses to your build.",popoverPosition:"left",requiredMainTab:"combat",requiredCombatTab:"bonuses"},{elementSelector:"#calculated-stats-container",title:"Check Your Calculated Stats",content:"This panel shows the final results of your build, such as damage over various timeframes.",popoverPosition:"top",requiredMainTab:"combat",requiredCombatTab:"equipment"},{elementSelector:"#optimize-button",title:"Optimize Your Build",content:"Automatically allocates your available combat skill points to maximize a chosen stat based on your gear.",popoverPosition:"bottom",requiredMainTab:"combat",requiredCombatTab:"equipment"},{elementSelector:"#builds-management-section",title:"Save & Compare Builds",content:"Save your entire setup and use the comparison tool to analyze differences between builds.",popoverPosition:"left",requiredMainTab:"combat",requiredCombatTab:"builds"},{elementSelector:'[aria-label="Tabs"]',title:"Economy Section",content:"This covers the Combat Simulator. We will now switch to the Economy tab to tour the economic tools.",popoverPosition:"bottom",requiredMainTab:"economy"},{elementSelector:"#my-companies-panel",title:"Manage Your Companies",content:"Here you can create and configure your companies. Assign a product, set the level, and add production bonuses.",popoverPosition:"top",requiredMainTab:"economy",requiredEconomyTab:"companies"},{elementSelector:"#production-summary-panel",title:"Production Summary",content:"This panel shows your total daily profit and suggests the most profitable item for unassigned companies.",popoverPosition:"top",requiredMainTab:"economy",requiredEconomyTab:"companies"},{elementSelector:"#market-watch-sub-tab",title:"Market Watch",content:"Now we'll switch to the 'Market Watch' tab to see market data and analysis tools.",popoverPosition:"bottom",requiredMainTab:"economy",requiredEconomyTab:"market"},{elementSelector:"#market-opportunities-panel",title:"Market Opportunities",content:"Analyze the value of goods in Gold per Production Point (G/PP) to find the best manufacturing opportunities.",popoverPosition:"top",requiredMainTab:"economy",requiredEconomyTab:"market"},{elementSelector:"#region-profitability-panel",title:"Region Profitability Advisor",content:"Find the most profitable regions to set up raw material companies, based on resource bonuses and labor costs.",popoverPosition:"top",requiredMainTab:"economy",requiredEconomyTab:"market"},{title:"You're All Set!",content:"That's it! You've seen the main features for both combat and economy. Feel free to explore and create the ultimate build. You can restart this tutorial anytime using the '?' button.",popoverPosition:"center"}];this.currentStep=Y(this.steps[0]);this.renderer=e,this.el=t,ia(()=>{let i=this.currentStepIndex(),s=this.steps[i];this.currentStep.set(s),s.requiredMainTab&&this.stepRequiresStateChange.emit({mainTab:s.requiredMainTab,combatTab:s.requiredCombatTab}),s.requiredEconomyTab&&this.economicPlannerService.tutorialTabRequest.set(s.requiredEconomyTab),setTimeout(()=>this.updateHighlight(),100)}),this.resizeObserver=new ResizeObserver(()=>{this.updateHighlight()}),this.renderer.addClass(document.body,"overflow-hidden")}ngOnDestroy(){this.resizeObserver.disconnect(),this.renderer.removeClass(document.body,"overflow-hidden"),this.economicPlannerService.tutorialTabRequest.set(null)}updateHighlight(){let e=this.currentStep(),t="0 0 0 9999px rgba(0, 0, 0, 0.7)";if(!e.elementSelector){this.highlightStyle.set({width:"0px",height:"0px",top:"50vh",left:"50vw",borderWidth:"0px",boxShadow:t}),this.popoverStyle.set({top:"50%",left:"50%",transform:"translate(-50%, -50%)"});return}let i=document.querySelector(e.elementSelector);if(i){this.resizeObserver.observe(i),i.scrollIntoView({behavior:"auto",block:"center",inline:"center"});let s=i.getBoundingClientRect(),r=10;this.highlightStyle.set({width:`${s.width+r}px`,height:`${s.height+r}px`,top:`${s.top-r/2}px`,left:`${s.left-r/2}px`,borderWidth:"2px",boxShadow:t}),this.updatePopoverPosition(s,e.popoverPosition)}else this.highlightStyle.set({width:"0px",height:"0px",top:"50vh",left:"50vw",borderWidth:"0px",boxShadow:t}),this.popoverStyle.set({top:"50%",left:"50%",transform:"translate(-50%, -50%)"})}updatePopoverPosition(e,t){let i=this.el.nativeElement.querySelector(".tutorial-popover");if(!i)return;let s=i.getBoundingClientRect(),r=16,o=0,a=0;switch(t){case"top":o=e.top-s.height-r,a=e.left+e.width/2-s.width/2;break;case"bottom":o=e.bottom+r,a=e.left+e.width/2-s.width/2;break;case"left":o=e.top+e.height/2-s.height/2,a=e.left-s.width-r;break;case"right":o=e.top+e.height/2-s.height/2,a=e.right+r;break}o<0&&(o=r),a<0&&(a=r),a+s.width>window.innerWidth&&(a=window.innerWidth-s.width-r),o+s.height>window.innerHeight&&(o=window.innerHeight-s.height-r),t!=="center"&&this.popoverStyle.set({top:`${o}px`,left:`${a}px`})}next(){this.currentStepIndex()<this.steps.length-1?this.currentStepIndex.update(e=>e+1):this.finish()}prev(){this.currentStepIndex()>0&&this.currentStepIndex.update(e=>e-1)}finish(){this.tutorialFinished.emit()}skip(){this.tutorialSkipped.emit()}};_r.\u0275fac=function(t){return new(t||_r)(Ec(wd),Ec(ta))},_r.\u0275cmp=Fe({type:_r,selectors:[["app-tutorial"]],hostBindings:function(t,i){t&1&&$("keydown.arrowright",function(){return i.next()},ri)("keydown.arrowleft",function(){return i.prev()},ri)("keydown.escape",function(){return i.skip()},ri)},outputs:{tutorialFinished:"tutorialFinished",tutorialSkipped:"tutorialSkipped",stepRequiresStateChange:"stepRequiresStateChange"},decls:3,vars:3,consts:[[1,"fixed","inset-0","z-[100]","animate-fade-in","pointer-events-none"],[1,"tutorial-highlight","absolute","border-blue-500","rounded-lg","transition-all","duration-300"],[1,"tutorial-popover","absolute","bg-gray-800","border","border-gray-600","rounded-lg","shadow-xl","w-80","text-white","p-5","animate-scale-in","flex","flex-col","gap-4","pointer-events-auto",3,"style"],[1,"tutorial-popover","absolute","bg-gray-800","border","border-gray-600","rounded-lg","shadow-xl","w-80","text-white","p-5","animate-scale-in","flex","flex-col","gap-4","pointer-events-auto"],[1,"text-lg","font-bold","text-blue-400"],[1,"text-sm","text-gray-300"],[1,"flex","items-center","justify-between","mt-2"],[1,"bg-transparent","hover:bg-gray-700","text-gray-300","font-semibold","py-1.5","px-3","border","border-gray-600","rounded","text-sm","transition-colors",3,"click"],[1,"flex","items-center","gap-2"],[1,"bg-gray-600","hover:bg-gray-500","text-white","font-bold","py-1.5","px-3","rounded","text-sm","transition-colors"],[1,"bg-blue-600","hover:bg-blue-500","text-white","font-bold","py-1.5","px-3","rounded","text-sm","transition-colors",3,"click"],[1,"flex","gap-1.5","justify-center","pt-2","border-t","border-gray-700/50"],[1,"w-2","h-2","rounded-full","transition-colors",3,"class"],[1,"bg-gray-600","hover:bg-gray-500","text-white","font-bold","py-1.5","px-3","rounded","text-sm","transition-colors",3,"click"],[1,"w-2","h-2","rounded-full","transition-colors"]],template:function(t,i){if(t&1&&(w(0,"div",0),ae(1,"div",1),P(2,fk,16,6,"div",2),y()),t&2){let s;h(),kc(i.highlightStyle()),h(),N((s=i.currentStep())?2:-1,s)}},dependencies:[He],encapsulation:2,changeDetection:0});var ac=_r;function gk(n,e){if(n&1&&(w(0,"div"),ae(1,"i"),w(2,"span"),v(3),y()()),n&2){let t=e,i=g();z(i.toastClasses()),Ge("animate-toast-in",t)("animate-toast-out",!t),h(),z(i.toastIcon()),h(2),te(i.toastState().message)}}var xr=class xr{constructor(){this.toastService=X(aa);this.toastState=this.toastService.state;this.toastClasses=qe(()=>{let e=this.toastState();return`fixed top-4 left-1/2 -translate-x-1/2 z-[200] px-6 py-3 rounded-lg shadow-lg text-white font-semibold flex items-center gap-3 ${{success:"bg-green-600 border border-green-500",error:"bg-red-600 border border-red-500",info:"bg-blue-600 border border-blue-500"}[e.type]}`});this.toastIcon=qe(()=>{let e=this.toastState();return{success:"fa-solid fa-check-circle",error:"fa-solid fa-exclamation-circle",info:"fa-solid fa-info-circle"}[e.type]})}};xr.\u0275fac=function(t){return new(t||xr)},xr.\u0275cmp=Fe({type:xr,selectors:[["app-toast"]],decls:1,vars:1,consts:[[3,"class","animate-toast-in","animate-toast-out"]],template:function(t,i){if(t&1&&P(0,gk,4,9,"div",0),t&2){let s;N((s=i.toastState().visible)?0:-1,s)}},dependencies:[He],encapsulation:2,changeDetection:0});var lc=xr;var hs=class hs{constructor(e,t){this.combatCalculatorService=e;this.characterStateService=t;this.combatLog=Y([]);this.bountyRate=Y(0)}clearCombatLog(){this.combatLog.set([])}runBurstSimulation(){this._runSimulation("burst")}run8hSimulation(){this._runSimulation("8h")}_randomizeDamage(e){let t=Math.floor(Math.random()*10),s=1+(Math.random()<.5?1:-1)*t/100;return Math.floor(e*s)}_runSimulation(e){let t=[],i=this.combatCalculatorService.totalStats(),s=this.characterStateService.equippedItems(),r=this.characterStateService.statsFromSkills(),o=(Be,_t)=>i[Be]?.[_t]??0,a=o("attack","max"),l=Math.min(100,o("precision","max")),c=Math.min(100,o("critical_chance","max")),p=1+o("critical_damage","max")/100,d=Math.min(90,o("armor","max"))/100,m=Math.min(90,o("dodge","max")),_=r.health??0,b=_,A=r.hunger??0,L=s.Food,D=L?.item.name,F=L?.item.stats.health?.min??0,W=A,q=!!s.Weapon,ie=q?100:0,de=0,Oe=Object.keys(s).some(Be=>["Helmet","Chest","Pants","Boots","Gloves"].includes(Be)&&s[Be]),Je=Oe?100:0,Zt=0;t.push({type:"event",message:`Starting ${e==="8h"?"8-Hour":"Burst"} Simulation...`,icon:"fa-solid fa-flag-checkered",color:"text-teal-400"});let Me=s.Booster;if(Me){let Be=Me.item.stats.bonus_damage_percent?.max??0;t.push({type:"event",message:`Using 1 ${Me.item.name}, gaining +${Be}% damage.`,icon:"fa-solid fa-pills",color:"text-purple-400"})}if(t.push({type:"event",message:`Base Health: ${_.toFixed(0)} HP`,icon:"fa-solid fa-heart",color:"text-green-500"}),e==="8h"){let Be=_*.1*8;if(b+=Be,t.push({type:"event",message:`Regenerated ${Be.toFixed(0)} HP over 8 hours`,icon:"fa-solid fa-hourglass-half",color:"text-purple-400",healthChange:Be,healthRemaining:b}),A>0&&D){let _t=Math.floor(A*.1*8);W+=_t,t.push({type:"event",message:`Gained ${_t} food charges from 8h regeneration (10% of ${A}/hr).`,icon:"fa-solid fa-utensils",color:"text-yellow-400"})}}t.push({type:"event",message:`Total starting health for simulation: ${b.toFixed(0)} HP`,icon:"fa-solid fa-shield-heart",color:"text-green-400"});let jn=10*(1-d),We=0,gt=0,Ft=!!s.Ammo,vt=0;for(let Be=0;Be<5e3;Be++){if(b<=0){t.push({type:"event",message:"Simulation ended: Health reached 0.",icon:"fa-solid fa-skull",color:"text-red-600"});break}if(b<=10&&W>0&&D){W--;let kt=F;b+=kt,t.push({type:"event",message:`Consumed 1 ${D} to restore ${kt} HP. (${W} remaining)`,icon:"fa-solid fa-utensils",color:"text-yellow-400",healthChange:kt,healthRemaining:b})}gt++,Ft&&vt++;let pt=Math.random()*100<=m,Jt=pt?0:-jn;b+=Jt,b<0&&(b=0),q&&(ie--,ie<=0&&(de++,ie=100,t.push({type:"event",message:`Weapon depleted! Equipping a new one. (${de} used so far)`,icon:"fa-solid fa-gun",color:"text-orange-400"}))),Oe&&!pt&&(Je--,Je<=0&&(Zt++,Je=100,t.push({type:"event",message:`Armor set depleted! Equipping a new one. (${Zt} used so far)`,icon:"fa-solid fa-shield-halved",color:"text-blue-400"})));let we=Math.random()*100<=l,dt="hit",Ae=0,yn=1;if(we){let yr=Math.random()*100<=c,fs=this._randomizeDamage(a);yr?(dt="crit",yn=p,Ae=Math.floor(fs*yn)):(dt="hit",Ae=fs)}else{dt="miss";let kt=this._randomizeDamage(a);Ae=Math.floor(kt*.5)}We+=Ae,t.push({type:"hit",hitNumber:gt,outcome:dt,isDodged:pt,damageBreakdown:{baseDamage:a,critMultiplier:yn,finalDamage:Ae},precisionChance:l,dodgeChance:m,healthChange:Jt,healthRemaining:b,weaponDurability:q?{remaining:ie,depleted:de}:void 0,armorDurability:Oe?{remaining:Je,depleted:Zt}:void 0,cumulativeDamage:We,ammoConsumed:Ft?vt:void 0}),Be===4999&&t.push({type:"event",message:"Simulation ended: Reached max iterations.",icon:"fa-solid fa-stop-circle",color:"text-red-500"})}this.combatLog.set(t)}};hs.\u0275fac=function(t){return new(t||hs)(ye(Bt),ye(Re))},hs.\u0275prov=$e({token:hs,factory:hs.\u0275fac,providedIn:"root"});var cc=hs;function vk(n,e){if(n&1&&(w(0,"span",45),v(1),ve(2,"number"),y()),n&2){let t=g();h(),K(" ",Ot(2,1,t.netProfit/t.totalDamage*1e3,"1.2-2")," G / 1k Dmg ")}}function _k(n,e){if(n&1&&(w(0,"div",16)(1,"h3",19),v(2,"Simulation Summary"),y(),w(3,"div",20)(4,"div")(5,"span",21),v(6,"Total Damage"),y(),w(7,"span",22),v(8),y()(),w(9,"div")(10,"span",21),v(11,"Total Hits"),y(),w(12,"span",23),v(13),y()(),w(14,"div")(15,"span",21),v(16,"Crits / Misses"),y(),w(17,"span",24)(18,"span",25),v(19),y(),v(20," / "),w(21,"span",26),v(22),y()()(),w(23,"div")(24,"span",21),v(25,"Dodges"),y(),w(26,"span",27),v(27),y()()(),w(28,"div",28)(29,"div",29)(30,"span",30),v(31,"Revenue"),y(),w(32,"div",31)(33,"span",32),v(34),ve(35,"number"),y(),w(36,"span",33),v(37),y()(),w(38,"div",31)(39,"span",32),v(40,"Bounty"),y(),w(41,"span",33),v(42),y()(),w(43,"div",34)(44,"span",32),v(45,"Scrap Rec."),y(),w(46,"span",33),v(47),y()(),w(48,"div",35)(49,"span",36),v(50,"Total"),y(),w(51,"span",33),v(52),y()()(),w(53,"div",37)(54,"span",38),v(55,"Costs"),y(),w(56,"div",31)(57,"span",32),v(58,"Equipment"),y(),w(59,"span",39),v(60),y()(),w(61,"div",31)(62,"span",32),v(63,"Consumables"),y(),w(64,"span",39),v(65),y()(),w(66,"div",40)(67,"span",41),v(68,"Total"),y(),w(69,"span",39),v(70),y()()(),w(71,"div",42)(72,"span",43),v(73,"Net Profit"),y(),w(74,"span",44),v(75),y(),P(76,vk,3,4,"span",45),y()(),w(77,"div",46)(78,"span"),ae(79,"i",47),v(80),y(),w(81,"span"),ae(82,"i",48),v(83),ve(84,"number"),y(),w(85,"span"),ae(86,"i",49),v(87),ve(88,"number"),y()()()),n&2){let t=e,i=g(2);h(8),te(i.formatNumber(t.totalDamage)),h(5),te(t.totalHits),h(6),te(t.totalCrits),h(3),te(t.totalMisses),h(5),te(t.totalDodges),h(7),K("Loot (",Ot(35,21,t.totalCases,"1.1-1"),")"),h(3),K("",i.formatNumber(t.totalLootValue)," G"),h(5),K("",i.formatNumber(t.totalBounty)," G"),h(5),K("",i.formatNumber(t.totalRecoveredScrapValue)," G"),h(5),K("",i.formatNumber(t.totalRevenue)," G"),h(8),K("",i.formatNumber(t.equipmentWearCost)," G"),h(5),K("",i.formatNumber(t.consumableCost)," G"),h(5),K("-",i.formatNumber(t.totalCost)," G"),h(4),z(t.netProfit>=0?"text-green-400":"text-red-500"),h(),Tn(" ",t.netProfit>0?"+":"","",i.formatNumber(t.netProfit)," G "),h(),N(t.totalDamage>0?76:-1),h(4),K(" Recovered: ",t.totalRecoveredScrap," Scrap"),h(3),K(" Consumed: ",Ot(84,24,t.consumedSteel,"1.1-1")," Steel"),h(4),K(" Consumed: ",Ot(88,27,t.consumedScrap,"1.1-1")," Scrap")}}function xk(n,e){if(n&1&&(ae(0,"span",59),ve(1,"safeHtml")),n&2){g();let t=it(0);z(t.color+" flex items-center justify-center text-sm"),Ce("innerHTML",Ne(1,3,t.icon),Ve)}}function Ck(n,e){if(n&1&&ae(0,"i"),n&2){g();let t=it(0);z(t.icon+" "+t.color+" text-sm")}}function Sk(n,e){if(n&1&&(w(0,"span",60),v(1),y()),n&2){let t=g();h(),K("(x",t.critMultiplier.toFixed(2),")")}}function Ek(n,e){if(n&1&&(w(0,"span",56),v(1),P(2,Sk,2,1,"span",60),y()),n&2){let t=g(2).$implicit;h(),K(" ",e.finalDamage," Dmg "),h(),N(t.outcome==="crit"?2:-1)}}function bk(n,e){n&1&&(w(0,"span",57),v(1,"DODGED"),y())}function wk(n,e){if(n&1&&(w(0,"span"),v(1),y()),n&2){let t=g(2).$implicit;z((t.healthChange||0)<0?"text-red-400":"text-green-400"),h(),Tn(" ",(t.healthChange||0)>0?"+":"","",t.healthChange," HP ")}}function yk(n,e){if(n&1&&(w(0,"span"),v(1),y()),n&2){let t=g(2).$implicit,i=g(2);h(),K("Total Dmg: ",i.formatNumber(t.cumulativeDamage))}}function kk(n,e){if(n&1&&(Rt(0),w(1,"div",50),P(2,xk,2,5,"span",51)(3,Ck,1,2,"i",52),y(),w(4,"div",53)(5,"div",2)(6,"span",54),v(7),y(),w(8,"span",55),v(9),y(),P(10,Ek,3,2,"span",56),P(11,bk,2,0,"span",57),y(),w(12,"div",58),P(13,wk,2,4,"span",52),w(14,"span"),v(15),ve(16,"number"),y(),P(17,yk,2,1,"span"),y()()),n&2){let t,i=g().$implicit,s=g(2),r=xt(s.getOutcomeStyles(i));h(2),N(s.isIconSvg(r.icon)?2:3),h(5),K("#",i.hitNumber),h(),z(r.color),h(),te(r.label),h(),N((t=i.damageBreakdown)?10:-1,t),h(),N(i.isDodged?11:-1),h(2),N(i.healthChange!==0?13:-1),h(2),K("HP: ",Ot(16,11,i.healthRemaining||0,"1.0-0")),h(2),N(i.cumulativeDamage?17:-1)}}function Tk(n,e){if(n&1&&(ae(0,"span",59),ve(1,"safeHtml")),n&2){let t=g(2).$implicit;z((t.color||"text-slate-400")+" flex items-center justify-center text-sm"),Ce("innerHTML",Ne(1,3,t.icon),Ve)}}function Ak(n,e){if(n&1&&ae(0,"i"),n&2){let t=g(2).$implicit;z((t.icon||"fa-solid fa-info-circle")+" "+(t.color||"text-slate-400")+" text-sm")}}function Dk(n,e){if(n&1&&(w(0,"span",63),v(1),y()),n&2){let t=g(2).$implicit;z(t.healthChange>0?"text-green-400":"text-red-400"),h(),Tn(" ",t.healthChange>0?"+":"","",t.healthChange," HP ")}}function Ik(n,e){if(n&1&&(w(0,"div",50),P(1,Tk,2,5,"span",51)(2,Ak,1,2,"i",52),y(),w(3,"div",61),v(4),P(5,Dk,2,4,"span",62),y()),n&2){let t=g().$implicit,i=g(2);h(),N(t.icon&&i.isIconSvg(t.icon)?1:2),h(3),K(" ",t.message," "),h(),N(t.healthChange?5:-1)}}function Pk(n,e){if(n&1&&(w(0,"div",18),P(1,kk,18,14)(2,Ik,6,3),y()),n&2){let t=e.$implicit;h(),N(t.type==="hit"?1:2)}}function Nk(n,e){if(n&1&&(w(0,"div",14),P(1,_k,89,30,"div",16),w(2,"div",17),me(3,Pk,3,1,"div",18,Ni),y()()),n&2){let t,i=g();h(),N((t=i.logSummary())?1:-1,t),h(2),fe(i.logEntries())}}function Lk(n,e){n&1&&(w(0,"div",15),ae(1,"i",64),w(2,"p"),v(3,"No combat data yet. Run a simulation to see the logs."),y()())}var Cr=class Cr{constructor(){this.simulationService=X(cc);this.marketPriceService=X(oi);this.calculatorService=X(Bt);this.gameDataService=X(Tt);this.characterStateService=X(Re);this.logEntries=this.simulationService.combatLog;this.bountyRate=this.simulationService.bountyRate;this.formatNumber=xs;this.logSummary=qe(()=>{let e=this.logEntries(),t=e.filter(we=>we.type==="hit");if(t.length===0)return null;let i=t[t.length-1],s=t.length,r=t.filter(we=>we.outcome==="crit").length,o=t.filter(we=>we.outcome==="miss").length,a=t.filter(we=>we.isDodged).length,l=i?.cumulativeDamage??0,c=i?.weaponDurability?Math.ceil(s/100):0,p=i?.armorDurability?Math.ceil((s-a)/100):0,d=i?.ammoConsumed??0,m=this.marketPriceService.marketPrices().Case??0,_=this.calculatorService.totalStats().loot_chance?.max??0,b=s*_/100,A=l*625e-7,L=b+A,D=L*m,F=this.bountyRate(),W=l/1e3*F,q=this.gameDataService.getItemCraftCosts(),ie=this.characterStateService.equippedItems(),de=this.marketPriceService.goldCosts(),Oe=s,Je=s-a,Zt=0,Me=0,jn=0,We=0,gt=ie.Weapon;if(gt){let we=q[gt.rarity];if(we){let dt=we.steel,Ae=we.craft,yn=dt*de.steel+Ae*de.craft;Zt+=dt/100*Oe,Me+=Ae/100*Oe,jn+=yn/100*Oe;let kt=Math.floor(Ae/3);We+=Oe/100*kt}}["Helmet","Chest","Pants","Boots","Gloves"].forEach(we=>{let dt=ie[we];if(dt){let Ae=q[dt.rarity];if(Ae){let yn=Ae.steel,kt=Ae.craft,yr=yn*de.steel+kt*de.craft;Zt+=yn/100*Je,Me+=kt/100*Je,jn+=yr/100*Je;let fs=Math.floor(kt/3);We+=Je/100*fs}}});let Ft=We*de.craft,vt=0;if(ie.Ammo){let we=ie.Ammo.item.name;de.ammo[we]&&(vt+=d*de.ammo[we])}ie.Booster&&de.pill&&(vt+=de.pill);let _t=e.filter(we=>we.type==="event"&&we.message?.startsWith("Consumed 1")).length;if(ie.Food){let we=ie.Food.item.name;de.food[we]&&(vt+=_t*de.food[we])}let pt=jn+vt,Jt=W+D+Ft,Di=Jt-pt;return{totalHits:s,totalCrits:r,totalMisses:o,totalDodges:a,totalDamage:l,weaponsUsed:c,armorsUsed:p,totalAmmoUsed:d,totalCases:L,statCases:b,rankCases:A,totalLootValue:D,lootChance:_,totalRecoveredScrap:We.toFixed(2),totalRecoveredScrapValue:Ft,consumedSteel:Zt,consumedScrap:Me,equipmentWearCost:jn,consumableCost:vt,totalCost:pt,totalRevenue:Jt,netProfit:Di,totalBounty:W}});this.isIconSvg=An}onBountyRateChange(e){let t=e.target,i=parseFloat(t.value),s=Math.max(0,Math.min(2,isNaN(i)?0:i));this.simulationService.bountyRate.set(s)}getOutcomeStyles(e){return e.outcome==="crit"?{icon:"fa-solid fa-bolt",color:"text-red-500",label:"CRIT"}:e.outcome==="miss"?{icon:"fa-solid fa-times",color:"text-gray-500",label:"MISS"}:{icon:hn.attack,color:"text-orange-400",label:"HIT"}}runSimulation(e){e==="burst"?this.simulationService.runBurstSimulation():this.simulationService.run8hSimulation()}clearLog(){this.simulationService.clearCombatLog()}};Cr.\u0275fac=function(t){return new(t||Cr)},Cr.\u0275cmp=Fe({type:Cr,selectors:[["app-combat-log"]],decls:20,vars:3,consts:[[1,"p-4","flex","flex-col","gap-4"],[1,"flex","flex-wrap","justify-between","items-center","gap-3","pb-3","border-b","border-gray-700"],[1,"flex","items-center","gap-2"],[1,"bg-indigo-600","hover:bg-indigo-500","text-white","font-bold","py-2","px-4","rounded","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],[1,"fa-solid","fa-bomb"],[1,"bg-purple-600","hover:bg-purple-500","text-white","font-bold","py-2","px-4","rounded","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],[1,"fa-solid","fa-hourglass-half"],[1,"bg-red-600","hover:bg-red-500","text-white","font-bold","py-2","px-3","rounded","transition-colors","flex","items-center","gap-2","text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"fa-solid","fa-trash-can"],[1,"flex","items-center","gap-2","bg-gray-800/50","p-1.5","rounded","border","border-gray-700"],["for","bounty-rate",1,"text-xs","font-semibold","text-gray-400"],[1,"relative"],[1,"fa-solid","fa-coins","absolute","left-2","top-1/2","-translate-y-1/2","text-yellow-500","text-xs"],["id","bounty-rate","type","number","min","0","max","2","step","0.001",1,"bg-gray-900","border","border-gray-600","text-white","text-xs","rounded","pl-6","pr-2","py-1","w-20","outline-none","focus:border-yellow-500",3,"input","value"],[1,"flex","flex-col","gap-4","animate-fade-in"],[1,"text-center","py-12","text-slate-500","italic","bg-slate-800/30","rounded-xl","border","border-slate-700/50"],[1,"bg-slate-800/80","rounded-lg","p-4","border","border-slate-700","text-sm","shadow-sm"],[1,"bg-black/20","rounded-lg","border","border-slate-700/50","flex","flex-col","font-mono","text-xs","max-h-[500px]","overflow-y-auto","pr-1","custom-scrollbar"],[1,"p-2","border-b","border-slate-800/50","flex","items-start","gap-3","hover:bg-white/5","transition-colors"],[1,"text-indigo-400","font-bold","mb-3","uppercase","tracking-wider","text-xs","border-b","border-slate-700/50","pb-1"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-4","mb-4"],[1,"text-slate-500","text-xs","block"],[1,"text-white","font-mono","font-bold","text-lg"],[1,"text-white","font-mono","font-bold"],[1,"text-white","font-mono"],[1,"text-red-400"],[1,"text-gray-400"],[1,"text-blue-400","font-mono"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4","border-t","border-slate-700/50","pt-3"],[1,"bg-green-900/10","p-2","rounded","border","border-green-900/30"],[1,"text-green-500","text-xs","font-bold","block","mb-1"],[1,"flex","justify-between","text-xs","mb-0.5"],[1,"text-slate-400"],[1,"text-green-400","font-mono"],[1,"flex","justify-between","text-xs"],[1,"border-t","border-green-900/30","mt-1","pt-1","flex","justify-between","font-bold"],[1,"text-green-500"],[1,"bg-red-900/10","p-2","rounded","border","border-red-900/30"],[1,"text-red-500","text-xs","font-bold","block","mb-1"],[1,"text-red-400","font-mono"],[1,"border-t","border-red-900/30","mt-auto","pt-1","flex","justify-between","font-bold"],[1,"text-red-500"],[1,"bg-slate-900","p-2","rounded","border","border-slate-700","flex","flex-col","justify-center","items-center"],[1,"text-slate-400","text-xs","font-bold","uppercase","mb-1"],[1,"font-mono","text-xl","font-bold"],[1,"text-[10px]","text-slate-500","mt-1"],[1,"mt-3","text-[10px]","text-slate-500","flex","gap-4","flex-wrap"],[1,"fa-solid","fa-recycle"],[1,"fa-solid","fa-cubes"],[1,"fa-solid","fa-wrench"],[1,"w-6","text-center","flex","justify-center","mt-0.5","shrink-0"],[3,"innerHTML","class"],[3,"class"],[1,"flex-grow"],[1,"text-slate-300","font-bold"],[1,"font-bold"],[1,"text-slate-200"],[1,"bg-blue-900/50","text-blue-300","text-[10px]","px-1","rounded","border","border-blue-800"],[1,"text-slate-500","mt-0.5","flex","flex-wrap","gap-x-3","gap-y-1"],[3,"innerHTML"],[1,"text-[10px]","text-slate-500"],[1,"flex-grow","text-slate-300"],[1,"ml-2","font-bold",3,"class"],[1,"ml-2","font-bold"],[1,"fa-solid","fa-clipboard-list","text-3xl","mb-3","opacity-50"]],template:function(t,i){t&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),ue("click",function(){return i.runSimulation("burst")}),ae(4,"i",4),v(5," Run Burst Sim "),y(),w(6,"button",5),ue("click",function(){return i.runSimulation("8h")}),ae(7,"i",6),v(8," Run 8h Sim "),y(),w(9,"button",7),ue("click",function(){return i.clearLog()}),ae(10,"i",8),v(11," Clear "),y()(),w(12,"div",9)(13,"label",10),v(14,"Bounty / 1k Dmg:"),y(),w(15,"div",11),ae(16,"i",12),w(17,"input",13),ue("input",function(r){return i.onBountyRateChange(r)}),y()()()(),P(18,Nk,5,1,"div",14)(19,Lk,4,0,"div",15),y()),t&2&&(h(9),Ce("disabled",i.logEntries().length===0),h(8),Ce("value",i.bountyRate()),h(),N(i.logEntries().length>0?18:19))},dependencies:[He,_s,ft],encapsulation:2,changeDetection:0});var uc=Cr;var Mk=(n,e)=>e.name;function Bk(n,e){if(n&1&&(C(0,"div",2)(1,"span",27),M(2,"i",28),v(3),S(),C(4,"span",27),M(5,"i",29),v(6),S(),C(7,"span",27),M(8,"i",30),v(9),ve(10,"number"),S()()),n&2){let t=e;h(),ee("appTooltip","Total Steel required to craft current gear"),h(2),K(" ",t.total_steel),h(),ee("appTooltip","Total Scraps (Craft) required to craft current gear"),h(2),K(" ",t.total_craft),h(),ee("appTooltip","Estimated market value of materials"),h(2),K(" ",Ot(10,6,t.total_gold_value,"1.3-3"))}}function Fk(n,e){if(n&1){let t=ce();C(0,"button",31),$("click",function(){let s=R(t).$implicit,r=g();return O(r.setBulkRarity(s))}),v(1),ve(2,"titlecase"),S()}if(n&2){let t=e.$implicit,i=g();z(i.rarityColors[t].border+" "+i.rarityColors[t].text+" hover:bg-white/10"),h(),K(" ",Ne(2,3,t)," ")}}function Rk(n,e){n&1&&M(0,"i",36)}function Ok(n,e){if(n&1){let t=ce();C(0,"button",35),$("click",function(){let s=R(t).$implicit,r=g(2);return O(r.selectSkin(s))}),v(1),ve(2,"titlecase"),P(3,Rk,1,0,"i",36),S()}if(n&2){let t=e.$implicit,i=g(2);Ge("text-indigo-400",i.selectedSkin()===t)("text-gray-300",i.selectedSkin()!==t)("font-bold",i.selectedSkin()===t),h(),K(" ",Ne(2,8,t)," "),h(2),N(i.selectedSkin()===t?3:-1)}}function $k(n,e){if(n&1){let t=ce();C(0,"div",32),$("click",function(){R(t);let s=g();return O(s.closeSkinDropdown())}),S(),C(1,"div",33),me(2,Ok,4,10,"button",34,Ke),S()}if(n&2){let t=g();h(2),fe(t.skins)}}function Vk(n,e){if(n&1&&(M(0,"span",48),ve(1,"safeHtml")),n&2){let t=g(2).$implicit,i=g(3);z(i.getStatColor(t)),ee("innerHTML",Ne(1,3,i.icons[t]),Ve)}}function Hk(n,e){if(n&1&&M(0,"i"),n&2){let t=g(2).$implicit,i=g(3);z(i.icons[t]+" "+i.getStatColor(t))}}function qk(n,e){if(n&1&&v(0),n&2){let t=g(),i=g().$implicit;Tn(" ",t.min,"",i==="bonus_damage_percent"?"%":""," ")}}function Uk(n,e){if(n&1&&v(0),n&2){let t=g();Tn(" ",t.min,"-",t.max," ")}}function jk(n,e){if(n&1&&(C(0,"span",45),P(1,Vk,2,5,"span",46)(2,Hk,1,2,"i",47),C(3,"span"),P(4,qk,1,2)(5,Uk,1,2),S()()),n&2){let t=e,i=g().$implicit,s=g(3);h(),N(s.isIconSvg(s.icons[i])?1:2),h(3),N(t.min===t.max?4:5)}}function zk(n,e){if(n&1&&P(0,jk,6,2,"span",45),n&2){let t,i=e.$implicit,s=g();N((t=s.item.stats[i])?0:-1,t)}}function Wk(n,e){if(n&1){let t=ce();C(0,"div",39),$("click",function(){R(t);let s=g().$implicit,r=g();return O(r.openModal(s.name))}),C(1,"div",40)(2,"img",41),$("error",function(s){let r=R(t),o=g(2);return O(o.handleImageError(s,r.item.name))}),S(),C(3,"div",42)(4,"div",43),me(5,zk,1,1,null,null,Ke),S()()(),C(7,"p",44),v(8),S()()}if(n&2){let t=e,i=g(2);h(),z((i.rarityColors[t.rarity]==null?null:i.rarityColors[t.rarity].border)||"border-slate-600"),Wn("box-shadow",i.getRarityShadow(t.rarity)),h(),ee("src",i.getSkinnedItemImageUrl(t.item.name),kn)("alt",t.item.name),h(3),fe(t.statKeys),h(2),z((i.rarityColors[t.rarity]==null?null:i.rarityColors[t.rarity].text)||"text-gray-400"),h(),te(t.item.name)}}function Gk(n,e){if(n&1){let t=ce();C(0,"div",39),$("click",function(){R(t);let s=g().$implicit,r=g();return O(r.openModal(s.name))}),C(1,"div",49),M(2,"i",50),C(3,"span",51),v(4),S()(),C(5,"p",52),v(6,"\xA0"),S()()}if(n&2){let t=g().$implicit,i=g();h(2),z(i.itemIcons[t.name]||"fa-solid fa-question"),h(2),te(t.name)}}function Xk(n,e){if(n&1&&(C(0,"div",37)(1,"div",25),P(2,Wk,9,9,"div",38)(3,Gk,7,3,"div",38),S()()),n&2){let t,i=e.$implicit,s=g();z(i.classes),h(2),N((t=s.equippedItems()[i.name])?2:3,t)}}function Yk(n,e){if(n&1){let t=ce();C(0,"div",39),$("click",function(){R(t);let s=g().$implicit,r=g();return O(r.openModal(s))}),C(1,"div",40)(2,"img",41),$("error",function(s){let r=R(t),o=g(2);return O(o.handleImageError(s,r.item.name))}),S()(),C(3,"p",44),v(4),S()()}if(n&2){let t=e,i=g(2);h(),z((i.rarityColors[t.rarity]==null?null:i.rarityColors[t.rarity].border)||"border-slate-600"),Wn("box-shadow",i.getRarityShadow(t.rarity)),h(),ee("src",i.getSkinnedItemImageUrl(t.item.name),kn)("alt",t.item.name),h(),z((i.rarityColors[t.rarity]==null?null:i.rarityColors[t.rarity].text)||"text-gray-400"),h(),te(t.item.name)}}function Qk(n,e){if(n&1){let t=ce();C(0,"div",39),$("click",function(){R(t);let s=g().$implicit,r=g();return O(r.openModal(s))}),C(1,"div",49),M(2,"i",50),C(3,"span",51),v(4),S()(),C(5,"p",52),v(6,"\xA0"),S()()}if(n&2){let t=g().$implicit,i=g();h(2),z(i.itemIcons[t]||"fa-solid fa-question"),h(2),te(t)}}function Zk(n,e){if(n&1&&(C(0,"div",25),P(1,Yk,5,9,"div",38)(2,Qk,7,3,"div",38),S()),n&2){let t,i=e.$implicit,s=g();h(),N((t=s.equippedItems()[i])?1:2,t)}}function Jk(n,e){if(n&1&&(M(0,"span",48),ve(1,"safeHtml")),n&2){let t=g(2).$implicit,i=g(5);z(i.getStatColor(t)+" w-4 text-center flex justify-center"),ee("innerHTML",Ne(1,3,i.icons[t]),Ve)}}function Kk(n,e){if(n&1&&M(0,"i",74),n&2){let t=g(2).$implicit,i=g(5);z(i.icons[t]+" "+i.getStatColor(t))}}function eT(n,e){if(n&1&&v(0),n&2){let t=g(),i=g().$implicit;Tn(" ",t.min,"",i==="bonus_damage_percent"?"%":""," ")}}function tT(n,e){if(n&1&&v(0),n&2){let t=g(),i=g().$implicit;Dd(" ",t.min,"-",t.max,"",i==="bonus_damage_percent"?"%":""," ")}}function nT(n,e){if(n&1&&(C(0,"div",11),P(1,Jk,2,5,"span",46)(2,Kk,1,2,"i",72),C(3,"span",73),P(4,eT,1,2)(5,tT,1,3),S()()),n&2){let t=e,i=g().$implicit,s=g(5);h(),N(s.isIconSvg(s.icons[i])?1:2),h(3),N(t.min===t.max?4:5)}}function iT(n,e){if(n&1&&P(0,nT,6,2,"div",11),n&2){let t,i=e.$implicit,s=g();N((t=s.stats[i])?0:-1,t)}}function sT(n,e){n&1&&(C(0,"p",71),v(1,"No stats"),S())}function rT(n,e){if(n&1&&(C(0,"div",75)(1,"span",76),M(2,"i",77),v(3),S(),C(4,"span",78),M(5,"i",79),v(6),S()()),n&2){let t=e;h(),ee("appTooltip","Steel Cost"),h(2),K(" ",t.steel," "),h(),ee("appTooltip","Scrap Cost"),h(2),K(" ",t.craft," ")}}function oT(n,e){if(n&1&&P(0,rT,7,4,"div",75),n&2){let t,i=g(2).$implicit,s=g(3);N((t=s.itemCraftCosts[i])?0:-1,t)}}function aT(n,e){if(n&1&&(C(0,"div",80)(1,"span",81),M(2,"i",82),v(3),ve(4,"number"),S()()),n&2){g();let t=it(0);h(),ee("appTooltip","Gold Cost per item"),h(2),K(" ",Ot(4,2,t,"1.3-3")," ")}}function lT(n,e){if(n&1&&(Rt(0),P(1,aT,5,5,"div",80)),n&2){let t=g(),i=g(3),s=xt(g().getConsumableGoldCost(t,i));h(),N(s>0?1:-1)}}function cT(n,e){if(n&1){let t=ce();C(0,"div",64),$("click",function(){let s=R(t),r=g().$implicit,o=g(2),a=g();return O(a.selectItem(o,s,r))}),C(1,"div",65)(2,"div",66)(3,"img",67),$("error",function(s){let r=R(t),o=g(4);return O(o.handleImageError(s,r.name))}),S()(),C(4,"p",68),v(5),S(),C(6,"p",69),v(7),S(),C(8,"div",70),me(9,iT,1,1,null,null,Ke),P(11,sT,2,0,"p",71),S()(),P(12,oT,1,1)(13,lT,2,2),S()}if(n&2){let t,i,s,r,o=e,a=g().$implicit,l=g(2),c=g();z("hover:"+c.rarityColors[a].border),Ge("border-indigo-500",((t=c.equippedItems()[l])==null?null:t.item.name)===o.name)("shadow-lg",((i=c.equippedItems()[l])==null?null:i.item.name)===o.name)("shadow-indigo-500/20",((s=c.equippedItems()[l])==null?null:s.item.name)===o.name)("border-slate-700",((r=c.equippedItems()[l])==null?null:r.item.name)!==o.name),h(3),ee("src",c.getSkinnedItemImageUrl(o.name),kn)("alt",o.name),h(),z(c.rarityColors[a].text),h(),te(o.name),h(2),K("(",a,")"),h(2),fe(o.statKeys),h(2),N(o.statKeys.length===0?11:-1),h(),N(l!=="Ammo"&&l!=="Booster"&&l!=="Food"?12:13)}}function uT(n,e){if(n&1&&P(0,cT,14,18,"div",63),n&2){let t,i=e.$implicit,s=g();N((t=s[i])?0:-1,t)}}function pT(n,e){if(n&1&&(C(0,"div",59),me(1,uT,1,1,null,null,Ke),S()),n&2){let t=g(2);h(),fe(t.rarities)}}function dT(n,e){n&1&&(C(0,"p",60),v(1,"No items available for this slot."),S())}function hT(n,e){if(n&1){let t=ce();C(0,"div",53),$("click",function(){R(t);let s=g();return O(s.closeModal())}),C(1,"div",54),$("click",function(s){return R(t),O(s.stopPropagation())}),C(2,"div",55)(3,"h3",56),v(4),S(),C(5,"button",57),$("click",function(){R(t);let s=g();return O(s.closeModal())}),v(6,"\xD7"),S()(),C(7,"div",58),P(8,pT,3,0,"div",59)(9,dT,2,0,"p",60),S(),C(10,"div",61)(11,"button",62),$("click",function(){let s=R(t),r=g();return O(r.unequipItem(s))}),v(12,"Unequip Item"),S()()()()}if(n&2){let t,i=e,s=g();h(4),K("Select ",i),h(4),N((t=s.allItemsViewModel()[i.toLowerCase()])?8:9,t)}}var Sr=class Sr{constructor(){this.stateService=X(Re);this.gameDataService=X(Tt);this.calculatorService=X(Bt);this.marketPriceService=X(oi);this.equipmentCost=this.calculatorService.equipmentCost;this.equippedItems=this.stateService.equippedItemsViewModel;this.calculatedStats=this.calculatorService.calculatedStats;this.allItemsViewModel=Y({});this.itemCraftCosts=this.gameDataService.getItemCraftCosts();this.goldCosts=this.marketPriceService.goldCosts;this.mannequinSlots=[{name:"Helmet",classes:"top-[-10px] left-1/2 -translate-x-1/2"},{name:"Chest",classes:"top-[80px] left-1/2 -translate-x-1/2"},{name:"Pants",classes:"top-[170px] left-1/2 -translate-x-1/2"},{name:"Boots",classes:"top-[270px] left-1/2 -translate-x-1/2"},{name:"Gloves",classes:"top-[80px] left-[-40px]"},{name:"Weapon",classes:"top-[80px] right-[-40px]"}];this.consumableSlots=["Ammo","Booster","Food"];this.armorSlots=["Weapon","Helmet","Chest","Pants","Boots","Gloves"];this.rarities=["common","uncommon","rare","epic","legendary","mythic"];this.icons=hn;this.itemIcons=w0;this.rarityColors=y0;this.statColors=Ti;this.formatRange=Cs;this.getItemImageUrl=oa;this.rarityGlowColors={common:"rgba(107, 114, 128, 0.7)",uncommon:"rgba(22, 163, 74, 0.7)",rare:"rgba(59, 130, 246, 0.7)",epic:"rgba(147, 51, 234, 0.7)",legendary:"rgba(234, 179, 8, 0.7)",mythic:"rgba(220, 38, 38, 0.8)"};this.isModalOpen=Y(!1);this.selectedSlot=Y(null);this.activeTooltip=Y(null);this.skins=["normal","valentine","valentine2","medieval"];this.selectedSkin=Y("normal");this.isSkinDropdownOpen=Y(!1);this.isIconSvg=An;let e=this.gameDataService.getItems(),t={};for(let i in e){t[i]={};let s=e[i];for(let r in s){let o=s[r];t[i][r]=De(k({},o),{statKeys:o.stats?Object.keys(o.stats):[]})}}this.allItemsViewModel.set(t)}getRarityShadow(e){let t=this.rarityGlowColors[e];return t?`0 0 15px -3px ${t}`:"none"}toggleTooltip(e){this.activeTooltip.update(t=>t===e?null:e)}openModal(e){this.selectedSlot.set(e),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.selectedSlot.set(null),this.activeTooltip.set(null)}selectItem(e,t,i){this.stateService.equipItem(e,t,i),this.closeModal()}unequipItem(e){this.stateService.equipItem(e,null,null),this.closeModal()}getStatColor(e){return this.statColors[e]||this.statColors.default}getConsumableGoldCost(e,t){let i=this.goldCosts();return t==="Food"?i.food[e.name]??0:t==="Ammo"?i.ammo[e.name]??0:t==="Booster"?i.pill??0:0}setBulkRarity(e){let t=[],i=this.allItemsViewModel();for(let s of this.armorSlots){let r=s.toLowerCase(),o=i[r]?.[e];o&&t.push({slot:s,item:o,rarity:e})}t.length>0&&this.stateService.equipMultipleItems(t)}unequipBulk(){this.stateService.unequipMultipleItems(this.armorSlots)}toggleSkinDropdown(){this.isSkinDropdownOpen.update(e=>!e)}closeSkinDropdown(){this.isSkinDropdownOpen.set(!1)}selectSkin(e){this.selectedSkin.set(e),this.closeSkinDropdown()}getSkinnedItemImageUrl(e){let t=this.selectedSkin();if(t==="normal")return oa(e);let i=e.toLowerCase();if(t==="valentine2"){if(i.includes("pants"))return"https://app.warera.io/images/skins/valentinePants2.png";if(i==="knife")return"https://app.warera.io/images/skins/valentineLollipop.png";t="valentine"}if(t==="valentine"){if(i.includes("helmet"))return"https://app.warera.io/images/skins/valentineCatEars.png";if(i==="jet")return"https://app.warera.io/images/skins/valentinePaperJet.png"}if(t==="medieval"){if(i==="gun")return"https://app.warera.io/images/skins/medievalSpear.png";if(i==="rifle")return"https://app.warera.io/images/skins/medievalSword.png";if(i==="sniper")return"https://app.warera.io/images/skins/medievalCrossbow.png";if(i==="tank")return"https://app.warera.io/images/skins/medievalCatapult.png";if(i==="jet")return"https://app.warera.io/images/skins/medievalTrebuchet.png"}let s=["helmet","chest","pants","boots","gloves"];for(let a of s)if(i.includes(a)){let l=a.charAt(0).toUpperCase()+a.slice(1);return`https://app.warera.io/images/skins/${t}${l}.png`}let o=e.split(/[\s-]+/).map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join("");return`https://app.warera.io/images/skins/${t}${o}.png`}handleImageError(e,t){let i=e.target,s=oa(t);i.src!==s&&(i.src=s)}};Sr.\u0275fac=function(t){return new(t||Sr)},Sr.\u0275cmp=Fe({type:Sr,selectors:[["app-equipment-panel"]],decls:37,vars:9,consts:[[1,"p-4"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-3","pb-3","mb-4","border-b","border-slate-700"],[1,"flex","items-center","flex-wrap","justify-center","gap-4","text-sm","font-mono","bg-slate-900","border","border-slate-700","px-3","py-1.5","rounded-full"],[1,"mb-4","flex","flex-col","gap-3"],["id","quick-set-container"],[1,"text-sm","font-semibold","text-gray-400","mb-2","px-2"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","text-xs","font-bold","rounded-full","border-2","transition-transform","hover:scale-105",3,"class"],[1,"w-8","h-8","text-xs","font-bold","rounded-full","border-2","border-red-500","text-red-500","hover:bg-red-500/20","transition-transform","hover:scale-105","flex","items-center","justify-center",3,"click","appTooltip"],[1,"fa-solid","fa-trash-can"],[1,"flex","items-center","flex-wrap","gap-2","px-2"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-semibold","text-gray-400"],[1,"relative"],[1,"bg-slate-800","border","border-slate-600","text-white","text-xs","rounded","px-3","py-1.5","focus:ring-1","focus:ring-indigo-500","outline-none","flex","items-center","gap-2","min-w-[120px]","justify-between","hover:bg-slate-700","transition-colors",3,"click"],[1,"fa-solid","fa-chevron-down","text-[10px]","transition-transform","duration-200"],["href","https://app.warera.io/shop/packs","target","_blank","title","Buy skins in the shop",1,"ml-auto","sm:ml-2","text-xs","bg-slate-800","hover:bg-slate-700","text-indigo-400","border","border-slate-600","px-2","py-1","rounded","flex","items-center","gap-1","transition-colors","no-underline"],[1,"fa-solid","fa-cart-shopping"],["id","equipment-mannequin-container",1,"mt-6"],[1,"relative","w-full","max-w-xs","mx-auto","h-[320px]"],[1,"absolute","inset-0","flex","items-center","justify-center","pointer-events-none"],["fill","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-32","h-full","text-slate-700/50"],["d","M12,2A2,2 0 0,1 14,4A2,2 0 0,1 12,6A2,2 0 0,1 10,4A2,2 0 0,1 12,2M16.5,8C15,8 15,7 15,7L14,7.25C14,7.25 14,8.25 14,9.5C14,10.75 13.75,11 13.75,11L14.5,13.5L13,12.5L12,15L11,12.5L9.5,13.5L10.25,11C10.25,11 10,10.75 10,9.5C10,8.25 10,7.25 10,7.25L9,7C9,7 9,8 7.5,8C6,8 6,7 6,7H5V11L6,12V22H8V16H9V14H15V16H16V22H18V12L19,11V7H18S18,8 16.5,8Z"],[1,"absolute",3,"class"],[1,"flex","items-center","justify-center","gap-3","mt-6","pt-4","border-t","border-slate-700"],[1,"relative","text-center"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/70","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in"],[1,"flex","items-center","gap-2","cursor-pointer",3,"appTooltip"],[1,"fa-solid","fa-cubes","text-gray-400"],[1,"fa-solid","fa-wrench","text-blue-400"],[1,"fa-solid","fa-coins","text-yellow-400"],[1,"px-3","py-1","text-xs","font-bold","rounded-full","border-2","transition-transform","hover:scale-105",3,"click"],[1,"fixed","inset-0","z-10",3,"click"],[1,"absolute","top-full","left-0","mt-1","w-full","bg-slate-800","border","border-slate-600","rounded-lg","shadow-xl","z-20","overflow-hidden","animate-fade-in-short","flex","flex-col"],[1,"text-left","px-3","py-2","text-xs","hover:bg-slate-700","transition-colors","capitalize","flex","items-center","justify-between","group","w-full",3,"text-indigo-400","text-gray-300","font-bold"],[1,"text-left","px-3","py-2","text-xs","hover:bg-slate-700","transition-colors","capitalize","flex","items-center","justify-between","group","w-full",3,"click"],[1,"fa-solid","fa-check"],[1,"absolute"],[1,"cursor-pointer","group","w-[72px]"],[1,"cursor-pointer","group","w-[72px]",3,"click"],[1,"relative","h-[72px]","mx-auto","bg-slate-900/70","backdrop-blur-sm","border-2","rounded-xl","transition-all","shadow-lg","overflow-hidden"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","w-12","h-12","object-contain","filter","drop-shadow-md",3,"error","src","alt"],[1,"absolute","bottom-0","left-0","right-0","p-1","bg-black/60","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"flex","justify-center","items-center","flex-wrap","gap-x-1.5"],[1,"text-xs","mt-1","font-semibold","truncate"],[1,"flex","items-center","gap-1","text-white","font-mono","text-[10px]","leading-none"],[3,"innerHTML","class"],[3,"class"],[3,"innerHTML"],[1,"h-[72px]","bg-slate-800/50","border-2","border-dashed","border-slate-600","group-hover:border-slate-500","group-hover:bg-slate-700/50","rounded-xl","transition-all","flex","flex-col","items-center","justify-center","gap-1"],[1,"text-2xl","text-slate-600","group-hover:text-slate-500","transition-colors"],[1,"text-[11px]","text-slate-500","group-hover:text-slate-400","font-semibold"],[1,"text-xs","mt-1","font-semibold","h-[18px]"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/70","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in",3,"click"],[1,"bg-slate-800","border","border-slate-700","rounded-xl","shadow-xl","w-full","max-w-2xl","max-h-[80vh]","flex","flex-col","transition-transform","duration-300","animate-scale-in",3,"click"],[1,"flex","justify-between","items-center","p-4","border-b","border-slate-700"],[1,"text-lg","font-semibold","text-white"],[1,"text-slate-400","hover:text-white","text-2xl","leading-none",3,"click"],[1,"p-4","overflow-y-auto","overflow-x-hidden"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","gap-4"],[1,"text-center","text-slate-500"],[1,"p-4","mt-auto","border-t","border-slate-700"],[1,"w-full","bg-red-600","hover:bg-red-500","text-white","font-bold","py-2","px-4","rounded-full","transition-colors",3,"click"],[1,"bg-slate-900/50","p-3","rounded-xl","border-2","hover:scale-105","transition-all","cursor-pointer","flex","flex-col",3,"class","border-indigo-500","shadow-lg","shadow-indigo-500/20","border-slate-700"],[1,"bg-slate-900/50","p-3","rounded-xl","border-2","hover:scale-105","transition-all","cursor-pointer","flex","flex-col",3,"click"],[1,"flex-grow"],[1,"flex","justify-center","mb-2"],[1,"w-12","h-12","object-contain",3,"error","src","alt"],[1,"font-semibold","text-sm","text-center","mb-1"],[1,"text-xs","text-slate-500","capitalize","mb-2","text-center"],[1,"text-xs","space-y-1"],[1,"text-slate-500","italic","text-center"],[1,"w-4","text-center",3,"class"],[1,"font-mono"],[1,"w-4","text-center"],[1,"mt-2","pt-2","border-t","border-slate-700/50","flex","justify-end","items-center","gap-4","text-xs","font-mono"],[1,"flex","items-center","gap-1.5","text-slate-400",3,"appTooltip"],[1,"fa-solid","fa-cubes"],[1,"flex","items-center","gap-1.5","text-blue-400",3,"appTooltip"],[1,"fa-solid","fa-wrench"],[1,"mt-2","pt-2","border-t","border-slate-700/50","flex","justify-end","items-center","gap-2","text-xs","font-mono"],[1,"flex","items-center","gap-1.5","text-yellow-400",3,"appTooltip"],[1,"fa-solid","fa-coins"]],template:function(t,i){if(t&1&&(C(0,"div",0)(1,"div",1),P(2,Bk,11,9,"div",2),S(),C(3,"div",3)(4,"div",4)(5,"h3",5),v(6,"Quick Set Rarity"),S(),C(7,"div",6),me(8,Fk,3,5,"button",7,Ke),C(10,"button",8),$("click",function(){return i.unequipBulk()}),M(11,"i",9),S()()(),C(12,"div",10)(13,"div",11)(14,"label",12),v(15,"Item Skins:"),S(),C(16,"div",13)(17,"button",14),$("click",function(){return i.toggleSkinDropdown()}),C(18,"span"),v(19),ve(20,"titlecase"),S(),M(21,"i",15),S(),P(22,$k,4,0),S()(),C(23,"a",16),M(24,"i",17),v(25," Get Skins "),S()()(),C(26,"div",18)(27,"div",19)(28,"div",20),ud(),C(29,"svg",21),M(30,"path",22),S()(),me(31,Xk,4,3,"div",23,Mk),S(),pd(),C(33,"div",24),me(34,Zk,3,1,"div",25,Ke),S()()(),P(36,hT,13,2,"div",26)),t&2){let s,r;h(2),N((s=i.equipmentCost())?2:-1,s),h(6),fe(i.rarities),h(2),ee("appTooltip","Unequip All Armor"),h(9),te(Ne(20,7,i.selectedSkin())),h(2),Ge("rotate-180",i.isSkinDropdownOpen()),h(),N(i.isSkinDropdownOpen()?22:-1),h(9),fe(i.mannequinSlots),h(3),fe(i.consumableSlots),h(2),N((r=i.isModalOpen()&&i.selectedSlot())?36:-1,r)}},dependencies:[He,Ai,_s,ra,ft],encapsulation:2,changeDetection:0});var pc=Sr;var mT=()=>[];function fT(n,e){if(n&1&&ae(0,"img",25),n&2){let t=g(3);Ce("src",t.getCountryFlagUrl(),kn)}}function gT(n,e){if(n&1&&ae(0,"img",31),n&2){g();let t=it(0);Ce("src",t,kn)}}function vT(n,e){if(n&1&&ae(0,"span",32),n&2){g();let t=it(0);Ce("innerHTML",t,Ve)}}function _T(n,e){if(n&1&&(Rt(0),P(1,gT,1,1,"img",31)(2,vT,1,1,"span",32)),n&2){let t=xt(g(3).getMuImage());h(),N(typeof t=="string"?1:2)}}function xT(n,e){if(n&1&&ae(0,"span",32),n&2){g();let t=it(0);Ce("innerHTML",t,Ve)}}function CT(n,e){if(n&1&&ae(0,"i",34),n&2){let t=g(2);z(t.icon)}}function ST(n,e){if(n&1&&(Rt(0),P(1,xT,1,1,"span",32)(2,CT,1,2,"i",33)),n&2){let t=g(2).$implicit,i=g();xt(i.getIconContent(t)),h(),N(i.getIconType(t)==="svg"?1:2)}}function ET(n,e){if(n&1){let t=ce();w(0,"div",35),ue("click",function(){let s=R(t).$index,r=g(2).$implicit,o=g();return O(o.setBonusLevel(r,s+1))}),y()}if(n&2){let t=e.$index;g();let i=it(0);z(t<i?"bg-indigo-500":"bg-slate-700")}}function bT(n,e){if(n&1){let t=ce();Rt(0),w(1,"div",22)(2,"div",23)(3,"div",24),P(4,fT,1,1,"img",25)(5,_T,3,2)(6,ST,3,2),w(7,"span",26),v(8),y()(),w(9,"div",27),me(10,ET,1,2,"div",28,Ni),y()(),w(12,"div",29)(13,"button",30),ue("click",function(){R(t);let s=g().$implicit,r=g();return O(r.changeBonusLevel(s,-1))}),v(14,"-"),y(),w(15,"button",30),ue("click",function(){R(t);let s=g().$implicit,r=g();return O(r.changeBonusLevel(s,1))}),v(16,"+"),y()()()}if(n&2){let t=e,i=g().$implicit,s=xt(g().bonusLevels()[i]??0);h(2),Ce("title",t.description),h(2),N(i==="country_order"?4:i==="mu_order"?5:6),h(4),te(t.label),h(2),fe(fn(6,mT).constructor(t.max_level)),h(3),Ce("disabled",s<=0),h(2),Ce("disabled",s>=t.max_level)}}function wT(n,e){if(n&1&&P(0,bT,17,7,"div",22),n&2){let t,i=e.$implicit,s=g();N((t=s.allBonusesData[i])?0:-1,t)}}function yT(n,e){n&1&&v(0," +15% Def. Bonus ")}function kT(n,e){n&1&&v(0," +5% Def. Bonus ")}function TT(n,e){n&1&&v(0," +5% Atk. Bonus ")}function AT(n,e){n&1&&v(0," +15% Atk. Bonus ")}function DT(n,e){n&1&&v(0," +15% vs Sworn Enemies (Req. Toggle) ")}function IT(n,e){n&1&&v(0," +5% vs Sworn Enemies (Req. Toggle) ")}function PT(n,e){n&1&&v(0," +5% with Allies (Req. Toggle) ")}function NT(n,e){n&1&&v(0," +15% with Allies (Req. Toggle) ")}var Er=class Er{constructor(){this.stateService=X(Re);this.gameDataService=X(Tt);this.sanitizer=X(Jo);this.allBonusesData=this.gameDataService.getBonuses();this.bonusNames=Object.keys(this.allBonusesData);this.bonusLevels=this.stateService.bonusLevels;this.isCapitalLinkEnabled=this.stateService.isCapitalLinkEnabled;this.isSwornEnemyEnabled=this.stateService.isSwornEnemyEnabled;this.isPatriotEnabled=this.stateService.isPatriotEnabled;this.isAllianceEnabled=this.stateService.isAllianceEnabled;this.resistancePercent=this.stateService.resistancePercent;this.militaryRankBonus=this.stateService.militaryRankBonus;this.ethicsMilitary=this.stateService.ethicsMilitary;this.ethicsDiplomacy=this.stateService.ethicsDiplomacy;this.ethicsIcon=hn.political_ethics}changeBonusLevel(e,t){this.stateService.changeBonusLevel(e,t)}setBonusLevel(e,t){let s=(this.bonusLevels()[e]??0)===t?0:t;this.stateService.setBonusLevel(e,s)}onResistanceChange(e){let t=parseFloat(e.target.value);this.stateService.setResistance(isNaN(t)?0:t)}onMilitaryRankChange(e){let t=parseFloat(e.target.value);this.stateService.setMilitaryRankBonus(isNaN(t)?0:t)}setMilitaryEthic(e){this.stateService.setEthicsMilitary(e)}setDiplomacyEthic(e){this.stateService.setEthicsDiplomacy(e)}getIconType(e){return e==="country_order"||e==="mu_order"?"image":ur[e]||ur[this.allBonusesData[e]?.icon]?"svg":"font"}getIconContent(e){if(e==="country_order")return this.getCountryFlagUrl();if(e==="mu_order")return this.getMuImage();let t=this.allBonusesData[e]?.icon||e;return ur[t]?this.sanitizer.bypassSecurityTrustHtml(ur[t]):this.allBonusesData[e]?.icon||"fa-solid fa-question"}getCountryFlagUrl(){let e=this.stateService.userCountryCode();return e?`https://app.warera.io/images/flags/${e}.svg`:"https://app.warera.io/images/flags/fr.svg"}getMuImage(){let e=this.stateService.userMuAvatar();return e||this.sanitizer.bypassSecurityTrustHtml(ur.mu_order_default)}};Er.\u0275fac=function(t){return new(t||Er)},Er.\u0275cmp=Fe({type:Er,selectors:[["app-bonuses-panel"]],decls:95,vars:31,consts:[["id","bonuses-panel",1,"p-4","h-full"],[1,"space-y-5"],[1,"pt-4","border-t","border-slate-700/50","space-y-4"],[1,"text-lg","font-semibold","text-white","flex","items-center","gap-2"],[1,"text-indigo-400","text-xl","w-6","flex","justify-center",3,"innerHTML"],[1,"space-y-2"],[1,"flex","justify-between","items-center","text-xs","font-semibold","text-slate-400"],[1,"flex","gap-1"],[1,"flex-1","py-2","rounded","text-[10px]","sm:text-xs","font-bold","transition-colors","border","border-slate-600",3,"click"],[1,"text-center","text-xs","h-4","font-mono","font-bold","text-white"],[1,"flex","items-center","justify-between","cursor-pointer"],[1,"font-semibold","text-slate-300"],[1,"text-slate-400","text-sm"],[1,"relative","inline-flex","items-center"],["type","checkbox",1,"sr-only","peer",3,"change","checked"],[1,"w-11","h-6","bg-slate-600","rounded-full","peer","peer-checked:after:translate-x-full","after:content-['']","after:absolute","after:top-0.5","after:left-[2px]","after:bg-white","after:border-slate-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-red-600"],[1,"w-11","h-6","bg-slate-600","rounded-full","peer","peer-checked:after:translate-x-full","after:content-['']","after:absolute","after:top-0.5","after:left-[2px]","after:bg-white","after:border-slate-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-green-600"],[1,"flex","items-center","justify-between"],["for","resistance-input",1,"font-semibold","text-slate-300"],["type","number","id","resistance-input","min","0","max","40",1,"bg-slate-900","border","border-slate-600","text-white","rounded-lg","w-24","text-center","font-mono","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","p-2",3,"change","value"],["for","military-rank-input",1,"font-semibold","text-slate-300"],["type","number","id","military-rank-input","min","0",1,"bg-slate-900","border","border-slate-600","text-white","rounded-lg","w-24","text-center","font-mono","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","p-2",3,"change","value"],[1,"grid","grid-cols-[1fr_auto]","items-center","gap-x-4","gap-y-1"],[3,"title"],[1,"flex","items-center","gap-3"],["alt","Flag",1,"w-6","h-4","object-cover","rounded","shadow-sm",3,"src"],[1,"font-semibold"],[1,"flex","items-center","gap-1","mt-1","pl-9"],[1,"h-2","flex-1","rounded-full","transition-colors","cursor-pointer",3,"class"],[1,"flex","items-center","gap-2"],[1,"bg-slate-700","hover:bg-slate-600","disabled:opacity-50","disabled:cursor-not-allowed","text-white","font-bold","w-9","h-9","rounded-full","text-lg","transition-colors",3,"click","disabled"],["alt","MU",1,"w-6","h-6","object-cover","rounded-full","border","border-slate-600",3,"src"],[1,"text-xl","text-indigo-400","w-6","flex","justify-center",3,"innerHTML"],[1,"text-xl","text-indigo-400","w-6","text-center",3,"class"],[1,"text-xl","text-indigo-400","w-6","text-center"],[1,"h-2","flex-1","rounded-full","transition-colors","cursor-pointer",3,"click"]],template:function(t,i){if(t&1&&(w(0,"div",0)(1,"div",1),me(2,wT,1,1,null,null,Ke),w(4,"div",2)(5,"h3",3),ae(6,"span",4),ve(7,"safeHtml"),w(8,"span"),v(9,"Political Ethics"),y()(),w(10,"div",5)(11,"div",6)(12,"span"),v(13,"Pacifism (Defense)"),y(),w(14,"span"),v(15,"Militarism (Attack)"),y()(),w(16,"div",7)(17,"button",8),ue("click",function(){return i.setMilitaryEthic(-2)}),v(18,"Fanatic"),y(),w(19,"button",8),ue("click",function(){return i.setMilitaryEthic(-1)}),v(20,"Pacifist"),y(),w(21,"button",8),ue("click",function(){return i.setMilitaryEthic(0)}),v(22,"Neutral"),y(),w(23,"button",8),ue("click",function(){return i.setMilitaryEthic(1)}),v(24,"Militarist"),y(),w(25,"button",8),ue("click",function(){return i.setMilitaryEthic(2)}),v(26,"Fanatic"),y()(),w(27,"div",9),P(28,yT,1,0)(29,kT,1,0)(30,TT,1,0)(31,AT,1,0),y()(),w(32,"div",5)(33,"div",6)(34,"span"),v(35,"Isolationism (Sworn)"),y(),w(36,"span"),v(37,"Diplomacy (Allies)"),y()(),w(38,"div",7)(39,"button",8),ue("click",function(){return i.setDiplomacyEthic(-2)}),v(40,"Fanatic"),y(),w(41,"button",8),ue("click",function(){return i.setDiplomacyEthic(-1)}),v(42,"Isolation"),y(),w(43,"button",8),ue("click",function(){return i.setDiplomacyEthic(0)}),v(44,"Neutral"),y(),w(45,"button",8),ue("click",function(){return i.setDiplomacyEthic(1)}),v(46,"Diplo"),y(),w(47,"button",8),ue("click",function(){return i.setDiplomacyEthic(2)}),v(48,"Fanatic"),y()(),w(49,"div",9),P(50,DT,1,0)(51,IT,1,0)(52,PT,1,0)(53,NT,1,0),y()()(),w(54,"div",2)(55,"label",10)(56,"span",11),v(57,"No Capital Link "),w(58,"span",12),v(59,"(-25%)"),y()(),w(60,"div",13)(61,"input",14),ue("change",function(){return i.isCapitalLinkEnabled.set(!i.isCapitalLinkEnabled())}),y(),ae(62,"div",15),y()(),w(63,"label",10)(64,"span",11),v(65,"Sworn Enemy "),w(66,"span",12),v(67,"(+10%)"),y()(),w(68,"div",13)(69,"input",14),ue("change",function(){return i.isSwornEnemyEnabled.set(!i.isSwornEnemyEnabled())}),y(),ae(70,"div",16),y()(),w(71,"label",10)(72,"span",11),v(73,"Patriotic Bonus "),w(74,"span",12),v(75,"(+10%)"),y()(),w(76,"div",13)(77,"input",14),ue("change",function(){return i.isPatriotEnabled.set(!i.isPatriotEnabled())}),y(),ae(78,"div",16),y()(),w(79,"label",10)(80,"span",11),v(81,"Alliance "),w(82,"span",12),v(83,"(+10%)"),y()(),w(84,"div",13)(85,"input",14),ue("change",function(){return i.isAllianceEnabled.set(!i.isAllianceEnabled())}),y(),ae(86,"div",16),y()(),w(87,"div",17)(88,"label",18),v(89,"Resistance Bonus (%)"),y(),w(90,"input",19),ue("change",function(r){return i.onResistanceChange(r)}),y()(),w(91,"div",17)(92,"label",20),v(93,"Military Rank Bonus (%)"),y(),w(94,"input",21),ue("change",function(r){return i.onMilitaryRankChange(r)}),y()()()()()),t&2){let s,r;h(2),fe(i.bonusNames),h(4),Ce("innerHTML",Ne(7,29,i.ethicsIcon),Ve),h(11),z(i.ethicsMilitary()===-2?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsMilitary()===-1?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsMilitary()===0?"bg-slate-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsMilitary()===1?"bg-red-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsMilitary()===2?"bg-red-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(3),N((s=i.ethicsMilitary())===-2?28:s===-1?29:s===1?30:s===2?31:-1),h(11),z(i.ethicsDiplomacy()===-2?"bg-orange-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsDiplomacy()===-1?"bg-orange-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsDiplomacy()===0?"bg-slate-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsDiplomacy()===1?"bg-teal-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(2),z(i.ethicsDiplomacy()===2?"bg-teal-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),h(3),N((r=i.ethicsDiplomacy())===-2?50:r===-1?51:r===1?52:r===2?53:-1),h(11),Ce("checked",!i.isCapitalLinkEnabled()),h(8),Ce("checked",i.isSwornEnemyEnabled()),h(8),Ce("checked",i.isPatriotEnabled()),h(8),Ce("checked",i.isAllianceEnabled()),h(5),Ce("value",i.resistancePercent()),h(4),Ce("value",i.militaryRankBonus())}},dependencies:[He,ft],encapsulation:2,changeDetection:0});var dc=Er;function LT(n,e){if(n&1&&(w(0,"div",1)(1,"div",2),ae(2,"div",3),v(3),y()()),n&2){let t=g();Wn("top",t.position().y,"px")("left",t.position().x,"px"),h(3),K(" ",e.content," ")}}var br=class br{constructor(){this.tooltipService=X(pr);this.data=this.tooltipService.data;this.position=qe(()=>{let e=this.data();if(!e)return{x:0,y:0};let t=e.targetRect,i=250,s=60,r=t.left+t.width/2-i/2,o=t.top-s-12,a=8;return r<a&&(r=a),r+i>window.innerWidth-a&&(r=window.innerWidth-i-a),o<a&&(o=t.bottom+12),{x:r,y:o}})}};br.\u0275fac=function(t){return new(t||br)},br.\u0275cmp=Fe({type:br,selectors:[["app-tooltip"]],decls:1,vars:1,consts:[[1,"fixed","z-[9999]","pointer-events-none","animate-fade-in-short",3,"top","left"],[1,"fixed","z-[9999]","pointer-events-none","animate-fade-in-short"],[1,"bg-slate-800","border","border-slate-600","text-slate-200","text-xs","rounded-lg","shadow-xl","p-3","max-w-[250px]","leading-relaxed","relative"],[1,"absolute","w-3","h-3","bg-slate-800","border-l","border-b","border-slate-600","rotate-[-45deg]","left-1/2","-translate-x-1/2","-bottom-1.5"]],template:function(t,i){if(t&1&&P(0,LT,4,5,"div",0),t&2){let s;N((s=i.data())?0:-1,s)}},dependencies:[He],styles:[".animate-fade-in-short[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .15s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}"],changeDetection:0});var hc=br;var MT=()=>[import("./chunk-QG7266FJ.js").then(n=>n.EconomicPlannerComponent)],BT=()=>[import("./chunk-6SMUOTYH.js").then(n=>n.BattleIntelligenceComponent)],D0=()=>({id:"log",label:"Combat Log",icon:"fa-scroll"}),I0=()=>({id:"builds",label:"Builds",icon:"fa-box-archive"}),FT=(n,e)=>[n,e],RT=n=>({id:"equipment",label:"Equipment",svg:n}),OT=n=>({id:"skills",label:"Skills",svg:n}),$T=()=>({id:"bonuses",label:"Bonuses",icon:"fa-star"}),VT=(n,e,t,i,s)=>[n,e,t,i,s],P0=(n,e)=>e.id;function HT(n,e){n&1&&(C(0,"div",21),M(1,"app-skills-panel",27),S())}function qT(n,e){n&1&&(C(0,"div",21),M(1,"app-bonuses-panel",28),S())}function UT(n,e){if(n&1){let t=ce();C(0,"button",18),$("click",function(){let s=R(t).$implicit,r=g(3);return O(r.activeSideTab.set(s.id))}),M(1,"i"),C(2,"span"),v(3),S()()}if(n&2){let t=e.$implicit,i=g(3);Ge("bg-indigo-600",i.activeSideTab()===t.id)("text-white",i.activeSideTab()===t.id)("bg-slate-700/50",i.activeSideTab()!==t.id)("text-slate-300",i.activeSideTab()!==t.id)("hover:bg-slate-600/50",i.activeSideTab()!==t.id),h(),z(Tc("fa-solid ",t.icon)),h(2),te(t.label)}}function jT(n,e){n&1&&(C(0,"div",26)(1,"div")(2,"h2",29),v(3,"Build Management"),S(),M(4,"app-build-management"),S(),C(5,"div",30)(6,"h2",29),v(7,"Build Comparison"),S(),M(8,"app-build-comparison"),S()())}function zT(n,e){n&1&&(C(0,"div",21),M(1,"app-combat-log"),S())}function WT(n,e){if(n&1){let t=ce();C(0,"div",11)(1,"div",12)(2,"div",13)(3,"h2",14),M(4,"span",15),ve(5,"safeHtml"),C(6,"span"),v(7,"Equipment"),S()()(),C(8,"div",16),M(9,"app-equipment-panel"),S()(),C(10,"div",12)(11,"div",13)(12,"div",17)(13,"button",18),$("click",function(){R(t);let s=g(2);return O(s.activeSkillsBonusesTab.set("skills"))}),M(14,"span",19),ve(15,"safeHtml"),C(16,"span"),v(17,"Skills"),S()(),C(18,"button",18),$("click",function(){R(t);let s=g(2);return O(s.activeSkillsBonusesTab.set("bonuses"))}),M(19,"i",20),C(20,"span"),v(21,"Bonuses"),S()()()(),C(22,"div",16),P(23,HT,2,0,"div",21)(24,qT,2,0,"div",21),S()()(),C(25,"div",22)(26,"div",23)(27,"div",17),me(28,UT,4,14,"button",24,P0),S()(),C(30,"div",25),P(31,jT,9,0,"div",26)(32,zT,2,0,"div",21),S()()}if(n&2){let t,i,s=g(2);h(4),ee("innerHTML",Ne(5,24,s.tabIcons.equipment),Ve),h(9),Ge("bg-indigo-600",s.activeSkillsBonusesTab()==="skills")("text-white",s.activeSkillsBonusesTab()==="skills")("bg-slate-700/50",s.activeSkillsBonusesTab()!=="skills")("text-slate-300",s.activeSkillsBonusesTab()!=="skills")("hover:bg-slate-600/50",s.activeSkillsBonusesTab()!=="skills"),h(),ee("innerHTML",Ne(15,26,s.tabIcons.skills),Ve),h(4),Ge("bg-indigo-600",s.activeSkillsBonusesTab()==="bonuses")("text-white",s.activeSkillsBonusesTab()==="bonuses")("bg-slate-700/50",s.activeSkillsBonusesTab()!=="bonuses")("text-slate-300",s.activeSkillsBonusesTab()!=="bonuses")("hover:bg-slate-600/50",s.activeSkillsBonusesTab()!=="bonuses"),h(5),N((t=s.activeSkillsBonusesTab())==="skills"?23:t==="bonuses"?24:-1);let r=Id(30,FT,fn(28,D0),fn(29,I0));h(5),fe(r),h(3),N((i=s.activeSideTab())==="builds"?31:i==="log"?32:-1)}}function GT(n,e){if(n&1&&(M(0,"span",19),ve(1,"safeHtml")),n&2){let t=g().$implicit;ee("innerHTML",Ne(1,1,t.svg),Ve)}}function XT(n,e){if(n&1&&M(0,"i"),n&2){let t=g().$implicit;z(Tc("fa-solid ",t.icon))}}function YT(n,e){if(n&1){let t=ce();C(0,"button",34),$("click",function(){let s=R(t).$implicit,r=g(3);return O(r.activeCombatTab.set(s.id))}),P(1,GT,2,3,"span",19)(2,XT,1,3,"i",35),C(3,"span",36),v(4),S()()}if(n&2){let t=e.$implicit,i=g(3);Ge("bg-indigo-600",i.activeCombatTab()===t.id)("text-white",i.activeCombatTab()===t.id)("bg-slate-700/50",i.activeCombatTab()!==t.id)("text-slate-300",i.activeCombatTab()!==t.id)("hover:bg-slate-600/50",i.activeCombatTab()!==t.id),h(),N(t.svg?1:2),h(3),te(t.label)}}function QT(n,e){n&1&&(C(0,"div",21),M(1,"app-equipment-panel"),S())}function ZT(n,e){n&1&&(C(0,"div",21),M(1,"app-skills-panel",27),S())}function JT(n,e){n&1&&(C(0,"div",21),M(1,"app-bonuses-panel"),S())}function KT(n,e){n&1&&(C(0,"div",26)(1,"div")(2,"h2",29),v(3,"Build Management"),S(),M(4,"app-build-management"),S(),C(5,"div",30)(6,"h2",29),v(7,"Build Comparison"),S(),M(8,"app-build-comparison"),S()())}function eA(n,e){n&1&&(C(0,"div",21),M(1,"app-combat-log"),S())}function tA(n,e){if(n&1&&(C(0,"div",9)(1,"div",23)(2,"div",31),me(3,YT,5,12,"button",32,P0),S()(),C(5,"div",33),P(6,QT,2,0,"div",21)(7,ZT,2,0,"div",21)(8,JT,2,0,"div",21)(9,KT,9,0,"div",26)(10,eA,2,0,"div",21),S()()),n&2){let t,i=g(2),s=Pd(8,VT,Ac(1,RT,i.tabIcons.equipment),Ac(3,OT,i.tabIcons.skills),fn(5,$T),fn(6,I0),fn(7,D0));h(3),fe(s),h(3),N((t=i.activeCombatTab())==="equipment"?6:t==="skills"?7:t==="bonuses"?8:t==="builds"?9:t==="log"?10:-1)}}function nA(n,e){if(n&1&&(C(0,"div",8)(1,"div",9)(2,"div",10),M(3,"app-player-controls"),S()(),P(4,WT,33,33)(5,tA,11,14,"div",9),S()),n&2){let t=g();h(4),N(t.isDesktop()?4:5)}}function iA(n,e){n&1&&(C(0,"div",37),M(1,"app-economic-planner"),S())}function sA(n,e){n&1&&(C(0,"div",38)(1,"div"),M(2,"i",39),C(3,"p",40),v(4,"Loading Economy Tools..."),S()()())}function rA(n,e){n&1&&(bc(0,iA,2,0)(1,sA,5,0),wc(2,0,MT,null,1),yc())}function oA(n,e){n&1&&M(0,"app-battle-intelligence")}function aA(n,e){n&1&&(C(0,"div",38)(1,"div"),M(2,"i",39),C(3,"p",40),v(4,"Loading Battle Intelligence..."),S()()())}function lA(n,e){n&1&&(bc(0,oA,1,0)(1,aA,5,0),wc(2,0,BT,null,1),yc())}function cA(n,e){if(n&1){let t=ce();C(0,"app-tutorial",41),$("tutorialFinished",function(){R(t);let s=g();return O(s.stateService.finishTutorial())})("tutorialSkipped",function(){R(t);let s=g();return O(s.stateService.finishTutorial())})("stepRequiresStateChange",function(s){R(t);let r=g();return O(r.handleTutorialStepChange(s))}),S()}}var wr=class wr{constructor(){this.stateService=X(Re);this.toastService=X(aa);this.isTutorialActive=this.stateService.isTutorialActive;this.activeTab=Y("combat");this.activeCombatTab=Y("equipment");this.activeSkillsBonusesTab=Y("skills");this.activeSideTab=Y("log");this.isDesktop=Y(!1);this.tabIcons=b0}onResize(){this.isDesktop.set(window.innerWidth>=1280)}ngOnInit(){this.handleSharedBuild(),this.onResize()}handleTutorialStepChange(e){e.mainTab&&(e.mainTab==="combat"||e.mainTab==="economy")&&this.activeTab()!==e.mainTab&&this.activeTab.set(e.mainTab),e.combatTab&&(this.isDesktop()?e.combatTab==="skills"||e.combatTab==="bonuses"?this.activeSkillsBonusesTab.set(e.combatTab):(e.combatTab==="builds"||e.combatTab==="log")&&this.activeSideTab.set(e.combatTab):this.activeCombatTab.set(e.combatTab))}handleSharedBuild(){let e=window.location.hash,t="#/share/";if(e.startsWith(t)){let i=e.substring(t.length);i&&(this.stateService.loadFromSharedString(i)?this.toastService.show("Shared build loaded successfully!"):this.toastService.show("Could not load the shared build. The link may be invalid.","error"),history.replaceState(null,"",window.location.pathname+window.location.search))}}};wr.\u0275fac=function(t){return new(t||wr)},wr.\u0275cmp=Fe({type:wr,selectors:[["app-root"]],hostBindings:function(t,i){t&1&&$("resize",function(){return i.onResize()},ri)},decls:19,vars:28,consts:[[1,"p-2","sm:p-4","lg:p-6","max-w-screen-2xl","mx-auto","text-gray-300"],[1,"flex","flex-col","gap-4"],[1,"border-b","border-slate-700"],["aria-label","Tabs",1,"flex","space-x-2","sm:space-x-4","overflow-x-auto"],[1,"py-2","px-3","sm:px-4","rounded-full","font-semibold","text-sm","sm:text-base","transition-colors","duration-300","flex","items-center","gap-2","whitespace-nowrap",3,"click"],[1,"fa-solid","fa-khanda"],[1,"fa-solid","fa-store"],[1,"fa-solid","fa-crosshairs"],[1,"animate-fade-in","flex","flex-col","gap-4"],[1,"bg-slate-800/50","border","border-slate-700","rounded-xl"],[1,"p-4"],[1,"grid","grid-cols-1","xl:grid-cols-2","gap-4"],[1,"bg-slate-800/50","border","border-slate-700","rounded-xl","flex","flex-col"],[1,"p-2","border-b","border-slate-700"],[1,"px-3","py-1","text-base","font-semibold","text-white","flex","items-center","gap-2"],[1,"w-5","h-5","flex","justify-center","items-center",3,"innerHTML"],[1,"flex-grow","overflow-y-auto"],[1,"flex","justify-start","gap-2"],[1,"px-3","py-2","text-sm","font-semibold","rounded-lg","transition-colors","duration-200","flex","items-center","justify-center","gap-2","flex-1","sm:flex-none",3,"click"],[1,"w-4","h-4","flex","justify-center","items-center",3,"innerHTML"],[1,"fa-solid","fa-star"],[1,"animate-fade-in-short"],[1,"mt-4","bg-slate-800/50","border","border-slate-700","rounded-xl","flex","flex-col"],[1,"border-b","border-slate-700","p-2"],[1,"px-3","py-2","text-sm","font-semibold","rounded-lg","transition-colors","duration-200","flex","items-center","justify-center","gap-2","flex-1","sm:flex-none",3,"bg-indigo-600","text-white","bg-slate-700/50","text-slate-300","hover:bg-slate-600/50"],[1,"flex-grow","min-h-[400px]","overflow-y-auto"],["id","builds-management-section",1,"animate-fade-in-short","p-4","space-y-6"],["id","skills-panel"],["id","bonuses-panel"],[1,"text-xl","font-semibold","text-white","mb-2"],[1,"border-t","border-slate-700","pt-4"],[1,"grid","grid-cols-3","sm:flex","sm:flex-wrap","justify-start","gap-2"],[1,"px-3","py-2","text-sm","font-semibold","rounded-lg","transition-colors","duration-200","flex","items-center","justify-center","gap-2",3,"bg-indigo-600","text-white","bg-slate-700/50","text-slate-300","hover:bg-slate-600/50"],[1,"min-h-[400px]"],[1,"px-3","py-2","text-sm","font-semibold","rounded-lg","transition-colors","duration-200","flex","items-center","justify-center","gap-2",3,"click"],[3,"class"],[1,"hidden","sm:inline"],[1,"animate-fade-in"],[1,"flex","animate-fade-in","justify-center","items-center","p-20","text-center","text-gray-500"],[1,"fa-solid","fa-spinner","fa-spin","text-4xl"],[1,"mt-4","text-lg"],[3,"tutorialFinished","tutorialSkipped","stepRequiresStateChange"]],template:function(t,i){t&1&&(C(0,"main",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"button",4),$("click",function(){return i.activeTab.set("combat")}),M(5,"i",5),v(6," Combat Simulator "),S(),C(7,"button",4),$("click",function(){return i.activeTab.set("economy")}),M(8,"i",6),v(9," Economy "),S(),C(10,"button",4),$("click",function(){return i.activeTab.set("battle")}),M(11,"i",7),v(12," Battle Intel "),S()()(),P(13,nA,6,1,"div",8),P(14,rA,4,0),P(15,lA,4,0),S()(),M(16,"app-toast")(17,"app-tooltip"),P(18,cA,1,0,"app-tutorial")),t&2&&(h(4),Ge("bg-indigo-600",i.activeTab()==="combat")("text-white",i.activeTab()==="combat")("text-gray-400",i.activeTab()!=="combat")("hover:bg-slate-700/50",i.activeTab()!=="combat"),h(3),Ge("bg-amber-600",i.activeTab()==="economy")("text-white",i.activeTab()==="economy")("text-gray-400",i.activeTab()!=="economy")("hover:bg-slate-700/50",i.activeTab()!=="economy"),h(3),Ge("bg-red-600",i.activeTab()==="battle")("text-white",i.activeTab()==="battle")("text-gray-400",i.activeTab()!=="battle")("hover:bg-slate-700/50",i.activeTab()!=="battle"),h(3),N(i.activeTab()==="combat"?13:-1),h(),N(i.activeTab()==="economy"?14:-1),h(),N(i.activeTab()==="battle"?15:-1),h(3),N(i.isTutorialActive()?18:-1))},dependencies:[ic,sc,rc,oc,ac,lc,uc,pc,dc,hc,ft],encapsulation:2,changeDetection:0});var mc=wr;var ms=class ms{constructor(){this.requestTimestamps=Y([]);this._totalCalls=Y(0);this.totalCalls=qe(()=>this._totalCalls());this.callsInLastMinute=qe(()=>this.requestTimestamps().length)}recordCall(){let e=Date.now();this._totalCalls.update(t=>t+1),this.requestTimestamps.update(t=>{let i=e-6e4;return[...t.filter(r=>r>i),e]})}getRecentCallCount(){let t=Date.now()-6e4;return this.requestTimestamps().filter(i=>i>t).length}};ms.\u0275fac=function(t){return new(t||ms)},ms.\u0275prov=$e({token:ms,factory:ms.\u0275fac,providedIn:"root"});var fc=ms;var N0=(n,e)=>{let t=X(fc),s=n.clone({setHeaders:{"X-API-Key":"wae_805f67e3e3e2945716eee6acbad870ed1cd22e28862b78ccef118e7dcf7b81d4"}}),r=()=>(t.recordCall(),e(s).pipe(id(a=>a.status===429?(console.warn("API Rate Limit Exceeded (429). Retrying..."),ea(()=>a)):ea(()=>a)),od({count:3,delay:(a,l)=>{if(a.status===429){let c=Math.pow(2,l)*1e3;return console.log(`Waiting ${c}ms before retry #${l}`),vc(c)}return ea(()=>a)}})));return t.getRecentCallCount()>=90?vc(1e3).pipe(nd(()=>r())):r()};Kp(mc,{providers:[Nd(),Vd(Hd([N0]))]}).catch(n=>console.error(n));
